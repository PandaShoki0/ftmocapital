import{_ as f,o as d,c as r,a as e,n as m,t as o,g as h,f as k,q as y,h as c,U as v,Y as u,F as g,b as _}from"./bootstrap-249b0f62.js";import"./_commonjsHelpers-de833af9.js";import"./dijkstra-f906a09e.js";import"./preload-helper-f61836a9.js";import"./axios-7a713374.js";const w={data(){return{tokens:[],status:[],abilities:[],newabilities:[],edit:null,newAPI:!1,newApiTitle:null}},created(){this.fetch()},mounted(){},methods:{async fetch(){await axios.get("/user/fetch/api/tokens").then(i=>{this.tokens=i.tokens,this.tokens.forEach(t=>{this.status.push({id:t.id,token:!1,edit:!1})})})},async editApi(i,t){await axios.post("/user/api/tokens/edit",{token:i.id,abilities:this.abilities}).then(b=>{this.fetch(),this.$toast[b.type](b.message)}).catch(b=>{this.$toast.error(b.response.data.message)}).finally(()=>{this.status[t].edit=!1,this.abilities=[]})},async createApi(){await axios.post("/user/api/tokens/store",{name:this.newApiTitle,abilities:this.newabilities}).then(i=>{this.fetch(),this.$toast[i.type](i.message)}).catch(i=>{this.$toast.error(i.response.data.message)}).finally(()=>{this.newAPI=!1,this.newApiTitle=null,this.newabilities=[]})},async deleteApi(i){await axios.post("/user/api/tokens/delete",{id:i}).then(t=>{this.fetch(),this.$toast[t.type](t.message)}).catch(t=>{this.$toast.error(t.response.data.message)})},selectedToken(i,t){this.edit=this.edit==t?null:t,this.status[t].edit=!this.status[t].edit,this.abilities=i.abilities}}},x={class:"card"},A={class:"card-title"},C={class:"title-gradient"},P={class:"space-x-2"},T={key:0},I={key:1},V={class:"btn btn-outline-success",href:"/docs/api",target:"_blank"},U={class:"card-body"},D={class:"list-disc px-4 py-3"},S={class:"flex justify-between"},E={class:"text-medium mb-2 text-xl text-blue-500"},M={type:"submit",class:"btn btn-outline-success btn-sm"},j={class:"my-5 max-w-sm"},B={for:"newApiTitle"},K={class:"grid gap-4 py-3 xs:grid-cols-2 md:grid-cols-4"},N={class:"flex space-x-2"},q={for:"default-checkbox"},F={class:"flex space-x-2"},W={for:"default-checkbox"},Y={class:"flex space-x-2"},z={for:"default-checkbox"},L={class:"space-y-5"},G={key:0},H={class:"rounded border border-gray-300 p-1 dark:border-gray-600"},J=["onClick"],O={key:1},Q={class:"ml-2 rounded border border-gray-300 p-1 dark:border-gray-600"},R=["onClick"],X={class:"space-x-2"},Z=["disabled","onClick"],$=["onClick"],ee=["onSubmit"],te={class:"flex justify-between"},se={class:"text-medium mb-2 text-xl text-blue-500"},ie={type:"submit",class:"btn btn-outline-success btn-sm"},oe={class:"grid gap-4 py-3 xs:grid-cols-2 md:grid-cols-4"},le={class:"flex space-x-2"},ne=["checked"],ae={for:"default-checkbox"},de={class:"flex space-x-2"},re=["checked"],ce={for:"default-checkbox"},ue={class:"flex space-x-2"},be=["checked"],he={for:"default-checkbox"};function pe(i,t,b,ke,s,p){return d(),r("div",null,[e("div",x,[e("div",{class:m(["card-header",s.tokens.length<=10?"flex justify-between":""])},[e("div",A,[e("div",C,o(i.$t("API Management")),1)]),e("div",P,[s.tokens.length<=10?(d(),r("button",{key:0,type:"submit",class:m(["btn",s.newAPI==!1?"btn-outline-primary":"btn-outline-danger"]),onClick:t[0]||(t[0]=l=>s.newAPI=!s.newAPI)},[s.newAPI==!1?(d(),r("span",T,[t[10]||(t[10]=e("i",{class:"bi bi-plus-lg"},null,-1)),h(o(i.$t("Create API")),1)])):(d(),r("span",I,[t[11]||(t[11]=e("i",{class:"bi bi-x-lg"},null,-1)),h(o(i.$t("Close")),1)]))],2)):k("",!0),e("a",V,[t[12]||(t[12]=e("i",{class:"bi bi-file-earmark-medical"},null,-1)),h(" "+o(i.$t("API Docs")),1)])])],2),e("div",U,[e("ul",D,[e("li",null,o(i.$t("Each account can create up to 30 API Keys"))+".",1),e("li",null,o(i.$t("Do not disclose your API Key to anyone to avoid asset losses. You should treat your API Key like your passwords"))+". ",1)]),s.newAPI==!0?(d(),r("div",{key:s.newAPI,class:"my-5 rounded border border-gray-300 p-5 dark:border-gray-600"},[e("form",{method:"post",onSubmit:t[5]||(t[5]=y(l=>p.createApi(),["prevent"]))},[e("div",S,[e("div",E,o(i.$t("Permissions")),1),e("div",null,[e("button",M,o(i.$t("Create")),1)])]),e("div",j,[e("label",B,o(i.$t("Token Title")),1),c(e("input",{"onUpdate:modelValue":t[1]||(t[1]=l=>s.newApiTitle=l),type:"text",class:"form-control",required:""},null,512),[[v,s.newApiTitle]])]),e("div",K,[e("div",N,[c(e("input",{id:"default-checkbox","onUpdate:modelValue":t[2]||(t[2]=l=>s.newabilities=l),type:"checkbox",value:"trading"},null,512),[[u,s.newabilities]]),e("label",q,o(i.$t("Trading")),1)]),e("div",F,[c(e("input",{id:"default-checkbox","onUpdate:modelValue":t[3]||(t[3]=l=>s.newabilities=l),type:"checkbox",value:"transfer"},null,512),[[u,s.newabilities]]),e("label",W,o(i.$t("Transfer")),1)]),e("div",Y,[c(e("input",{id:"default-checkbox","onUpdate:modelValue":t[4]||(t[4]=l=>s.newabilities=l),type:"checkbox",value:"withdraw"},null,512),[[u,s.newabilities]]),e("label",z,o(i.$t("Withdraw")),1)])])],32)])):k("",!0),e("div",L,[s.tokens.length>0?(d(!0),r(g,{key:0},_(s.tokens,(l,n)=>(d(),r("div",{key:n,class:"rounded border border-gray-300 dark:border-gray-600"},[e("div",{class:m(["grid gap-5 xs:grid-cols-1 md:grid-cols-3 px-4 py-3",s.status[n].edit==!0?"border-b border-gray-300 dark:border-gray-600":""])},[e("div",null,o(l.name),1),(d(),r("div",{key:s.status[n].token},[s.status[n].token==!1?(d(),r("span",G,[t[13]||(t[13]=h("***************** ")),e("a",H,[e("i",{class:"bi bi-eye px-1",style:{"margin-right":"0 !important"},onClick:a=>s.status[n].token=!s.status[n].token},null,8,J)])])):(d(),r("span",O,[h(o(l.token),1),e("a",Q,[e("i",{class:"bi bi-eye-slash px-1 text-red-500",style:{"margin-right":"0 !important"},onClick:a=>s.status[n].token=!s.status[n].token},null,8,R)])]))])),e("div",X,[e("button",{type:"button",class:"btn btn-outline-warning btn-sm",disabled:s.edit!==n&&s.edit!==null,onClick:a=>p.selectedToken(l,n)},o(i.$t("Edit")),9,Z),e("button",{type:"button",class:"btn btn-outline-danger btn-sm",onClick:a=>p.deleteApi(l.id)},o(i.$t("Delete")),9,$)])],2),s.status[n].edit==!0?(d(),r("div",{key:s.status[n].edit,class:"space-y-3 px-4 py-3"},[e("form",{method:"post",onSubmit:y(a=>p.editApi(l,n),["prevent"])},[e("div",te,[e("div",se,o(i.$t("Permissions")),1),e("div",null,[e("button",ie,o(i.$t("Save")),1)])]),e("div",oe,[e("div",le,[c(e("input",{id:"default-checkbox","onUpdate:modelValue":t[6]||(t[6]=a=>s.abilities=a),type:"checkbox",checked:s.abilities.includes("trading"),value:"trading"},null,8,ne),[[u,s.abilities]]),e("label",ae,o(i.$t("Trading")),1)]),e("div",de,[c(e("input",{id:"default-checkbox","onUpdate:modelValue":t[7]||(t[7]=a=>s.abilities=a),type:"checkbox",checked:s.abilities.includes("transfer"),value:"transfer"},null,8,re),[[u,s.abilities]]),e("label",ce,o(i.$t("Transfer")),1)]),e("div",ue,[c(e("input",{id:"default-checkbox","onUpdate:modelValue":t[8]||(t[8]=a=>s.abilities=a),type:"checkbox",checked:s.abilities.includes("withdraw"),value:"withdraw",onClick:t[9]||(t[9]=a=>i.value=!i.value)},null,8,be),[[u,s.abilities]]),e("label",he,o(i.$t("Withdraw")),1)])])],40,ee)])):k("",!0)]))),128)):k("",!0)])])])])}const _e=f(w,[["render",pe]]);export{_e as default};
