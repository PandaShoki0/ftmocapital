import{_ as B}from"./preload-helper-f61836a9.js";import{K as L,Y as N,X as j,C as W}from"./flowbite-vue-19d13a06.js";import z from"./Marketinfo-354c83b0.js";import P from"./Orderbook-a6f60ecf.js";import{M as V}from"./Markets-3a69d2af.js";import{_ as S,o as a,c as n,a as t,n as y,q as v,t as s,F as _,d as T,b as H,g as h,j as M,r as b,m as R,e as g,i as x,f as w,w as m,h as A,W as F,T as q}from"./bootstrap-2a895a5a.js";import{u as U}from"./user-d2ff915e.js";import{u as G}from"./market-b51fc72c.js";import{u as J}from"./bot-6c8c4947.js";import"./LoadingCircles-0aeda322.js";/* empty css                                                                       */import"./_commonjsHelpers-de833af9.js";import"./browser-77dd377d.js";import"./axios-4a70c6fc.js";import"./ListItem-81ee6613.js";const K={components:{},props:["runningBots"],data(){return{activeItem:"tab-contracts"}},methods:{isActive(e){return this.activeItem===e},setActive(e){this.activeItem=e},time_left(e){var r=new Date(Date.parse(e.start_date)),c=new Date,l=Math.abs(c-r)/1e3;return Math.round(l/e.duration*100)>100?100:Math.round(l/e.duration*100)}}},X={class:"Trades border border-gray-100 bg-white shadow dark:border-gray-700 dark:bg-gray-900"},Y={class:"w-full bg-gray-200 dark:bg-gray-800"},Q={id:"myTab",class:"nf flex-cols -mb-px flex overflow-x-hidden text-center",role:"tablist"},Z={class:"mr-2 bg-gray-900"},ee={id:"tabbContent",class:"px-3 py-3"},te={style:{"overflow-y":"auto","max-height":"250px"},class:"space-y-3 pr-3"},re={class:"mb-2 flex justify-between text-xs font-medium"},oe={class:"w-full rounded bg-gray-200 dark:bg-gray-700"},se={key:1,class:"text-center"},ae=t("div",{class:"flex w-full justify-center",colspan:"100%"},[t("img",{height:"128",width:"128",src:"https://assets.staticimg.com/pro/2.0.4/images/empty.svg",alt:""})],-1);function ie(e,r,c,l,o,d){return a(),n("div",X,[t("div",Y,[t("ul",Q,[t("li",Z,[t("a",{id:"tab-contracts-tab",class:y(["inline-block py-2 pl-3 pr-4 text-xs font-medium",d.isActive("tab-contracts")?"border-gray-300 bg-white text-gray-700 dark:bg-gray-900 dark:text-gray-300":"cursor-pointer border-transparent bg-gray-200 text-gray-400 hover:border-gray-300 hover:bg-gray-300 hover:text-gray-600 dark:bg-gray-800 dark:hover:bg-gray-700 dark:hover:text-gray-300"]),type:"button",role:"tab","aria-controls":"tab-contracts","aria-selected":"false",onClick:r[0]||(r[0]=v(u=>d.setActive("tab-contracts"),["prevent"]))},s(e.$t("Active Contracts")),3)])])]),t("div",ee,[t("div",{id:"tab-contracts",class:y(["",d.isActive("tab-contracts")?"":"hidden"])},[t("div",te,[c.runningBots.length!=0?(a(!0),n(_,{key:0},T(c.runningBots,(u,p)=>(a(),n("div",{key:p,class:"rounded-lg border border-gray-300 bg-white p-3 shadow-lg dark:border-gray-600 dark:bg-gray-800"},[t("div",re,[t("span",null,s(u.bot_name),1),t("span",null,"("+s(Number(u.amount).toFixed(2))+" "+s(u.pair)+")",1)]),t("div",oe,[t("div",{class:y(["rounded text-center text-xs font-medium leading-none text-blue-100",d.time_left(u)==100?"bg-green-600":"bg-red-600"]),style:H("width:"+d.time_left(u)+"%")},s(d.time_left(u)==100?"Completed":d.time_left(u)+"%"),7)])]))),128)):(a(),n("div",se,[ae,h(" "+s(e.$t("No Data Found")),1)]))])],2)])])}const ne=S(K,[["render",ie]]);const le={props:["user"],setup(){const e=U(),r=G(),c=J();if(r.exchange==null){const l={proxy:gnl.cors,options:{tradesLimit:10},newUpdates:!0,timeout:2e4};r.exchange=new ccxt.pro[provider](l)}return{userStore:e,marketStore:r,botStore:c}},components:{Marketinfo:z,Tradingview:M(()=>B(()=>import("./Tradingview-ce040f18.js"),["assets/Tradingview-ce040f18.js","assets/bootstrap-2a895a5a.js","assets/_commonjsHelpers-de833af9.js","assets/browser-77dd377d.js","assets/preload-helper-f61836a9.js","assets/axios-4a70c6fc.js","assets/bootstrap-fc0de13c.css"])),EcoTradingview:M(()=>B(()=>import("./Tradingview-a40812b1.js"),["assets/Tradingview-a40812b1.js","assets/datafeed-d62ae98f.js","assets/_commonjsHelpers-de833af9.js","assets/market-b51fc72c.js","assets/bootstrap-2a895a5a.js","assets/browser-77dd377d.js","assets/preload-helper-f61836a9.js","assets/axios-4a70c6fc.js","assets/bootstrap-fc0de13c.css"])),Orderbook:P,Markets:V,Trades:ne,Modal:L,ListGroup:N,ListGroupItem:j,Button:W},data(){return{symbol:this.$route.params.symbol,currency:this.$route.params.currency,activeItem:"bot-settings",provider:null,provide:null,gnl,runningBots:[],loading:!1,amount:null,balance:null,active_bot:[],active_duration:null,min_amount:null,max_amount:null,ext,plat,activeItemm:plat.mobile.charting==1?"pills-chart":"pills-orderbook",ordercard:!1,orderbtn:!0}},created(){this.fetchData(),this.fetchWallet()},watch:{eventLog:function(){const e=this.$refs.eventsDiv;e.scrollTop=e.scrollHeight},async $route(e,r){await this.marketStore.exchange.close(),document.getElementById("favicon").href="/assets/images/logoIcon/favicon.ico";const c=document.getElementById("asks"),l=document.getElementById("bids"),o=document.getElementById("tradeTable");c!==null&&(c.innerHTML=""),l!==null&&(l.innerHTML=""),o!==null&&(o.innerHTML="")}},methods:{isActive(e){return this.activeItem===e},setActive(e){this.activeItem=e},isActivee(e){return this.activeItemm===e},setActivee(e){this.activeItemm=e},getRandomInt(e,r){return e=Math.ceil(e),r=Math.floor(r),Math.floor(Math.random()*(r-e))+e},Order(){this.loading=!0;const e=this.active_bot.timing.find(r=>r.id===Number(this.$refs.active_duration.value));e?this.marketStore.bestAsk>0?axios.post("/user/store/bot",{amount:this.amount,botTime:e.duration,bot_id:this.active_bot.id,currency:this.currency,symbol:this.symbol,type:e.type,price:this.marketStore.bestAsk}).then(r=>{this.$toast[r.type](r.message),this.fetchData(),this.fetchWallet()}).catch(r=>{this.$toast.error(r.response.data)}).finally(()=>{this.loading=!1}):(this.$toast.error("Please wait for orderbook to load"),this.loading=!1):(this.$toast.error("Duration not found"),this.loading=!1)},setBot(e){this.active_bot=e,this.active_duration=null,this.active_bot.min_amount=JSON.parse(e.limits).min_bot_amount,this.active_bot.max_amount=JSON.parse(e.limits).max_bot_amount,this.botStore.closeModal()},fetchWallet(){axios.post("/user/fetch/wallet",{type:"funding",symbol:this.currency}).then(e=>{this.balance=e.balance})},createWallet(){this.loading=!0,axios.post("/user/wallet/store",{type:"funding",symbol:this.symbol}).then(e=>{this.fetchWallet(),this.$toast[e.type](e.message)}).catch(e=>{this.$toast.error(e.response.data)}).finally(()=>{this.loading=!1})},fetchData(){axios.post("/user/fetch/bot/info",{symbol:this.$route.params.symbol,currency:this.$route.params.currency}).then(e=>{this.provider=e.provider,this.bot_type=e.bot_type,this.runningBots=e.runningBots,this.provide=e.provide})}}},de={style:{"font-family":"BinancePlex, Arial, sans-serif !important"}},ce={class:"containered",style:{margin:"-18px -20px 3px -20px"}},ue={id:"creatable",class:"Chart border border-gray-100 bg-white shadow dark:border-gray-700 dark:bg-gray-800"},be={class:"w-full bg-gray-200 dark:bg-gray-800"},ge={id:"myTab",class:"nf flex-cols -mb-px flex overflow-x-hidden text-center",role:"tablist"},me={class:"mr-2 bg-gray-900"},ye={id:"orderContent",class:"px-3 py-5"},he={class:"grid grid-cols-2 gap-5"},ve=["disabled"],_e={selected:""},pe=["value"],fe={class:""},ke={for:"Amount",class:"form-label text-1 text-dark flex justify-between"},xe={class:"flex"},we=["disabled","min","max","step"],Te={class:"inline-flex flex-shrink-0 items-center rounded-r-md border border-gray-300 bg-gray-100 p-2 text-center text-xs text-gray-500 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-200"},Be={for:"botTimed",class:"form-label text-1 text-dark flex justify-between"},Me=t("i",{class:"bi bi-battery-charging"},null,-1),Ae={class:""},Se={for:"basic-url",class:"form-label text-1 text-light flex justify-between"},Ce={class:"text-light"},Ie={class:"flex"},$e={key:0,class:"input-group"},De=["value"],Oe={type:"submit",class:"btn btn-success w-full"},Ee={class:"flex items-center text-lg"},Le=["onClick"],Ne={class:"mr-3"},je={class:"w-full"},We={class:"flex justify-between"},ze={class:"fw-bold fs-4 text-white"},Pe={key:0,class:"badge bg-success text-white"},Ve={class:"text-white"},He=t("i",{class:"bi bi-app-indicator"},null,-1),Re={class:"row"},Fe={class:"text-warning"},qe={class:"text-success"},Ue={class:"flex justify-end"};function Ge(e,r,c,l,o,d){const u=b("Marketinfo"),p=b("Orderbook"),C=b("Markets"),I=b("Trades"),$=b("EcoTradingview"),D=b("Tradingview"),f=b("Button"),O=b("Modal"),E=R("lazy");return a(),n("div",de,[t("div",ce,[(a(),g(u,{key:e.$route.params.symbol+e.$route.params.currency+"Marketinfo"})),(a(),g(p,{key:e.$route.params.symbol+e.$route.params.currency+"Orderbook"})),x(C,{style:{"overflow-y":"auto","overflow-x":"hidden"},type:"bot",subtype:"non"}),(a(),g(I,{key:e.$route.params.symbol+e.$route.params.currency+o.runningBots.length,"running-bots":o.runningBots,style:{"overflow-y":"auto","overflow-x":"hidden"}},null,8,["running-bots"])),t("div",ue,[o.ext.eco==1&&o.provider!="coinbasepro"?(a(),g($,{key:e.$route.params.symbol+e.$route.params.currency+"eco"})):(a(),n(_,{key:1},[o.provide!=null?(a(),g(D,{key:e.$route.params.symbol+e.$route.params.currency+"tradingview",provide:o.provide},null,8,["provide"])):w("",!0)],64))]),(a(),n("div",{key:e.$route.params.symbol+e.$route.params.currency+"order",class:"Order border border-gray-100 bg-white shadow dark:border-gray-700 dark:bg-gray-900"},[t("div",be,[t("ul",ge,[t("li",me,[t("a",{id:"bot-settings-tab",class:y(["inline-block py-2 pl-3 pr-4 text-xs font-medium",d.isActive("bot-settings")?"border-gray-300 bg-white text-gray-700 dark:bg-gray-900 dark:text-gray-300":"cursor-pointer border-transparent bg-gray-200 text-gray-400 hover:border-gray-300 hover:bg-gray-300 hover:text-gray-600 dark:bg-gray-800 dark:hover:bg-gray-700 dark:hover:text-gray-300"]),type:"button",role:"tab","aria-controls":"bot-settings","aria-selected":"false",onClick:r[0]||(r[0]=v(i=>d.setActive("bot-settings"),["prevent"]))},s(e.$t("Bot Settings")),3)])])]),t("div",ye,[t("div",{id:"bot-settings",class:y(d.isActive("bot-settings")?"":"hidden")},[t("form",{id:"Order",onSubmit:r[4]||(r[4]=v(i=>d.Order(),["prevent"]))},[t("div",he,[x(f,{type:"button",size:"sm",class:"w-full",onClick:r[1]||(r[1]=i=>l.botStore.showModal())},{default:m(()=>[h(s(o.active_bot.length!=0?o.active_bot.title:e.$t("Select Bot")),1)]),_:1}),(a(),n("select",{id:"durations",key:o.active_bot.length,ref:"active_duration",disabled:o.active_bot.length==0,class:"block w-full rounded-lg border border-gray-300 bg-gray-50 p-2.5 text-sm text-gray-900 focus:border-blue-500 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:placeholder-gray-400 dark:focus:border-blue-500 dark:focus:ring-blue-500"},[t("option",_e,s(e.$t("Select Duration")),1),(a(!0),n(_,null,T(o.active_bot.timing,(i,k)=>(a(),n("option",{key:k,value:i.id},s(i.duration)+" "+s(i.type)+"s ",9,pe))),128))],8,ve)),t("div",fe,[t("label",ke,[t("span",null,s(e.$t("Amount")),1)]),t("div",xe,[A((a(),n("input",{key:o.active_bot.length,"onUpdate:modelValue":r[2]||(r[2]=i=>o.amount=i),disabled:o.active_bot.length==0,class:y([{"opacity-50":o.active_bot.length==0},"block w-full rounded-l-md border border-gray-300 bg-gray-50 p-2 text-xs text-gray-900 focus:border-blue-500 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-200 dark:placeholder-gray-400 dark:focus:border-blue-500 dark:focus:ring-blue-500"]),type:"number",min:o.active_bot?o.active_bot.min_amount:1e-5,max:o.active_bot?o.active_bot.max_amount:1e5,step:o.active_bot?o.active_bot.min_amount:1e-5,required:"",placeholder:"Amount","aria-label":"Amount (to the nearest dollar)"},null,10,we)),[[F,o.amount]]),t("span",Te,s(o.currency),1)])]),(a(),n("div",{key:l.marketStore.bestAsk},[t("label",Be,[t("span",null,s(e.$t("Launch")),1)]),l.marketStore.bestAsk==null?(a(),g(f,{key:0,size:"sm",class:"w-full",color:"alternative",disabled:""},{default:m(()=>[h(s(e.$t("Loading Orderbook"))+"... ",1)]),_:1})):(a(),g(f,{key:1,size:"sm",class:"flex w-full items-center justify-between",color:"green",loading:o.loading,disabled:o.loading},{prefix:m(()=>[Me]),default:m(()=>[t("span",null,s(e.$t("Start Bot")),1)]),_:1},8,["loading","disabled"]))])),t("div",Ae,[t("label",Se,[t("a",Ce,s(e.$t("Wallet")),1)]),t("div",Ie,[o.balance!==null?(a(),n("div",$e,[(a(),n("input",{key:o.balance,type:"number",value:o.balance,readonly:"","aria-label":"Amount (to the nearest dollar)"},null,8,De)),t("span",null,s(o.currency),1)])):(a(),n("form",{key:1,onSubmit:r[3]||(r[3]=v(i=>d.createWallet(),["prevent"]))},[t("button",Oe,s(e.$t("Create Wallet")),1)],32))])])])],32)],2)])]))]),x(q,{name:"modal",mode:"out-in","enter-active-class":"modal-enter-active","leave-active-class":"modal-leave-active"},{default:m(()=>[l.botStore.isShowModal?(a(),g(O,{key:0,size:"3xl",onClose:r[6]||(r[6]=i=>l.botStore.closeModal())},{header:m(()=>[t("div",Ee,s(e.$t("Top Ranking Bots")),1)]),body:m(()=>[(a(!0),n(_,null,T(e.bot_type,(i,k)=>(a(),n("div",{key:k,class:y(["mb-3 flex w-full cursor-pointer items-center rounded-lg p-3 shadow-lg",i.id==o.active_bot.id?"bg-gray-300 dark:bg-gray-800":"bg-white hover:bg-gray-300 dark:bg-gray-600 hover:dark:bg-gray-700"]),onClick:Je=>d.setBot(i)},[t("div",Ne,[A(t("img",null,null,512),[[E,i.image?"/assets/images/bot/"+i.image:"/market/notification.png"]])]),t("div",je,[t("div",We,[t("div",ze,[h(s(i.title)+" ",1),i.is_new==1?(a(),n("span",Pe,s(e.$t("New")),1)):w("",!0)]),t("div",Ve,[He,h(" "+s(i.uses),1)])]),t("div",Re,[t("small",Fe,s(i.desc),1),t("div",null,[h(s(e.$t("Highest APR Today"))+": ",1),t("span",qe,s(i.perc)+"%",1)])])])],10,Le))),128))]),footer:m(()=>[t("div",Ue,[t("button",{type:"button",class:"btn btn-outline-secondary",onClick:r[5]||(r[5]=i=>l.botStore.closeModal())},s(e.$t("Close")),1)])]),_:1})):w("",!0)]),_:1})])}const ct=S(le,[["render",Ge]]);export{ct as default};
