import{W as P,P as b}from"./PurchaseModal-e0c490ff.js";import{u as w}from"./ecommerce-b160e1fe.js";import{_ as y,r as l,m as k,o as n,c as u,a as t,i,w as h,h as M,t as o,f as m,g as x,n as E,F as C}from"./bootstrap-249b0f62.js";const B={components:{WishlistButton:P,PurchaseModal:b},props:{product:{type:Object,required:!0}},emits:["add-to-cart"],setup(){return{ecommerceStore:w()}},data(){return{showPurchaseModal:!1,isExpanded:!1,loading:!1}},computed:{productId(){return this.product.id},productName(){return this.product.name},badge(){return this.product.hot===1?"badge":""},productThumbnail(){return this.product.thumbnail!=null?"/assets/images/ecommerce/product/thumbnail/"+this.product.thumbnail:"/assets/no-image.png"},productDescription(){return this.product.description},productPrice(){return this.product.price},productOldPrice(){return this.product.discount},productDiscountedPrice(){return this.product.price-this.product.discount},productLink(){return"/marketplace/product/"+this.product.id},inWishlist(){return this.product.in_wishlist}},updated(){this.isExpanded?this.$refs.textElement.classList.remove("line-clamp-2"):this.$refs.textElement.classList.add("line-clamp-2")},methods:{expandText(){this.isExpanded=!this.isExpanded,this.isExpanded?this.$refs.textElement.classList.remove("line-clamp-2"):this.$refs.textElement.classList.add("line-clamp-2")},openPurchaseModal(){this.$emit("add-to-cart",this.product),this.showPurchaseModal=!0},closePurchaseModal(){this.showPurchaseModal=!1},purchaseProduct(){this.loading=!0,axios.post("/user/marketplace/purchase",{id:this.product.id}).then(r=>{this.$toast[r.type](r.message)}).catch(r=>{this.$toast.error(r.response.data.message)}).finally(()=>{this.loading=!1,this.closePurchaseModal(),this.ecommerceStore.fetch_products()})}}},D={class:"card duration-300 hover:scale-105"},T={class:"relative"},z={class:"image-container relative"},H={class:"rounded-t-lg p-8",alt:"product image"},N={class:"icon-wrapper flex items-center justify-center"},S={key:0,class:"absolute top-0 left-0 mt-1 ml-1"},W={class:"mr-2 rounded bg-red-100 px-2.5 py-0.5 text-xs font-medium text-red-800 dark:bg-red-900 dark:text-red-300"},L={class:"p-3"},O={class:"relative flex items-center"},V={class:"card-footer flex justify-between"},j={class:"text-2xl font-bold text-gray-900 dark:text-white"},I={class:"font-normal text-gray-500 dark:text-gray-400"},A={key:0};function F(r,s,a,_,d,e){const p=l("router-link"),f=l("WishlistButton"),g=l("PurchaseModal"),v=k("lazy");return n(),u(C,null,[t("div",D,[t("div",T,[t("div",z,[i(p,{to:"/marketplace/product/"+a.product.id},{default:h(()=>[M(t("img",H,null,512),[[v,e.productThumbnail]])]),_:1},8,["to"]),t("div",N,[i(f,{class:"wishlist-button absolute hidden","product-id":e.productId,"is-active":e.inWishlist},null,8,["product-id","is-active"])])]),a.product.hot===1?(n(),u("div",S,[t("span",W,o(r.$t("HOT")),1)])):m("",!0)]),t("div",L,[i(p,{to:"/marketplace/product/"+a.product.id,class:"mr-3 max-w-full text-lg font-semibold tracking-tight text-gray-900 dark:text-white sm:text-2xl md:text-3xl lg:text-3xl xl:text-3xl"},{default:h(()=>[x(o(e.productName),1)]),_:1},8,["to"]),t("div",O,[t("p",{ref:"textElement",class:E(["text-sm leading-5 text-gray-600 line-clamp-2 dark:text-gray-400",{"line-clamp-2":!d.isExpanded}])},o(e.productDescription),3),t("button",{style:{position:"fixed",top:"auto",right:"0",color:"skyblue"},onClick:s[0]||(s[0]=(...c)=>e.expandText&&e.expandText(...c))},s[2]||(s[2]=[t("i",{class:"bi bi-three-dots-vertical"},null,-1)]))])]),t("div",V,[t("span",j,[t("small",I,[e.productOldPrice>0?(n(),u("del",A,o(e.productPrice),1)):m("",!0)]),x(" $"+o(e.productOldPrice>0?e.productDiscountedPrice:e.productPrice),1)]),t("button",{type:"button",class:"btn btn-info",style:{"padding-right":"1 !important"},onClick:s[1]||(s[1]=(...c)=>e.openPurchaseModal&&e.openPurchaseModal(...c))},s[3]||(s[3]=[t("svg",{"aria-hidden":"true",class:"h-5 w-5",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},[t("path",{d:"M3 1a1 1 0 000 2h1.22l.305 1.222a.997.997 0 00.01.042l1.358 5.43-.893.892C3.74 11.846 4.632 14 6.414 14H15a1 1 0 000-2H6.414l1-1H14a1 1 0 00.894-.553l3-6A1 1 0 0017 3H6.28l-.31-1.243A1 1 0 005 1H3zM16 16.5a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0zM6.5 18a1.5 1.5 0 100-3 1.5 1.5 0 000 3z"})],-1)]))])]),i(g,{product:a.product,visible:d.showPurchaseModal,wallet:_.ecommerceStore.wallet,loading:d.loading,onClose:e.closePurchaseModal,onPurchase:e.purchaseProduct},null,8,["product","visible","wallet","loading","onClose","onPurchase"])],64)}const K=y(B,[["render",F],["__scopeId","data-v-f0643f7f"]]);export{K as P};
