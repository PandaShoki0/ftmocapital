import{_ as B}from"./preload-helper-f61836a9.js";import{K as L,Y as N,X as j,C as z}from"./flowbite-vue-7e69f603.js";import P from"./Marketinfo-a554d273.js";import W from"./Orderbook-63471ec8.js";import{M as V}from"./Markets-264389a6.js";import{_ as S,o as a,c as n,a as t,n as y,q as v,t as s,F as p,b as T,d as H,g as h,j as M,r as b,m as R,e as g,i as x,f as w,w as m,h as A,U as F,T as U}from"./bootstrap-249b0f62.js";import{u as q}from"./user-5d70a0d6.js";import{u as G}from"./market-8356724b.js";import{u as J}from"./bot-b9764a60.js";import"./LoadingCircles-d67a70a4.js";/* empty css                                                                       */import"./_commonjsHelpers-de833af9.js";import"./dijkstra-f906a09e.js";import"./axios-7a713374.js";import"./ListItem-a6b6e883.js";const K={components:{},props:["runningBots"],data(){return{activeItem:"tab-contracts"}},methods:{isActive(e){return this.activeItem===e},setActive(e){this.activeItem=e},time_left(e){var r=new Date(Date.parse(e.start_date)),c=new Date,l=Math.abs(c-r)/1e3;return Math.round(l/e.duration*100)>100?100:Math.round(l/e.duration*100)}}},X={class:"Trades border border-gray-100 bg-white shadow dark:border-gray-700 dark:bg-gray-900"},Y={class:"w-full bg-gray-200 dark:bg-gray-800"},Q={id:"myTab",class:"nf flex-cols -mb-px flex overflow-x-hidden text-center",role:"tablist"},Z={class:"mr-2 bg-gray-900"},ee={id:"tabbContent",class:"px-3 py-3"},te={style:{"overflow-y":"auto","max-height":"250px"},class:"space-y-3 pr-3"},re={class:"mb-2 flex justify-between text-xs font-medium"},oe={class:"w-full rounded bg-gray-200 dark:bg-gray-700"},se={key:1,class:"text-center"};function ae(e,r,c,l,o,d){return a(),n("div",X,[t("div",Y,[t("ul",Q,[t("li",Z,[t("a",{id:"tab-contracts-tab",class:y(["inline-block py-2 pl-3 pr-4 text-xs font-medium",d.isActive("tab-contracts")?"border-gray-300 bg-white text-gray-700 dark:bg-gray-900 dark:text-gray-300":"cursor-pointer border-transparent bg-gray-200 text-gray-400 hover:border-gray-300 hover:bg-gray-300 hover:text-gray-600 dark:bg-gray-800 dark:hover:bg-gray-700 dark:hover:text-gray-300"]),type:"button",role:"tab","aria-controls":"tab-contracts","aria-selected":"false",onClick:r[0]||(r[0]=v(u=>d.setActive("tab-contracts"),["prevent"]))},s(e.$t("Active Contracts")),3)])])]),t("div",ee,[t("div",{id:"tab-contracts",class:y(["",d.isActive("tab-contracts")?"":"hidden"])},[t("div",te,[c.runningBots.length!=0?(a(!0),n(p,{key:0},T(c.runningBots,(u,f)=>(a(),n("div",{key:f,class:"rounded-lg border border-gray-300 bg-white p-3 shadow-lg dark:border-gray-600 dark:bg-gray-800"},[t("div",re,[t("span",null,s(u.bot_name),1),t("span",null,"("+s(Number(u.amount).toFixed(2))+" "+s(u.pair)+")",1)]),t("div",oe,[t("div",{class:y(["rounded text-center text-xs font-medium leading-none text-blue-100",d.time_left(u)==100?"bg-green-600":"bg-red-600"]),style:H("width:"+d.time_left(u)+"%")},s(d.time_left(u)==100?"Completed":d.time_left(u)+"%"),7)])]))),128)):(a(),n("div",se,[r[1]||(r[1]=t("div",{class:"flex w-full justify-center",colspan:"100%"},[t("img",{height:"128",width:"128",src:"https://assets.staticimg.com/pro/2.0.4/images/empty.svg",alt:""})],-1)),h(" "+s(e.$t("No Data Found")),1)]))])],2)])])}const ie=S(K,[["render",ae]]);const ne={props:["user"],setup(){const e=q(),r=G(),c=J();if(r.exchange==null){const l={proxy:gnl.cors,options:{tradesLimit:10},newUpdates:!0,timeout:2e4};r.exchange=new ccxt.pro[provider](l)}return{userStore:e,marketStore:r,botStore:c}},components:{Marketinfo:P,Tradingview:M(()=>B(()=>import("./Tradingview-9b250f56.js"),["assets/Tradingview-9b250f56.js","assets/bootstrap-249b0f62.js","assets/_commonjsHelpers-de833af9.js","assets/dijkstra-f906a09e.js","assets/preload-helper-f61836a9.js","assets/axios-7a713374.js","assets/bootstrap-5bde2cbd.css"])),EcoTradingview:M(()=>B(()=>import("./Tradingview-425a70f8.js"),["assets/Tradingview-425a70f8.js","assets/datafeed-d62ae98f.js","assets/_commonjsHelpers-de833af9.js","assets/market-8356724b.js","assets/bootstrap-249b0f62.js","assets/dijkstra-f906a09e.js","assets/preload-helper-f61836a9.js","assets/axios-7a713374.js","assets/bootstrap-5bde2cbd.css"])),Orderbook:W,Markets:V,Trades:ie,Modal:L,ListGroup:N,ListGroupItem:j,Button:z},data(){return{symbol:this.$route.params.symbol,currency:this.$route.params.currency,activeItem:"bot-settings",provider:null,provide:null,gnl,runningBots:[],loading:!1,amount:null,balance:null,active_bot:[],active_duration:null,min_amount:null,max_amount:null,ext,plat,activeItemm:plat.mobile.charting==1?"pills-chart":"pills-orderbook",ordercard:!1,orderbtn:!0}},created(){this.fetchData(),this.fetchWallet()},watch:{eventLog:function(){const e=this.$refs.eventsDiv;e.scrollTop=e.scrollHeight},async $route(e,r){await this.marketStore.exchange.close(),document.getElementById("favicon").href="/assets/images/logoIcon/favicon.ico";const c=document.getElementById("asks"),l=document.getElementById("bids"),o=document.getElementById("tradeTable");c!==null&&(c.innerHTML=""),l!==null&&(l.innerHTML=""),o!==null&&(o.innerHTML="")}},methods:{isActive(e){return this.activeItem===e},setActive(e){this.activeItem=e},isActivee(e){return this.activeItemm===e},setActivee(e){this.activeItemm=e},getRandomInt(e,r){return e=Math.ceil(e),r=Math.floor(r),Math.floor(Math.random()*(r-e))+e},Order(){this.loading=!0;const e=this.active_bot.timing.find(r=>r.id===Number(this.$refs.active_duration.value));e?this.marketStore.bestAsk>0?axios.post("/user/store/bot",{amount:this.amount,botTime:e.duration,bot_id:this.active_bot.id,currency:this.currency,symbol:this.symbol,type:e.type,price:this.marketStore.bestAsk}).then(r=>{this.$toast[r.type](r.message),this.fetchData(),this.fetchWallet()}).catch(r=>{this.$toast.error(r.response.data)}).finally(()=>{this.loading=!1}):(this.$toast.error("Please wait for orderbook to load"),this.loading=!1):(this.$toast.error("Duration not found"),this.loading=!1)},setBot(e){this.active_bot=e,this.active_duration=null,this.active_bot.min_amount=JSON.parse(e.limits).min_bot_amount,this.active_bot.max_amount=JSON.parse(e.limits).max_bot_amount,this.botStore.closeModal()},fetchWallet(){axios.post("/user/fetch/wallet",{type:"funding",symbol:this.currency}).then(e=>{this.balance=e.balance})},createWallet(){this.loading=!0,axios.post("/user/wallet/store",{type:"funding",symbol:this.symbol}).then(e=>{this.fetchWallet(),this.$toast[e.type](e.message)}).catch(e=>{this.$toast.error(e.response.data)}).finally(()=>{this.loading=!1})},fetchData(){axios.post("/user/fetch/bot/info",{symbol:this.$route.params.symbol,currency:this.$route.params.currency}).then(e=>{this.provider=e.provider,this.bot_type=e.bot_type,this.runningBots=e.runningBots,this.provide=e.provide})}}},le={style:{"font-family":"BinancePlex, Arial, sans-serif !important"}},de={class:"containered",style:{margin:"-18px -20px 3px -20px"}},ce={id:"creatable",class:"Chart border border-gray-100 bg-white shadow dark:border-gray-700 dark:bg-gray-800"},ue={class:"w-full bg-gray-200 dark:bg-gray-800"},be={id:"myTab",class:"nf flex-cols -mb-px flex overflow-x-hidden text-center",role:"tablist"},ge={class:"mr-2 bg-gray-900"},me={id:"orderContent",class:"px-3 py-5"},ye={class:"grid grid-cols-2 gap-5"},he=["disabled"],ve={selected:""},pe=["value"],fe={class:""},_e={for:"Amount",class:"form-label text-1 text-dark flex justify-between"},ke={class:"flex"},xe=["disabled","min","max","step"],we={class:"inline-flex flex-shrink-0 items-center rounded-r-md border border-gray-300 bg-gray-100 p-2 text-center text-xs text-gray-500 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-200"},Te={for:"botTimed",class:"form-label text-1 text-dark flex justify-between"},Be={class:""},Me={for:"basic-url",class:"form-label text-1 text-light flex justify-between"},Ae={class:"text-light"},Se={class:"flex"},Ce={key:0,class:"input-group"},Ie=["value"],De={type:"submit",class:"btn btn-success w-full"},$e={class:"flex items-center text-lg"},Oe=["onClick"],Ee={class:"mr-3"},Le={class:"w-full"},Ne={class:"flex justify-between"},je={class:"fw-bold fs-4 text-white"},ze={key:0,class:"badge bg-success text-white"},Pe={class:"text-white"},We={class:"row"},Ve={class:"text-warning"},He={class:"text-success"},Re={class:"flex justify-end"};function Fe(e,r,c,l,o,d){const u=b("Marketinfo"),f=b("Orderbook"),C=b("Markets"),I=b("Trades"),D=b("EcoTradingview"),$=b("Tradingview"),_=b("Button"),O=b("Modal"),E=R("lazy");return a(),n("div",le,[t("div",de,[(a(),g(u,{key:e.$route.params.symbol+e.$route.params.currency+"Marketinfo"})),(a(),g(f,{key:e.$route.params.symbol+e.$route.params.currency+"Orderbook"})),x(C,{style:{"overflow-y":"auto","overflow-x":"hidden"},type:"bot",subtype:"non"}),(a(),g(I,{key:e.$route.params.symbol+e.$route.params.currency+o.runningBots.length,"running-bots":o.runningBots,style:{"overflow-y":"auto","overflow-x":"hidden"}},null,8,["running-bots"])),t("div",ce,[o.ext.eco==1&&o.provider!="coinbasepro"?(a(),g(D,{key:e.$route.params.symbol+e.$route.params.currency+"eco"})):(a(),n(p,{key:1},[o.provide!=null?(a(),g($,{key:e.$route.params.symbol+e.$route.params.currency+"tradingview",provide:o.provide},null,8,["provide"])):w("",!0)],64))]),(a(),n("div",{key:e.$route.params.symbol+e.$route.params.currency+"order",class:"Order border border-gray-100 bg-white shadow dark:border-gray-700 dark:bg-gray-900"},[t("div",ue,[t("ul",be,[t("li",ge,[t("a",{id:"bot-settings-tab",class:y(["inline-block py-2 pl-3 pr-4 text-xs font-medium",d.isActive("bot-settings")?"border-gray-300 bg-white text-gray-700 dark:bg-gray-900 dark:text-gray-300":"cursor-pointer border-transparent bg-gray-200 text-gray-400 hover:border-gray-300 hover:bg-gray-300 hover:text-gray-600 dark:bg-gray-800 dark:hover:bg-gray-700 dark:hover:text-gray-300"]),type:"button",role:"tab","aria-controls":"bot-settings","aria-selected":"false",onClick:r[0]||(r[0]=v(i=>d.setActive("bot-settings"),["prevent"]))},s(e.$t("Bot Settings")),3)])])]),t("div",me,[t("div",{id:"bot-settings",class:y(d.isActive("bot-settings")?"":"hidden")},[t("form",{id:"Order",onSubmit:r[4]||(r[4]=v(i=>d.Order(),["prevent"]))},[t("div",ye,[x(_,{type:"button",size:"sm",class:"w-full",onClick:r[1]||(r[1]=i=>l.botStore.showModal())},{default:m(()=>[h(s(o.active_bot.length!=0?o.active_bot.title:e.$t("Select Bot")),1)]),_:1}),(a(),n("select",{id:"durations",key:o.active_bot.length,ref:"active_duration",disabled:o.active_bot.length==0,class:"block w-full rounded-lg border border-gray-300 bg-gray-50 p-2.5 text-sm text-gray-900 focus:border-blue-500 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:placeholder-gray-400 dark:focus:border-blue-500 dark:focus:ring-blue-500"},[t("option",ve,s(e.$t("Select Duration")),1),(a(!0),n(p,null,T(o.active_bot.timing,(i,k)=>(a(),n("option",{key:k,value:i.id},s(i.duration)+" "+s(i.type)+"s ",9,pe))),128))],8,he)),t("div",fe,[t("label",_e,[t("span",null,s(e.$t("Amount")),1)]),t("div",ke,[A((a(),n("input",{key:o.active_bot.length,"onUpdate:modelValue":r[2]||(r[2]=i=>o.amount=i),disabled:o.active_bot.length==0,class:y([{"opacity-50":o.active_bot.length==0},"block w-full rounded-l-md border border-gray-300 bg-gray-50 p-2 text-xs text-gray-900 focus:border-blue-500 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-200 dark:placeholder-gray-400 dark:focus:border-blue-500 dark:focus:ring-blue-500"]),type:"number",min:o.active_bot?o.active_bot.min_amount:1e-5,max:o.active_bot?o.active_bot.max_amount:1e5,step:o.active_bot?o.active_bot.min_amount:1e-5,required:"",placeholder:"Amount","aria-label":"Amount (to the nearest dollar)"},null,10,xe)),[[F,o.amount]]),t("span",we,s(o.currency),1)])]),(a(),n("div",{key:l.marketStore.bestAsk},[t("label",Te,[t("span",null,s(e.$t("Launch")),1)]),l.marketStore.bestAsk==null?(a(),g(_,{key:0,size:"sm",class:"w-full",color:"alternative",disabled:""},{default:m(()=>[h(s(e.$t("Loading Orderbook"))+"... ",1)]),_:1})):(a(),g(_,{key:1,size:"sm",class:"flex w-full items-center justify-between",color:"green",loading:o.loading,disabled:o.loading},{prefix:m(()=>r[7]||(r[7]=[t("i",{class:"bi bi-battery-charging"},null,-1)])),default:m(()=>[t("span",null,s(e.$t("Start Bot")),1)]),_:1},8,["loading","disabled"]))])),t("div",Be,[t("label",Me,[t("a",Ae,s(e.$t("Wallet")),1)]),t("div",Se,[o.balance!==null?(a(),n("div",Ce,[(a(),n("input",{key:o.balance,type:"number",value:o.balance,readonly:"","aria-label":"Amount (to the nearest dollar)"},null,8,Ie)),t("span",null,s(o.currency),1)])):(a(),n("form",{key:1,onSubmit:r[3]||(r[3]=v(i=>d.createWallet(),["prevent"]))},[t("button",De,s(e.$t("Create Wallet")),1)],32))])])])],32)],2)])]))]),x(U,{name:"modal",mode:"out-in","enter-active-class":"modal-enter-active","leave-active-class":"modal-leave-active"},{default:m(()=>[l.botStore.isShowModal?(a(),g(O,{key:0,size:"3xl",onClose:r[6]||(r[6]=i=>l.botStore.closeModal())},{header:m(()=>[t("div",$e,s(e.$t("Top Ranking Bots")),1)]),body:m(()=>[(a(!0),n(p,null,T(e.bot_type,(i,k)=>(a(),n("div",{key:k,class:y(["mb-3 flex w-full cursor-pointer items-center rounded-lg p-3 shadow-lg",i.id==o.active_bot.id?"bg-gray-300 dark:bg-gray-800":"bg-white hover:bg-gray-300 dark:bg-gray-600 hover:dark:bg-gray-700"]),onClick:Ue=>d.setBot(i)},[t("div",Ee,[A(t("img",null,null,512),[[E,i.image?"/assets/images/bot/"+i.image:"/market/notification.png"]])]),t("div",Le,[t("div",Ne,[t("div",je,[h(s(i.title)+" ",1),i.is_new==1?(a(),n("span",ze,s(e.$t("New")),1)):w("",!0)]),t("div",Pe,[r[8]||(r[8]=t("i",{class:"bi bi-app-indicator"},null,-1)),h(" "+s(i.uses),1)])]),t("div",We,[t("small",Ve,s(i.desc),1),t("div",null,[h(s(e.$t("Highest APR Today"))+": ",1),t("span",He,s(i.perc)+"%",1)])])])],10,Oe))),128))]),footer:m(()=>[t("div",Re,[t("button",{type:"button",class:"btn btn-outline-secondary",onClick:r[5]||(r[5]=i=>l.botStore.closeModal())},s(e.$t("Close")),1)])]),_:1})):w("",!0)]),_:1})])}const nt=S(ne,[["render",Fe]]);export{nt as default};
