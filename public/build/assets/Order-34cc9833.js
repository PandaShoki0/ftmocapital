import{_ as v,m as I,o as n,c as d,a as e,h as f,t as r,g as b,f as u,W as p,F as $,Y as B,d as D,n as g,q as L,r as y,e as _,w as k,i as N,a4 as j,T as F,X as E,k as U,l as V,s as Y,p as A}from"./bootstrap-2a895a5a.js";import{u as q}from"./user-d2ff915e.js";import{K as H}from"./flowbite-vue-19d13a06.js";import{u as z}from"./sellers-45916b3d.js";import{u as K}from"./orders-40eaa01f.js";import"./_commonjsHelpers-de833af9.js";import"./browser-77dd377d.js";import"./preload-helper-f61836a9.js";import"./axios-4a70c6fc.js";const X={props:{order:{type:Object,required:!0},isLoading:{type:Boolean,default:!1}},emits:["close-details"],computed:{sellerName(){return this.isLoading?"Loading...":(console.log(this.order),this.order.seller&&this.order.seller.user?this.order.seller.user.name:"N/A")},ratingEditable(){return this.order.seller&&this.order.status==="paid"&&this.order.seller_id===this.order.seller.id&&this.order.rating===null}},methods:{async submitRating(t){this.ratingEditable&&console.log("Submitting rating:",t)}}},J={class:"grid grid-cols-1 gap-4 md:grid-cols-2"},W={class:"flex-start flex rounded-md border-l-4 border-blue-500 bg-white p-4 shadow-md dark:bg-gray-800"},G={class:"float-left mr-4 mb-4 h-12 w-12 rounded-full border-2 border-blue-500 object-cover",alt:"Buyer Photo"},Q={class:"mb-2 text-xl font-bold"},Z={key:0},ee={class:"font-bold"},te={class:"font-bold"},se={class:"font-bold"},re={key:1},oe={class:"flex-start flex rounded-md border-l-4 border-green-500 bg-white p-4 shadow-md dark:bg-gray-800"},ne={class:"float-left mr-4 mb-4 h-12 w-12 rounded-full border-2 border-green-500 object-cover",alt:"Seller Photo"},de={class:"mb-2 text-xl font-bold"},ae={key:0},ie={class:"font-bold"},le={class:"font-bold"},ce={class:"font-bold"},ue={class:"font-bold"},me={class:"mr-2 font-bold"},he={class:"badge bg-success"},be={key:1};function fe(t,o,s,i,a,c){var m,w,C,h,x,S,M,T,O,P,R;const l=I("lazy");return n(),d("div",J,[e("div",W,[f(e("img",G,null,512),[[l,(m=s.order.buyer)!=null&&m.profile_photo_path?"/assets/images/profile/"+s.order.buyer.profile_photo_path:"/assets/images/profile/default.png"]]),e("div",null,[e("h2",Q,r(t.$t("Buyer")),1),!s.isLoading&&s.order.buyer?(n(),d("div",Z,[e("p",null,[e("span",ee,r(t.$t("First Name"))+":",1),b(" "+r(s.order.buyer.firstname),1)]),e("p",null,[e("span",te,r(t.$t("Last Name"))+":",1),b(" "+r(s.order.buyer.lastname),1)]),e("p",null,[e("span",se,r(t.$t("Country"))+":",1),b(" "+r(s.order.buyer.country),1)])])):(n(),d("div",re,r(t.$t("Loading...")),1))])]),e("div",oe,[f(e("img",ne,null,512),[[l,(C=(w=s.order.seller)==null?void 0:w.user)!=null&&C.profile_photo_path?"/assets/images/profile/"+s.order.seller.user.profile_photo_path:"/assets/images/profile/default.png"]]),e("div",null,[e("h2",de,r(t.$t("Seller")),1),!s.isLoading&&s.order.seller&&s.order.seller.user?(n(),d("div",ae,[e("p",null,[e("span",ie,r(t.$t("First Name"))+":",1),b(" "+r((x=(h=s.order.seller)==null?void 0:h.user)==null?void 0:x.firstname),1)]),e("p",null,[e("span",le,r(t.$t("Last Name"))+":",1),b(" "+r((M=(S=s.order.seller)==null?void 0:S.user)==null?void 0:M.lastname),1)]),e("p",null,[e("span",ce,r(t.$t("Country"))+":",1),b(" "+r((O=(T=s.order.seller)==null?void 0:T.user)==null?void 0:O.country),1)]),e("p",null,[e("span",ue,r(t.$t("Completed Orders"))+":",1),b(" "+r((P=s.order.seller)==null?void 0:P.allTrades),1)]),e("p",null,[e("span",me,r(t.$t("30d Completion Rate"))+":",1),e("span",he,r((R=s.order.seller)==null?void 0:R.completionRate30d)+"% ",1)])])):(n(),d("div",be,r(t.$t("Loading...")),1))])])])}const ye=v(X,[["render",fe]]),_e={props:{order:{type:Object,required:!0},isBuyer:{type:Boolean,default:!1}},emits:["transaction-submitted","transaction-confirmed"],data(){return{transactionId:"",gnl}},computed:{networkFee(){return JSON.parse(this.gnl.p2p).network_fee??0},payAmount(){const t=this.networkFee/100,o=this.order.amount*this.order.price,s=o*t;return(o+s).toFixed(2)},recieveAmount(){return Number(this.order.amount).toFixed(2)},canConfirmPayment(){return this.order.status==="paid"},price(){return Number(this.order.price).toFixed(2)}},methods:{async submitTransactionId(){await axios.post(`/user/p2p/orders/${this.order.id}/transaction`,{transaction_id:this.transactionId}).then(t=>{this.$toast[t.type](t.message),this.$emit("transaction-submitted")})},async confirmPayment(){await axios.post(`/user/p2p/orders/${this.order.id}/confirm`).then(t=>{this.$toast[t.type](t.message),this.$emit("transaction-confirmed")})}}},ge={class:"font-bold"},ve={class:"block sm:inline"},ke={class:"font-bold"},pe={class:"block sm:inline"},$e={key:2},we={key:0},Ce={class:"card"},xe={class:"card-header"},Se={class:"mb-2 text-lg font-bold"},Me={class:"card-body"},Te={class:"flex flex-col"},Oe={class:"flex justify-between"},Pe={class:"font-medium"},Re={class:"flex justify-between"},Ae={class:"font-medium"},qe={class:"flex justify-between"},Ie={class:"font-medium"},Be={class:"flex justify-between"},De={class:"font-medium"},Le={key:0,class:"mt-5 flex justify-between border-t border-gray-200 pt-4 dark:border-gray-700"},Ne={class:"font-medium"},je={class:"flex justify-between"},Fe={class:"font-medium"},Ee={class:"flex justify-between"},Ue={class:"font-medium"},Ve={key:0,class:"card-footer"},Ye={for:"transaction-id",class:"block text-sm font-medium"},He={class:"flex"},ze={key:1,class:"card-footer"},Ke={for:"transaction-id",class:"block text-sm font-medium"},Xe={class:"flex"},Je={class:"text-warning text-sm"},We={key:2,class:"card-footer"},Ge={class:"text-sm text-green-500"},Qe={key:1},Ze={key:0,class:"card"},et={class:"card-body"},tt=["disabled"],st={class:"mt-2 text-sm text-gray-500"};function rt(t,o,s,i,a,c){return n(),d($,null,[s.order.status==="completed"?(n(),d("div",{key:s.order.status,class:"alert alert-success",role:"alert"},[e("strong",ge,r(t.$t("Success!")),1),e("span",ve,r(t.$t("Payment has been confirmed, and the order is completed.")),1)])):u("",!0),s.order.status==="cancelled"?(n(),d("div",{key:s.order.status,class:"alert alert-danger",role:"alert"},[e("strong",ke,r(t.$t("Alert!")),1),e("span",pe,r(t.$t("The order has been cancelled.")),1)])):(n(),d("div",$e,[s.isBuyer?(n(),d("div",we,[e("div",Ce,[e("div",xe,[e("h3",Se,r(t.$t("Transaction details")),1)]),e("div",Me,[e("div",Te,[e("div",Oe,[e("span",Pe,r(t.$t("Funds to send"))+": ",1),e("p",null,r(c.payAmount)+" "+r(s.order.fiat),1)]),e("div",Re,[e("span",Ae,r(t.$t("Funds to receive"))+": ",1),e("p",null,r(c.recieveAmount)+" "+r(s.order.currency),1)]),e("div",qe,[e("span",Ie,r(t.$t("Exchange Rate"))+": ",1),e("p",null," 1 "+r(s.order.currency)+" = "+r(c.price)+" "+r(s.order.fiat),1)]),e("div",Be,[e("span",De,r(t.$t("Escrow Fee"))+":",1),e("p",null,r(c.networkFee)+"%",1)]),s.order.trx!=null?(n(),d("div",Le,[e("span",Ne,r(t.$t("Transaction ID"))+": ",1),e("p",null,r(s.order.trx),1)])):u("",!0),e("div",je,[e("span",Fe,r(t.$t("Payment Method"))+": ",1),e("p",null,r(s.order.method?s.order.method.name:""),1)]),e("div",Ee,[e("span",Ue,r(t.$t("Payment Details"))+": ",1),e("p",null,r(s.order.method?s.order.method.description:""),1)])])]),s.order.status==="open"&&s.order.trx===null?(n(),d("div",Ve,[e("label",Ye,r(t.$t("Transaction ID")),1),e("div",He,[f(e("input",{id:"transaction-id","onUpdate:modelValue":o[0]||(o[0]=l=>a.transactionId=l),class:"form-control mr-2",placeholder:"Enter transaction ID"},null,512),[[p,a.transactionId]]),e("button",{class:"btn btn-primary mt-1",onClick:o[1]||(o[1]=(...l)=>c.submitTransactionId&&c.submitTransactionId(...l))},r(t.$t("Submit")),1)])])):u("",!0),s.order.status==="open"&&s.order.trx!==null?(n(),d("div",ze,[e("label",Ke,r(t.$t("Transaction ID")),1),e("div",Xe,[f(e("input",{id:"transaction-id","onUpdate:modelValue":o[2]||(o[2]=l=>a.transactionId=l),class:"form-control mr-2",placeholder:"Enter transaction ID"},null,512),[[p,a.transactionId]]),e("button",{class:"btn btn-primary mt-1",onClick:o[3]||(o[3]=(...l)=>c.submitTransactionId&&c.submitTransactionId(...l))},r(t.$t("Submit")),1)]),e("p",Je,r(t.$t("Transaction ID submitted but order not identified as paid, Please resubmit transaction ID again.")),1)])):s.order.status!=="open"&&s.order.trx!==null?(n(),d("div",We,[e("p",Ge,r(t.$t("Transaction ID submitted and order status is paid.")),1)])):u("",!0)])])):(n(),d("div",Qe,[s.order.status!=="completed"&&s.order.status!=="cancelled"?(n(),d("div",Ze,[e("div",et,[e("button",{class:"btn btn-success",disabled:!c.canConfirmPayment,onClick:o[4]||(o[4]=(...l)=>c.confirmPayment&&c.confirmPayment(...l))},r(t.$t("Confirm Payment")),9,tt),e("p",st,r(t.$t("Note: Please ensure that you have received the payment before confirming.")),1)])])):u("",!0)]))]))],64)}const ot=v(_e,[["render",rt]]),nt={props:{order:{type:Object,required:!0},isBuyer:{type:Boolean,required:!0}},setup(){return{myUserId:q().user.id}},data(){return{chatTitle:"",newMessage:"",messages:[]}},created(){const t=new B(PUSHER_APP_KEY,{cluster:PUSHER_APP_CLUSTER,forceTLS:!0,authEndpoint:"/user/pusher/auth",auth:{headers:{"X-CSRF-Token":document.querySelector('meta[name="csrf-token"]').getAttribute("content")},beforeSend:function(i){i.setRequestHeader("X-CSRF-Token",document.querySelector('meta[name="csrf-token"]').getAttribute("content"))}}}),o=`private-chat-${this.order.id}`;t.subscribe(o).bind("new_message",i=>{this.messages.push(i)}),this.chatTitle=`Chat with ${this.order.seller.user.username}`,this.loadMessages()},methods:{messageClass(t){return t===this.myUserId?"my-message text-right":"other-message text-left"},loadMessages(){axios.get(`/user/p2p/orders/${this.order.id}/chat`).then(t=>{this.messages=Array.isArray(t)?t:[]}).catch(t=>{console.error(t)})},sendMessage(){if(this.newMessage.trim()==="")return;const t=this.isBuyer?this.order.buyer.username:this.order.seller.user.username,o={order_id:this.order.id,sender_name:t,content:this.newMessage.trim(),timestamp:new Date().toISOString()};Array.isArray(this.messages)||(this.messages=[]),axios.post(`/user/p2p/orders/${this.order.id}/chat`,{data:o}),this.newMessage=""},formatDate(t){const o=Math.floor((new Date-t)/1e3);let s=Math.floor(o/31536e3);return s>=1?`${s} year${s===1?"":"s"} ago`:(s=Math.floor(o/2592e3),s>=1?`${s} month${s===1?"":"s"} ago`:(s=Math.floor(o/86400),s>=1?`${s} day${s===1?"":"s"} ago`:(s=Math.floor(o/3600),s>=1?`${s} hour${s===1?"":"s"} ago`:(s=Math.floor(o/60),s>=1?`${s} minute${s===1?"":"s"} ago`:"just now"))))}}},dt={class:"font-bold"},at={class:"block sm:inline"},it={class:"font-bold"},lt={class:"block sm:inline"},ct={key:2},ut={class:"card"},mt={class:"card-header"},ht={class:"text-xl font-semibold text-gray-700 dark:text-gray-200"},bt={ref:"chatMessages",class:"card-body flex-grow space-y-4 overflow-y-auto p-4 dark:bg-gray-800"},ft={class:"meta mb-1 text-sm text-gray-500 dark:text-gray-400"},yt={key:0,class:"sender mr-2"},_t={class:"timestamp"},gt={class:"relative flex items-center"},vt={type:"submit",class:"absolute right-0 top-0 px-4 py-2 text-gray-500 hover:text-blue-500 focus:outline-none dark:text-gray-200 dark:hover:text-blue-400"};function kt(t,o,s,i,a,c){return n(),d($,null,[s.order.status==="completed"?(n(),d("div",{key:s.order.status,class:"alert alert-success",role:"alert"},[e("strong",dt,r(t.$t("Success!")),1),e("span",at,r(t.$t("Payment has been confirmed, and the order is completed.")),1)])):u("",!0),s.order.status==="cancelled"?(n(),d("div",{key:s.order.status,class:"alert alert-danger",role:"alert"},[e("strong",it,r(t.$t("Alert!")),1),e("span",lt,r(t.$t("The order has been cancelled.")),1)])):(n(),d("div",ct,[e("div",ut,[e("div",mt,[e("h3",ht,r(a.chatTitle),1)]),e("div",bt,[(n(!0),d($,null,D(a.messages,l=>(n(),d("div",{key:l.id},[e("div",{class:g(c.messageClass(l.sender_id))},[e("div",ft,[l.sender_id!==i.myUserId?(n(),d("span",yt,r(l.sender_name),1)):u("",!0),e("span",_t,r(c.formatDate(l.timestamp)),1)]),e("div",{class:g(["content max-w-3/4 inline-block break-words px-4 py-2 shadow-md",l.sender_id===i.myUserId?"rounded-t-lg rounded-bl-lg bg-blue-500 text-white":"rounded-t-lg rounded-br-lg bg-gray-300 text-gray-700"])},r(l.content),3)],2)]))),128))],512),e("form",{class:"card-footer",onSubmit:o[1]||(o[1]=L((...l)=>c.sendMessage&&c.sendMessage(...l),["prevent"]))},[e("div",gt,[f(e("input",{"onUpdate:modelValue":o[0]||(o[0]=l=>a.newMessage=l),type:"text",class:"w-full rounded-lg border border-gray-300 bg-gray-100 py-2 pl-4 pr-10 text-gray-700 focus:border-blue-500 focus:outline-none dark:border-gray-700 dark:bg-gray-900 dark:text-gray-200",placeholder:"Type a message..."},null,512),[[p,a.newMessage]]),e("button",vt,r(t.$t("Send")),1)])],32)])]))],64)}const pt=v(nt,[["render",kt]]),$t={components:{Modal:H},props:{showModal:{type:Boolean,default:!0}},emits:["confirm","cancel"]},wt={class:"text-end"};function Ct(t,o,s,i,a,c){const l=y("Modal");return n(),_(F,{name:"modal",mode:"out-in","enter-active-class":"modal-enter-active","leave-active-class":"modal-leave-active"},{default:k(()=>[N(l,{class:g({hidden:!s.showModal}),size:"2xl",onClose:o[2]||(o[2]=m=>t.$emit("cancel"))},{header:k(()=>[b(r(t.$t("Confirm Execution")),1)]),body:k(()=>[j(t.$slots,"default")]),footer:k(()=>[e("div",wt,[e("button",{type:"button",class:"btn btn-outline-primary mr-2",onClick:o[0]||(o[0]=m=>t.$emit("confirm"))},r(t.$t("Confirm")),1),e("button",{type:"button",class:"btn btn-outline-secondary",onClick:o[1]||(o[1]=m=>t.$emit("cancel"))},r(t.$t("Close")),1)])]),_:3},8,["class"])]),_:3})}const xt=v($t,[["render",Ct]]),St={components:{ConfirmationModal:xt},props:{isBuyer:{type:Boolean,default:!1},order:{type:Object,required:!0}},emits:["request-cancellation","cancel-order","confirm-order"],data(){return{showModal:!1,currentAction:"",cancellationReason:""}},computed:{canModerate(){return this.order.status!=="cancelled"&&this.order.status!=="completed"}},methods:{openConfirmationModal(t){this.currentAction=t,this.showModal=!0},closeModal(){this.showModal=!1},async confirmCommand(){this.closeModal(),this.currentAction==="cancel"?await axios.post(`/user/p2p/orders/${this.order.id}/cancel`,{order_id:this.order.id}).then(t=>{this.$toast[t.type](t.message),this.$emit("request-cancellation")}):this.currentAction==="confirm"?this.$emit("confirm-order"):this.submitCancellationRequest()},async submitCancellationRequest(){await axios.post(`/user/p2p/orders/${this.order.id}/cancel`,{reason:this.cancellationReason}).then(t=>{this.$toast[t.type](t.message),this.$emit("request-cancellation")})}}},Mt={class:"font-bold"},Tt={class:"block sm:inline"},Ot={class:"font-bold"},Pt={class:"block sm:inline"},Rt={key:2},At={key:0},qt={key:0,class:"card"},It={class:"card-body"},Bt={key:1,class:"mt-4"},Dt={class:"rounded border-l-4 border-yellow-500 bg-yellow-100 p-4 text-yellow-700",role:"alert"},Lt={class:"font-bold"},Nt={key:1},jt={key:0,class:"card"},Ft={class:"card-body"},Et={key:1,class:"card"},Ut={class:"card-body"},Vt={key:2,class:"mt-4"},Yt={class:"rounded border-l-4 border-yellow-500 bg-yellow-100 p-4 text-yellow-700",role:"alert"},Ht={class:"font-bold"},zt={key:0},Kt={key:1},Xt={key:2},Jt={class:"mt-4"},Wt={for:"cancellation-reason",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},Gt={key:3},Qt={class:"mt-4"},Zt={for:"cancellation-reason",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"};function es(t,o,s,i,a,c){const l=y("confirmation-modal");return n(),d($,null,[s.order.status==="completed"?(n(),d("div",{key:s.order.status,class:"alert alert-success",role:"alert"},[e("strong",Mt,r(t.$t("Success!")),1),e("span",Tt,r(t.$t("Payment has been confirmed, and the order is completed.")),1)])):u("",!0),s.order.status==="cancelled"?(n(),d("div",{key:s.order.status,class:"alert alert-danger",role:"alert"},[e("strong",Ot,r(t.$t("Alert!")),1),e("span",Pt,r(t.$t("The order has been cancelled.")),1)])):(n(),d("div",Rt,[s.isBuyer?(n(),d("div",At,[s.order.moderation_status!=="open"?(n(),d("div",qt,[e("div",It,[s.order.status==="open"?(n(),d("button",{key:0,class:"btn btn-danger mr-2",onClick:o[0]||(o[0]=m=>c.openConfirmationModal("cancel"))},r(t.$t("Cancel Order")),1)):u("",!0),s.order.status!=="open"&&s.order.moderation_status!=="open"?(n(),d("button",{key:1,class:"btn btn-danger",onClick:o[1]||(o[1]=m=>c.openConfirmationModal("request-moderation"))},r(t.$t("Request Moderation")),1)):u("",!0)])])):u("",!0),s.order.status!=="open"&&s.order.moderation_status!=="open"?(n(),d("div",Bt,[e("div",Dt,[e("p",Lt,r(t.$t("You have already paid for this order.")),1),e("p",null,r(t.$t("Please wait until the the seller confirm the order before making any changes to this order.")),1)])])):u("",!0)])):(n(),d("div",Nt,[s.order.status!=="open"&&s.order.moderation_status!=="open"?(n(),d("div",jt,[e("div",Ft,[e("button",{class:"btn btn-danger",onClick:o[2]||(o[2]=m=>c.openConfirmationModal("request-moderation"))},r(t.$t("Request Moderation")),1)])])):u("",!0),s.order.status==="open"?(n(),d("div",Et,[e("div",Ut,[e("button",{class:"btn btn-danger",onClick:o[3]||(o[3]=m=>c.openConfirmationModal("request-cancellation"))},r(t.$t("Request Cancellation")),1)])])):u("",!0)])),s.order.moderation_status==="open"?(n(),d("div",Vt,[e("div",Yt,[e("p",Ht,r(t.$t("This order is under moderation.")),1),e("p",null,r(t.$t("Please wait until the moderation process is complete before making any changes to this order.")),1)])])):u("",!0),a.showModal?(n(),_(l,{key:3,onConfirm:c.confirmCommand,onCancel:c.closeModal},{default:k(()=>[a.currentAction==="cancel"?(n(),d("p",zt,r(t.$t("You are about to cancel this order. Are you sure you want to proceed?")),1)):a.currentAction==="confirm"?(n(),d("p",Kt,r(t.$t("You are about to confirm this order. Once you confirm, the seller will receive a notification to start the transaction. Are you sure you want to proceed?")),1)):a.currentAction==="request-moderation"?(n(),d("div",Xt,[e("p",null,r(t.$t("You are about to request a moderation for this order. Please provide a reason for the moderation.")),1),e("div",Jt,[e("label",Wt,r(t.$t("Reason for moderation")),1),f(e("input",{id:"cancellation-reason","onUpdate:modelValue":o[4]||(o[4]=m=>a.cancellationReason=m),class:"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 text-gray-900 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-300 sm:text-sm"},null,512),[[p,a.cancellationReason]])])])):(n(),d("div",Gt,[e("p",null,r(t.$t("You are about to request a cancellation for this order. Please provide a reason for the cancellation.")),1),e("div",Qt,[e("label",Zt,r(t.$t("Reason for cancellation")),1),f(e("input",{id:"cancellation-reason","onUpdate:modelValue":o[5]||(o[5]=m=>a.cancellationReason=m),class:"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 text-gray-900 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-300 sm:text-sm"},null,512),[[p,a.cancellationReason]])])]))]),_:1},8,["onConfirm","onCancel"])):u("",!0)]))],64)}const ts=v(St,[["render",es]]),ss={components:{OrderHeader:ye,OrderDetails:ot,Chat:pt,OrderCommands:ts},emits:["close-details"],setup(){const t=q(),o=z(),s=K(),i=E(),a=U(!0),c=V(()=>t.user?s.order.buyer_id===t.user.id:!1);return Y(async()=>{try{s.order.id!==i.params.id&&(s.order=[]),s.order.length===0&&await s.fetchOrder(i.params.id),o.allOffers.length===0&&await o.fetch()}catch(l){console.error("Error fetching data:",l)}finally{a.value=!1}}),{userStore:t,p2pSellerStore:o,p2pOrderStore:s,isLoading:a,isBuyer:c}},data(){return{currentTab:"details"}},methods:{RefreshOrder(){this.p2pOrderStore.fetchOrder(this.$route.params.id)}}},rs={key:0,class:"grid grid-cols-1 gap-4 md:grid-cols-2"},os=A('<div class="flex-start white dark:gray-800 white dark:gray-800 flex animate-pulse rounded-md border-l-4 border-blue-500 p-4 shadow-md"><div class="mr-4 mb-4 h-12 w-12 rounded-full border-2 border-blue-500"><div class="skeleton h-full w-full rounded-full"></div></div><div class="w-full"><div class="skeleton mb-2 h-4 rounded"></div><div class="skeleton mb-2 h-4 rounded"></div><div class="skeleton mb-2 h-4 rounded"></div></div></div><div class="flex-start white dark:gray-800 white dark:gray-800 flex animate-pulse rounded-md border-l-4 border-green-500 p-4 shadow-md"><div class="mr-4 mb-4 h-12 w-12 rounded-full border-2 border-green-500"><div class="skeleton h-full w-full rounded-full"></div></div><div class="w-full"><div class="skeleton mb-2 h-4 rounded"></div><div class="skeleton mb-2 h-4 rounded"></div><div class="skeleton mb-2 h-4 rounded"></div><div class="skeleton mb-2 h-4 rounded"></div><div class="flex w-full items-center justify-between"><div class="skeleton mr-2 h-4 w-1/2 rounded"></div><div class="skeleton h-4 w-1/4 rounded"></div></div></div></div>',2),ns=[os],ds={key:1,class:"alert alert-danger"},as={class:"font-bold"},is={class:"flex justify-center"},ls={class:"mx-4 border-b-2 border-gray-300 dark:border-gray-700"},cs={class:"mx-4 border-b-2 border-gray-300 dark:border-gray-700"},us={key:0,class:"mx-4 border-b-2 border-gray-300 dark:border-gray-700"},ms={key:0,class:"mt-4"},hs={key:0,class:"card"},bs=A('<div class="card-body"><div class="skeleton mb-4 h-4 rounded"></div><button class="btn btn-success" disabled><div class="skeleton h-6 w-64 rounded"></div></button><div class="mt-2 text-sm text-gray-500"><div class="skeleton h-4 rounded"></div></div></div>',1),fs=[bs],ys={key:1,class:"mt-4"},_s={key:2,class:"mt-4"};function gs(t,o,s,i,a,c){const l=y("OrderHeader"),m=y("OrderDetails"),w=y("Chat"),C=y("OrderCommands");return n(),d("div",null,[i.isLoading?(n(),d("div",rs,ns)):i.p2pOrderStore.error?(n(),d("div",ds,[e("div",as,r(t.$t("Alert"))+"!",1),e("div",null,r(i.p2pOrderStore.error),1)])):(n(),d($,{key:2},[(n(),_(l,{key:i.p2pOrderStore.order.status,"is-loading":i.isLoading,order:i.p2pOrderStore.order,onCloseDetails:o[0]||(o[0]=h=>t.$emit("close-details"))},null,8,["is-loading","order"])),(n(),d("div",{key:i.p2pOrderStore.order.status,class:"mt-4"},[e("div",is,[e("div",ls,[e("button",{class:g(["px-4 py-2 text-sm font-medium focus:outline-none",{"border-b-2 border-indigo-500 text-indigo-600 dark:border-indigo-400 dark:text-indigo-300":a.currentTab==="details","text-gray-500 dark:text-gray-400":a.currentTab!=="details"}]),onClick:o[1]||(o[1]=h=>a.currentTab="details")},r(t.$t("Details")),3)]),e("div",cs,[e("button",{class:g(["px-4 py-2 text-sm font-medium focus:outline-none",{"border-b-2 border-indigo-500 text-indigo-600 dark:border-indigo-400 dark:text-indigo-300":a.currentTab==="chat","text-gray-500 dark:text-gray-400":a.currentTab!=="chat"}]),onClick:o[2]||(o[2]=h=>a.currentTab="chat")},r(t.$t("Chat")),3)]),i.p2pOrderStore.order.status!=="completed"?(n(),d("div",us,[e("button",{class:g(["px-4 py-2 text-sm font-medium focus:outline-none",{"border-b-2 border-indigo-500 text-indigo-600 dark:border-indigo-400 dark:text-indigo-300":a.currentTab==="commands","text-gray-500 dark:text-gray-400":a.currentTab!=="commands"}]),onClick:o[3]||(o[3]=h=>a.currentTab="commands")},r(t.$t("Commands")),3)])):u("",!0)]),a.currentTab==="details"?(n(),d("div",ms,[i.isLoading?(n(),d("div",hs,fs)):(n(),_(m,{key:i.p2pOrderStore.order.status,order:i.p2pOrderStore.order,"is-buyer":i.isBuyer,onTransactionSubmitted:o[4]||(o[4]=h=>c.RefreshOrder()),onTransactionConfirmed:o[5]||(o[5]=h=>c.RefreshOrder())},null,8,["order","is-buyer"]))])):u("",!0),a.currentTab==="chat"?(n(),d("div",ys,[i.isLoading?u("",!0):(n(),_(w,{key:0,order:i.p2pOrderStore.order,"is-buyer":i.isBuyer},null,8,["order","is-buyer"]))])):u("",!0),a.currentTab==="commands"?(n(),d("div",_s,[i.isLoading?u("",!0):(n(),_(C,{key:i.p2pOrderStore.order.status,order:i.p2pOrderStore.order,"is-buyer":i.isBuyer,onRequestCancellation:o[6]||(o[6]=h=>c.RefreshOrder())},null,8,["order","is-buyer"]))])):u("",!0)]))],64))])}const Ts=v(ss,[["render",gs]]);export{Ts as default};
