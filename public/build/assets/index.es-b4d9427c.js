import{_ as H_}from"./preload-helper-f61836a9.js";import{g as ra,a as jd,c as Yr}from"./_commonjsHelpers-de833af9.js";import{w as K_}from"./index-a526c5e9.js";var Cu={exports:{}},$n=typeof Reflect=="object"?Reflect:null,Ql=$n&&typeof $n.apply=="function"?$n.apply:function(e,t,s){return Function.prototype.apply.call(e,t,s)},qo;$n&&typeof $n.ownKeys=="function"?qo=$n.ownKeys:Object.getOwnPropertySymbols?qo=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:qo=function(e){return Object.getOwnPropertyNames(e)};function k_(i){console&&console.warn&&console.warn(i)}var Bd=Number.isNaN||function(e){return e!==e};function st(){st.init.call(this)}Cu.exports=st;Cu.exports.once=Y_;st.EventEmitter=st;st.prototype._events=void 0;st.prototype._eventsCount=0;st.prototype._maxListeners=void 0;var ef=10;function ia(i){if(typeof i!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof i)}Object.defineProperty(st,"defaultMaxListeners",{enumerable:!0,get:function(){return ef},set:function(i){if(typeof i!="number"||i<0||Bd(i))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+i+".");ef=i}});st.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};st.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||Bd(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function zd(i){return i._maxListeners===void 0?st.defaultMaxListeners:i._maxListeners}st.prototype.getMaxListeners=function(){return zd(this)};st.prototype.emit=function(e){for(var t=[],s=1;s<arguments.length;s++)t.push(arguments[s]);var o=e==="error",c=this._events;if(c!==void 0)o=o&&c.error===void 0;else if(!o)return!1;if(o){var f;if(t.length>0&&(f=t[0]),f instanceof Error)throw f;var d=new Error("Unhandled error."+(f?" ("+f.message+")":""));throw d.context=f,d}var y=c[e];if(y===void 0)return!1;if(typeof y=="function")Ql(y,this,t);else for(var p=y.length,m=Vd(y,p),s=0;s<p;++s)Ql(m[s],this,t);return!0};function qd(i,e,t,s){var o,c,f;if(ia(t),c=i._events,c===void 0?(c=i._events=Object.create(null),i._eventsCount=0):(c.newListener!==void 0&&(i.emit("newListener",e,t.listener?t.listener:t),c=i._events),f=c[e]),f===void 0)f=c[e]=t,++i._eventsCount;else if(typeof f=="function"?f=c[e]=s?[t,f]:[f,t]:s?f.unshift(t):f.push(t),o=zd(i),o>0&&f.length>o&&!f.warned){f.warned=!0;var d=new Error("Possible EventEmitter memory leak detected. "+f.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");d.name="MaxListenersExceededWarning",d.emitter=i,d.type=e,d.count=f.length,k_(d)}return i}st.prototype.addListener=function(e,t){return qd(this,e,t,!1)};st.prototype.on=st.prototype.addListener;st.prototype.prependListener=function(e,t){return qd(this,e,t,!0)};function V_(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function Hd(i,e,t){var s={fired:!1,wrapFn:void 0,target:i,type:e,listener:t},o=V_.bind(s);return o.listener=t,s.wrapFn=o,o}st.prototype.once=function(e,t){return ia(t),this.on(e,Hd(this,e,t)),this};st.prototype.prependOnceListener=function(e,t){return ia(t),this.prependListener(e,Hd(this,e,t)),this};st.prototype.removeListener=function(e,t){var s,o,c,f,d;if(ia(t),o=this._events,o===void 0)return this;if(s=o[e],s===void 0)return this;if(s===t||s.listener===t)--this._eventsCount===0?this._events=Object.create(null):(delete o[e],o.removeListener&&this.emit("removeListener",e,s.listener||t));else if(typeof s!="function"){for(c=-1,f=s.length-1;f>=0;f--)if(s[f]===t||s[f].listener===t){d=s[f].listener,c=f;break}if(c<0)return this;c===0?s.shift():W_(s,c),s.length===1&&(o[e]=s[0]),o.removeListener!==void 0&&this.emit("removeListener",e,d||t)}return this};st.prototype.off=st.prototype.removeListener;st.prototype.removeAllListeners=function(e){var t,s,o;if(s=this._events,s===void 0)return this;if(s.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):s[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete s[e]),this;if(arguments.length===0){var c=Object.keys(s),f;for(o=0;o<c.length;++o)f=c[o],f!=="removeListener"&&this.removeAllListeners(f);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(t=s[e],typeof t=="function")this.removeListener(e,t);else if(t!==void 0)for(o=t.length-1;o>=0;o--)this.removeListener(e,t[o]);return this};function Kd(i,e,t){var s=i._events;if(s===void 0)return[];var o=s[e];return o===void 0?[]:typeof o=="function"?t?[o.listener||o]:[o]:t?G_(o):Vd(o,o.length)}st.prototype.listeners=function(e){return Kd(this,e,!0)};st.prototype.rawListeners=function(e){return Kd(this,e,!1)};st.listenerCount=function(i,e){return typeof i.listenerCount=="function"?i.listenerCount(e):kd.call(i,e)};st.prototype.listenerCount=kd;function kd(i){var e=this._events;if(e!==void 0){var t=e[i];if(typeof t=="function")return 1;if(t!==void 0)return t.length}return 0}st.prototype.eventNames=function(){return this._eventsCount>0?qo(this._events):[]};function Vd(i,e){for(var t=new Array(e),s=0;s<e;++s)t[s]=i[s];return t}function W_(i,e){for(;e+1<i.length;e++)i[e]=i[e+1];i.pop()}function G_(i){for(var e=new Array(i.length),t=0;t<e.length;++t)e[t]=i[t].listener||i[t];return e}function Y_(i,e){return new Promise(function(t,s){function o(f){i.removeListener(e,c),s(f)}function c(){typeof i.removeListener=="function"&&i.removeListener("error",o),t([].slice.call(arguments))}Wd(i,e,c,{once:!0}),e!=="error"&&J_(i,o,{once:!0})})}function J_(i,e,t){typeof i.on=="function"&&Wd(i,"error",e,t)}function Wd(i,e,t,s){if(typeof i.on=="function")s.once?i.once(e,t):i.on(e,t);else if(typeof i.addEventListener=="function")i.addEventListener(e,function o(c){s.once&&i.removeEventListener(e,o),t(c)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof i)}var _r=Cu.exports;const Tu=ra(_r);var Nu={},na={},Ue={},Gd={};(function(i){Object.defineProperty(i,"__esModule",{value:!0});function e(d,y){var p=d>>>16&65535,m=d&65535,D=y>>>16&65535,A=y&65535;return m*A+(p*A+m*D<<16>>>0)|0}i.mul=Math.imul||e;function t(d,y){return d+y|0}i.add=t;function s(d,y){return d-y|0}i.sub=s;function o(d,y){return d<<y|d>>>32-y}i.rotl=o;function c(d,y){return d<<32-y|d>>>y}i.rotr=c;function f(d){return typeof d=="number"&&isFinite(d)&&Math.floor(d)===d}i.isInteger=Number.isInteger||f,i.MAX_SAFE_INTEGER=9007199254740991,i.isSafeInteger=function(d){return i.isInteger(d)&&d>=-i.MAX_SAFE_INTEGER&&d<=i.MAX_SAFE_INTEGER}})(Gd);Object.defineProperty(Ue,"__esModule",{value:!0});var Yd=Gd;function X_(i,e){return e===void 0&&(e=0),(i[e+0]<<8|i[e+1])<<16>>16}Ue.readInt16BE=X_;function Z_(i,e){return e===void 0&&(e=0),(i[e+0]<<8|i[e+1])>>>0}Ue.readUint16BE=Z_;function Q_(i,e){return e===void 0&&(e=0),(i[e+1]<<8|i[e])<<16>>16}Ue.readInt16LE=Q_;function eb(i,e){return e===void 0&&(e=0),(i[e+1]<<8|i[e])>>>0}Ue.readUint16LE=eb;function Jd(i,e,t){return e===void 0&&(e=new Uint8Array(2)),t===void 0&&(t=0),e[t+0]=i>>>8,e[t+1]=i>>>0,e}Ue.writeUint16BE=Jd;Ue.writeInt16BE=Jd;function Xd(i,e,t){return e===void 0&&(e=new Uint8Array(2)),t===void 0&&(t=0),e[t+0]=i>>>0,e[t+1]=i>>>8,e}Ue.writeUint16LE=Xd;Ue.writeInt16LE=Xd;function au(i,e){return e===void 0&&(e=0),i[e]<<24|i[e+1]<<16|i[e+2]<<8|i[e+3]}Ue.readInt32BE=au;function cu(i,e){return e===void 0&&(e=0),(i[e]<<24|i[e+1]<<16|i[e+2]<<8|i[e+3])>>>0}Ue.readUint32BE=cu;function uu(i,e){return e===void 0&&(e=0),i[e+3]<<24|i[e+2]<<16|i[e+1]<<8|i[e]}Ue.readInt32LE=uu;function hu(i,e){return e===void 0&&(e=0),(i[e+3]<<24|i[e+2]<<16|i[e+1]<<8|i[e])>>>0}Ue.readUint32LE=hu;function Go(i,e,t){return e===void 0&&(e=new Uint8Array(4)),t===void 0&&(t=0),e[t+0]=i>>>24,e[t+1]=i>>>16,e[t+2]=i>>>8,e[t+3]=i>>>0,e}Ue.writeUint32BE=Go;Ue.writeInt32BE=Go;function Yo(i,e,t){return e===void 0&&(e=new Uint8Array(4)),t===void 0&&(t=0),e[t+0]=i>>>0,e[t+1]=i>>>8,e[t+2]=i>>>16,e[t+3]=i>>>24,e}Ue.writeUint32LE=Yo;Ue.writeInt32LE=Yo;function tb(i,e){e===void 0&&(e=0);var t=au(i,e),s=au(i,e+4);return t*4294967296+s-(s>>31)*4294967296}Ue.readInt64BE=tb;function rb(i,e){e===void 0&&(e=0);var t=cu(i,e),s=cu(i,e+4);return t*4294967296+s}Ue.readUint64BE=rb;function ib(i,e){e===void 0&&(e=0);var t=uu(i,e),s=uu(i,e+4);return s*4294967296+t-(t>>31)*4294967296}Ue.readInt64LE=ib;function nb(i,e){e===void 0&&(e=0);var t=hu(i,e),s=hu(i,e+4);return s*4294967296+t}Ue.readUint64LE=nb;function Zd(i,e,t){return e===void 0&&(e=new Uint8Array(8)),t===void 0&&(t=0),Go(i/4294967296>>>0,e,t),Go(i>>>0,e,t+4),e}Ue.writeUint64BE=Zd;Ue.writeInt64BE=Zd;function Qd(i,e,t){return e===void 0&&(e=new Uint8Array(8)),t===void 0&&(t=0),Yo(i>>>0,e,t),Yo(i/4294967296>>>0,e,t+4),e}Ue.writeUint64LE=Qd;Ue.writeInt64LE=Qd;function sb(i,e,t){if(t===void 0&&(t=0),i%8!==0)throw new Error("readUintBE supports only bitLengths divisible by 8");if(i/8>e.length-t)throw new Error("readUintBE: array is too short for the given bitLength");for(var s=0,o=1,c=i/8+t-1;c>=t;c--)s+=e[c]*o,o*=256;return s}Ue.readUintBE=sb;function ob(i,e,t){if(t===void 0&&(t=0),i%8!==0)throw new Error("readUintLE supports only bitLengths divisible by 8");if(i/8>e.length-t)throw new Error("readUintLE: array is too short for the given bitLength");for(var s=0,o=1,c=t;c<t+i/8;c++)s+=e[c]*o,o*=256;return s}Ue.readUintLE=ob;function ab(i,e,t,s){if(t===void 0&&(t=new Uint8Array(i/8)),s===void 0&&(s=0),i%8!==0)throw new Error("writeUintBE supports only bitLengths divisible by 8");if(!Yd.isSafeInteger(e))throw new Error("writeUintBE value must be an integer");for(var o=1,c=i/8+s-1;c>=s;c--)t[c]=e/o&255,o*=256;return t}Ue.writeUintBE=ab;function cb(i,e,t,s){if(t===void 0&&(t=new Uint8Array(i/8)),s===void 0&&(s=0),i%8!==0)throw new Error("writeUintLE supports only bitLengths divisible by 8");if(!Yd.isSafeInteger(e))throw new Error("writeUintLE value must be an integer");for(var o=1,c=s;c<s+i/8;c++)t[c]=e/o&255,o*=256;return t}Ue.writeUintLE=cb;function ub(i,e){e===void 0&&(e=0);var t=new DataView(i.buffer,i.byteOffset,i.byteLength);return t.getFloat32(e)}Ue.readFloat32BE=ub;function hb(i,e){e===void 0&&(e=0);var t=new DataView(i.buffer,i.byteOffset,i.byteLength);return t.getFloat32(e,!0)}Ue.readFloat32LE=hb;function lb(i,e){e===void 0&&(e=0);var t=new DataView(i.buffer,i.byteOffset,i.byteLength);return t.getFloat64(e)}Ue.readFloat64BE=lb;function fb(i,e){e===void 0&&(e=0);var t=new DataView(i.buffer,i.byteOffset,i.byteLength);return t.getFloat64(e,!0)}Ue.readFloat64LE=fb;function db(i,e,t){e===void 0&&(e=new Uint8Array(4)),t===void 0&&(t=0);var s=new DataView(e.buffer,e.byteOffset,e.byteLength);return s.setFloat32(t,i),e}Ue.writeFloat32BE=db;function pb(i,e,t){e===void 0&&(e=new Uint8Array(4)),t===void 0&&(t=0);var s=new DataView(e.buffer,e.byteOffset,e.byteLength);return s.setFloat32(t,i,!0),e}Ue.writeFloat32LE=pb;function gb(i,e,t){e===void 0&&(e=new Uint8Array(8)),t===void 0&&(t=0);var s=new DataView(e.buffer,e.byteOffset,e.byteLength);return s.setFloat64(t,i),e}Ue.writeFloat64BE=gb;function yb(i,e,t){e===void 0&&(e=new Uint8Array(8)),t===void 0&&(t=0);var s=new DataView(e.buffer,e.byteOffset,e.byteLength);return s.setFloat64(t,i,!0),e}Ue.writeFloat64LE=yb;var Or={};Object.defineProperty(Or,"__esModule",{value:!0});function vb(i){for(var e=0;e<i.length;e++)i[e]=0;return i}Or.wipe=vb;Object.defineProperty(na,"__esModule",{value:!0});var er=Ue,lu=Or,mb=20;function _b(i,e,t){for(var s=1634760805,o=857760878,c=2036477234,f=1797285236,d=t[3]<<24|t[2]<<16|t[1]<<8|t[0],y=t[7]<<24|t[6]<<16|t[5]<<8|t[4],p=t[11]<<24|t[10]<<16|t[9]<<8|t[8],m=t[15]<<24|t[14]<<16|t[13]<<8|t[12],D=t[19]<<24|t[18]<<16|t[17]<<8|t[16],A=t[23]<<24|t[22]<<16|t[21]<<8|t[20],O=t[27]<<24|t[26]<<16|t[25]<<8|t[24],S=t[31]<<24|t[30]<<16|t[29]<<8|t[28],k=e[3]<<24|e[2]<<16|e[1]<<8|e[0],H=e[7]<<24|e[6]<<16|e[5]<<8|e[4],re=e[11]<<24|e[10]<<16|e[9]<<8|e[8],F=e[15]<<24|e[14]<<16|e[13]<<8|e[12],U=s,I=o,C=c,T=f,h=d,b=y,Q=p,ne=m,ue=D,ge=A,ye=O,E=S,N=k,Z=H,J=re,K=F,V=0;V<mb;V+=2)U=U+h|0,N^=U,N=N>>>32-16|N<<16,ue=ue+N|0,h^=ue,h=h>>>32-12|h<<12,I=I+b|0,Z^=I,Z=Z>>>32-16|Z<<16,ge=ge+Z|0,b^=ge,b=b>>>32-12|b<<12,C=C+Q|0,J^=C,J=J>>>32-16|J<<16,ye=ye+J|0,Q^=ye,Q=Q>>>32-12|Q<<12,T=T+ne|0,K^=T,K=K>>>32-16|K<<16,E=E+K|0,ne^=E,ne=ne>>>32-12|ne<<12,C=C+Q|0,J^=C,J=J>>>32-8|J<<8,ye=ye+J|0,Q^=ye,Q=Q>>>32-7|Q<<7,T=T+ne|0,K^=T,K=K>>>32-8|K<<8,E=E+K|0,ne^=E,ne=ne>>>32-7|ne<<7,I=I+b|0,Z^=I,Z=Z>>>32-8|Z<<8,ge=ge+Z|0,b^=ge,b=b>>>32-7|b<<7,U=U+h|0,N^=U,N=N>>>32-8|N<<8,ue=ue+N|0,h^=ue,h=h>>>32-7|h<<7,U=U+b|0,K^=U,K=K>>>32-16|K<<16,ye=ye+K|0,b^=ye,b=b>>>32-12|b<<12,I=I+Q|0,N^=I,N=N>>>32-16|N<<16,E=E+N|0,Q^=E,Q=Q>>>32-12|Q<<12,C=C+ne|0,Z^=C,Z=Z>>>32-16|Z<<16,ue=ue+Z|0,ne^=ue,ne=ne>>>32-12|ne<<12,T=T+h|0,J^=T,J=J>>>32-16|J<<16,ge=ge+J|0,h^=ge,h=h>>>32-12|h<<12,C=C+ne|0,Z^=C,Z=Z>>>32-8|Z<<8,ue=ue+Z|0,ne^=ue,ne=ne>>>32-7|ne<<7,T=T+h|0,J^=T,J=J>>>32-8|J<<8,ge=ge+J|0,h^=ge,h=h>>>32-7|h<<7,I=I+Q|0,N^=I,N=N>>>32-8|N<<8,E=E+N|0,Q^=E,Q=Q>>>32-7|Q<<7,U=U+b|0,K^=U,K=K>>>32-8|K<<8,ye=ye+K|0,b^=ye,b=b>>>32-7|b<<7;er.writeUint32LE(U+s|0,i,0),er.writeUint32LE(I+o|0,i,4),er.writeUint32LE(C+c|0,i,8),er.writeUint32LE(T+f|0,i,12),er.writeUint32LE(h+d|0,i,16),er.writeUint32LE(b+y|0,i,20),er.writeUint32LE(Q+p|0,i,24),er.writeUint32LE(ne+m|0,i,28),er.writeUint32LE(ue+D|0,i,32),er.writeUint32LE(ge+A|0,i,36),er.writeUint32LE(ye+O|0,i,40),er.writeUint32LE(E+S|0,i,44),er.writeUint32LE(N+k|0,i,48),er.writeUint32LE(Z+H|0,i,52),er.writeUint32LE(J+re|0,i,56),er.writeUint32LE(K+F|0,i,60)}function ep(i,e,t,s,o){if(o===void 0&&(o=0),i.length!==32)throw new Error("ChaCha: key size must be 32 bytes");if(s.length<t.length)throw new Error("ChaCha: destination is shorter than source");var c,f;if(o===0){if(e.length!==8&&e.length!==12)throw new Error("ChaCha nonce must be 8 or 12 bytes");c=new Uint8Array(16),f=c.length-e.length,c.set(e,f)}else{if(e.length!==16)throw new Error("ChaCha nonce with counter must be 16 bytes");c=e,f=o}for(var d=new Uint8Array(64),y=0;y<t.length;y+=64){_b(d,c,i);for(var p=y;p<y+64&&p<t.length;p++)s[p]=t[p]^d[p-y];wb(c,0,f)}return lu.wipe(d),o===0&&lu.wipe(c),s}na.streamXOR=ep;function bb(i,e,t,s){return s===void 0&&(s=0),lu.wipe(t),ep(i,e,t,t,s)}na.stream=bb;function wb(i,e,t){for(var s=1;t--;)s=s+(i[e]&255)|0,i[e]=s&255,s>>>=8,e++;if(s>0)throw new Error("ChaCha: counter overflow")}var tp={},Li={};Object.defineProperty(Li,"__esModule",{value:!0});function Eb(i,e,t){return~(i-1)&e|i-1&t}Li.select=Eb;function Db(i,e){return(i|0)-(e|0)-1>>>31&1}Li.lessOrEqual=Db;function rp(i,e){if(i.length!==e.length)return 0;for(var t=0,s=0;s<i.length;s++)t|=i[s]^e[s];return 1&t-1>>>8}Li.compare=rp;function Ib(i,e){return i.length===0||e.length===0?!1:rp(i,e)!==0}Li.equal=Ib;(function(i){Object.defineProperty(i,"__esModule",{value:!0});var e=Li,t=Or;i.DIGEST_LENGTH=16;var s=function(){function f(d){this.digestLength=i.DIGEST_LENGTH,this._buffer=new Uint8Array(16),this._r=new Uint16Array(10),this._h=new Uint16Array(10),this._pad=new Uint16Array(8),this._leftover=0,this._fin=0,this._finished=!1;var y=d[0]|d[1]<<8;this._r[0]=y&8191;var p=d[2]|d[3]<<8;this._r[1]=(y>>>13|p<<3)&8191;var m=d[4]|d[5]<<8;this._r[2]=(p>>>10|m<<6)&7939;var D=d[6]|d[7]<<8;this._r[3]=(m>>>7|D<<9)&8191;var A=d[8]|d[9]<<8;this._r[4]=(D>>>4|A<<12)&255,this._r[5]=A>>>1&8190;var O=d[10]|d[11]<<8;this._r[6]=(A>>>14|O<<2)&8191;var S=d[12]|d[13]<<8;this._r[7]=(O>>>11|S<<5)&8065;var k=d[14]|d[15]<<8;this._r[8]=(S>>>8|k<<8)&8191,this._r[9]=k>>>5&127,this._pad[0]=d[16]|d[17]<<8,this._pad[1]=d[18]|d[19]<<8,this._pad[2]=d[20]|d[21]<<8,this._pad[3]=d[22]|d[23]<<8,this._pad[4]=d[24]|d[25]<<8,this._pad[5]=d[26]|d[27]<<8,this._pad[6]=d[28]|d[29]<<8,this._pad[7]=d[30]|d[31]<<8}return f.prototype._blocks=function(d,y,p){for(var m=this._fin?0:2048,D=this._h[0],A=this._h[1],O=this._h[2],S=this._h[3],k=this._h[4],H=this._h[5],re=this._h[6],F=this._h[7],U=this._h[8],I=this._h[9],C=this._r[0],T=this._r[1],h=this._r[2],b=this._r[3],Q=this._r[4],ne=this._r[5],ue=this._r[6],ge=this._r[7],ye=this._r[8],E=this._r[9];p>=16;){var N=d[y+0]|d[y+1]<<8;D+=N&8191;var Z=d[y+2]|d[y+3]<<8;A+=(N>>>13|Z<<3)&8191;var J=d[y+4]|d[y+5]<<8;O+=(Z>>>10|J<<6)&8191;var K=d[y+6]|d[y+7]<<8;S+=(J>>>7|K<<9)&8191;var V=d[y+8]|d[y+9]<<8;k+=(K>>>4|V<<12)&8191,H+=V>>>1&8191;var ee=d[y+10]|d[y+11]<<8;re+=(V>>>14|ee<<2)&8191;var ie=d[y+12]|d[y+13]<<8;F+=(ee>>>11|ie<<5)&8191;var De=d[y+14]|d[y+15]<<8;U+=(ie>>>8|De<<8)&8191,I+=De>>>5|m;var oe=0,Ie=oe;Ie+=D*C,Ie+=A*(5*E),Ie+=O*(5*ye),Ie+=S*(5*ge),Ie+=k*(5*ue),oe=Ie>>>13,Ie&=8191,Ie+=H*(5*ne),Ie+=re*(5*Q),Ie+=F*(5*b),Ie+=U*(5*h),Ie+=I*(5*T),oe+=Ie>>>13,Ie&=8191;var le=oe;le+=D*T,le+=A*C,le+=O*(5*E),le+=S*(5*ye),le+=k*(5*ge),oe=le>>>13,le&=8191,le+=H*(5*ue),le+=re*(5*ne),le+=F*(5*Q),le+=U*(5*b),le+=I*(5*h),oe+=le>>>13,le&=8191;var Ce=oe;Ce+=D*h,Ce+=A*T,Ce+=O*C,Ce+=S*(5*E),Ce+=k*(5*ye),oe=Ce>>>13,Ce&=8191,Ce+=H*(5*ge),Ce+=re*(5*ue),Ce+=F*(5*ne),Ce+=U*(5*Q),Ce+=I*(5*b),oe+=Ce>>>13,Ce&=8191;var z=oe;z+=D*b,z+=A*h,z+=O*T,z+=S*C,z+=k*(5*E),oe=z>>>13,z&=8191,z+=H*(5*ye),z+=re*(5*ge),z+=F*(5*ue),z+=U*(5*ne),z+=I*(5*Q),oe+=z>>>13,z&=8191;var B=oe;B+=D*Q,B+=A*b,B+=O*h,B+=S*T,B+=k*C,oe=B>>>13,B&=8191,B+=H*(5*E),B+=re*(5*ye),B+=F*(5*ge),B+=U*(5*ue),B+=I*(5*ne),oe+=B>>>13,B&=8191;var $=oe;$+=D*ne,$+=A*Q,$+=O*b,$+=S*h,$+=k*T,oe=$>>>13,$&=8191,$+=H*C,$+=re*(5*E),$+=F*(5*ye),$+=U*(5*ge),$+=I*(5*ue),oe+=$>>>13,$&=8191;var l=oe;l+=D*ue,l+=A*ne,l+=O*Q,l+=S*b,l+=k*h,oe=l>>>13,l&=8191,l+=H*T,l+=re*C,l+=F*(5*E),l+=U*(5*ye),l+=I*(5*ge),oe+=l>>>13,l&=8191;var P=oe;P+=D*ge,P+=A*ue,P+=O*ne,P+=S*Q,P+=k*b,oe=P>>>13,P&=8191,P+=H*h,P+=re*T,P+=F*C,P+=U*(5*E),P+=I*(5*ye),oe+=P>>>13,P&=8191;var se=oe;se+=D*ye,se+=A*ge,se+=O*ue,se+=S*ne,se+=k*Q,oe=se>>>13,se&=8191,se+=H*b,se+=re*h,se+=F*T,se+=U*C,se+=I*(5*E),oe+=se>>>13,se&=8191;var he=oe;he+=D*E,he+=A*ye,he+=O*ge,he+=S*ue,he+=k*ne,oe=he>>>13,he&=8191,he+=H*Q,he+=re*b,he+=F*h,he+=U*T,he+=I*C,oe+=he>>>13,he&=8191,oe=(oe<<2)+oe|0,oe=oe+Ie|0,Ie=oe&8191,oe=oe>>>13,le+=oe,D=Ie,A=le,O=Ce,S=z,k=B,H=$,re=l,F=P,U=se,I=he,y+=16,p-=16}this._h[0]=D,this._h[1]=A,this._h[2]=O,this._h[3]=S,this._h[4]=k,this._h[5]=H,this._h[6]=re,this._h[7]=F,this._h[8]=U,this._h[9]=I},f.prototype.finish=function(d,y){y===void 0&&(y=0);var p=new Uint16Array(10),m,D,A,O;if(this._leftover){for(O=this._leftover,this._buffer[O++]=1;O<16;O++)this._buffer[O]=0;this._fin=1,this._blocks(this._buffer,0,16)}for(m=this._h[1]>>>13,this._h[1]&=8191,O=2;O<10;O++)this._h[O]+=m,m=this._h[O]>>>13,this._h[O]&=8191;for(this._h[0]+=m*5,m=this._h[0]>>>13,this._h[0]&=8191,this._h[1]+=m,m=this._h[1]>>>13,this._h[1]&=8191,this._h[2]+=m,p[0]=this._h[0]+5,m=p[0]>>>13,p[0]&=8191,O=1;O<10;O++)p[O]=this._h[O]+m,m=p[O]>>>13,p[O]&=8191;for(p[9]-=8192,D=(m^1)-1,O=0;O<10;O++)p[O]&=D;for(D=~D,O=0;O<10;O++)this._h[O]=this._h[O]&D|p[O];for(this._h[0]=(this._h[0]|this._h[1]<<13)&65535,this._h[1]=(this._h[1]>>>3|this._h[2]<<10)&65535,this._h[2]=(this._h[2]>>>6|this._h[3]<<7)&65535,this._h[3]=(this._h[3]>>>9|this._h[4]<<4)&65535,this._h[4]=(this._h[4]>>>12|this._h[5]<<1|this._h[6]<<14)&65535,this._h[5]=(this._h[6]>>>2|this._h[7]<<11)&65535,this._h[6]=(this._h[7]>>>5|this._h[8]<<8)&65535,this._h[7]=(this._h[8]>>>8|this._h[9]<<5)&65535,A=this._h[0]+this._pad[0],this._h[0]=A&65535,O=1;O<8;O++)A=(this._h[O]+this._pad[O]|0)+(A>>>16)|0,this._h[O]=A&65535;return d[y+0]=this._h[0]>>>0,d[y+1]=this._h[0]>>>8,d[y+2]=this._h[1]>>>0,d[y+3]=this._h[1]>>>8,d[y+4]=this._h[2]>>>0,d[y+5]=this._h[2]>>>8,d[y+6]=this._h[3]>>>0,d[y+7]=this._h[3]>>>8,d[y+8]=this._h[4]>>>0,d[y+9]=this._h[4]>>>8,d[y+10]=this._h[5]>>>0,d[y+11]=this._h[5]>>>8,d[y+12]=this._h[6]>>>0,d[y+13]=this._h[6]>>>8,d[y+14]=this._h[7]>>>0,d[y+15]=this._h[7]>>>8,this._finished=!0,this},f.prototype.update=function(d){var y=0,p=d.length,m;if(this._leftover){m=16-this._leftover,m>p&&(m=p);for(var D=0;D<m;D++)this._buffer[this._leftover+D]=d[y+D];if(p-=m,y+=m,this._leftover+=m,this._leftover<16)return this;this._blocks(this._buffer,0,16),this._leftover=0}if(p>=16&&(m=p-p%16,this._blocks(d,y,m),y+=m,p-=m),p){for(var D=0;D<p;D++)this._buffer[this._leftover+D]=d[y+D];this._leftover+=p}return this},f.prototype.digest=function(){if(this._finished)throw new Error("Poly1305 was finished");var d=new Uint8Array(16);return this.finish(d),d},f.prototype.clean=function(){return t.wipe(this._buffer),t.wipe(this._r),t.wipe(this._h),t.wipe(this._pad),this._leftover=0,this._fin=0,this._finished=!0,this},f}();i.Poly1305=s;function o(f,d){var y=new s(f);y.update(d);var p=y.digest();return y.clean(),p}i.oneTimeAuth=o;function c(f,d){return f.length!==i.DIGEST_LENGTH||d.length!==i.DIGEST_LENGTH?!1:e.equal(f,d)}i.equal=c})(tp);(function(i){Object.defineProperty(i,"__esModule",{value:!0});var e=na,t=tp,s=Or,o=Ue,c=Li;i.KEY_LENGTH=32,i.NONCE_LENGTH=12,i.TAG_LENGTH=16;var f=new Uint8Array(16),d=function(){function y(p){if(this.nonceLength=i.NONCE_LENGTH,this.tagLength=i.TAG_LENGTH,p.length!==i.KEY_LENGTH)throw new Error("ChaCha20Poly1305 needs 32-byte key");this._key=new Uint8Array(p)}return y.prototype.seal=function(p,m,D,A){if(p.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");var O=new Uint8Array(16);O.set(p,O.length-p.length);var S=new Uint8Array(32);e.stream(this._key,O,S,4);var k=m.length+this.tagLength,H;if(A){if(A.length!==k)throw new Error("ChaCha20Poly1305: incorrect destination length");H=A}else H=new Uint8Array(k);return e.streamXOR(this._key,O,m,H,4),this._authenticate(H.subarray(H.length-this.tagLength,H.length),S,H.subarray(0,H.length-this.tagLength),D),s.wipe(O),H},y.prototype.open=function(p,m,D,A){if(p.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");if(m.length<this.tagLength)return null;var O=new Uint8Array(16);O.set(p,O.length-p.length);var S=new Uint8Array(32);e.stream(this._key,O,S,4);var k=new Uint8Array(this.tagLength);if(this._authenticate(k,S,m.subarray(0,m.length-this.tagLength),D),!c.equal(k,m.subarray(m.length-this.tagLength,m.length)))return null;var H=m.length-this.tagLength,re;if(A){if(A.length!==H)throw new Error("ChaCha20Poly1305: incorrect destination length");re=A}else re=new Uint8Array(H);return e.streamXOR(this._key,O,m.subarray(0,m.length-this.tagLength),re,4),s.wipe(O),re},y.prototype.clean=function(){return s.wipe(this._key),this},y.prototype._authenticate=function(p,m,D,A){var O=new t.Poly1305(m);A&&(O.update(A),A.length%16>0&&O.update(f.subarray(A.length%16))),O.update(D),D.length%16>0&&O.update(f.subarray(D.length%16));var S=new Uint8Array(8);A&&o.writeUint64LE(A.length,S),O.update(S),o.writeUint64LE(D.length,S),O.update(S);for(var k=O.digest(),H=0;H<k.length;H++)p[H]=k[H];O.clean(),s.wipe(k),s.wipe(S)},y}();i.ChaCha20Poly1305=d})(Nu);var ip={},Es={},Ru={};Object.defineProperty(Ru,"__esModule",{value:!0});function Sb(i){return typeof i.saveState<"u"&&typeof i.restoreState<"u"&&typeof i.cleanSavedState<"u"}Ru.isSerializableHash=Sb;Object.defineProperty(Es,"__esModule",{value:!0});var ri=Ru,xb=Li,Ob=Or,np=function(){function i(e,t){this._finished=!1,this._inner=new e,this._outer=new e,this.blockSize=this._outer.blockSize,this.digestLength=this._outer.digestLength;var s=new Uint8Array(this.blockSize);t.length>this.blockSize?this._inner.update(t).finish(s).clean():s.set(t);for(var o=0;o<s.length;o++)s[o]^=54;this._inner.update(s);for(var o=0;o<s.length;o++)s[o]^=106;this._outer.update(s),ri.isSerializableHash(this._inner)&&ri.isSerializableHash(this._outer)&&(this._innerKeyedState=this._inner.saveState(),this._outerKeyedState=this._outer.saveState()),Ob.wipe(s)}return i.prototype.reset=function(){if(!ri.isSerializableHash(this._inner)||!ri.isSerializableHash(this._outer))throw new Error("hmac: can't reset() because hash doesn't implement restoreState()");return this._inner.restoreState(this._innerKeyedState),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},i.prototype.clean=function(){ri.isSerializableHash(this._inner)&&this._inner.cleanSavedState(this._innerKeyedState),ri.isSerializableHash(this._outer)&&this._outer.cleanSavedState(this._outerKeyedState),this._inner.clean(),this._outer.clean()},i.prototype.update=function(e){return this._inner.update(e),this},i.prototype.finish=function(e){return this._finished?(this._outer.finish(e),this):(this._inner.finish(e),this._outer.update(e.subarray(0,this.digestLength)).finish(e),this._finished=!0,this)},i.prototype.digest=function(){var e=new Uint8Array(this.digestLength);return this.finish(e),e},i.prototype.saveState=function(){if(!ri.isSerializableHash(this._inner))throw new Error("hmac: can't saveState() because hash doesn't implement it");return this._inner.saveState()},i.prototype.restoreState=function(e){if(!ri.isSerializableHash(this._inner)||!ri.isSerializableHash(this._outer))throw new Error("hmac: can't restoreState() because hash doesn't implement it");return this._inner.restoreState(e),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},i.prototype.cleanSavedState=function(e){if(!ri.isSerializableHash(this._inner))throw new Error("hmac: can't cleanSavedState() because hash doesn't implement it");this._inner.cleanSavedState(e)},i}();Es.HMAC=np;function Ab(i,e,t){var s=new np(i,e);s.update(t);var o=s.digest();return s.clean(),o}Es.hmac=Ab;Es.equal=xb.equal;Object.defineProperty(ip,"__esModule",{value:!0});var tf=Es,rf=Or,Pb=function(){function i(e,t,s,o){s===void 0&&(s=new Uint8Array(0)),this._counter=new Uint8Array(1),this._hash=e,this._info=o;var c=tf.hmac(this._hash,s,t);this._hmac=new tf.HMAC(e,c),this._buffer=new Uint8Array(this._hmac.digestLength),this._bufpos=this._buffer.length}return i.prototype._fillBuffer=function(){this._counter[0]++;var e=this._counter[0];if(e===0)throw new Error("hkdf: cannot expand more");this._hmac.reset(),e>1&&this._hmac.update(this._buffer),this._info&&this._hmac.update(this._info),this._hmac.update(this._counter),this._hmac.finish(this._buffer),this._bufpos=0},i.prototype.expand=function(e){for(var t=new Uint8Array(e),s=0;s<t.length;s++)this._bufpos===this._buffer.length&&this._fillBuffer(),t[s]=this._buffer[this._bufpos++];return t},i.prototype.clean=function(){this._hmac.clean(),rf.wipe(this._buffer),rf.wipe(this._counter),this._bufpos=0},i}(),Cb=ip.HKDF=Pb,Mn={},sa={},oa={};Object.defineProperty(oa,"__esModule",{value:!0});oa.BrowserRandomSource=void 0;const nf=65536;class Tb{constructor(){this.isAvailable=!1,this.isInstantiated=!1;const e=typeof self<"u"?self.crypto||self.msCrypto:null;e&&e.getRandomValues!==void 0&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Browser random byte generator is not available.");const t=new Uint8Array(e);for(let s=0;s<t.length;s+=nf)this._crypto.getRandomValues(t.subarray(s,s+Math.min(t.length-s,nf)));return t}}oa.BrowserRandomSource=Tb;function Nb(i){throw new Error('Could not dynamically require "'+i+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var aa={};Object.defineProperty(aa,"__esModule",{value:!0});aa.NodeRandomSource=void 0;const Rb=Or;class Fb{constructor(){if(this.isAvailable=!1,this.isInstantiated=!1,typeof Nb<"u"){const e=K_;e&&e.randomBytes&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Node.js random byte generator is not available.");let t=this._crypto.randomBytes(e);if(t.length!==e)throw new Error("NodeRandomSource: got fewer bytes than requested");const s=new Uint8Array(e);for(let o=0;o<s.length;o++)s[o]=t[o];return(0,Rb.wipe)(t),s}}aa.NodeRandomSource=Fb;Object.defineProperty(sa,"__esModule",{value:!0});sa.SystemRandomSource=void 0;const $b=oa,Ub=aa;class Lb{constructor(){if(this.isAvailable=!1,this.name="",this._source=new $b.BrowserRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Browser";return}if(this._source=new Ub.NodeRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Node";return}}randomBytes(e){if(!this.isAvailable)throw new Error("System random byte generator is not available.");return this._source.randomBytes(e)}}sa.SystemRandomSource=Lb;(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.randomStringForEntropy=i.randomString=i.randomUint32=i.randomBytes=i.defaultRandomSource=void 0;const e=sa,t=Ue,s=Or;i.defaultRandomSource=new e.SystemRandomSource;function o(p,m=i.defaultRandomSource){return m.randomBytes(p)}i.randomBytes=o;function c(p=i.defaultRandomSource){const m=o(4,p),D=(0,t.readUint32LE)(m);return(0,s.wipe)(m),D}i.randomUint32=c;const f="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function d(p,m=f,D=i.defaultRandomSource){if(m.length<2)throw new Error("randomString charset is too short");if(m.length>256)throw new Error("randomString charset is too long");let A="";const O=m.length,S=256-256%O;for(;p>0;){const k=o(Math.ceil(p*256/S),D);for(let H=0;H<k.length&&p>0;H++){const re=k[H];re<S&&(A+=m.charAt(re%O),p--)}(0,s.wipe)(k)}return A}i.randomString=d;function y(p,m=f,D=i.defaultRandomSource){const A=Math.ceil(p/(Math.log(m.length)/Math.LN2));return d(A,m,D)}i.randomStringForEntropy=y})(Mn);var ca={};(function(i){Object.defineProperty(i,"__esModule",{value:!0});var e=Ue,t=Or;i.DIGEST_LENGTH=32,i.BLOCK_SIZE=64;var s=function(){function d(){this.digestLength=i.DIGEST_LENGTH,this.blockSize=i.BLOCK_SIZE,this._state=new Int32Array(8),this._temp=new Int32Array(64),this._buffer=new Uint8Array(128),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return d.prototype._initState=function(){this._state[0]=1779033703,this._state[1]=3144134277,this._state[2]=1013904242,this._state[3]=2773480762,this._state[4]=1359893119,this._state[5]=2600822924,this._state[6]=528734635,this._state[7]=1541459225},d.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},d.prototype.clean=function(){t.wipe(this._buffer),t.wipe(this._temp),this.reset()},d.prototype.update=function(y,p){if(p===void 0&&(p=y.length),this._finished)throw new Error("SHA256: can't update because hash was finished.");var m=0;if(this._bytesHashed+=p,this._bufferLength>0){for(;this._bufferLength<this.blockSize&&p>0;)this._buffer[this._bufferLength++]=y[m++],p--;this._bufferLength===this.blockSize&&(c(this._temp,this._state,this._buffer,0,this.blockSize),this._bufferLength=0)}for(p>=this.blockSize&&(m=c(this._temp,this._state,y,m,p),p%=this.blockSize);p>0;)this._buffer[this._bufferLength++]=y[m++],p--;return this},d.prototype.finish=function(y){if(!this._finished){var p=this._bytesHashed,m=this._bufferLength,D=p/536870912|0,A=p<<3,O=p%64<56?64:128;this._buffer[m]=128;for(var S=m+1;S<O-8;S++)this._buffer[S]=0;e.writeUint32BE(D,this._buffer,O-8),e.writeUint32BE(A,this._buffer,O-4),c(this._temp,this._state,this._buffer,0,O),this._finished=!0}for(var S=0;S<this.digestLength/4;S++)e.writeUint32BE(this._state[S],y,S*4);return this},d.prototype.digest=function(){var y=new Uint8Array(this.digestLength);return this.finish(y),y},d.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{state:new Int32Array(this._state),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},d.prototype.restoreState=function(y){return this._state.set(y.state),this._bufferLength=y.bufferLength,y.buffer&&this._buffer.set(y.buffer),this._bytesHashed=y.bytesHashed,this._finished=!1,this},d.prototype.cleanSavedState=function(y){t.wipe(y.state),y.buffer&&t.wipe(y.buffer),y.bufferLength=0,y.bytesHashed=0},d}();i.SHA256=s;var o=new Int32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function c(d,y,p,m,D){for(;D>=64;){for(var A=y[0],O=y[1],S=y[2],k=y[3],H=y[4],re=y[5],F=y[6],U=y[7],I=0;I<16;I++){var C=m+I*4;d[I]=e.readUint32BE(p,C)}for(var I=16;I<64;I++){var T=d[I-2],h=(T>>>17|T<<32-17)^(T>>>19|T<<32-19)^T>>>10;T=d[I-15];var b=(T>>>7|T<<32-7)^(T>>>18|T<<32-18)^T>>>3;d[I]=(h+d[I-7]|0)+(b+d[I-16]|0)}for(var I=0;I<64;I++){var h=(((H>>>6|H<<26)^(H>>>11|H<<21)^(H>>>25|H<<7))+(H&re^~H&F)|0)+(U+(o[I]+d[I]|0)|0)|0,b=((A>>>2|A<<32-2)^(A>>>13|A<<32-13)^(A>>>22|A<<32-22))+(A&O^A&S^O&S)|0;U=F,F=re,re=H,H=k+h|0,k=S,S=O,O=A,A=h+b|0}y[0]+=A,y[1]+=O,y[2]+=S,y[3]+=k,y[4]+=H,y[5]+=re,y[6]+=F,y[7]+=U,m+=64,D-=64}return m}function f(d){var y=new s;y.update(d);var p=y.digest();return y.clean(),p}i.hash=f})(ca);var Fu={};(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.sharedKey=i.generateKeyPair=i.generateKeyPairFromSeed=i.scalarMultBase=i.scalarMult=i.SHARED_KEY_LENGTH=i.SECRET_KEY_LENGTH=i.PUBLIC_KEY_LENGTH=void 0;const e=Mn,t=Or;i.PUBLIC_KEY_LENGTH=32,i.SECRET_KEY_LENGTH=32,i.SHARED_KEY_LENGTH=32;function s(I){const C=new Float64Array(16);if(I)for(let T=0;T<I.length;T++)C[T]=I[T];return C}const o=new Uint8Array(32);o[0]=9;const c=s([56129,1]);function f(I){let C=1;for(let T=0;T<16;T++){let h=I[T]+C+65535;C=Math.floor(h/65536),I[T]=h-C*65536}I[0]+=C-1+37*(C-1)}function d(I,C,T){const h=~(T-1);for(let b=0;b<16;b++){const Q=h&(I[b]^C[b]);I[b]^=Q,C[b]^=Q}}function y(I,C){const T=s(),h=s();for(let b=0;b<16;b++)h[b]=C[b];f(h),f(h),f(h);for(let b=0;b<2;b++){T[0]=h[0]-65517;for(let ne=1;ne<15;ne++)T[ne]=h[ne]-65535-(T[ne-1]>>16&1),T[ne-1]&=65535;T[15]=h[15]-32767-(T[14]>>16&1);const Q=T[15]>>16&1;T[14]&=65535,d(h,T,1-Q)}for(let b=0;b<16;b++)I[2*b]=h[b]&255,I[2*b+1]=h[b]>>8}function p(I,C){for(let T=0;T<16;T++)I[T]=C[2*T]+(C[2*T+1]<<8);I[15]&=32767}function m(I,C,T){for(let h=0;h<16;h++)I[h]=C[h]+T[h]}function D(I,C,T){for(let h=0;h<16;h++)I[h]=C[h]-T[h]}function A(I,C,T){let h,b,Q=0,ne=0,ue=0,ge=0,ye=0,E=0,N=0,Z=0,J=0,K=0,V=0,ee=0,ie=0,De=0,oe=0,Ie=0,le=0,Ce=0,z=0,B=0,$=0,l=0,P=0,se=0,he=0,Ee=0,qe=0,ke=0,Le=0,pt=0,gt=0,je=T[0],Se=T[1],Re=T[2],Fe=T[3],Be=T[4],Oe=T[5],$e=T[6],we=T[7],Ae=T[8],He=T[9],xe=T[10],Ve=T[11],Ge=T[12],Qe=T[13],et=T[14],Je=T[15];h=C[0],Q+=h*je,ne+=h*Se,ue+=h*Re,ge+=h*Fe,ye+=h*Be,E+=h*Oe,N+=h*$e,Z+=h*we,J+=h*Ae,K+=h*He,V+=h*xe,ee+=h*Ve,ie+=h*Ge,De+=h*Qe,oe+=h*et,Ie+=h*Je,h=C[1],ne+=h*je,ue+=h*Se,ge+=h*Re,ye+=h*Fe,E+=h*Be,N+=h*Oe,Z+=h*$e,J+=h*we,K+=h*Ae,V+=h*He,ee+=h*xe,ie+=h*Ve,De+=h*Ge,oe+=h*Qe,Ie+=h*et,le+=h*Je,h=C[2],ue+=h*je,ge+=h*Se,ye+=h*Re,E+=h*Fe,N+=h*Be,Z+=h*Oe,J+=h*$e,K+=h*we,V+=h*Ae,ee+=h*He,ie+=h*xe,De+=h*Ve,oe+=h*Ge,Ie+=h*Qe,le+=h*et,Ce+=h*Je,h=C[3],ge+=h*je,ye+=h*Se,E+=h*Re,N+=h*Fe,Z+=h*Be,J+=h*Oe,K+=h*$e,V+=h*we,ee+=h*Ae,ie+=h*He,De+=h*xe,oe+=h*Ve,Ie+=h*Ge,le+=h*Qe,Ce+=h*et,z+=h*Je,h=C[4],ye+=h*je,E+=h*Se,N+=h*Re,Z+=h*Fe,J+=h*Be,K+=h*Oe,V+=h*$e,ee+=h*we,ie+=h*Ae,De+=h*He,oe+=h*xe,Ie+=h*Ve,le+=h*Ge,Ce+=h*Qe,z+=h*et,B+=h*Je,h=C[5],E+=h*je,N+=h*Se,Z+=h*Re,J+=h*Fe,K+=h*Be,V+=h*Oe,ee+=h*$e,ie+=h*we,De+=h*Ae,oe+=h*He,Ie+=h*xe,le+=h*Ve,Ce+=h*Ge,z+=h*Qe,B+=h*et,$+=h*Je,h=C[6],N+=h*je,Z+=h*Se,J+=h*Re,K+=h*Fe,V+=h*Be,ee+=h*Oe,ie+=h*$e,De+=h*we,oe+=h*Ae,Ie+=h*He,le+=h*xe,Ce+=h*Ve,z+=h*Ge,B+=h*Qe,$+=h*et,l+=h*Je,h=C[7],Z+=h*je,J+=h*Se,K+=h*Re,V+=h*Fe,ee+=h*Be,ie+=h*Oe,De+=h*$e,oe+=h*we,Ie+=h*Ae,le+=h*He,Ce+=h*xe,z+=h*Ve,B+=h*Ge,$+=h*Qe,l+=h*et,P+=h*Je,h=C[8],J+=h*je,K+=h*Se,V+=h*Re,ee+=h*Fe,ie+=h*Be,De+=h*Oe,oe+=h*$e,Ie+=h*we,le+=h*Ae,Ce+=h*He,z+=h*xe,B+=h*Ve,$+=h*Ge,l+=h*Qe,P+=h*et,se+=h*Je,h=C[9],K+=h*je,V+=h*Se,ee+=h*Re,ie+=h*Fe,De+=h*Be,oe+=h*Oe,Ie+=h*$e,le+=h*we,Ce+=h*Ae,z+=h*He,B+=h*xe,$+=h*Ve,l+=h*Ge,P+=h*Qe,se+=h*et,he+=h*Je,h=C[10],V+=h*je,ee+=h*Se,ie+=h*Re,De+=h*Fe,oe+=h*Be,Ie+=h*Oe,le+=h*$e,Ce+=h*we,z+=h*Ae,B+=h*He,$+=h*xe,l+=h*Ve,P+=h*Ge,se+=h*Qe,he+=h*et,Ee+=h*Je,h=C[11],ee+=h*je,ie+=h*Se,De+=h*Re,oe+=h*Fe,Ie+=h*Be,le+=h*Oe,Ce+=h*$e,z+=h*we,B+=h*Ae,$+=h*He,l+=h*xe,P+=h*Ve,se+=h*Ge,he+=h*Qe,Ee+=h*et,qe+=h*Je,h=C[12],ie+=h*je,De+=h*Se,oe+=h*Re,Ie+=h*Fe,le+=h*Be,Ce+=h*Oe,z+=h*$e,B+=h*we,$+=h*Ae,l+=h*He,P+=h*xe,se+=h*Ve,he+=h*Ge,Ee+=h*Qe,qe+=h*et,ke+=h*Je,h=C[13],De+=h*je,oe+=h*Se,Ie+=h*Re,le+=h*Fe,Ce+=h*Be,z+=h*Oe,B+=h*$e,$+=h*we,l+=h*Ae,P+=h*He,se+=h*xe,he+=h*Ve,Ee+=h*Ge,qe+=h*Qe,ke+=h*et,Le+=h*Je,h=C[14],oe+=h*je,Ie+=h*Se,le+=h*Re,Ce+=h*Fe,z+=h*Be,B+=h*Oe,$+=h*$e,l+=h*we,P+=h*Ae,se+=h*He,he+=h*xe,Ee+=h*Ve,qe+=h*Ge,ke+=h*Qe,Le+=h*et,pt+=h*Je,h=C[15],Ie+=h*je,le+=h*Se,Ce+=h*Re,z+=h*Fe,B+=h*Be,$+=h*Oe,l+=h*$e,P+=h*we,se+=h*Ae,he+=h*He,Ee+=h*xe,qe+=h*Ve,ke+=h*Ge,Le+=h*Qe,pt+=h*et,gt+=h*Je,Q+=38*le,ne+=38*Ce,ue+=38*z,ge+=38*B,ye+=38*$,E+=38*l,N+=38*P,Z+=38*se,J+=38*he,K+=38*Ee,V+=38*qe,ee+=38*ke,ie+=38*Le,De+=38*pt,oe+=38*gt,b=1,h=Q+b+65535,b=Math.floor(h/65536),Q=h-b*65536,h=ne+b+65535,b=Math.floor(h/65536),ne=h-b*65536,h=ue+b+65535,b=Math.floor(h/65536),ue=h-b*65536,h=ge+b+65535,b=Math.floor(h/65536),ge=h-b*65536,h=ye+b+65535,b=Math.floor(h/65536),ye=h-b*65536,h=E+b+65535,b=Math.floor(h/65536),E=h-b*65536,h=N+b+65535,b=Math.floor(h/65536),N=h-b*65536,h=Z+b+65535,b=Math.floor(h/65536),Z=h-b*65536,h=J+b+65535,b=Math.floor(h/65536),J=h-b*65536,h=K+b+65535,b=Math.floor(h/65536),K=h-b*65536,h=V+b+65535,b=Math.floor(h/65536),V=h-b*65536,h=ee+b+65535,b=Math.floor(h/65536),ee=h-b*65536,h=ie+b+65535,b=Math.floor(h/65536),ie=h-b*65536,h=De+b+65535,b=Math.floor(h/65536),De=h-b*65536,h=oe+b+65535,b=Math.floor(h/65536),oe=h-b*65536,h=Ie+b+65535,b=Math.floor(h/65536),Ie=h-b*65536,Q+=b-1+37*(b-1),b=1,h=Q+b+65535,b=Math.floor(h/65536),Q=h-b*65536,h=ne+b+65535,b=Math.floor(h/65536),ne=h-b*65536,h=ue+b+65535,b=Math.floor(h/65536),ue=h-b*65536,h=ge+b+65535,b=Math.floor(h/65536),ge=h-b*65536,h=ye+b+65535,b=Math.floor(h/65536),ye=h-b*65536,h=E+b+65535,b=Math.floor(h/65536),E=h-b*65536,h=N+b+65535,b=Math.floor(h/65536),N=h-b*65536,h=Z+b+65535,b=Math.floor(h/65536),Z=h-b*65536,h=J+b+65535,b=Math.floor(h/65536),J=h-b*65536,h=K+b+65535,b=Math.floor(h/65536),K=h-b*65536,h=V+b+65535,b=Math.floor(h/65536),V=h-b*65536,h=ee+b+65535,b=Math.floor(h/65536),ee=h-b*65536,h=ie+b+65535,b=Math.floor(h/65536),ie=h-b*65536,h=De+b+65535,b=Math.floor(h/65536),De=h-b*65536,h=oe+b+65535,b=Math.floor(h/65536),oe=h-b*65536,h=Ie+b+65535,b=Math.floor(h/65536),Ie=h-b*65536,Q+=b-1+37*(b-1),I[0]=Q,I[1]=ne,I[2]=ue,I[3]=ge,I[4]=ye,I[5]=E,I[6]=N,I[7]=Z,I[8]=J,I[9]=K,I[10]=V,I[11]=ee,I[12]=ie,I[13]=De,I[14]=oe,I[15]=Ie}function O(I,C){A(I,C,C)}function S(I,C){const T=s();for(let h=0;h<16;h++)T[h]=C[h];for(let h=253;h>=0;h--)O(T,T),h!==2&&h!==4&&A(T,T,C);for(let h=0;h<16;h++)I[h]=T[h]}function k(I,C){const T=new Uint8Array(32),h=new Float64Array(80),b=s(),Q=s(),ne=s(),ue=s(),ge=s(),ye=s();for(let J=0;J<31;J++)T[J]=I[J];T[31]=I[31]&127|64,T[0]&=248,p(h,C);for(let J=0;J<16;J++)Q[J]=h[J];b[0]=ue[0]=1;for(let J=254;J>=0;--J){const K=T[J>>>3]>>>(J&7)&1;d(b,Q,K),d(ne,ue,K),m(ge,b,ne),D(b,b,ne),m(ne,Q,ue),D(Q,Q,ue),O(ue,ge),O(ye,b),A(b,ne,b),A(ne,Q,ge),m(ge,b,ne),D(b,b,ne),O(Q,b),D(ne,ue,ye),A(b,ne,c),m(b,b,ue),A(ne,ne,b),A(b,ue,ye),A(ue,Q,h),O(Q,ge),d(b,Q,K),d(ne,ue,K)}for(let J=0;J<16;J++)h[J+16]=b[J],h[J+32]=ne[J],h[J+48]=Q[J],h[J+64]=ue[J];const E=h.subarray(32),N=h.subarray(16);S(E,E),A(N,N,E);const Z=new Uint8Array(32);return y(Z,N),Z}i.scalarMult=k;function H(I){return k(I,o)}i.scalarMultBase=H;function re(I){if(I.length!==i.SECRET_KEY_LENGTH)throw new Error(`x25519: seed must be ${i.SECRET_KEY_LENGTH} bytes`);const C=new Uint8Array(I);return{publicKey:H(C),secretKey:C}}i.generateKeyPairFromSeed=re;function F(I){const C=(0,e.randomBytes)(32,I),T=re(C);return(0,t.wipe)(C),T}i.generateKeyPair=F;function U(I,C,T=!1){if(I.length!==i.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect secret key length");if(C.length!==i.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect public key length");const h=k(I,C);if(T){let b=0;for(let Q=0;Q<h.length;Q++)b|=h[Q];if(b===0)throw new Error("X25519: invalid shared key")}return h}i.sharedKey=U})(Fu);function $u(i){return globalThis.Buffer!=null?new Uint8Array(i.buffer,i.byteOffset,i.byteLength):i}function sp(i=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?$u(globalThis.Buffer.allocUnsafe(i)):new Uint8Array(i)}function fu(i,e){e||(e=i.reduce((o,c)=>o+c.length,0));const t=sp(e);let s=0;for(const o of i)t.set(o,s),s+=o.length;return $u(t)}function Mb(i,e){if(i.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),s=0;s<t.length;s++)t[s]=255;for(var o=0;o<i.length;o++){var c=i.charAt(o),f=c.charCodeAt(0);if(t[f]!==255)throw new TypeError(c+" is ambiguous");t[f]=o}var d=i.length,y=i.charAt(0),p=Math.log(d)/Math.log(256),m=Math.log(256)/Math.log(d);function D(S){if(S instanceof Uint8Array||(ArrayBuffer.isView(S)?S=new Uint8Array(S.buffer,S.byteOffset,S.byteLength):Array.isArray(S)&&(S=Uint8Array.from(S))),!(S instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(S.length===0)return"";for(var k=0,H=0,re=0,F=S.length;re!==F&&S[re]===0;)re++,k++;for(var U=(F-re)*m+1>>>0,I=new Uint8Array(U);re!==F;){for(var C=S[re],T=0,h=U-1;(C!==0||T<H)&&h!==-1;h--,T++)C+=256*I[h]>>>0,I[h]=C%d>>>0,C=C/d>>>0;if(C!==0)throw new Error("Non-zero carry");H=T,re++}for(var b=U-H;b!==U&&I[b]===0;)b++;for(var Q=y.repeat(k);b<U;++b)Q+=i.charAt(I[b]);return Q}function A(S){if(typeof S!="string")throw new TypeError("Expected String");if(S.length===0)return new Uint8Array;var k=0;if(S[k]!==" "){for(var H=0,re=0;S[k]===y;)H++,k++;for(var F=(S.length-k)*p+1>>>0,U=new Uint8Array(F);S[k];){var I=t[S.charCodeAt(k)];if(I===255)return;for(var C=0,T=F-1;(I!==0||C<re)&&T!==-1;T--,C++)I+=d*U[T]>>>0,U[T]=I%256>>>0,I=I/256>>>0;if(I!==0)throw new Error("Non-zero carry");re=C,k++}if(S[k]!==" "){for(var h=F-re;h!==F&&U[h]===0;)h++;for(var b=new Uint8Array(H+(F-h)),Q=H;h!==F;)b[Q++]=U[h++];return b}}}function O(S){var k=A(S);if(k)return k;throw new Error(`Non-${e} character`)}return{encode:D,decodeUnsafe:A,decode:O}}var jb=Mb,Bb=jb;const zb=i=>{if(i instanceof Uint8Array&&i.constructor.name==="Uint8Array")return i;if(i instanceof ArrayBuffer)return new Uint8Array(i);if(ArrayBuffer.isView(i))return new Uint8Array(i.buffer,i.byteOffset,i.byteLength);throw new Error("Unknown type, must be binary type")},qb=i=>new TextEncoder().encode(i),Hb=i=>new TextDecoder().decode(i);class Kb{constructor(e,t,s){this.name=e,this.prefix=t,this.baseEncode=s}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class kb{constructor(e,t,s){if(this.name=e,this.prefix=t,t.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=s}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return op(this,e)}}class Vb{constructor(e){this.decoders=e}or(e){return op(this,e)}decode(e){const t=e[0],s=this.decoders[t];if(s)return s.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const op=(i,e)=>new Vb({...i.decoders||{[i.prefix]:i},...e.decoders||{[e.prefix]:e}});class Wb{constructor(e,t,s,o){this.name=e,this.prefix=t,this.baseEncode=s,this.baseDecode=o,this.encoder=new Kb(e,t,s),this.decoder=new kb(e,t,o)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const ua=({name:i,prefix:e,encode:t,decode:s})=>new Wb(i,e,t,s),Ds=({prefix:i,name:e,alphabet:t})=>{const{encode:s,decode:o}=Bb(t,e);return ua({prefix:i,name:e,encode:s,decode:c=>zb(o(c))})},Gb=(i,e,t,s)=>{const o={};for(let m=0;m<e.length;++m)o[e[m]]=m;let c=i.length;for(;i[c-1]==="=";)--c;const f=new Uint8Array(c*t/8|0);let d=0,y=0,p=0;for(let m=0;m<c;++m){const D=o[i[m]];if(D===void 0)throw new SyntaxError(`Non-${s} character`);y=y<<t|D,d+=t,d>=8&&(d-=8,f[p++]=255&y>>d)}if(d>=t||255&y<<8-d)throw new SyntaxError("Unexpected end of data");return f},Yb=(i,e,t)=>{const s=e[e.length-1]==="=",o=(1<<t)-1;let c="",f=0,d=0;for(let y=0;y<i.length;++y)for(d=d<<8|i[y],f+=8;f>t;)f-=t,c+=e[o&d>>f];if(f&&(c+=e[o&d<<t-f]),s)for(;c.length*t&7;)c+="=";return c},Jt=({name:i,prefix:e,bitsPerChar:t,alphabet:s})=>ua({prefix:e,name:i,encode(o){return Yb(o,s,t)},decode(o){return Gb(o,s,t,i)}}),Jb=ua({prefix:"\0",name:"identity",encode:i=>Hb(i),decode:i=>qb(i)}),Xb=Object.freeze(Object.defineProperty({__proto__:null,identity:Jb},Symbol.toStringTag,{value:"Module"})),Zb=Jt({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),Qb=Object.freeze(Object.defineProperty({__proto__:null,base2:Zb},Symbol.toStringTag,{value:"Module"})),ew=Jt({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),tw=Object.freeze(Object.defineProperty({__proto__:null,base8:ew},Symbol.toStringTag,{value:"Module"})),rw=Ds({prefix:"9",name:"base10",alphabet:"0123456789"}),iw=Object.freeze(Object.defineProperty({__proto__:null,base10:rw},Symbol.toStringTag,{value:"Module"})),nw=Jt({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),sw=Jt({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),ow=Object.freeze(Object.defineProperty({__proto__:null,base16:nw,base16upper:sw},Symbol.toStringTag,{value:"Module"})),aw=Jt({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),cw=Jt({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),uw=Jt({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),hw=Jt({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),lw=Jt({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),fw=Jt({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),dw=Jt({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),pw=Jt({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),gw=Jt({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),yw=Object.freeze(Object.defineProperty({__proto__:null,base32:aw,base32hex:lw,base32hexpad:dw,base32hexpadupper:pw,base32hexupper:fw,base32pad:uw,base32padupper:hw,base32upper:cw,base32z:gw},Symbol.toStringTag,{value:"Module"})),vw=Ds({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),mw=Ds({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),_w=Object.freeze(Object.defineProperty({__proto__:null,base36:vw,base36upper:mw},Symbol.toStringTag,{value:"Module"})),bw=Ds({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),ww=Ds({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),Ew=Object.freeze(Object.defineProperty({__proto__:null,base58btc:bw,base58flickr:ww},Symbol.toStringTag,{value:"Module"})),Dw=Jt({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Iw=Jt({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Sw=Jt({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),xw=Jt({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),Ow=Object.freeze(Object.defineProperty({__proto__:null,base64:Dw,base64pad:Iw,base64url:Sw,base64urlpad:xw},Symbol.toStringTag,{value:"Module"})),ap=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),Aw=ap.reduce((i,e,t)=>(i[t]=e,i),[]),Pw=ap.reduce((i,e,t)=>(i[e.codePointAt(0)]=t,i),[]);function Cw(i){return i.reduce((e,t)=>(e+=Aw[t],e),"")}function Tw(i){const e=[];for(const t of i){const s=Pw[t.codePointAt(0)];if(s===void 0)throw new Error(`Non-base256emoji character: ${t}`);e.push(s)}return new Uint8Array(e)}const Nw=ua({prefix:"🚀",name:"base256emoji",encode:Cw,decode:Tw}),Rw=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:Nw},Symbol.toStringTag,{value:"Module"}));new TextEncoder;new TextDecoder;const sf={...Xb,...Qb,...tw,...iw,...ow,...yw,..._w,...Ew,...Ow,...Rw};function cp(i,e,t,s){return{name:i,prefix:e,encoder:{name:i,prefix:e,encode:t},decoder:{decode:s}}}const of=cp("utf8","u",i=>"u"+new TextDecoder("utf8").decode(i),i=>new TextEncoder().encode(i.substring(1))),zc=cp("ascii","a",i=>{let e="a";for(let t=0;t<i.length;t++)e+=String.fromCharCode(i[t]);return e},i=>{i=i.substring(1);const e=sp(i.length);for(let t=0;t<i.length;t++)e[t]=i.charCodeAt(t);return e}),up={utf8:of,"utf-8":of,hex:sf.base16,latin1:zc,ascii:zc,binary:zc,...sf};function mr(i,e="utf8"){const t=up[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?$u(globalThis.Buffer.from(i,"utf-8")):t.decoder.decode(`${t.prefix}${i}`)}function ur(i,e="utf8"){const t=up[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(i.buffer,i.byteOffset,i.byteLength).toString("utf8"):t.encoder.encode(i).substring(1)}var af=globalThis&&globalThis.__spreadArray||function(i,e,t){if(t||arguments.length===2)for(var s=0,o=e.length,c;s<o;s++)(c||!(s in e))&&(c||(c=Array.prototype.slice.call(e,0,s)),c[s]=e[s]);return i.concat(c||Array.prototype.slice.call(e))},Fw=function(){function i(e,t,s){this.name=e,this.version=t,this.os=s,this.type="browser"}return i}(),$w=function(){function i(e){this.version=e,this.type="node",this.name="node",this.os=process.platform}return i}(),Uw=function(){function i(e,t,s,o){this.name=e,this.version=t,this.os=s,this.bot=o,this.type="bot-device"}return i}(),Lw=function(){function i(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return i}(),Mw=function(){function i(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return i}(),jw=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,Bw=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,cf=3,zw=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",jw]],uf=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function qw(i){return i?hf(i):typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new Mw:typeof navigator<"u"?hf(navigator.userAgent):kw()}function Hw(i){return i!==""&&zw.reduce(function(e,t){var s=t[0],o=t[1];if(e)return e;var c=o.exec(i);return!!c&&[s,c]},!1)}function hf(i){var e=Hw(i);if(!e)return null;var t=e[0],s=e[1];if(t==="searchbot")return new Lw;var o=s[1]&&s[1].split(".").join("_").split("_").slice(0,3);o?o.length<cf&&(o=af(af([],o,!0),Vw(cf-o.length),!0)):o=[];var c=o.join("."),f=Kw(i),d=Bw.exec(i);return d&&d[1]?new Uw(t,c,f,d[1]):new Fw(t,c,f)}function Kw(i){for(var e=0,t=uf.length;e<t;e++){var s=uf[e],o=s[0],c=s[1],f=c.exec(i);if(f)return o}return null}function kw(){var i=typeof process<"u"&&process.version;return i?new $w(process.version.slice(1)):null}function Vw(i){for(var e=[],t=0;t<i;t++)e.push("0");return e}var ve={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var du=function(i,e){return du=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)s.hasOwnProperty(o)&&(t[o]=s[o])},du(i,e)};function Ww(i,e){du(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var pu=function(){return pu=Object.assign||function(e){for(var t,s=1,o=arguments.length;s<o;s++){t=arguments[s];for(var c in t)Object.prototype.hasOwnProperty.call(t,c)&&(e[c]=t[c])}return e},pu.apply(this,arguments)};function Gw(i,e){var t={};for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&e.indexOf(s)<0&&(t[s]=i[s]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,s=Object.getOwnPropertySymbols(i);o<s.length;o++)e.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(i,s[o])&&(t[s[o]]=i[s[o]]);return t}function Yw(i,e,t,s){var o=arguments.length,c=o<3?e:s===null?s=Object.getOwnPropertyDescriptor(e,t):s,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(i,e,t,s);else for(var d=i.length-1;d>=0;d--)(f=i[d])&&(c=(o<3?f(c):o>3?f(e,t,c):f(e,t))||c);return o>3&&c&&Object.defineProperty(e,t,c),c}function Jw(i,e){return function(t,s){e(t,s,i)}}function Xw(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)}function Zw(i,e,t,s){function o(c){return c instanceof t?c:new t(function(f){f(c)})}return new(t||(t=Promise))(function(c,f){function d(m){try{p(s.next(m))}catch(D){f(D)}}function y(m){try{p(s.throw(m))}catch(D){f(D)}}function p(m){m.done?c(m.value):o(m.value).then(d,y)}p((s=s.apply(i,e||[])).next())})}function Qw(i,e){var t={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},s,o,c,f;return f={next:d(0),throw:d(1),return:d(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function d(p){return function(m){return y([p,m])}}function y(p){if(s)throw new TypeError("Generator is already executing.");for(;t;)try{if(s=1,o&&(c=p[0]&2?o.return:p[0]?o.throw||((c=o.return)&&c.call(o),0):o.next)&&!(c=c.call(o,p[1])).done)return c;switch(o=0,c&&(p=[p[0]&2,c.value]),p[0]){case 0:case 1:c=p;break;case 4:return t.label++,{value:p[1],done:!1};case 5:t.label++,o=p[1],p=[0];continue;case 7:p=t.ops.pop(),t.trys.pop();continue;default:if(c=t.trys,!(c=c.length>0&&c[c.length-1])&&(p[0]===6||p[0]===2)){t=0;continue}if(p[0]===3&&(!c||p[1]>c[0]&&p[1]<c[3])){t.label=p[1];break}if(p[0]===6&&t.label<c[1]){t.label=c[1],c=p;break}if(c&&t.label<c[2]){t.label=c[2],t.ops.push(p);break}c[2]&&t.ops.pop(),t.trys.pop();continue}p=e.call(i,t)}catch(m){p=[6,m],o=0}finally{s=c=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}}function eE(i,e,t,s){s===void 0&&(s=t),i[s]=e[t]}function tE(i,e){for(var t in i)t!=="default"&&!e.hasOwnProperty(t)&&(e[t]=i[t])}function gu(i){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&i[e],s=0;if(t)return t.call(i);if(i&&typeof i.length=="number")return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function hp(i,e){var t=typeof Symbol=="function"&&i[Symbol.iterator];if(!t)return i;var s=t.call(i),o,c=[],f;try{for(;(e===void 0||e-- >0)&&!(o=s.next()).done;)c.push(o.value)}catch(d){f={error:d}}finally{try{o&&!o.done&&(t=s.return)&&t.call(s)}finally{if(f)throw f.error}}return c}function rE(){for(var i=[],e=0;e<arguments.length;e++)i=i.concat(hp(arguments[e]));return i}function iE(){for(var i=0,e=0,t=arguments.length;e<t;e++)i+=arguments[e].length;for(var s=Array(i),o=0,e=0;e<t;e++)for(var c=arguments[e],f=0,d=c.length;f<d;f++,o++)s[o]=c[f];return s}function ms(i){return this instanceof ms?(this.v=i,this):new ms(i)}function nE(i,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=t.apply(i,e||[]),o,c=[];return o={},f("next"),f("throw"),f("return"),o[Symbol.asyncIterator]=function(){return this},o;function f(A){s[A]&&(o[A]=function(O){return new Promise(function(S,k){c.push([A,O,S,k])>1||d(A,O)})})}function d(A,O){try{y(s[A](O))}catch(S){D(c[0][3],S)}}function y(A){A.value instanceof ms?Promise.resolve(A.value.v).then(p,m):D(c[0][2],A)}function p(A){d("next",A)}function m(A){d("throw",A)}function D(A,O){A(O),c.shift(),c.length&&d(c[0][0],c[0][1])}}function sE(i){var e,t;return e={},s("next"),s("throw",function(o){throw o}),s("return"),e[Symbol.iterator]=function(){return this},e;function s(o,c){e[o]=i[o]?function(f){return(t=!t)?{value:ms(i[o](f)),done:o==="return"}:c?c(f):f}:c}}function oE(i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=i[Symbol.asyncIterator],t;return e?e.call(i):(i=typeof gu=="function"?gu(i):i[Symbol.iterator](),t={},s("next"),s("throw"),s("return"),t[Symbol.asyncIterator]=function(){return this},t);function s(c){t[c]=i[c]&&function(f){return new Promise(function(d,y){f=i[c](f),o(d,y,f.done,f.value)})}}function o(c,f,d,y){Promise.resolve(y).then(function(p){c({value:p,done:d})},f)}}function aE(i,e){return Object.defineProperty?Object.defineProperty(i,"raw",{value:e}):i.raw=e,i}function cE(i){if(i&&i.__esModule)return i;var e={};if(i!=null)for(var t in i)Object.hasOwnProperty.call(i,t)&&(e[t]=i[t]);return e.default=i,e}function uE(i){return i&&i.__esModule?i:{default:i}}function hE(i,e){if(!e.has(i))throw new TypeError("attempted to get private field on non-instance");return e.get(i)}function lE(i,e,t){if(!e.has(i))throw new TypeError("attempted to set private field on non-instance");return e.set(i,t),t}const fE=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return pu},__asyncDelegator:sE,__asyncGenerator:nE,__asyncValues:oE,__await:ms,__awaiter:Zw,__classPrivateFieldGet:hE,__classPrivateFieldSet:lE,__createBinding:eE,__decorate:Yw,__exportStar:tE,__extends:Ww,__generator:Qw,__importDefault:uE,__importStar:cE,__makeTemplateObject:aE,__metadata:Xw,__param:Jw,__read:hp,__rest:Gw,__spread:rE,__spreadArrays:iE,__values:gu},Symbol.toStringTag,{value:"Module"})),Ei=jd(fE);var qc={},as={},lf;function dE(){if(lf)return as;lf=1,Object.defineProperty(as,"__esModule",{value:!0}),as.delay=void 0;function i(e){return new Promise(t=>{setTimeout(()=>{t(!0)},e)})}return as.delay=i,as}var Qi={},Hc={},en={},ff;function pE(){return ff||(ff=1,Object.defineProperty(en,"__esModule",{value:!0}),en.ONE_THOUSAND=en.ONE_HUNDRED=void 0,en.ONE_HUNDRED=100,en.ONE_THOUSAND=1e3),en}var Kc={},df;function gE(){return df||(df=1,function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.ONE_YEAR=i.FOUR_WEEKS=i.THREE_WEEKS=i.TWO_WEEKS=i.ONE_WEEK=i.THIRTY_DAYS=i.SEVEN_DAYS=i.FIVE_DAYS=i.THREE_DAYS=i.ONE_DAY=i.TWENTY_FOUR_HOURS=i.TWELVE_HOURS=i.SIX_HOURS=i.THREE_HOURS=i.ONE_HOUR=i.SIXTY_MINUTES=i.THIRTY_MINUTES=i.TEN_MINUTES=i.FIVE_MINUTES=i.ONE_MINUTE=i.SIXTY_SECONDS=i.THIRTY_SECONDS=i.TEN_SECONDS=i.FIVE_SECONDS=i.ONE_SECOND=void 0,i.ONE_SECOND=1,i.FIVE_SECONDS=5,i.TEN_SECONDS=10,i.THIRTY_SECONDS=30,i.SIXTY_SECONDS=60,i.ONE_MINUTE=i.SIXTY_SECONDS,i.FIVE_MINUTES=i.ONE_MINUTE*5,i.TEN_MINUTES=i.ONE_MINUTE*10,i.THIRTY_MINUTES=i.ONE_MINUTE*30,i.SIXTY_MINUTES=i.ONE_MINUTE*60,i.ONE_HOUR=i.SIXTY_MINUTES,i.THREE_HOURS=i.ONE_HOUR*3,i.SIX_HOURS=i.ONE_HOUR*6,i.TWELVE_HOURS=i.ONE_HOUR*12,i.TWENTY_FOUR_HOURS=i.ONE_HOUR*24,i.ONE_DAY=i.TWENTY_FOUR_HOURS,i.THREE_DAYS=i.ONE_DAY*3,i.FIVE_DAYS=i.ONE_DAY*5,i.SEVEN_DAYS=i.ONE_DAY*7,i.THIRTY_DAYS=i.ONE_DAY*30,i.ONE_WEEK=i.SEVEN_DAYS,i.TWO_WEEKS=i.ONE_WEEK*2,i.THREE_WEEKS=i.ONE_WEEK*3,i.FOUR_WEEKS=i.ONE_WEEK*4,i.ONE_YEAR=i.ONE_DAY*365}(Kc)),Kc}var pf;function lp(){return pf||(pf=1,function(i){Object.defineProperty(i,"__esModule",{value:!0});const e=Ei;e.__exportStar(pE(),i),e.__exportStar(gE(),i)}(Hc)),Hc}var gf;function yE(){if(gf)return Qi;gf=1,Object.defineProperty(Qi,"__esModule",{value:!0}),Qi.fromMiliseconds=Qi.toMiliseconds=void 0;const i=lp();function e(s){return s*i.ONE_THOUSAND}Qi.toMiliseconds=e;function t(s){return Math.floor(s/i.ONE_THOUSAND)}return Qi.fromMiliseconds=t,Qi}var yf;function vE(){return yf||(yf=1,function(i){Object.defineProperty(i,"__esModule",{value:!0});const e=Ei;e.__exportStar(dE(),i),e.__exportStar(yE(),i)}(qc)),qc}var Tn={},vf;function mE(){if(vf)return Tn;vf=1,Object.defineProperty(Tn,"__esModule",{value:!0}),Tn.Watch=void 0;class i{constructor(){this.timestamps=new Map}start(t){if(this.timestamps.has(t))throw new Error(`Watch already started for label: ${t}`);this.timestamps.set(t,{started:Date.now()})}stop(t){const s=this.get(t);if(typeof s.elapsed<"u")throw new Error(`Watch already stopped for label: ${t}`);const o=Date.now()-s.started;this.timestamps.set(t,{started:s.started,elapsed:o})}get(t){const s=this.timestamps.get(t);if(typeof s>"u")throw new Error(`No timestamp found for label: ${t}`);return s}elapsed(t){const s=this.get(t);return s.elapsed||Date.now()-s.started}}return Tn.Watch=i,Tn.default=i,Tn}var kc={},cs={},mf;function _E(){if(mf)return cs;mf=1,Object.defineProperty(cs,"__esModule",{value:!0}),cs.IWatch=void 0;class i{}return cs.IWatch=i,cs}var _f;function bE(){return _f||(_f=1,function(i){Object.defineProperty(i,"__esModule",{value:!0}),Ei.__exportStar(_E(),i)}(kc)),kc}(function(i){Object.defineProperty(i,"__esModule",{value:!0});const e=Ei;e.__exportStar(vE(),i),e.__exportStar(mE(),i),e.__exportStar(bE(),i),e.__exportStar(lp(),i)})(ve);var lt={};Object.defineProperty(lt,"__esModule",{value:!0});lt.getLocalStorage=lt.getLocalStorageOrThrow=lt.getCrypto=lt.getCryptoOrThrow=dp=lt.getLocation=lt.getLocationOrThrow=Uu=lt.getNavigator=lt.getNavigatorOrThrow=fp=lt.getDocument=lt.getDocumentOrThrow=lt.getFromWindowOrThrow=lt.getFromWindow=void 0;function sn(i){let e;return typeof window<"u"&&typeof window[i]<"u"&&(e=window[i]),e}lt.getFromWindow=sn;function jn(i){const e=sn(i);if(!e)throw new Error(`${i} is not defined in Window`);return e}lt.getFromWindowOrThrow=jn;function wE(){return jn("document")}lt.getDocumentOrThrow=wE;function EE(){return sn("document")}var fp=lt.getDocument=EE;function DE(){return jn("navigator")}lt.getNavigatorOrThrow=DE;function IE(){return sn("navigator")}var Uu=lt.getNavigator=IE;function SE(){return jn("location")}lt.getLocationOrThrow=SE;function xE(){return sn("location")}var dp=lt.getLocation=xE;function OE(){return jn("crypto")}lt.getCryptoOrThrow=OE;function AE(){return sn("crypto")}lt.getCrypto=AE;function PE(){return jn("localStorage")}lt.getLocalStorageOrThrow=PE;function CE(){return sn("localStorage")}lt.getLocalStorage=CE;var Lu={};Object.defineProperty(Lu,"__esModule",{value:!0});var pp=Lu.getWindowMetadata=void 0;const bf=lt;function TE(){let i,e;try{i=bf.getDocumentOrThrow(),e=bf.getLocationOrThrow()}catch{return null}function t(){const D=i.getElementsByTagName("link"),A=[];for(let O=0;O<D.length;O++){const S=D[O],k=S.getAttribute("rel");if(k&&k.toLowerCase().indexOf("icon")>-1){const H=S.getAttribute("href");if(H)if(H.toLowerCase().indexOf("https:")===-1&&H.toLowerCase().indexOf("http:")===-1&&H.indexOf("//")!==0){let re=e.protocol+"//"+e.host;if(H.indexOf("/")===0)re+=H;else{const F=e.pathname.split("/");F.pop();const U=F.join("/");re+=U+"/"+H}A.push(re)}else if(H.indexOf("//")===0){const re=e.protocol+H;A.push(re)}else A.push(H)}}return A}function s(...D){const A=i.getElementsByTagName("meta");for(let O=0;O<A.length;O++){const S=A[O],k=["itemprop","property","name"].map(H=>S.getAttribute(H)).filter(H=>H?D.includes(H):!1);if(k.length&&k){const H=S.getAttribute("content");if(H)return H}}return""}function o(){let D=s("name","og:site_name","og:title","twitter:title");return D||(D=i.title),D}function c(){return s("description","og:description","twitter:description","keywords")}const f=o(),d=c(),y=e.origin,p=t();return{description:d,url:y,icons:p,name:f}}pp=Lu.getWindowMetadata=TE;var _s={},NE=i=>encodeURIComponent(i).replace(/[!'()*]/g,e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`),gp="%[a-f0-9]{2}",wf=new RegExp("("+gp+")|([^%]+?)","gi"),Ef=new RegExp("("+gp+")+","gi");function yu(i,e){try{return[decodeURIComponent(i.join(""))]}catch{}if(i.length===1)return i;e=e||1;var t=i.slice(0,e),s=i.slice(e);return Array.prototype.concat.call([],yu(t),yu(s))}function RE(i){try{return decodeURIComponent(i)}catch{for(var e=i.match(wf)||[],t=1;t<e.length;t++)i=yu(e,t).join(""),e=i.match(wf)||[];return i}}function FE(i){for(var e={"%FE%FF":"��","%FF%FE":"��"},t=Ef.exec(i);t;){try{e[t[0]]=decodeURIComponent(t[0])}catch{var s=RE(t[0]);s!==t[0]&&(e[t[0]]=s)}t=Ef.exec(i)}e["%C2"]="�";for(var o=Object.keys(e),c=0;c<o.length;c++){var f=o[c];i=i.replace(new RegExp(f,"g"),e[f])}return i}var $E=function(i){if(typeof i!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof i+"`");try{return i=i.replace(/\+/g," "),decodeURIComponent(i)}catch{return FE(i)}},UE=(i,e)=>{if(!(typeof i=="string"&&typeof e=="string"))throw new TypeError("Expected the arguments to be of type `string`");if(e==="")return[i];const t=i.indexOf(e);return t===-1?[i]:[i.slice(0,t),i.slice(t+e.length)]},LE=function(i,e){for(var t={},s=Object.keys(i),o=Array.isArray(e),c=0;c<s.length;c++){var f=s[c],d=i[f];(o?e.indexOf(f)!==-1:e(f,d,i))&&(t[f]=d)}return t};(function(i){const e=NE,t=$E,s=UE,o=LE,c=F=>F==null,f=Symbol("encodeFragmentIdentifier");function d(F){switch(F.arrayFormat){case"index":return U=>(I,C)=>{const T=I.length;return C===void 0||F.skipNull&&C===null||F.skipEmptyString&&C===""?I:C===null?[...I,[m(U,F),"[",T,"]"].join("")]:[...I,[m(U,F),"[",m(T,F),"]=",m(C,F)].join("")]};case"bracket":return U=>(I,C)=>C===void 0||F.skipNull&&C===null||F.skipEmptyString&&C===""?I:C===null?[...I,[m(U,F),"[]"].join("")]:[...I,[m(U,F),"[]=",m(C,F)].join("")];case"colon-list-separator":return U=>(I,C)=>C===void 0||F.skipNull&&C===null||F.skipEmptyString&&C===""?I:C===null?[...I,[m(U,F),":list="].join("")]:[...I,[m(U,F),":list=",m(C,F)].join("")];case"comma":case"separator":case"bracket-separator":{const U=F.arrayFormat==="bracket-separator"?"[]=":"=";return I=>(C,T)=>T===void 0||F.skipNull&&T===null||F.skipEmptyString&&T===""?C:(T=T===null?"":T,C.length===0?[[m(I,F),U,m(T,F)].join("")]:[[C,m(T,F)].join(F.arrayFormatSeparator)])}default:return U=>(I,C)=>C===void 0||F.skipNull&&C===null||F.skipEmptyString&&C===""?I:C===null?[...I,m(U,F)]:[...I,[m(U,F),"=",m(C,F)].join("")]}}function y(F){let U;switch(F.arrayFormat){case"index":return(I,C,T)=>{if(U=/\[(\d*)\]$/.exec(I),I=I.replace(/\[\d*\]$/,""),!U){T[I]=C;return}T[I]===void 0&&(T[I]={}),T[I][U[1]]=C};case"bracket":return(I,C,T)=>{if(U=/(\[\])$/.exec(I),I=I.replace(/\[\]$/,""),!U){T[I]=C;return}if(T[I]===void 0){T[I]=[C];return}T[I]=[].concat(T[I],C)};case"colon-list-separator":return(I,C,T)=>{if(U=/(:list)$/.exec(I),I=I.replace(/:list$/,""),!U){T[I]=C;return}if(T[I]===void 0){T[I]=[C];return}T[I]=[].concat(T[I],C)};case"comma":case"separator":return(I,C,T)=>{const h=typeof C=="string"&&C.includes(F.arrayFormatSeparator),b=typeof C=="string"&&!h&&D(C,F).includes(F.arrayFormatSeparator);C=b?D(C,F):C;const Q=h||b?C.split(F.arrayFormatSeparator).map(ne=>D(ne,F)):C===null?C:D(C,F);T[I]=Q};case"bracket-separator":return(I,C,T)=>{const h=/(\[\])$/.test(I);if(I=I.replace(/\[\]$/,""),!h){T[I]=C&&D(C,F);return}const b=C===null?[]:C.split(F.arrayFormatSeparator).map(Q=>D(Q,F));if(T[I]===void 0){T[I]=b;return}T[I]=[].concat(T[I],b)};default:return(I,C,T)=>{if(T[I]===void 0){T[I]=C;return}T[I]=[].concat(T[I],C)}}}function p(F){if(typeof F!="string"||F.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function m(F,U){return U.encode?U.strict?e(F):encodeURIComponent(F):F}function D(F,U){return U.decode?t(F):F}function A(F){return Array.isArray(F)?F.sort():typeof F=="object"?A(Object.keys(F)).sort((U,I)=>Number(U)-Number(I)).map(U=>F[U]):F}function O(F){const U=F.indexOf("#");return U!==-1&&(F=F.slice(0,U)),F}function S(F){let U="";const I=F.indexOf("#");return I!==-1&&(U=F.slice(I)),U}function k(F){F=O(F);const U=F.indexOf("?");return U===-1?"":F.slice(U+1)}function H(F,U){return U.parseNumbers&&!Number.isNaN(Number(F))&&typeof F=="string"&&F.trim()!==""?F=Number(F):U.parseBooleans&&F!==null&&(F.toLowerCase()==="true"||F.toLowerCase()==="false")&&(F=F.toLowerCase()==="true"),F}function re(F,U){U=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},U),p(U.arrayFormatSeparator);const I=y(U),C=Object.create(null);if(typeof F!="string"||(F=F.trim().replace(/^[?#&]/,""),!F))return C;for(const T of F.split("&")){if(T==="")continue;let[h,b]=s(U.decode?T.replace(/\+/g," "):T,"=");b=b===void 0?null:["comma","separator","bracket-separator"].includes(U.arrayFormat)?b:D(b,U),I(D(h,U),b,C)}for(const T of Object.keys(C)){const h=C[T];if(typeof h=="object"&&h!==null)for(const b of Object.keys(h))h[b]=H(h[b],U);else C[T]=H(h,U)}return U.sort===!1?C:(U.sort===!0?Object.keys(C).sort():Object.keys(C).sort(U.sort)).reduce((T,h)=>{const b=C[h];return b&&typeof b=="object"&&!Array.isArray(b)?T[h]=A(b):T[h]=b,T},Object.create(null))}i.extract=k,i.parse=re,i.stringify=(F,U)=>{if(!F)return"";U=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},U),p(U.arrayFormatSeparator);const I=b=>U.skipNull&&c(F[b])||U.skipEmptyString&&F[b]==="",C=d(U),T={};for(const b of Object.keys(F))I(b)||(T[b]=F[b]);const h=Object.keys(T);return U.sort!==!1&&h.sort(U.sort),h.map(b=>{const Q=F[b];return Q===void 0?"":Q===null?m(b,U):Array.isArray(Q)?Q.length===0&&U.arrayFormat==="bracket-separator"?m(b,U)+"[]":Q.reduce(C(b),[]).join("&"):m(b,U)+"="+m(Q,U)}).filter(b=>b.length>0).join("&")},i.parseUrl=(F,U)=>{U=Object.assign({decode:!0},U);const[I,C]=s(F,"#");return Object.assign({url:I.split("?")[0]||"",query:re(k(F),U)},U&&U.parseFragmentIdentifier&&C?{fragmentIdentifier:D(C,U)}:{})},i.stringifyUrl=(F,U)=>{U=Object.assign({encode:!0,strict:!0,[f]:!0},U);const I=O(F.url).split("?")[0]||"",C=i.extract(F.url),T=i.parse(C,{sort:!1}),h=Object.assign(T,F.query);let b=i.stringify(h,U);b&&(b=`?${b}`);let Q=S(F.url);return F.fragmentIdentifier&&(Q=`#${U[f]?m(F.fragmentIdentifier,U):F.fragmentIdentifier}`),`${I}${b}${Q}`},i.pick=(F,U,I)=>{I=Object.assign({parseFragmentIdentifier:!0,[f]:!1},I);const{url:C,query:T,fragmentIdentifier:h}=i.parseUrl(F,I);return i.stringifyUrl({url:C,query:o(T,U),fragmentIdentifier:h},I)},i.exclude=(F,U,I)=>{const C=Array.isArray(U)?T=>!U.includes(T):(T,h)=>!U(T,h);return i.pick(F,C,I)}})(_s);const ME={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe",batchFetchMessages:"waku_batchFetchMessages"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe",batchFetchMessages:"irn_batchFetchMessages"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe",batchFetchMessages:"iridium_batchFetchMessages"}};function jE(i,e=[]){const t=[];return Object.keys(i).forEach(s=>{if(e.length&&!e.includes(s))return;const o=i[s];t.push(...o.accounts)}),t}function yp(i,e){return i.includes(":")?[i]:e.chains||[]}const vp="base10",cr="base16",vu="base64pad",Mu="utf8",mp=0,on=1,BE=0,Df=1,mu=12,ju=32;function zE(){const i=Fu.generateKeyPair();return{privateKey:ur(i.secretKey,cr),publicKey:ur(i.publicKey,cr)}}function _u(){const i=Mn.randomBytes(ju);return ur(i,cr)}function qE(i,e){const t=Fu.sharedKey(mr(i,cr),mr(e,cr)),s=new Cb(ca.SHA256,t).expand(ju);return ur(s,cr)}function HE(i){const e=ca.hash(mr(i,cr));return ur(e,cr)}function Un(i){const e=ca.hash(mr(i,Mu));return ur(e,cr)}function KE(i){return mr(`${i}`,vp)}function Is(i){return Number(ur(i,vp))}function kE(i){const e=KE(typeof i.type<"u"?i.type:mp);if(Is(e)===on&&typeof i.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const t=typeof i.senderPublicKey<"u"?mr(i.senderPublicKey,cr):void 0,s=typeof i.iv<"u"?mr(i.iv,cr):Mn.randomBytes(mu),o=new Nu.ChaCha20Poly1305(mr(i.symKey,cr)).seal(s,mr(i.message,Mu));return WE({type:e,sealed:o,iv:s,senderPublicKey:t})}function VE(i){const e=new Nu.ChaCha20Poly1305(mr(i.symKey,cr)),{sealed:t,iv:s}=Jo(i.encoded),o=e.open(s,t);if(o===null)throw new Error("Failed to decrypt");return ur(o,Mu)}function WE(i){if(Is(i.type)===on){if(typeof i.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return ur(fu([i.type,i.senderPublicKey,i.iv,i.sealed]),vu)}return ur(fu([i.type,i.iv,i.sealed]),vu)}function Jo(i){const e=mr(i,vu),t=e.slice(BE,Df),s=Df;if(Is(t)===on){const d=s+ju,y=d+mu,p=e.slice(s,d),m=e.slice(d,y),D=e.slice(y);return{type:t,sealed:D,iv:m,senderPublicKey:p}}const o=s+mu,c=e.slice(s,o),f=e.slice(o);return{type:t,sealed:f,iv:c}}function GE(i,e){const t=Jo(i);return _p({type:Is(t.type),senderPublicKey:typeof t.senderPublicKey<"u"?ur(t.senderPublicKey,cr):void 0,receiverPublicKey:e==null?void 0:e.receiverPublicKey})}function _p(i){const e=(i==null?void 0:i.type)||mp;if(e===on){if(typeof(i==null?void 0:i.senderPublicKey)>"u")throw new Error("missing sender public key");if(typeof(i==null?void 0:i.receiverPublicKey)>"u")throw new Error("missing receiver public key")}return{type:e,senderPublicKey:i==null?void 0:i.senderPublicKey,receiverPublicKey:i==null?void 0:i.receiverPublicKey}}function If(i){return i.type===on&&typeof i.senderPublicKey=="string"&&typeof i.receiverPublicKey=="string"}var YE=Object.defineProperty,Sf=Object.getOwnPropertySymbols,JE=Object.prototype.hasOwnProperty,XE=Object.prototype.propertyIsEnumerable,xf=(i,e,t)=>e in i?YE(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,Of=(i,e)=>{for(var t in e||(e={}))JE.call(e,t)&&xf(i,t,e[t]);if(Sf)for(var t of Sf(e))XE.call(e,t)&&xf(i,t,e[t]);return i};const ZE="ReactNative",$i={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},QE="js";function Bu(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function bp(){return!fp()&&!!Uu()&&navigator.product===ZE}function zu(){return!Bu()&&!!Uu()}function qu(){return bp()?$i.reactNative:Bu()?$i.node:zu()?$i.browser:$i.unknown}function e3(i,e){let t=_s.parse(i);return t=Of(Of({},t),e),i=_s.stringify(t),i}function t3(){return pp()||{name:"",description:"",url:"",icons:[""]}}function r3(){if(qu()===$i.reactNative&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"){const{OS:t,Version:s}=global.Platform;return[t,s].join("-")}const i=qw();if(i===null)return"unknown";const e=i.os?i.os.replace(" ","").toLowerCase():"unknown";return i.type==="browser"?[e,i.name,i.version].join("-"):[e,i.version].join("-")}function i3(){var i;const e=qu();return e===$i.browser?[e,((i=dp())==null?void 0:i.host)||"unknown"].join(":"):e}function n3(i,e,t){const s=r3(),o=i3();return[[i,e].join("-"),[QE,t].join("-"),s,o].join("/")}function s3({protocol:i,version:e,relayUrl:t,sdkVersion:s,auth:o,projectId:c,useOnCloseEvent:f}){const d=t.split("?"),y=n3(i,e,s),p={auth:o,ua:y,projectId:c,useOnCloseEvent:f||void 0},m=e3(d[1]||"",p);return d[0]+"?"+m}function rn(i,e){return i.filter(t=>e.includes(t)).length===i.length}function wp(i){return Object.fromEntries(i.entries())}function Ep(i){return new Map(Object.entries(i))}function Fn(i=ve.FIVE_MINUTES,e){const t=ve.toMiliseconds(i||ve.FIVE_MINUTES);let s,o,c;return{resolve:f=>{c&&s&&(clearTimeout(c),s(f))},reject:f=>{c&&o&&(clearTimeout(c),o(f))},done:()=>new Promise((f,d)=>{c=setTimeout(()=>{d(new Error(e))},t),s=f,o=d})}}function Xo(i,e,t){return new Promise(async(s,o)=>{const c=setTimeout(()=>o(new Error(t)),e);try{const f=await i;s(f)}catch(f){o(f)}clearTimeout(c)})}function Dp(i,e){if(typeof e=="string"&&e.startsWith(`${i}:`))return e;if(i.toLowerCase()==="topic"){if(typeof e!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${e}`}else if(i.toLowerCase()==="id"){if(typeof e!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${e}`}throw new Error(`Unknown expirer target type: ${i}`)}function o3(i){return Dp("topic",i)}function a3(i){return Dp("id",i)}function Ip(i){const[e,t]=i.split(":"),s={id:void 0,topic:void 0};if(e==="topic"&&typeof t=="string")s.topic=t;else if(e==="id"&&Number.isInteger(Number(t)))s.id=Number(t);else throw new Error(`Invalid target, expected id:number or topic:string, got ${e}:${t}`);return s}function Gr(i,e){return ve.fromMiliseconds((e||Date.now())+ve.toMiliseconds(i))}function Fi(i){return Date.now()>=ve.toMiliseconds(i)}function qt(i,e){return`${i}${e?`:${e}`:""}`}function Vc(i=[],e=[]){return[...new Set([...i,...e])]}async function c3({id:i,topic:e,wcDeepLink:t}){try{if(!t)return;const s=typeof t=="string"?JSON.parse(t):t;let o=s==null?void 0:s.href;if(typeof o!="string")return;o.endsWith("/")&&(o=o.slice(0,-1));const c=`${o}/wc?requestId=${i}&sessionTopic=${e}`,f=qu();f===$i.browser?c.startsWith("https://")?window.open(c,"_blank","noreferrer noopener"):window.open(c,"_self","noreferrer noopener"):f===$i.reactNative&&typeof(global==null?void 0:global.Linking)<"u"&&await global.Linking.openURL(c)}catch(s){console.error(s)}}const u3="irn";function bu(i){return(i==null?void 0:i.relay)||{protocol:u3}}function Ho(i){const e=ME[i];if(typeof e>"u")throw new Error(`Relay Protocol not supported: ${i}`);return e}var h3=Object.defineProperty,Af=Object.getOwnPropertySymbols,l3=Object.prototype.hasOwnProperty,f3=Object.prototype.propertyIsEnumerable,Pf=(i,e,t)=>e in i?h3(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,d3=(i,e)=>{for(var t in e||(e={}))l3.call(e,t)&&Pf(i,t,e[t]);if(Af)for(var t of Af(e))f3.call(e,t)&&Pf(i,t,e[t]);return i};function p3(i,e="-"){const t={},s="relay"+e;return Object.keys(i).forEach(o=>{if(o.startsWith(s)){const c=o.replace(s,""),f=i[o];t[c]=f}}),t}function g3(i){const e=i.indexOf(":"),t=i.indexOf("?")!==-1?i.indexOf("?"):void 0,s=i.substring(0,e),o=i.substring(e+1,t).split("@"),c=typeof t<"u"?i.substring(t):"",f=_s.parse(c);return{protocol:s,topic:y3(o[0]),version:parseInt(o[1],10),symKey:f.symKey,relay:p3(f)}}function y3(i){return i.startsWith("//")?i.substring(2):i}function v3(i,e="-"){const t="relay",s={};return Object.keys(i).forEach(o=>{const c=t+e+o;i[o]&&(s[c]=i[o])}),s}function m3(i){return`${i.protocol}:${i.topic}@${i.version}?`+_s.stringify(d3({symKey:i.symKey},v3(i.relay)))}function Bn(i){const e=[];return i.forEach(t=>{const[s,o]=t.split(":");e.push(`${s}:${o}`)}),e}function _3(i){const e=[];return Object.values(i).forEach(t=>{e.push(...Bn(t.accounts))}),e}function b3(i,e){const t=[];return Object.values(i).forEach(s=>{Bn(s.accounts).includes(e)&&t.push(...s.methods)}),t}function w3(i,e){const t=[];return Object.values(i).forEach(s=>{Bn(s.accounts).includes(e)&&t.push(...s.events)}),t}function E3(i,e){const t=ko(i,e);if(t)throw new Error(t.message);const s={};for(const[o,c]of Object.entries(i))s[o]={methods:c.methods,events:c.events,chains:c.accounts.map(f=>`${f.split(":")[0]}:${f.split(":")[1]}`)};return s}function Hu(i){return i.includes(":")}function Ko(i){return Hu(i)?i.split(":")[0]:i}const D3={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},I3={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function ce(i,e){const{message:t,code:s}=I3[i];return{message:e?`${t} ${e}`:t,code:s}}function Rt(i,e){const{message:t,code:s}=D3[i];return{message:e?`${t} ${e}`:t,code:s}}function oi(i,e){return Array.isArray(i)?typeof e<"u"&&i.length?i.every(e):!0:!1}function Ln(i){return Object.getPrototypeOf(i)===Object.prototype&&Object.keys(i).length}function ar(i){return typeof i>"u"}function Gt(i,e){return e&&ar(i)?!0:typeof i=="string"&&!!i.trim().length}function Ku(i,e){return e&&ar(i)?!0:typeof i=="number"&&!isNaN(i)}function S3(i,e){const{requiredNamespaces:t}=e,s=Object.keys(i.namespaces),o=Object.keys(t);let c=!0;return rn(o,s)?(s.forEach(f=>{const{accounts:d,methods:y,events:p}=i.namespaces[f],m=Bn(d),D=t[f];(!rn(yp(f,D),m)||!rn(D.methods,y)||!rn(D.events,p))&&(c=!1)}),c):!1}function Zo(i){return Gt(i,!1)&&i.includes(":")?i.split(":").length===2:!1}function x3(i){if(Gt(i,!1)&&i.includes(":")){const e=i.split(":");if(e.length===3){const t=e[0]+":"+e[1];return!!e[2]&&Zo(t)}}return!1}function O3(i){if(Gt(i,!1))try{return typeof new URL(i)<"u"}catch{return!1}return!1}function A3(i){var e;return(e=i==null?void 0:i.proposer)==null?void 0:e.publicKey}function P3(i){return i==null?void 0:i.topic}function C3(i,e){let t=null;return Gt(i==null?void 0:i.publicKey,!1)||(t=ce("MISSING_OR_INVALID",`${e} controller public key should be a string`)),t}function Cf(i){let e=!0;return oi(i)?i.length&&(e=i.every(t=>Gt(t,!1))):e=!1,e}function T3(i,e,t){let s=null;return oi(e)&&e.length?e.forEach(o=>{s||Zo(o)||(s=Rt("UNSUPPORTED_CHAINS",`${t}, chain ${o} should be a string and conform to "namespace:chainId" format`))}):Zo(i)||(s=Rt("UNSUPPORTED_CHAINS",`${t}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),s}function N3(i,e,t){let s=null;return Object.entries(i).forEach(([o,c])=>{if(s)return;const f=T3(o,yp(o,c),`${e} ${t}`);f&&(s=f)}),s}function R3(i,e){let t=null;return oi(i)?i.forEach(s=>{t||x3(s)||(t=Rt("UNSUPPORTED_ACCOUNTS",`${e}, account ${s} should be a string and conform to "namespace:chainId:address" format`))}):t=Rt("UNSUPPORTED_ACCOUNTS",`${e}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),t}function F3(i,e){let t=null;return Object.values(i).forEach(s=>{if(t)return;const o=R3(s==null?void 0:s.accounts,`${e} namespace`);o&&(t=o)}),t}function $3(i,e){let t=null;return Cf(i==null?void 0:i.methods)?Cf(i==null?void 0:i.events)||(t=Rt("UNSUPPORTED_EVENTS",`${e}, events should be an array of strings or empty array for no events`)):t=Rt("UNSUPPORTED_METHODS",`${e}, methods should be an array of strings or empty array for no methods`),t}function Sp(i,e){let t=null;return Object.values(i).forEach(s=>{if(t)return;const o=$3(s,`${e}, namespace`);o&&(t=o)}),t}function U3(i,e,t){let s=null;if(i&&Ln(i)){const o=Sp(i,e);o&&(s=o);const c=N3(i,e,t);c&&(s=c)}else s=ce("MISSING_OR_INVALID",`${e}, ${t} should be an object with data`);return s}function ko(i,e){let t=null;if(i&&Ln(i)){const s=Sp(i,e);s&&(t=s);const o=F3(i,e);o&&(t=o)}else t=ce("MISSING_OR_INVALID",`${e}, namespaces should be an object with data`);return t}function xp(i){return Gt(i.protocol,!0)}function L3(i,e){let t=!1;return e&&!i?t=!0:i&&oi(i)&&i.length&&i.forEach(s=>{t=xp(s)}),t}function M3(i){return typeof i=="number"}function vr(i){return typeof i<"u"&&typeof i!==null}function j3(i){return!(!i||typeof i!="object"||!i.code||!Ku(i.code,!1)||!i.message||!Gt(i.message,!1))}function B3(i){return!(ar(i)||!Gt(i.method,!1))}function z3(i){return!(ar(i)||ar(i.result)&&ar(i.error)||!Ku(i.id,!1)||!Gt(i.jsonrpc,!1))}function q3(i){return!(ar(i)||!Gt(i.name,!1))}function Tf(i,e){return!(!Zo(e)||!_3(i).includes(e))}function H3(i,e,t){return Gt(t,!1)?b3(i,e).includes(t):!1}function K3(i,e,t){return Gt(t,!1)?w3(i,e).includes(t):!1}function Nf(i,e,t){let s=null;const o=k3(i),c=V3(e),f=Object.keys(o),d=Object.keys(c),y=Rf(Object.keys(i)),p=Rf(Object.keys(e)),m=y.filter(D=>!p.includes(D));return m.length&&(s=ce("NON_CONFORMING_NAMESPACES",`${t} namespaces keys don't satisfy requiredNamespaces.
      Required: ${m.toString()}
      Received: ${Object.keys(e).toString()}`)),rn(f,d)||(s=ce("NON_CONFORMING_NAMESPACES",`${t} namespaces chains don't satisfy required namespaces.
      Required: ${f.toString()}
      Approved: ${d.toString()}`)),Object.keys(e).forEach(D=>{if(!D.includes(":")||s)return;const A=Bn(e[D].accounts);A.includes(D)||(s=ce("NON_CONFORMING_NAMESPACES",`${t} namespaces accounts don't satisfy namespace accounts for ${D}
        Required: ${D}
        Approved: ${A.toString()}`))}),f.forEach(D=>{s||(rn(o[D].methods,c[D].methods)?rn(o[D].events,c[D].events)||(s=ce("NON_CONFORMING_NAMESPACES",`${t} namespaces events don't satisfy namespace events for ${D}`)):s=ce("NON_CONFORMING_NAMESPACES",`${t} namespaces methods don't satisfy namespace methods for ${D}`))}),s}function k3(i){const e={};return Object.keys(i).forEach(t=>{var s;t.includes(":")?e[t]=i[t]:(s=i[t].chains)==null||s.forEach(o=>{e[o]={methods:i[t].methods,events:i[t].events}})}),e}function Rf(i){return[...new Set(i.map(e=>e.includes(":")?e.split(":")[0]:e))]}function V3(i){const e={};return Object.keys(i).forEach(t=>{if(t.includes(":"))e[t]=i[t];else{const s=Bn(i[t].accounts);s==null||s.forEach(o=>{e[o]={accounts:i[t].accounts.filter(c=>c.includes(`${o}:`)),methods:i[t].methods,events:i[t].events}})}}),e}function W3(i,e){return Ku(i,!1)&&i<=e.max&&i>=e.min}const G3=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,Y3=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,J3=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function X3(i,e){if(i==="__proto__"||i==="constructor"&&e&&typeof e=="object"&&"prototype"in e){Z3(i);return}return e}function Z3(i){console.warn(`[destr] Dropping "${i}" key to prevent prototype pollution.`)}function Uo(i,e={}){if(typeof i!="string")return i;const t=i.trim();if(i[0]==='"'&&i.endsWith('"')&&!i.includes("\\"))return t.slice(1,-1);if(t.length<=9){const s=t.toLowerCase();if(s==="true")return!0;if(s==="false")return!1;if(s==="undefined")return;if(s==="null")return null;if(s==="nan")return Number.NaN;if(s==="infinity")return Number.POSITIVE_INFINITY;if(s==="-infinity")return Number.NEGATIVE_INFINITY}if(!J3.test(i)){if(e.strict)throw new SyntaxError("[destr] Invalid JSON");return i}try{if(G3.test(i)||Y3.test(i)){if(e.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(i,X3)}return JSON.parse(i)}catch(s){if(e.strict)throw s;return i}}function Q3(i){return!i||typeof i.then!="function"?Promise.resolve(i):i}function Wt(i,...e){try{return Q3(i(...e))}catch(t){return Promise.reject(t)}}function e6(i){const e=typeof i;return i===null||e!=="object"&&e!=="function"}function t6(i){const e=Object.getPrototypeOf(i);return!e||e.isPrototypeOf(Object)}function Vo(i){if(e6(i))return String(i);if(t6(i)||Array.isArray(i))return JSON.stringify(i);if(typeof i.toJSON=="function")return Vo(i.toJSON());throw new Error("[unstorage] Cannot stringify value!")}function Op(){if(typeof Buffer>"u")throw new TypeError("[unstorage] Buffer is not supported!")}const wu="base64:";function r6(i){if(typeof i=="string")return i;Op();const e=Buffer.from(i).toString("base64");return wu+e}function i6(i){return typeof i!="string"||!i.startsWith(wu)?i:(Op(),Buffer.from(i.slice(wu.length),"base64"))}function yr(i){return i?i.split("?")[0].replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,""):""}function n6(...i){return yr(i.join(":"))}function Lo(i){return i=yr(i),i?i+":":""}const s6="memory",o6=()=>{const i=new Map;return{name:s6,getInstance:()=>i,hasItem(e){return i.has(e)},getItem(e){return i.get(e)??null},getItemRaw(e){return i.get(e)??null},setItem(e,t){i.set(e,t)},setItemRaw(e,t){i.set(e,t)},removeItem(e){i.delete(e)},getKeys(){return[...i.keys()]},clear(){i.clear()},dispose(){i.clear()}}};function a6(i={}){const e={mounts:{"":i.driver||o6()},mountpoints:[""],watching:!1,watchListeners:[],unwatch:{}},t=p=>{for(const m of e.mountpoints)if(p.startsWith(m))return{base:m,relativeKey:p.slice(m.length),driver:e.mounts[m]};return{base:"",relativeKey:p,driver:e.mounts[""]}},s=(p,m)=>e.mountpoints.filter(D=>D.startsWith(p)||m&&p.startsWith(D)).map(D=>({relativeBase:p.length>D.length?p.slice(D.length):void 0,mountpoint:D,driver:e.mounts[D]})),o=(p,m)=>{if(e.watching){m=yr(m);for(const D of e.watchListeners)D(p,m)}},c=async()=>{if(!e.watching){e.watching=!0;for(const p in e.mounts)e.unwatch[p]=await Ff(e.mounts[p],o,p)}},f=async()=>{if(e.watching){for(const p in e.unwatch)await e.unwatch[p]();e.unwatch={},e.watching=!1}},d=(p,m,D)=>{const A=new Map,O=S=>{let k=A.get(S.base);return k||(k={driver:S.driver,base:S.base,items:[]},A.set(S.base,k)),k};for(const S of p){const k=typeof S=="string",H=yr(k?S:S.key),re=k?void 0:S.value,F=k||!S.options?m:{...m,...S.options},U=t(H);O(U).items.push({key:H,value:re,relativeKey:U.relativeKey,options:F})}return Promise.all([...A.values()].map(S=>D(S))).then(S=>S.flat())},y={hasItem(p,m={}){p=yr(p);const{relativeKey:D,driver:A}=t(p);return Wt(A.hasItem,D,m)},getItem(p,m={}){p=yr(p);const{relativeKey:D,driver:A}=t(p);return Wt(A.getItem,D,m).then(O=>Uo(O))},getItems(p,m){return d(p,m,D=>D.driver.getItems?Wt(D.driver.getItems,D.items.map(A=>({key:A.relativeKey,options:A.options})),m).then(A=>A.map(O=>({key:n6(D.base,O.key),value:Uo(O.value)}))):Promise.all(D.items.map(A=>Wt(D.driver.getItem,A.relativeKey,A.options).then(O=>({key:A.key,value:Uo(O)})))))},getItemRaw(p,m={}){p=yr(p);const{relativeKey:D,driver:A}=t(p);return A.getItemRaw?Wt(A.getItemRaw,D,m):Wt(A.getItem,D,m).then(O=>i6(O))},async setItem(p,m,D={}){if(m===void 0)return y.removeItem(p);p=yr(p);const{relativeKey:A,driver:O}=t(p);O.setItem&&(await Wt(O.setItem,A,Vo(m),D),O.watch||o("update",p))},async setItems(p,m){await d(p,m,async D=>{if(D.driver.setItems)return Wt(D.driver.setItems,D.items.map(A=>({key:A.relativeKey,value:Vo(A.value),options:A.options})),m);D.driver.setItem&&await Promise.all(D.items.map(A=>Wt(D.driver.setItem,A.relativeKey,Vo(A.value),A.options)))})},async setItemRaw(p,m,D={}){if(m===void 0)return y.removeItem(p,D);p=yr(p);const{relativeKey:A,driver:O}=t(p);if(O.setItemRaw)await Wt(O.setItemRaw,A,m,D);else if(O.setItem)await Wt(O.setItem,A,r6(m),D);else return;O.watch||o("update",p)},async removeItem(p,m={}){typeof m=="boolean"&&(m={removeMeta:m}),p=yr(p);const{relativeKey:D,driver:A}=t(p);A.removeItem&&(await Wt(A.removeItem,D,m),(m.removeMeta||m.removeMata)&&await Wt(A.removeItem,D+"$",m),A.watch||o("remove",p))},async getMeta(p,m={}){typeof m=="boolean"&&(m={nativeOnly:m}),p=yr(p);const{relativeKey:D,driver:A}=t(p),O=Object.create(null);if(A.getMeta&&Object.assign(O,await Wt(A.getMeta,D,m)),!m.nativeOnly){const S=await Wt(A.getItem,D+"$",m).then(k=>Uo(k));S&&typeof S=="object"&&(typeof S.atime=="string"&&(S.atime=new Date(S.atime)),typeof S.mtime=="string"&&(S.mtime=new Date(S.mtime)),Object.assign(O,S))}return O},setMeta(p,m,D={}){return this.setItem(p+"$",m,D)},removeMeta(p,m={}){return this.removeItem(p+"$",m)},async getKeys(p,m={}){p=Lo(p);const D=s(p,!0);let A=[];const O=[];for(const S of D){const k=await Wt(S.driver.getKeys,S.relativeBase,m);for(const H of k){const re=S.mountpoint+yr(H);A.some(F=>re.startsWith(F))||O.push(re)}A=[S.mountpoint,...A.filter(H=>!H.startsWith(S.mountpoint))]}return p?O.filter(S=>S.startsWith(p)&&S[S.length-1]!=="$"):O.filter(S=>S[S.length-1]!=="$")},async clear(p,m={}){p=Lo(p),await Promise.all(s(p,!1).map(async D=>{if(D.driver.clear)return Wt(D.driver.clear,D.relativeBase,m);if(D.driver.removeItem){const A=await D.driver.getKeys(D.relativeBase||"",m);return Promise.all(A.map(O=>D.driver.removeItem(O,m)))}}))},async dispose(){await Promise.all(Object.values(e.mounts).map(p=>$f(p)))},async watch(p){return await c(),e.watchListeners.push(p),async()=>{e.watchListeners=e.watchListeners.filter(m=>m!==p),e.watchListeners.length===0&&await f()}},async unwatch(){e.watchListeners=[],await f()},mount(p,m){if(p=Lo(p),p&&e.mounts[p])throw new Error(`already mounted at ${p}`);return p&&(e.mountpoints.push(p),e.mountpoints.sort((D,A)=>A.length-D.length)),e.mounts[p]=m,e.watching&&Promise.resolve(Ff(m,o,p)).then(D=>{e.unwatch[p]=D}).catch(console.error),y},async unmount(p,m=!0){p=Lo(p),!(!p||!e.mounts[p])&&(e.watching&&p in e.unwatch&&(e.unwatch[p](),delete e.unwatch[p]),m&&await $f(e.mounts[p]),e.mountpoints=e.mountpoints.filter(D=>D!==p),delete e.mounts[p])},getMount(p=""){p=yr(p)+":";const m=t(p);return{driver:m.driver,base:m.base}},getMounts(p="",m={}){return p=yr(p),s(p,m.parents).map(A=>({driver:A.driver,base:A.mountpoint}))},keys:(p,m={})=>y.getKeys(p,m),get:(p,m={})=>y.getItem(p,m),set:(p,m,D={})=>y.setItem(p,m,D),has:(p,m={})=>y.hasItem(p,m),del:(p,m={})=>y.removeItem(p,m),remove:(p,m={})=>y.removeItem(p,m)};return y}function Ff(i,e,t){return i.watch?i.watch((s,o)=>e(s,t+o)):()=>{}}async function $f(i){typeof i.dispose=="function"&&await Wt(i.dispose)}function an(i){return new Promise((e,t)=>{i.oncomplete=i.onsuccess=()=>e(i.result),i.onabort=i.onerror=()=>t(i.error)})}function Ap(i,e){const t=indexedDB.open(i);t.onupgradeneeded=()=>t.result.createObjectStore(e);const s=an(t);return(o,c)=>s.then(f=>c(f.transaction(e,o).objectStore(e)))}let Wc;function Ss(){return Wc||(Wc=Ap("keyval-store","keyval")),Wc}function Uf(i,e=Ss()){return e("readonly",t=>an(t.get(i)))}function c6(i,e,t=Ss()){return t("readwrite",s=>(s.put(e,i),an(s.transaction)))}function u6(i,e=Ss()){return e("readwrite",t=>(t.delete(i),an(t.transaction)))}function h6(i=Ss()){return i("readwrite",e=>(e.clear(),an(e.transaction)))}function l6(i,e){return i.openCursor().onsuccess=function(){this.result&&(e(this.result),this.result.continue())},an(i.transaction)}function f6(i=Ss()){return i("readonly",e=>{if(e.getAllKeys)return an(e.getAllKeys());const t=[];return l6(e,s=>t.push(s.key)).then(()=>t)})}const d6=i=>JSON.stringify(i,(e,t)=>typeof t=="bigint"?t.toString()+"n":t),p6=i=>{const e=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,t=i.replace(e,'$1"$2n"$3');return JSON.parse(t,(s,o)=>typeof o=="string"&&o.match(/^\d+n$/)?BigInt(o.substring(0,o.length-1)):o)};function xs(i){if(typeof i!="string")throw new Error(`Cannot safe json parse value of type ${typeof i}`);try{return p6(i)}catch{return i}}function nn(i){return typeof i=="string"?i:d6(i)||""}const g6="idb-keyval";var y6=(i={})=>{const e=i.base&&i.base.length>0?`${i.base}:`:"",t=o=>e+o;let s;return i.dbName&&i.storeName&&(s=Ap(i.dbName,i.storeName)),{name:g6,options:i,async hasItem(o){return!(typeof await Uf(t(o),s)>"u")},async getItem(o){return await Uf(t(o),s)??null},setItem(o,c){return c6(t(o),c,s)},removeItem(o){return u6(t(o),s)},getKeys(){return f6(s)},clear(){return h6(s)}}};const v6="WALLET_CONNECT_V2_INDEXED_DB",m6="keyvaluestorage";let _6=class{constructor(){this.indexedDb=a6({driver:y6({dbName:v6,storeName:m6})})}async getKeys(){return this.indexedDb.getKeys()}async getEntries(){return(await this.indexedDb.getItems(await this.indexedDb.getKeys())).map(e=>[e.key,e.value])}async getItem(e){const t=await this.indexedDb.getItem(e);if(t!==null)return t}async setItem(e,t){await this.indexedDb.setItem(e,nn(t))}async removeItem(e){await this.indexedDb.removeItem(e)}};var Gc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Wo={exports:{}};(function(){let i;function e(){}i=e,i.prototype.getItem=function(t){return this.hasOwnProperty(t)?String(this[t]):null},i.prototype.setItem=function(t,s){this[t]=String(s)},i.prototype.removeItem=function(t){delete this[t]},i.prototype.clear=function(){const t=this;Object.keys(t).forEach(function(s){t[s]=void 0,delete t[s]})},i.prototype.key=function(t){return t=t||0,Object.keys(this)[t]},i.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof Gc<"u"&&Gc.localStorage?Wo.exports=Gc.localStorage:typeof window<"u"&&window.localStorage?Wo.exports=window.localStorage:Wo.exports=new e})();function b6(i){var e;return[i[0],xs((e=i[1])!=null?e:"")]}let w6=class{constructor(){this.localStorage=Wo.exports}async getKeys(){return Object.keys(this.localStorage)}async getEntries(){return Object.entries(this.localStorage).map(b6)}async getItem(e){const t=this.localStorage.getItem(e);if(t!==null)return xs(t)}async setItem(e,t){this.localStorage.setItem(e,nn(t))}async removeItem(e){this.localStorage.removeItem(e)}};const E6="wc_storage_version",Lf=1,D6=async(i,e,t)=>{const s=E6,o=await e.getItem(s);if(o&&o>=Lf){t(e);return}const c=await i.getKeys();if(!c.length){t(e);return}const f=[];for(;c.length;){const d=c.shift();if(!d)continue;const y=d.toLowerCase();if(y.includes("wc@")||y.includes("walletconnect")||y.includes("wc_")||y.includes("wallet_connect")){const p=await i.getItem(d);await e.setItem(d,p),f.push(d)}}await e.setItem(s,Lf),t(e),I6(i,f)},I6=async(i,e)=>{e.length&&e.forEach(async t=>{await i.removeItem(t)})};let S6=class{constructor(){this.initialized=!1,this.setInitialized=t=>{this.storage=t,this.initialized=!0};const e=new w6;this.storage=e;try{const t=new _6;D6(e,t,this.setInitialized)}catch{this.initialized=!0}}async getKeys(){return await this.initialize(),this.storage.getKeys()}async getEntries(){return await this.initialize(),this.storage.getEntries()}async getItem(e){return await this.initialize(),this.storage.getItem(e)}async setItem(e,t){return await this.initialize(),this.storage.setItem(e,t)}async removeItem(e){return await this.initialize(),this.storage.removeItem(e)}async initialize(){this.initialized||await new Promise(e=>{const t=setInterval(()=>{this.initialized&&(clearInterval(t),e())},20)})}};var zn={},us={},Yc={},hs={};class cn{}const x6=Object.freeze(Object.defineProperty({__proto__:null,IEvents:cn},Symbol.toStringTag,{value:"Module"})),O6=jd(x6);var Mf;function A6(){if(Mf)return hs;Mf=1,Object.defineProperty(hs,"__esModule",{value:!0}),hs.IHeartBeat=void 0;const i=O6;class e extends i.IEvents{constructor(s){super()}}return hs.IHeartBeat=e,hs}var jf;function Pp(){return jf||(jf=1,function(i){Object.defineProperty(i,"__esModule",{value:!0}),Ei.__exportStar(A6(),i)}(Yc)),Yc}var Jc={},tn={},Bf;function P6(){if(Bf)return tn;Bf=1,Object.defineProperty(tn,"__esModule",{value:!0}),tn.HEARTBEAT_EVENTS=tn.HEARTBEAT_INTERVAL=void 0;const i=ve;return tn.HEARTBEAT_INTERVAL=i.FIVE_SECONDS,tn.HEARTBEAT_EVENTS={pulse:"heartbeat_pulse"},tn}var zf;function Cp(){return zf||(zf=1,function(i){Object.defineProperty(i,"__esModule",{value:!0}),Ei.__exportStar(P6(),i)}(Jc)),Jc}var qf;function C6(){if(qf)return us;qf=1,Object.defineProperty(us,"__esModule",{value:!0}),us.HeartBeat=void 0;const i=Ei,e=_r,t=ve,s=Pp(),o=Cp();class c extends s.IHeartBeat{constructor(d){super(d),this.events=new e.EventEmitter,this.interval=o.HEARTBEAT_INTERVAL,this.interval=(d==null?void 0:d.interval)||o.HEARTBEAT_INTERVAL}static init(d){return i.__awaiter(this,void 0,void 0,function*(){const y=new c(d);return yield y.init(),y})}init(){return i.__awaiter(this,void 0,void 0,function*(){yield this.initialize()})}stop(){clearInterval(this.intervalRef)}on(d,y){this.events.on(d,y)}once(d,y){this.events.once(d,y)}off(d,y){this.events.off(d,y)}removeListener(d,y){this.events.removeListener(d,y)}initialize(){return i.__awaiter(this,void 0,void 0,function*(){this.intervalRef=setInterval(()=>this.pulse(),t.toMiliseconds(this.interval))})}pulse(){this.events.emit(o.HEARTBEAT_EVENTS.pulse)}}return us.HeartBeat=c,us}(function(i){Object.defineProperty(i,"__esModule",{value:!0});const e=Ei;e.__exportStar(C6(),i),e.__exportStar(Pp(),i),e.__exportStar(Cp(),i)})(zn);function T6(i){try{return JSON.stringify(i)}catch{return'"[Circular]"'}}var N6=R6;function R6(i,e,t){var s=t&&t.stringify||T6,o=1;if(typeof i=="object"&&i!==null){var c=e.length+o;if(c===1)return i;var f=new Array(c);f[0]=s(i);for(var d=1;d<c;d++)f[d]=s(e[d]);return f.join(" ")}if(typeof i!="string")return i;var y=e.length;if(y===0)return i;for(var p="",m=1-o,D=-1,A=i&&i.length||0,O=0;O<A;){if(i.charCodeAt(O)===37&&O+1<A){switch(D=D>-1?D:0,i.charCodeAt(O+1)){case 100:case 102:if(m>=y||e[m]==null)break;D<O&&(p+=i.slice(D,O)),p+=Number(e[m]),D=O+2,O++;break;case 105:if(m>=y||e[m]==null)break;D<O&&(p+=i.slice(D,O)),p+=Math.floor(Number(e[m])),D=O+2,O++;break;case 79:case 111:case 106:if(m>=y||e[m]===void 0)break;D<O&&(p+=i.slice(D,O));var S=typeof e[m];if(S==="string"){p+="'"+e[m]+"'",D=O+2,O++;break}if(S==="function"){p+=e[m].name||"<anonymous>",D=O+2,O++;break}p+=s(e[m]),D=O+2,O++;break;case 115:if(m>=y)break;D<O&&(p+=i.slice(D,O)),p+=String(e[m]),D=O+2,O++;break;case 37:D<O&&(p+=i.slice(D,O)),p+="%",D=O+2,O++,m--;break}++m}++O}return D===-1?i:(D<A&&(p+=i.slice(D)),p)}const Hf=N6;var F6=si;const bs=K6().console||{},$6={mapHttpRequest:Mo,mapHttpResponse:Mo,wrapRequestSerializer:Xc,wrapResponseSerializer:Xc,wrapErrorSerializer:Xc,req:Mo,res:Mo,err:B6};function U6(i,e){return Array.isArray(i)?i.filter(function(s){return s!=="!stdSerializers.err"}):i===!0?Object.keys(e):!1}function si(i){i=i||{},i.browser=i.browser||{};const e=i.browser.transmit;if(e&&typeof e.send!="function")throw Error("pino: transmit option must have a send function");const t=i.browser.write||bs;i.browser.write&&(i.browser.asObject=!0);const s=i.serializers||{},o=U6(i.browser.serialize,s);let c=i.browser.serialize;Array.isArray(i.browser.serialize)&&i.browser.serialize.indexOf("!stdSerializers.err")>-1&&(c=!1);const f=["error","fatal","warn","info","debug","trace"];typeof t=="function"&&(t.error=t.fatal=t.warn=t.info=t.debug=t.trace=t),i.enabled===!1&&(i.level="silent");const d=i.level||"info",y=Object.create(t);y.log||(y.log=ws),Object.defineProperty(y,"levelVal",{get:m}),Object.defineProperty(y,"level",{get:D,set:A});const p={transmit:e,serialize:o,asObject:i.browser.asObject,levels:f,timestamp:z6(i)};y.levels=si.levels,y.level=d,y.setMaxListeners=y.getMaxListeners=y.emit=y.addListener=y.on=y.prependListener=y.once=y.prependOnceListener=y.removeListener=y.removeAllListeners=y.listeners=y.listenerCount=y.eventNames=y.write=y.flush=ws,y.serializers=s,y._serialize=o,y._stdErrSerialize=c,y.child=O,e&&(y._logEvent=Eu());function m(){return this.level==="silent"?1/0:this.levels.values[this.level]}function D(){return this._level}function A(S){if(S!=="silent"&&!this.levels.values[S])throw Error("unknown level "+S);this._level=S,Nn(p,y,"error","log"),Nn(p,y,"fatal","error"),Nn(p,y,"warn","error"),Nn(p,y,"info","log"),Nn(p,y,"debug","log"),Nn(p,y,"trace","log")}function O(S,k){if(!S)throw new Error("missing bindings for child Pino");k=k||{},o&&S.serializers&&(k.serializers=S.serializers);const H=k.serializers;if(o&&H){var re=Object.assign({},s,H),F=i.browser.serialize===!0?Object.keys(re):o;delete S.serializers,ha([S],F,re,this._stdErrSerialize)}function U(I){this._childLevel=(I._childLevel|0)+1,this.error=Rn(I,S,"error"),this.fatal=Rn(I,S,"fatal"),this.warn=Rn(I,S,"warn"),this.info=Rn(I,S,"info"),this.debug=Rn(I,S,"debug"),this.trace=Rn(I,S,"trace"),re&&(this.serializers=re,this._serialize=F),e&&(this._logEvent=Eu([].concat(I._logEvent.bindings,S)))}return U.prototype=this,new U(this)}return y}si.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}};si.stdSerializers=$6;si.stdTimeFunctions=Object.assign({},{nullTime:Tp,epochTime:Np,unixTime:q6,isoTime:H6});function Nn(i,e,t,s){const o=Object.getPrototypeOf(e);e[t]=e.levelVal>e.levels.values[t]?ws:o[t]?o[t]:bs[t]||bs[s]||ws,L6(i,e,t)}function L6(i,e,t){!i.transmit&&e[t]===ws||(e[t]=function(s){return function(){const c=i.timestamp(),f=new Array(arguments.length),d=Object.getPrototypeOf&&Object.getPrototypeOf(this)===bs?bs:this;for(var y=0;y<f.length;y++)f[y]=arguments[y];if(i.serialize&&!i.asObject&&ha(f,this._serialize,this.serializers,this._stdErrSerialize),i.asObject?s.call(d,M6(this,t,f,c)):s.apply(d,f),i.transmit){const p=i.transmit.level||e.level,m=si.levels.values[p],D=si.levels.values[t];if(D<m)return;j6(this,{ts:c,methodLevel:t,methodValue:D,transmitLevel:p,transmitValue:si.levels.values[i.transmit.level||e.level],send:i.transmit.send,val:e.levelVal},f)}}}(e[t]))}function M6(i,e,t,s){i._serialize&&ha(t,i._serialize,i.serializers,i._stdErrSerialize);const o=t.slice();let c=o[0];const f={};s&&(f.time=s),f.level=si.levels.values[e];let d=(i._childLevel|0)+1;if(d<1&&(d=1),c!==null&&typeof c=="object"){for(;d--&&typeof o[0]=="object";)Object.assign(f,o.shift());c=o.length?Hf(o.shift(),o):void 0}else typeof c=="string"&&(c=Hf(o.shift(),o));return c!==void 0&&(f.msg=c),f}function ha(i,e,t,s){for(const o in i)if(s&&i[o]instanceof Error)i[o]=si.stdSerializers.err(i[o]);else if(typeof i[o]=="object"&&!Array.isArray(i[o]))for(const c in i[o])e&&e.indexOf(c)>-1&&c in t&&(i[o][c]=t[c](i[o][c]))}function Rn(i,e,t){return function(){const s=new Array(1+arguments.length);s[0]=e;for(var o=1;o<s.length;o++)s[o]=arguments[o-1];return i[t].apply(this,s)}}function j6(i,e,t){const s=e.send,o=e.ts,c=e.methodLevel,f=e.methodValue,d=e.val,y=i._logEvent.bindings;ha(t,i._serialize||Object.keys(i.serializers),i.serializers,i._stdErrSerialize===void 0?!0:i._stdErrSerialize),i._logEvent.ts=o,i._logEvent.messages=t.filter(function(p){return y.indexOf(p)===-1}),i._logEvent.level.label=c,i._logEvent.level.value=f,s(c,i._logEvent,d),i._logEvent=Eu(y)}function Eu(i){return{ts:0,messages:[],bindings:i||[],level:{label:"",value:0}}}function B6(i){const e={type:i.constructor.name,msg:i.message,stack:i.stack};for(const t in i)e[t]===void 0&&(e[t]=i[t]);return e}function z6(i){return typeof i.timestamp=="function"?i.timestamp:i.timestamp===!1?Tp:Np}function Mo(){return{}}function Xc(i){return i}function ws(){}function Tp(){return!1}function Np(){return Date.now()}function q6(){return Math.round(Date.now()/1e3)}function H6(){return new Date(Date.now()).toISOString()}function K6(){function i(e){return typeof e<"u"&&e}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return i(self)||i(window)||i(this)||{}}}const la=ra(F6),k6={level:"info"},Os="custom_context";var V6=Object.defineProperty,W6=Object.defineProperties,G6=Object.getOwnPropertyDescriptors,Kf=Object.getOwnPropertySymbols,Y6=Object.prototype.hasOwnProperty,J6=Object.prototype.propertyIsEnumerable,kf=(i,e,t)=>e in i?V6(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,X6=(i,e)=>{for(var t in e||(e={}))Y6.call(e,t)&&kf(i,t,e[t]);if(Kf)for(var t of Kf(e))J6.call(e,t)&&kf(i,t,e[t]);return i},Z6=(i,e)=>W6(i,G6(e));function fa(i){return Z6(X6({},i),{level:(i==null?void 0:i.level)||k6.level})}function Q6(i,e=Os){return i[e]||""}function eD(i,e,t=Os){return i[t]=e,i}function br(i,e=Os){let t="";return typeof i.bindings>"u"?t=Q6(i,e):t=i.bindings().context||"",t}function tD(i,e,t=Os){const s=br(i,t);return s.trim()?`${s}/${e}`:e}function Ar(i,e,t=Os){const s=tD(i,e,t),o=i.child({context:s});return eD(o,s,t)}let rD=class extends cn{constructor(e){super(),this.opts=e,this.protocol="wc",this.version=2}};class iD extends cn{constructor(e,t){super(),this.core=e,this.logger=t,this.records=new Map}}class nD{constructor(e,t){this.logger=e,this.core=t}}let sD=class extends cn{constructor(e,t){super(),this.relayer=e,this.logger=t}},oD=class extends cn{constructor(e){super()}},aD=class{constructor(e,t,s,o){this.core=e,this.logger=t,this.name=s}},cD=class extends cn{constructor(e,t){super(),this.relayer=e,this.logger=t}},uD=class extends cn{constructor(e,t){super(),this.core=e,this.logger=t}},hD=class{constructor(e,t){this.projectId=e,this.logger=t}},lD=class{constructor(e){this.opts=e,this.protocol="wc",this.version=2}},fD=class{constructor(e){this.client=e}};var ku={},Rp={};(function(i){Object.defineProperty(i,"__esModule",{value:!0});var e=Ue,t=Or;i.DIGEST_LENGTH=64,i.BLOCK_SIZE=128;var s=function(){function d(){this.digestLength=i.DIGEST_LENGTH,this.blockSize=i.BLOCK_SIZE,this._stateHi=new Int32Array(8),this._stateLo=new Int32Array(8),this._tempHi=new Int32Array(16),this._tempLo=new Int32Array(16),this._buffer=new Uint8Array(256),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return d.prototype._initState=function(){this._stateHi[0]=1779033703,this._stateHi[1]=3144134277,this._stateHi[2]=1013904242,this._stateHi[3]=2773480762,this._stateHi[4]=1359893119,this._stateHi[5]=2600822924,this._stateHi[6]=528734635,this._stateHi[7]=1541459225,this._stateLo[0]=4089235720,this._stateLo[1]=2227873595,this._stateLo[2]=4271175723,this._stateLo[3]=1595750129,this._stateLo[4]=2917565137,this._stateLo[5]=725511199,this._stateLo[6]=4215389547,this._stateLo[7]=327033209},d.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},d.prototype.clean=function(){t.wipe(this._buffer),t.wipe(this._tempHi),t.wipe(this._tempLo),this.reset()},d.prototype.update=function(y,p){if(p===void 0&&(p=y.length),this._finished)throw new Error("SHA512: can't update because hash was finished.");var m=0;if(this._bytesHashed+=p,this._bufferLength>0){for(;this._bufferLength<i.BLOCK_SIZE&&p>0;)this._buffer[this._bufferLength++]=y[m++],p--;this._bufferLength===this.blockSize&&(c(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,this.blockSize),this._bufferLength=0)}for(p>=this.blockSize&&(m=c(this._tempHi,this._tempLo,this._stateHi,this._stateLo,y,m,p),p%=this.blockSize);p>0;)this._buffer[this._bufferLength++]=y[m++],p--;return this},d.prototype.finish=function(y){if(!this._finished){var p=this._bytesHashed,m=this._bufferLength,D=p/536870912|0,A=p<<3,O=p%128<112?128:256;this._buffer[m]=128;for(var S=m+1;S<O-8;S++)this._buffer[S]=0;e.writeUint32BE(D,this._buffer,O-8),e.writeUint32BE(A,this._buffer,O-4),c(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,O),this._finished=!0}for(var S=0;S<this.digestLength/8;S++)e.writeUint32BE(this._stateHi[S],y,S*8),e.writeUint32BE(this._stateLo[S],y,S*8+4);return this},d.prototype.digest=function(){var y=new Uint8Array(this.digestLength);return this.finish(y),y},d.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{stateHi:new Int32Array(this._stateHi),stateLo:new Int32Array(this._stateLo),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},d.prototype.restoreState=function(y){return this._stateHi.set(y.stateHi),this._stateLo.set(y.stateLo),this._bufferLength=y.bufferLength,y.buffer&&this._buffer.set(y.buffer),this._bytesHashed=y.bytesHashed,this._finished=!1,this},d.prototype.cleanSavedState=function(y){t.wipe(y.stateHi),t.wipe(y.stateLo),y.buffer&&t.wipe(y.buffer),y.bufferLength=0,y.bytesHashed=0},d}();i.SHA512=s;var o=new Int32Array([1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591]);function c(d,y,p,m,D,A,O){for(var S=p[0],k=p[1],H=p[2],re=p[3],F=p[4],U=p[5],I=p[6],C=p[7],T=m[0],h=m[1],b=m[2],Q=m[3],ne=m[4],ue=m[5],ge=m[6],ye=m[7],E,N,Z,J,K,V,ee,ie;O>=128;){for(var De=0;De<16;De++){var oe=8*De+A;d[De]=e.readUint32BE(D,oe),y[De]=e.readUint32BE(D,oe+4)}for(var De=0;De<80;De++){var Ie=S,le=k,Ce=H,z=re,B=F,$=U,l=I,P=C,se=T,he=h,Ee=b,qe=Q,ke=ne,Le=ue,pt=ge,gt=ye;if(E=C,N=ye,K=N&65535,V=N>>>16,ee=E&65535,ie=E>>>16,E=(F>>>14|ne<<32-14)^(F>>>18|ne<<32-18)^(ne>>>41-32|F<<32-(41-32)),N=(ne>>>14|F<<32-14)^(ne>>>18|F<<32-18)^(F>>>41-32|ne<<32-(41-32)),K+=N&65535,V+=N>>>16,ee+=E&65535,ie+=E>>>16,E=F&U^~F&I,N=ne&ue^~ne&ge,K+=N&65535,V+=N>>>16,ee+=E&65535,ie+=E>>>16,E=o[De*2],N=o[De*2+1],K+=N&65535,V+=N>>>16,ee+=E&65535,ie+=E>>>16,E=d[De%16],N=y[De%16],K+=N&65535,V+=N>>>16,ee+=E&65535,ie+=E>>>16,V+=K>>>16,ee+=V>>>16,ie+=ee>>>16,Z=ee&65535|ie<<16,J=K&65535|V<<16,E=Z,N=J,K=N&65535,V=N>>>16,ee=E&65535,ie=E>>>16,E=(S>>>28|T<<32-28)^(T>>>34-32|S<<32-(34-32))^(T>>>39-32|S<<32-(39-32)),N=(T>>>28|S<<32-28)^(S>>>34-32|T<<32-(34-32))^(S>>>39-32|T<<32-(39-32)),K+=N&65535,V+=N>>>16,ee+=E&65535,ie+=E>>>16,E=S&k^S&H^k&H,N=T&h^T&b^h&b,K+=N&65535,V+=N>>>16,ee+=E&65535,ie+=E>>>16,V+=K>>>16,ee+=V>>>16,ie+=ee>>>16,P=ee&65535|ie<<16,gt=K&65535|V<<16,E=z,N=qe,K=N&65535,V=N>>>16,ee=E&65535,ie=E>>>16,E=Z,N=J,K+=N&65535,V+=N>>>16,ee+=E&65535,ie+=E>>>16,V+=K>>>16,ee+=V>>>16,ie+=ee>>>16,z=ee&65535|ie<<16,qe=K&65535|V<<16,k=Ie,H=le,re=Ce,F=z,U=B,I=$,C=l,S=P,h=se,b=he,Q=Ee,ne=qe,ue=ke,ge=Le,ye=pt,T=gt,De%16===15)for(var oe=0;oe<16;oe++)E=d[oe],N=y[oe],K=N&65535,V=N>>>16,ee=E&65535,ie=E>>>16,E=d[(oe+9)%16],N=y[(oe+9)%16],K+=N&65535,V+=N>>>16,ee+=E&65535,ie+=E>>>16,Z=d[(oe+1)%16],J=y[(oe+1)%16],E=(Z>>>1|J<<32-1)^(Z>>>8|J<<32-8)^Z>>>7,N=(J>>>1|Z<<32-1)^(J>>>8|Z<<32-8)^(J>>>7|Z<<32-7),K+=N&65535,V+=N>>>16,ee+=E&65535,ie+=E>>>16,Z=d[(oe+14)%16],J=y[(oe+14)%16],E=(Z>>>19|J<<32-19)^(J>>>61-32|Z<<32-(61-32))^Z>>>6,N=(J>>>19|Z<<32-19)^(Z>>>61-32|J<<32-(61-32))^(J>>>6|Z<<32-6),K+=N&65535,V+=N>>>16,ee+=E&65535,ie+=E>>>16,V+=K>>>16,ee+=V>>>16,ie+=ee>>>16,d[oe]=ee&65535|ie<<16,y[oe]=K&65535|V<<16}E=S,N=T,K=N&65535,V=N>>>16,ee=E&65535,ie=E>>>16,E=p[0],N=m[0],K+=N&65535,V+=N>>>16,ee+=E&65535,ie+=E>>>16,V+=K>>>16,ee+=V>>>16,ie+=ee>>>16,p[0]=S=ee&65535|ie<<16,m[0]=T=K&65535|V<<16,E=k,N=h,K=N&65535,V=N>>>16,ee=E&65535,ie=E>>>16,E=p[1],N=m[1],K+=N&65535,V+=N>>>16,ee+=E&65535,ie+=E>>>16,V+=K>>>16,ee+=V>>>16,ie+=ee>>>16,p[1]=k=ee&65535|ie<<16,m[1]=h=K&65535|V<<16,E=H,N=b,K=N&65535,V=N>>>16,ee=E&65535,ie=E>>>16,E=p[2],N=m[2],K+=N&65535,V+=N>>>16,ee+=E&65535,ie+=E>>>16,V+=K>>>16,ee+=V>>>16,ie+=ee>>>16,p[2]=H=ee&65535|ie<<16,m[2]=b=K&65535|V<<16,E=re,N=Q,K=N&65535,V=N>>>16,ee=E&65535,ie=E>>>16,E=p[3],N=m[3],K+=N&65535,V+=N>>>16,ee+=E&65535,ie+=E>>>16,V+=K>>>16,ee+=V>>>16,ie+=ee>>>16,p[3]=re=ee&65535|ie<<16,m[3]=Q=K&65535|V<<16,E=F,N=ne,K=N&65535,V=N>>>16,ee=E&65535,ie=E>>>16,E=p[4],N=m[4],K+=N&65535,V+=N>>>16,ee+=E&65535,ie+=E>>>16,V+=K>>>16,ee+=V>>>16,ie+=ee>>>16,p[4]=F=ee&65535|ie<<16,m[4]=ne=K&65535|V<<16,E=U,N=ue,K=N&65535,V=N>>>16,ee=E&65535,ie=E>>>16,E=p[5],N=m[5],K+=N&65535,V+=N>>>16,ee+=E&65535,ie+=E>>>16,V+=K>>>16,ee+=V>>>16,ie+=ee>>>16,p[5]=U=ee&65535|ie<<16,m[5]=ue=K&65535|V<<16,E=I,N=ge,K=N&65535,V=N>>>16,ee=E&65535,ie=E>>>16,E=p[6],N=m[6],K+=N&65535,V+=N>>>16,ee+=E&65535,ie+=E>>>16,V+=K>>>16,ee+=V>>>16,ie+=ee>>>16,p[6]=I=ee&65535|ie<<16,m[6]=ge=K&65535|V<<16,E=C,N=ye,K=N&65535,V=N>>>16,ee=E&65535,ie=E>>>16,E=p[7],N=m[7],K+=N&65535,V+=N>>>16,ee+=E&65535,ie+=E>>>16,V+=K>>>16,ee+=V>>>16,ie+=ee>>>16,p[7]=C=ee&65535|ie<<16,m[7]=ye=K&65535|V<<16,A+=128,O-=128}return A}function f(d){var y=new s;y.update(d);var p=y.digest();return y.clean(),p}i.hash=f})(Rp);(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.convertSecretKeyToX25519=i.convertPublicKeyToX25519=i.verify=i.sign=i.extractPublicKeyFromSecretKey=i.generateKeyPair=i.generateKeyPairFromSeed=i.SEED_LENGTH=i.SECRET_KEY_LENGTH=i.PUBLIC_KEY_LENGTH=i.SIGNATURE_LENGTH=void 0;const e=Mn,t=Rp,s=Or;i.SIGNATURE_LENGTH=64,i.PUBLIC_KEY_LENGTH=32,i.SECRET_KEY_LENGTH=64,i.SEED_LENGTH=32;function o(z){const B=new Float64Array(16);if(z)for(let $=0;$<z.length;$++)B[$]=z[$];return B}const c=new Uint8Array(32);c[0]=9;const f=o(),d=o([1]),y=o([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),p=o([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),m=o([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),D=o([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),A=o([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function O(z,B){for(let $=0;$<16;$++)z[$]=B[$]|0}function S(z){let B=1;for(let $=0;$<16;$++){let l=z[$]+B+65535;B=Math.floor(l/65536),z[$]=l-B*65536}z[0]+=B-1+37*(B-1)}function k(z,B,$){const l=~($-1);for(let P=0;P<16;P++){const se=l&(z[P]^B[P]);z[P]^=se,B[P]^=se}}function H(z,B){const $=o(),l=o();for(let P=0;P<16;P++)l[P]=B[P];S(l),S(l),S(l);for(let P=0;P<2;P++){$[0]=l[0]-65517;for(let he=1;he<15;he++)$[he]=l[he]-65535-($[he-1]>>16&1),$[he-1]&=65535;$[15]=l[15]-32767-($[14]>>16&1);const se=$[15]>>16&1;$[14]&=65535,k(l,$,1-se)}for(let P=0;P<16;P++)z[2*P]=l[P]&255,z[2*P+1]=l[P]>>8}function re(z,B){let $=0;for(let l=0;l<32;l++)$|=z[l]^B[l];return(1&$-1>>>8)-1}function F(z,B){const $=new Uint8Array(32),l=new Uint8Array(32);return H($,z),H(l,B),re($,l)}function U(z){const B=new Uint8Array(32);return H(B,z),B[0]&1}function I(z,B){for(let $=0;$<16;$++)z[$]=B[2*$]+(B[2*$+1]<<8);z[15]&=32767}function C(z,B,$){for(let l=0;l<16;l++)z[l]=B[l]+$[l]}function T(z,B,$){for(let l=0;l<16;l++)z[l]=B[l]-$[l]}function h(z,B,$){let l,P,se=0,he=0,Ee=0,qe=0,ke=0,Le=0,pt=0,gt=0,je=0,Se=0,Re=0,Fe=0,Be=0,Oe=0,$e=0,we=0,Ae=0,He=0,xe=0,Ve=0,Ge=0,Qe=0,et=0,Je=0,tr=0,hr=0,Jr=0,rr=0,ai=0,Di=0,ji=0,wt=$[0],yt=$[1],Et=$[2],Dt=$[3],_t=$[4],vt=$[5],$t=$[6],Ut=$[7],It=$[8],Lt=$[9],St=$[10],Pt=$[11],xt=$[12],ht=$[13],Mt=$[14],jt=$[15];l=B[0],se+=l*wt,he+=l*yt,Ee+=l*Et,qe+=l*Dt,ke+=l*_t,Le+=l*vt,pt+=l*$t,gt+=l*Ut,je+=l*It,Se+=l*Lt,Re+=l*St,Fe+=l*Pt,Be+=l*xt,Oe+=l*ht,$e+=l*Mt,we+=l*jt,l=B[1],he+=l*wt,Ee+=l*yt,qe+=l*Et,ke+=l*Dt,Le+=l*_t,pt+=l*vt,gt+=l*$t,je+=l*Ut,Se+=l*It,Re+=l*Lt,Fe+=l*St,Be+=l*Pt,Oe+=l*xt,$e+=l*ht,we+=l*Mt,Ae+=l*jt,l=B[2],Ee+=l*wt,qe+=l*yt,ke+=l*Et,Le+=l*Dt,pt+=l*_t,gt+=l*vt,je+=l*$t,Se+=l*Ut,Re+=l*It,Fe+=l*Lt,Be+=l*St,Oe+=l*Pt,$e+=l*xt,we+=l*ht,Ae+=l*Mt,He+=l*jt,l=B[3],qe+=l*wt,ke+=l*yt,Le+=l*Et,pt+=l*Dt,gt+=l*_t,je+=l*vt,Se+=l*$t,Re+=l*Ut,Fe+=l*It,Be+=l*Lt,Oe+=l*St,$e+=l*Pt,we+=l*xt,Ae+=l*ht,He+=l*Mt,xe+=l*jt,l=B[4],ke+=l*wt,Le+=l*yt,pt+=l*Et,gt+=l*Dt,je+=l*_t,Se+=l*vt,Re+=l*$t,Fe+=l*Ut,Be+=l*It,Oe+=l*Lt,$e+=l*St,we+=l*Pt,Ae+=l*xt,He+=l*ht,xe+=l*Mt,Ve+=l*jt,l=B[5],Le+=l*wt,pt+=l*yt,gt+=l*Et,je+=l*Dt,Se+=l*_t,Re+=l*vt,Fe+=l*$t,Be+=l*Ut,Oe+=l*It,$e+=l*Lt,we+=l*St,Ae+=l*Pt,He+=l*xt,xe+=l*ht,Ve+=l*Mt,Ge+=l*jt,l=B[6],pt+=l*wt,gt+=l*yt,je+=l*Et,Se+=l*Dt,Re+=l*_t,Fe+=l*vt,Be+=l*$t,Oe+=l*Ut,$e+=l*It,we+=l*Lt,Ae+=l*St,He+=l*Pt,xe+=l*xt,Ve+=l*ht,Ge+=l*Mt,Qe+=l*jt,l=B[7],gt+=l*wt,je+=l*yt,Se+=l*Et,Re+=l*Dt,Fe+=l*_t,Be+=l*vt,Oe+=l*$t,$e+=l*Ut,we+=l*It,Ae+=l*Lt,He+=l*St,xe+=l*Pt,Ve+=l*xt,Ge+=l*ht,Qe+=l*Mt,et+=l*jt,l=B[8],je+=l*wt,Se+=l*yt,Re+=l*Et,Fe+=l*Dt,Be+=l*_t,Oe+=l*vt,$e+=l*$t,we+=l*Ut,Ae+=l*It,He+=l*Lt,xe+=l*St,Ve+=l*Pt,Ge+=l*xt,Qe+=l*ht,et+=l*Mt,Je+=l*jt,l=B[9],Se+=l*wt,Re+=l*yt,Fe+=l*Et,Be+=l*Dt,Oe+=l*_t,$e+=l*vt,we+=l*$t,Ae+=l*Ut,He+=l*It,xe+=l*Lt,Ve+=l*St,Ge+=l*Pt,Qe+=l*xt,et+=l*ht,Je+=l*Mt,tr+=l*jt,l=B[10],Re+=l*wt,Fe+=l*yt,Be+=l*Et,Oe+=l*Dt,$e+=l*_t,we+=l*vt,Ae+=l*$t,He+=l*Ut,xe+=l*It,Ve+=l*Lt,Ge+=l*St,Qe+=l*Pt,et+=l*xt,Je+=l*ht,tr+=l*Mt,hr+=l*jt,l=B[11],Fe+=l*wt,Be+=l*yt,Oe+=l*Et,$e+=l*Dt,we+=l*_t,Ae+=l*vt,He+=l*$t,xe+=l*Ut,Ve+=l*It,Ge+=l*Lt,Qe+=l*St,et+=l*Pt,Je+=l*xt,tr+=l*ht,hr+=l*Mt,Jr+=l*jt,l=B[12],Be+=l*wt,Oe+=l*yt,$e+=l*Et,we+=l*Dt,Ae+=l*_t,He+=l*vt,xe+=l*$t,Ve+=l*Ut,Ge+=l*It,Qe+=l*Lt,et+=l*St,Je+=l*Pt,tr+=l*xt,hr+=l*ht,Jr+=l*Mt,rr+=l*jt,l=B[13],Oe+=l*wt,$e+=l*yt,we+=l*Et,Ae+=l*Dt,He+=l*_t,xe+=l*vt,Ve+=l*$t,Ge+=l*Ut,Qe+=l*It,et+=l*Lt,Je+=l*St,tr+=l*Pt,hr+=l*xt,Jr+=l*ht,rr+=l*Mt,ai+=l*jt,l=B[14],$e+=l*wt,we+=l*yt,Ae+=l*Et,He+=l*Dt,xe+=l*_t,Ve+=l*vt,Ge+=l*$t,Qe+=l*Ut,et+=l*It,Je+=l*Lt,tr+=l*St,hr+=l*Pt,Jr+=l*xt,rr+=l*ht,ai+=l*Mt,Di+=l*jt,l=B[15],we+=l*wt,Ae+=l*yt,He+=l*Et,xe+=l*Dt,Ve+=l*_t,Ge+=l*vt,Qe+=l*$t,et+=l*Ut,Je+=l*It,tr+=l*Lt,hr+=l*St,Jr+=l*Pt,rr+=l*xt,ai+=l*ht,Di+=l*Mt,ji+=l*jt,se+=38*Ae,he+=38*He,Ee+=38*xe,qe+=38*Ve,ke+=38*Ge,Le+=38*Qe,pt+=38*et,gt+=38*Je,je+=38*tr,Se+=38*hr,Re+=38*Jr,Fe+=38*rr,Be+=38*ai,Oe+=38*Di,$e+=38*ji,P=1,l=se+P+65535,P=Math.floor(l/65536),se=l-P*65536,l=he+P+65535,P=Math.floor(l/65536),he=l-P*65536,l=Ee+P+65535,P=Math.floor(l/65536),Ee=l-P*65536,l=qe+P+65535,P=Math.floor(l/65536),qe=l-P*65536,l=ke+P+65535,P=Math.floor(l/65536),ke=l-P*65536,l=Le+P+65535,P=Math.floor(l/65536),Le=l-P*65536,l=pt+P+65535,P=Math.floor(l/65536),pt=l-P*65536,l=gt+P+65535,P=Math.floor(l/65536),gt=l-P*65536,l=je+P+65535,P=Math.floor(l/65536),je=l-P*65536,l=Se+P+65535,P=Math.floor(l/65536),Se=l-P*65536,l=Re+P+65535,P=Math.floor(l/65536),Re=l-P*65536,l=Fe+P+65535,P=Math.floor(l/65536),Fe=l-P*65536,l=Be+P+65535,P=Math.floor(l/65536),Be=l-P*65536,l=Oe+P+65535,P=Math.floor(l/65536),Oe=l-P*65536,l=$e+P+65535,P=Math.floor(l/65536),$e=l-P*65536,l=we+P+65535,P=Math.floor(l/65536),we=l-P*65536,se+=P-1+37*(P-1),P=1,l=se+P+65535,P=Math.floor(l/65536),se=l-P*65536,l=he+P+65535,P=Math.floor(l/65536),he=l-P*65536,l=Ee+P+65535,P=Math.floor(l/65536),Ee=l-P*65536,l=qe+P+65535,P=Math.floor(l/65536),qe=l-P*65536,l=ke+P+65535,P=Math.floor(l/65536),ke=l-P*65536,l=Le+P+65535,P=Math.floor(l/65536),Le=l-P*65536,l=pt+P+65535,P=Math.floor(l/65536),pt=l-P*65536,l=gt+P+65535,P=Math.floor(l/65536),gt=l-P*65536,l=je+P+65535,P=Math.floor(l/65536),je=l-P*65536,l=Se+P+65535,P=Math.floor(l/65536),Se=l-P*65536,l=Re+P+65535,P=Math.floor(l/65536),Re=l-P*65536,l=Fe+P+65535,P=Math.floor(l/65536),Fe=l-P*65536,l=Be+P+65535,P=Math.floor(l/65536),Be=l-P*65536,l=Oe+P+65535,P=Math.floor(l/65536),Oe=l-P*65536,l=$e+P+65535,P=Math.floor(l/65536),$e=l-P*65536,l=we+P+65535,P=Math.floor(l/65536),we=l-P*65536,se+=P-1+37*(P-1),z[0]=se,z[1]=he,z[2]=Ee,z[3]=qe,z[4]=ke,z[5]=Le,z[6]=pt,z[7]=gt,z[8]=je,z[9]=Se,z[10]=Re,z[11]=Fe,z[12]=Be,z[13]=Oe,z[14]=$e,z[15]=we}function b(z,B){h(z,B,B)}function Q(z,B){const $=o();let l;for(l=0;l<16;l++)$[l]=B[l];for(l=253;l>=0;l--)b($,$),l!==2&&l!==4&&h($,$,B);for(l=0;l<16;l++)z[l]=$[l]}function ne(z,B){const $=o();let l;for(l=0;l<16;l++)$[l]=B[l];for(l=250;l>=0;l--)b($,$),l!==1&&h($,$,B);for(l=0;l<16;l++)z[l]=$[l]}function ue(z,B){const $=o(),l=o(),P=o(),se=o(),he=o(),Ee=o(),qe=o(),ke=o(),Le=o();T($,z[1],z[0]),T(Le,B[1],B[0]),h($,$,Le),C(l,z[0],z[1]),C(Le,B[0],B[1]),h(l,l,Le),h(P,z[3],B[3]),h(P,P,p),h(se,z[2],B[2]),C(se,se,se),T(he,l,$),T(Ee,se,P),C(qe,se,P),C(ke,l,$),h(z[0],he,Ee),h(z[1],ke,qe),h(z[2],qe,Ee),h(z[3],he,ke)}function ge(z,B,$){for(let l=0;l<4;l++)k(z[l],B[l],$)}function ye(z,B){const $=o(),l=o(),P=o();Q(P,B[2]),h($,B[0],P),h(l,B[1],P),H(z,l),z[31]^=U($)<<7}function E(z,B,$){O(z[0],f),O(z[1],d),O(z[2],d),O(z[3],f);for(let l=255;l>=0;--l){const P=$[l/8|0]>>(l&7)&1;ge(z,B,P),ue(B,z),ue(z,z),ge(z,B,P)}}function N(z,B){const $=[o(),o(),o(),o()];O($[0],m),O($[1],D),O($[2],d),h($[3],m,D),E(z,$,B)}function Z(z){if(z.length!==i.SEED_LENGTH)throw new Error(`ed25519: seed must be ${i.SEED_LENGTH} bytes`);const B=(0,t.hash)(z);B[0]&=248,B[31]&=127,B[31]|=64;const $=new Uint8Array(32),l=[o(),o(),o(),o()];N(l,B),ye($,l);const P=new Uint8Array(64);return P.set(z),P.set($,32),{publicKey:$,secretKey:P}}i.generateKeyPairFromSeed=Z;function J(z){const B=(0,e.randomBytes)(32,z),$=Z(B);return(0,s.wipe)(B),$}i.generateKeyPair=J;function K(z){if(z.length!==i.SECRET_KEY_LENGTH)throw new Error(`ed25519: secret key must be ${i.SECRET_KEY_LENGTH} bytes`);return new Uint8Array(z.subarray(32))}i.extractPublicKeyFromSecretKey=K;const V=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function ee(z,B){let $,l,P,se;for(l=63;l>=32;--l){for($=0,P=l-32,se=l-12;P<se;++P)B[P]+=$-16*B[l]*V[P-(l-32)],$=Math.floor((B[P]+128)/256),B[P]-=$*256;B[P]+=$,B[l]=0}for($=0,P=0;P<32;P++)B[P]+=$-(B[31]>>4)*V[P],$=B[P]>>8,B[P]&=255;for(P=0;P<32;P++)B[P]-=$*V[P];for(l=0;l<32;l++)B[l+1]+=B[l]>>8,z[l]=B[l]&255}function ie(z){const B=new Float64Array(64);for(let $=0;$<64;$++)B[$]=z[$];for(let $=0;$<64;$++)z[$]=0;ee(z,B)}function De(z,B){const $=new Float64Array(64),l=[o(),o(),o(),o()],P=(0,t.hash)(z.subarray(0,32));P[0]&=248,P[31]&=127,P[31]|=64;const se=new Uint8Array(64);se.set(P.subarray(32),32);const he=new t.SHA512;he.update(se.subarray(32)),he.update(B);const Ee=he.digest();he.clean(),ie(Ee),N(l,Ee),ye(se,l),he.reset(),he.update(se.subarray(0,32)),he.update(z.subarray(32)),he.update(B);const qe=he.digest();ie(qe);for(let ke=0;ke<32;ke++)$[ke]=Ee[ke];for(let ke=0;ke<32;ke++)for(let Le=0;Le<32;Le++)$[ke+Le]+=qe[ke]*P[Le];return ee(se.subarray(32),$),se}i.sign=De;function oe(z,B){const $=o(),l=o(),P=o(),se=o(),he=o(),Ee=o(),qe=o();return O(z[2],d),I(z[1],B),b(P,z[1]),h(se,P,y),T(P,P,z[2]),C(se,z[2],se),b(he,se),b(Ee,he),h(qe,Ee,he),h($,qe,P),h($,$,se),ne($,$),h($,$,P),h($,$,se),h($,$,se),h(z[0],$,se),b(l,z[0]),h(l,l,se),F(l,P)&&h(z[0],z[0],A),b(l,z[0]),h(l,l,se),F(l,P)?-1:(U(z[0])===B[31]>>7&&T(z[0],f,z[0]),h(z[3],z[0],z[1]),0)}function Ie(z,B,$){const l=new Uint8Array(32),P=[o(),o(),o(),o()],se=[o(),o(),o(),o()];if($.length!==i.SIGNATURE_LENGTH)throw new Error(`ed25519: signature must be ${i.SIGNATURE_LENGTH} bytes`);if(oe(se,z))return!1;const he=new t.SHA512;he.update($.subarray(0,32)),he.update(z),he.update(B);const Ee=he.digest();return ie(Ee),E(P,se,Ee),N(se,$.subarray(32)),ue(P,se),ye(l,P),!re($,l)}i.verify=Ie;function le(z){let B=[o(),o(),o(),o()];if(oe(B,z))throw new Error("Ed25519: invalid public key");let $=o(),l=o(),P=B[1];C($,d,P),T(l,d,P),Q(l,l),h($,$,l);let se=new Uint8Array(32);return H(se,$),se}i.convertPublicKeyToX25519=le;function Ce(z){const B=(0,t.hash)(z.subarray(0,32));B[0]&=248,B[31]&=127,B[31]|=64;const $=new Uint8Array(B.subarray(0,32));return(0,s.wipe)(B),$}i.convertSecretKeyToX25519=Ce})(ku);const dD="EdDSA",pD="JWT",Fp=".",$p="base64url",gD="utf8",yD="utf8",vD=":",mD="did",_D="key",Vf="base58btc",bD="z",wD="K36",ED=32;function Qo(i){return ur(mr(nn(i),gD),$p)}function Up(i){const e=mr(wD,Vf),t=bD+ur(fu([e,i]),Vf);return[mD,_D,t].join(vD)}function DD(i){return ur(i,$p)}function ID(i){return mr([Qo(i.header),Qo(i.payload)].join(Fp),yD)}function SD(i){return[Qo(i.header),Qo(i.payload),DD(i.signature)].join(Fp)}function Wf(i=Mn.randomBytes(ED)){return ku.generateKeyPairFromSeed(i)}async function xD(i,e,t,s,o=ve.fromMiliseconds(Date.now())){const c={alg:dD,typ:pD},f=Up(s.publicKey),d=o+t,y={iss:f,sub:i,aud:e,iat:o,exp:d},p=ID({header:c,payload:y}),m=ku.sign(s.secretKey,p);return SD({header:c,payload:y,signature:m})}const OD="PARSE_ERROR",AD="INVALID_REQUEST",PD="METHOD_NOT_FOUND",CD="INVALID_PARAMS",Lp="INTERNAL_ERROR",Vu="SERVER_ERROR",TD=[-32700,-32600,-32601,-32602,-32603],vs={[OD]:{code:-32700,message:"Parse error"},[AD]:{code:-32600,message:"Invalid Request"},[PD]:{code:-32601,message:"Method not found"},[CD]:{code:-32602,message:"Invalid params"},[Lp]:{code:-32603,message:"Internal error"},[Vu]:{code:-32e3,message:"Server error"}},Mp=Vu;function ND(i){return TD.includes(i)}function Gf(i){return Object.keys(vs).includes(i)?vs[i]:vs[Mp]}function RD(i){const e=Object.values(vs).find(t=>t.code===i);return e||vs[Mp]}function jp(i,e,t){return i.message.includes("getaddrinfo ENOTFOUND")||i.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${t} RPC url at ${e}`):i}var Bp={},_i={},Yf;function FD(){if(Yf)return _i;Yf=1,Object.defineProperty(_i,"__esModule",{value:!0}),_i.isBrowserCryptoAvailable=_i.getSubtleCrypto=_i.getBrowerCrypto=void 0;function i(){return(Yr===null||Yr===void 0?void 0:Yr.crypto)||(Yr===null||Yr===void 0?void 0:Yr.msCrypto)||{}}_i.getBrowerCrypto=i;function e(){const s=i();return s.subtle||s.webkitSubtle}_i.getSubtleCrypto=e;function t(){return!!i()&&!!e()}return _i.isBrowserCryptoAvailable=t,_i}var bi={},Jf;function $D(){if(Jf)return bi;Jf=1,Object.defineProperty(bi,"__esModule",{value:!0}),bi.isBrowser=bi.isNode=bi.isReactNative=void 0;function i(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}bi.isReactNative=i;function e(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}bi.isNode=e;function t(){return!i()&&!e()}return bi.isBrowser=t,bi}(function(i){Object.defineProperty(i,"__esModule",{value:!0});const e=Ei;e.__exportStar(FD(),i),e.__exportStar($D(),i)})(Bp);function zp(i=3){const e=Date.now()*Math.pow(10,i),t=Math.floor(Math.random()*Math.pow(10,i));return e+t}function da(i=6){return BigInt(zp(i))}function As(i,e,t){return{id:t||zp(),jsonrpc:"2.0",method:i,params:e}}function Wu(i,e){return{id:i,jsonrpc:"2.0",result:e}}function pa(i,e,t){return{id:i,jsonrpc:"2.0",error:UD(e,t)}}function UD(i,e){return typeof i>"u"?Gf(Lp):(typeof i=="string"&&(i=Object.assign(Object.assign({},Gf(Vu)),{message:i})),typeof e<"u"&&(i.data=e),ND(i.code)&&(i=RD(i.code)),i)}class LD{}class MD extends LD{constructor(){super()}}class qp extends MD{constructor(e){super()}}const jD="^https?:",BD="^wss?:";function zD(i){const e=i.match(new RegExp(/^\w+:/,"gi"));if(!(!e||!e.length))return e[0]}function Hp(i,e){const t=zD(i);return typeof t>"u"?!1:new RegExp(e).test(t)}function Xf(i){return Hp(i,jD)}function Zf(i){return Hp(i,BD)}function qD(i){return new RegExp("wss?://localhost(:d{2,5})?").test(i)}function Kp(i){return typeof i=="object"&&"id"in i&&"jsonrpc"in i&&i.jsonrpc==="2.0"}function Gu(i){return Kp(i)&&"method"in i}function Ps(i){return Kp(i)&&(wi(i)||Br(i))}function wi(i){return"result"in i}function Br(i){return"error"in i}let HD=class extends qp{constructor(e){super(e),this.events=new _r.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}async connect(e=this.connection){await this.open(e)}async disconnect(){await this.close()}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async request(e,t){return this.requestStrict(As(e.method,e.params||[],e.id||da().toString()),t)}async requestStrict(e,t){return new Promise(async(s,o)=>{if(!this.connection.connected)try{await this.open()}catch(c){o(c)}this.events.on(`${e.id}`,c=>{Br(c)?o(c.error):s(c.result)});try{await this.connection.send(e,t)}catch(c){o(c)}})}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),Ps(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&e.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}async open(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),typeof e=="string"&&(await this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",e=>this.onPayload(e)),this.connection.on("close",e=>this.onClose(e)),this.connection.on("error",e=>this.events.emit("error",e)),this.connection.on("register_error",e=>this.onClose()),this.hasRegisteredEventListeners=!0)}};const KD=()=>typeof global<"u"&&typeof global.WebSocket<"u"?global.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:require("ws"),kD=()=>typeof window<"u",Qf=i=>i.split("?")[0],ed=10,VD=KD();class WD{constructor(e){if(this.url=e,this.events=new _r.EventEmitter,this.registering=!1,!Zf(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);this.url=e}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async open(e=this.url){await this.register(e)}async close(){return new Promise((e,t)=>{if(typeof this.socket>"u"){t(new Error("Connection already closed"));return}this.socket.onclose=s=>{this.onClose(s),e()},this.socket.close()})}async send(e,t){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(nn(e))}catch(s){this.onError(e.id,s)}}register(e=this.url){if(!Zf(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);if(this.registering){const t=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=t||this.events.listenerCount("open")>=t)&&this.events.setMaxListeners(t+1),new Promise((s,o)=>{this.events.once("register_error",c=>{this.resetMaxListeners(),o(c)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return o(new Error("WebSocket connection is missing or invalid"));s(this.socket)})})}return this.url=e,this.registering=!0,new Promise((t,s)=>{const o=Bp.isReactNative()?void 0:{rejectUnauthorized:!qD(e)},c=new VD(e,[],o);kD()?c.onerror=f=>{const d=f;s(this.emitError(d.error))}:c.on("error",f=>{s(this.emitError(f))}),c.onopen=()=>{this.onOpen(c),t(c)}})}onOpen(e){e.onmessage=t=>this.onPayload(t),e.onclose=t=>this.onClose(t),this.socket=e,this.registering=!1,this.events.emit("open")}onClose(e){this.socket=void 0,this.registering=!1,this.events.emit("close",e)}onPayload(e){if(typeof e.data>"u")return;const t=typeof e.data=="string"?xs(e.data):e.data;this.events.emit("payload",t)}onError(e,t){const s=this.parseError(t),o=s.message||s.toString(),c=pa(e,o);this.events.emit("payload",c)}parseError(e,t=this.url){return jp(e,Qf(t),"WS")}resetMaxListeners(){this.events.getMaxListeners()>ed&&this.events.setMaxListeners(ed)}emitError(e){const t=this.parseError(new Error((e==null?void 0:e.message)||`WebSocket connection failed for host: ${Qf(this.url)}`));return this.events.emit("register_error",t),t}}var ea={exports:{}};ea.exports;(function(i,e){var t=200,s="__lodash_hash_undefined__",o=1,c=2,f=9007199254740991,d="[object Arguments]",y="[object Array]",p="[object AsyncFunction]",m="[object Boolean]",D="[object Date]",A="[object Error]",O="[object Function]",S="[object GeneratorFunction]",k="[object Map]",H="[object Number]",re="[object Null]",F="[object Object]",U="[object Promise]",I="[object Proxy]",C="[object RegExp]",T="[object Set]",h="[object String]",b="[object Symbol]",Q="[object Undefined]",ne="[object WeakMap]",ue="[object ArrayBuffer]",ge="[object DataView]",ye="[object Float32Array]",E="[object Float64Array]",N="[object Int8Array]",Z="[object Int16Array]",J="[object Int32Array]",K="[object Uint8Array]",V="[object Uint8ClampedArray]",ee="[object Uint16Array]",ie="[object Uint32Array]",De=/[\\^$.*+?()[\]{}|]/g,oe=/^\[object .+?Constructor\]$/,Ie=/^(?:0|[1-9]\d*)$/,le={};le[ye]=le[E]=le[N]=le[Z]=le[J]=le[K]=le[V]=le[ee]=le[ie]=!0,le[d]=le[y]=le[ue]=le[m]=le[ge]=le[D]=le[A]=le[O]=le[k]=le[H]=le[F]=le[C]=le[T]=le[h]=le[ne]=!1;var Ce=typeof Yr=="object"&&Yr&&Yr.Object===Object&&Yr,z=typeof self=="object"&&self&&self.Object===Object&&self,B=Ce||z||Function("return this")(),$=e&&!e.nodeType&&e,l=$&&!0&&i&&!i.nodeType&&i,P=l&&l.exports===$,se=P&&Ce.process,he=function(){try{return se&&se.binding&&se.binding("util")}catch{}}(),Ee=he&&he.isTypedArray;function qe(w,L){for(var X=-1,fe=w==null?0:w.length,at=0,Te=[];++X<fe;){var ft=w[X];L(ft,X,w)&&(Te[at++]=ft)}return Te}function ke(w,L){for(var X=-1,fe=L.length,at=w.length;++X<fe;)w[at+X]=L[X];return w}function Le(w,L){for(var X=-1,fe=w==null?0:w.length;++X<fe;)if(L(w[X],X,w))return!0;return!1}function pt(w,L){for(var X=-1,fe=Array(w);++X<w;)fe[X]=L(X);return fe}function gt(w){return function(L){return w(L)}}function je(w,L){return w.has(L)}function Se(w,L){return w==null?void 0:w[L]}function Re(w){var L=-1,X=Array(w.size);return w.forEach(function(fe,at){X[++L]=[at,fe]}),X}function Fe(w,L){return function(X){return w(L(X))}}function Be(w){var L=-1,X=Array(w.size);return w.forEach(function(fe){X[++L]=fe}),X}var Oe=Array.prototype,$e=Function.prototype,we=Object.prototype,Ae=B["__core-js_shared__"],He=$e.toString,xe=we.hasOwnProperty,Ve=function(){var w=/[^.]+$/.exec(Ae&&Ae.keys&&Ae.keys.IE_PROTO||"");return w?"Symbol(src)_1."+w:""}(),Ge=we.toString,Qe=RegExp("^"+He.call(xe).replace(De,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),et=P?B.Buffer:void 0,Je=B.Symbol,tr=B.Uint8Array,hr=we.propertyIsEnumerable,Jr=Oe.splice,rr=Je?Je.toStringTag:void 0,ai=Object.getOwnPropertySymbols,Di=et?et.isBuffer:void 0,ji=Fe(Object.keys,Object),wt=wr(B,"DataView"),yt=wr(B,"Map"),Et=wr(B,"Promise"),Dt=wr(B,"Set"),_t=wr(B,"WeakMap"),vt=wr(Object,"create"),$t=ui(wt),Ut=ui(yt),It=ui(Et),Lt=ui(Dt),St=ui(_t),Pt=Je?Je.prototype:void 0,xt=Pt?Pt.valueOf:void 0;function ht(w){var L=-1,X=w==null?0:w.length;for(this.clear();++L<X;){var fe=w[L];this.set(fe[0],fe[1])}}function Mt(){this.__data__=vt?vt(null):{},this.size=0}function jt(w){var L=this.has(w)&&delete this.__data__[w];return this.size-=L?1:0,L}function va(w){var L=this.__data__;if(vt){var X=L[w];return X===s?void 0:X}return xe.call(L,w)?L[w]:void 0}function ma(w){var L=this.__data__;return vt?L[w]!==void 0:xe.call(L,w)}function _a(w,L){var X=this.__data__;return this.size+=this.has(w)?0:1,X[w]=vt&&L===void 0?s:L,this}ht.prototype.clear=Mt,ht.prototype.delete=jt,ht.prototype.get=va,ht.prototype.has=ma,ht.prototype.set=_a;function Pr(w){var L=-1,X=w==null?0:w.length;for(this.clear();++L<X;){var fe=w[L];this.set(fe[0],fe[1])}}function ba(){this.__data__=[],this.size=0}function wa(w){var L=this.__data__,X=Bi(L,w);if(X<0)return!1;var fe=L.length-1;return X==fe?L.pop():Jr.call(L,X,1),--this.size,!0}function Ea(w){var L=this.__data__,X=Bi(L,w);return X<0?void 0:L[X][1]}function Da(w){return Bi(this.__data__,w)>-1}function Ia(w,L){var X=this.__data__,fe=Bi(X,w);return fe<0?(++this.size,X.push([w,L])):X[fe][1]=L,this}Pr.prototype.clear=ba,Pr.prototype.delete=wa,Pr.prototype.get=Ea,Pr.prototype.has=Da,Pr.prototype.set=Ia;function ci(w){var L=-1,X=w==null?0:w.length;for(this.clear();++L<X;){var fe=w[L];this.set(fe[0],fe[1])}}function ln(){this.size=0,this.__data__={hash:new ht,map:new(yt||Pr),string:new ht}}function Sa(w){var L=Ii(this,w).delete(w);return this.size-=L?1:0,L}function fn(w){return Ii(this,w).get(w)}function xa(w){return Ii(this,w).has(w)}function Oa(w,L){var X=Ii(this,w),fe=X.size;return X.set(w,L),this.size+=X.size==fe?0:1,this}ci.prototype.clear=ln,ci.prototype.delete=Sa,ci.prototype.get=fn,ci.prototype.has=xa,ci.prototype.set=Oa;function dn(w){var L=-1,X=w==null?0:w.length;for(this.__data__=new ci;++L<X;)this.add(w[L])}function Ts(w){return this.__data__.set(w,s),this}function Ns(w){return this.__data__.has(w)}dn.prototype.add=dn.prototype.push=Ts,dn.prototype.has=Ns;function qr(w){var L=this.__data__=new Pr(w);this.size=L.size}function Aa(){this.__data__=new Pr,this.size=0}function Pa(w){var L=this.__data__,X=L.delete(w);return this.size=L.size,X}function Ca(w){return this.__data__.get(w)}function Ta(w){return this.__data__.has(w)}function Rs(w,L){var X=this.__data__;if(X instanceof Pr){var fe=X.__data__;if(!yt||fe.length<t-1)return fe.push([w,L]),this.size=++X.size,this;X=this.__data__=new ci(fe)}return X.set(w,L),this.size=X.size,this}qr.prototype.clear=Aa,qr.prototype.delete=Pa,qr.prototype.get=Ca,qr.prototype.has=Ta,qr.prototype.set=Rs;function Fs(w,L){var X=yn(w),fe=!X&&Vs(w),at=!X&&!fe&&Kn(w),Te=!X&&!fe&&!at&&Ys(w),ft=X||fe||at||Te,Bt=ft?pt(w.length,String):[],Xe=Bt.length;for(var ct in w)(L||xe.call(w,ct))&&!(ft&&(ct=="length"||at&&(ct=="offset"||ct=="parent")||Te&&(ct=="buffer"||ct=="byteLength"||ct=="byteOffset")||zs(ct,Xe)))&&Bt.push(ct);return Bt}function Bi(w,L){for(var X=w.length;X--;)if(ks(w[X][0],L))return X;return-1}function qn(w,L,X){var fe=L(w);return yn(w)?fe:ke(fe,X(w))}function zi(w){return w==null?w===void 0?Q:re:rr&&rr in Object(w)?js(w):Fa(w)}function Hn(w){return Hi(w)&&zi(w)==d}function qi(w,L,X,fe,at){return w===L?!0:w==null||L==null||!Hi(w)&&!Hi(L)?w!==w&&L!==L:$s(w,L,X,fe,qi,at)}function $s(w,L,X,fe,at,Te){var ft=yn(w),Bt=yn(L),Xe=ft?y:Xr(w),ct=Bt?y:Xr(L);Xe=Xe==d?F:Xe,ct=ct==d?F:ct;var Ct=Xe==F,lr=ct==F,zt=Xe==ct;if(zt&&Kn(w)){if(!Kn(L))return!1;ft=!0,Ct=!1}if(zt&&!Ct)return Te||(Te=new qr),ft||Ys(w)?pn(w,L,X,fe,at,Te):Ra(w,L,Xe,X,fe,at,Te);if(!(X&o)){var dt=Ct&&xe.call(w,"__wrapped__"),ir=lr&&xe.call(L,"__wrapped__");if(dt||ir){var Hr=dt?w.value():w,Cr=ir?L.value():L;return Te||(Te=new qr),at(Hr,Cr,X,fe,Te)}}return zt?(Te||(Te=new qr),Ms(w,L,X,fe,at,Te)):!1}function Na(w){if(!Gs(w)||Hs(w))return!1;var L=vn(w)?Qe:oe;return L.test(ui(w))}function Us(w){return Hi(w)&&Ws(w.length)&&!!le[zi(w)]}function Ls(w){if(!Ks(w))return ji(w);var L=[];for(var X in Object(w))xe.call(w,X)&&X!="constructor"&&L.push(X);return L}function pn(w,L,X,fe,at,Te){var ft=X&o,Bt=w.length,Xe=L.length;if(Bt!=Xe&&!(ft&&Xe>Bt))return!1;var ct=Te.get(w);if(ct&&Te.get(L))return ct==L;var Ct=-1,lr=!0,zt=X&c?new dn:void 0;for(Te.set(w,L),Te.set(L,w);++Ct<Bt;){var dt=w[Ct],ir=L[Ct];if(fe)var Hr=ft?fe(ir,dt,Ct,L,w,Te):fe(dt,ir,Ct,w,L,Te);if(Hr!==void 0){if(Hr)continue;lr=!1;break}if(zt){if(!Le(L,function(Cr,Zr){if(!je(zt,Zr)&&(dt===Cr||at(dt,Cr,X,fe,Te)))return zt.push(Zr)})){lr=!1;break}}else if(!(dt===ir||at(dt,ir,X,fe,Te))){lr=!1;break}}return Te.delete(w),Te.delete(L),lr}function Ra(w,L,X,fe,at,Te,ft){switch(X){case ge:if(w.byteLength!=L.byteLength||w.byteOffset!=L.byteOffset)return!1;w=w.buffer,L=L.buffer;case ue:return!(w.byteLength!=L.byteLength||!Te(new tr(w),new tr(L)));case m:case D:case H:return ks(+w,+L);case A:return w.name==L.name&&w.message==L.message;case C:case h:return w==L+"";case k:var Bt=Re;case T:var Xe=fe&o;if(Bt||(Bt=Be),w.size!=L.size&&!Xe)return!1;var ct=ft.get(w);if(ct)return ct==L;fe|=c,ft.set(w,L);var Ct=pn(Bt(w),Bt(L),fe,at,Te,ft);return ft.delete(w),Ct;case b:if(xt)return xt.call(w)==xt.call(L)}return!1}function Ms(w,L,X,fe,at,Te){var ft=X&o,Bt=gn(w),Xe=Bt.length,ct=gn(L),Ct=ct.length;if(Xe!=Ct&&!ft)return!1;for(var lr=Xe;lr--;){var zt=Bt[lr];if(!(ft?zt in L:xe.call(L,zt)))return!1}var dt=Te.get(w);if(dt&&Te.get(L))return dt==L;var ir=!0;Te.set(w,L),Te.set(L,w);for(var Hr=ft;++lr<Xe;){zt=Bt[lr];var Cr=w[zt],Zr=L[zt];if(fe)var kn=ft?fe(Zr,Cr,zt,L,w,Te):fe(Cr,Zr,zt,w,L,Te);if(!(kn===void 0?Cr===Zr||at(Cr,Zr,X,fe,Te):kn)){ir=!1;break}Hr||(Hr=zt=="constructor")}if(ir&&!Hr){var Ki=w.constructor,kt=L.constructor;Ki!=kt&&"constructor"in w&&"constructor"in L&&!(typeof Ki=="function"&&Ki instanceof Ki&&typeof kt=="function"&&kt instanceof kt)&&(ir=!1)}return Te.delete(w),Te.delete(L),ir}function gn(w){return qn(w,La,Bs)}function Ii(w,L){var X=w.__data__;return qs(L)?X[typeof L=="string"?"string":"hash"]:X.map}function wr(w,L){var X=Se(w,L);return Na(X)?X:void 0}function js(w){var L=xe.call(w,rr),X=w[rr];try{w[rr]=void 0;var fe=!0}catch{}var at=Ge.call(w);return fe&&(L?w[rr]=X:delete w[rr]),at}var Bs=ai?function(w){return w==null?[]:(w=Object(w),qe(ai(w),function(L){return hr.call(w,L)}))}:ot,Xr=zi;(wt&&Xr(new wt(new ArrayBuffer(1)))!=ge||yt&&Xr(new yt)!=k||Et&&Xr(Et.resolve())!=U||Dt&&Xr(new Dt)!=T||_t&&Xr(new _t)!=ne)&&(Xr=function(w){var L=zi(w),X=L==F?w.constructor:void 0,fe=X?ui(X):"";if(fe)switch(fe){case $t:return ge;case Ut:return k;case It:return U;case Lt:return T;case St:return ne}return L});function zs(w,L){return L=L??f,!!L&&(typeof w=="number"||Ie.test(w))&&w>-1&&w%1==0&&w<L}function qs(w){var L=typeof w;return L=="string"||L=="number"||L=="symbol"||L=="boolean"?w!=="__proto__":w===null}function Hs(w){return!!Ve&&Ve in w}function Ks(w){var L=w&&w.constructor,X=typeof L=="function"&&L.prototype||we;return w===X}function Fa(w){return Ge.call(w)}function ui(w){if(w!=null){try{return He.call(w)}catch{}try{return w+""}catch{}}return""}function ks(w,L){return w===L||w!==w&&L!==L}var Vs=Hn(function(){return arguments}())?Hn:function(w){return Hi(w)&&xe.call(w,"callee")&&!hr.call(w,"callee")},yn=Array.isArray;function $a(w){return w!=null&&Ws(w.length)&&!vn(w)}var Kn=Di||nt;function Ua(w,L){return qi(w,L)}function vn(w){if(!Gs(w))return!1;var L=zi(w);return L==O||L==S||L==p||L==I}function Ws(w){return typeof w=="number"&&w>-1&&w%1==0&&w<=f}function Gs(w){var L=typeof w;return w!=null&&(L=="object"||L=="function")}function Hi(w){return w!=null&&typeof w=="object"}var Ys=Ee?gt(Ee):Us;function La(w){return $a(w)?Fs(w):Ls(w)}function ot(){return[]}function nt(){return!1}i.exports=Ua})(ea,ea.exports);var GD=ea.exports;const YD=ra(GD);function JD(i,e){if(i.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),s=0;s<t.length;s++)t[s]=255;for(var o=0;o<i.length;o++){var c=i.charAt(o),f=c.charCodeAt(0);if(t[f]!==255)throw new TypeError(c+" is ambiguous");t[f]=o}var d=i.length,y=i.charAt(0),p=Math.log(d)/Math.log(256),m=Math.log(256)/Math.log(d);function D(S){if(S instanceof Uint8Array||(ArrayBuffer.isView(S)?S=new Uint8Array(S.buffer,S.byteOffset,S.byteLength):Array.isArray(S)&&(S=Uint8Array.from(S))),!(S instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(S.length===0)return"";for(var k=0,H=0,re=0,F=S.length;re!==F&&S[re]===0;)re++,k++;for(var U=(F-re)*m+1>>>0,I=new Uint8Array(U);re!==F;){for(var C=S[re],T=0,h=U-1;(C!==0||T<H)&&h!==-1;h--,T++)C+=256*I[h]>>>0,I[h]=C%d>>>0,C=C/d>>>0;if(C!==0)throw new Error("Non-zero carry");H=T,re++}for(var b=U-H;b!==U&&I[b]===0;)b++;for(var Q=y.repeat(k);b<U;++b)Q+=i.charAt(I[b]);return Q}function A(S){if(typeof S!="string")throw new TypeError("Expected String");if(S.length===0)return new Uint8Array;var k=0;if(S[k]!==" "){for(var H=0,re=0;S[k]===y;)H++,k++;for(var F=(S.length-k)*p+1>>>0,U=new Uint8Array(F);S[k];){var I=t[S.charCodeAt(k)];if(I===255)return;for(var C=0,T=F-1;(I!==0||C<re)&&T!==-1;T--,C++)I+=d*U[T]>>>0,U[T]=I%256>>>0,I=I/256>>>0;if(I!==0)throw new Error("Non-zero carry");re=C,k++}if(S[k]!==" "){for(var h=F-re;h!==F&&U[h]===0;)h++;for(var b=new Uint8Array(H+(F-h)),Q=H;h!==F;)b[Q++]=U[h++];return b}}}function O(S){var k=A(S);if(k)return k;throw new Error(`Non-${e} character`)}return{encode:D,decodeUnsafe:A,decode:O}}var XD=JD,ZD=XD;const kp=i=>{if(i instanceof Uint8Array&&i.constructor.name==="Uint8Array")return i;if(i instanceof ArrayBuffer)return new Uint8Array(i);if(ArrayBuffer.isView(i))return new Uint8Array(i.buffer,i.byteOffset,i.byteLength);throw new Error("Unknown type, must be binary type")},QD=i=>new TextEncoder().encode(i),e2=i=>new TextDecoder().decode(i);class t2{constructor(e,t,s){this.name=e,this.prefix=t,this.baseEncode=s}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class r2{constructor(e,t,s){if(this.name=e,this.prefix=t,t.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=s}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return Vp(this,e)}}class i2{constructor(e){this.decoders=e}or(e){return Vp(this,e)}decode(e){const t=e[0],s=this.decoders[t];if(s)return s.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const Vp=(i,e)=>new i2({...i.decoders||{[i.prefix]:i},...e.decoders||{[e.prefix]:e}});class n2{constructor(e,t,s,o){this.name=e,this.prefix=t,this.baseEncode=s,this.baseDecode=o,this.encoder=new t2(e,t,s),this.decoder=new r2(e,t,o)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const ga=({name:i,prefix:e,encode:t,decode:s})=>new n2(i,e,t,s),Cs=({prefix:i,name:e,alphabet:t})=>{const{encode:s,decode:o}=ZD(t,e);return ga({prefix:i,name:e,encode:s,decode:c=>kp(o(c))})},s2=(i,e,t,s)=>{const o={};for(let m=0;m<e.length;++m)o[e[m]]=m;let c=i.length;for(;i[c-1]==="=";)--c;const f=new Uint8Array(c*t/8|0);let d=0,y=0,p=0;for(let m=0;m<c;++m){const D=o[i[m]];if(D===void 0)throw new SyntaxError(`Non-${s} character`);y=y<<t|D,d+=t,d>=8&&(d-=8,f[p++]=255&y>>d)}if(d>=t||255&y<<8-d)throw new SyntaxError("Unexpected end of data");return f},o2=(i,e,t)=>{const s=e[e.length-1]==="=",o=(1<<t)-1;let c="",f=0,d=0;for(let y=0;y<i.length;++y)for(d=d<<8|i[y],f+=8;f>t;)f-=t,c+=e[o&d>>f];if(f&&(c+=e[o&d<<t-f]),s)for(;c.length*t&7;)c+="=";return c},Xt=({name:i,prefix:e,bitsPerChar:t,alphabet:s})=>ga({prefix:e,name:i,encode(o){return o2(o,s,t)},decode(o){return s2(o,s,t,i)}}),a2=ga({prefix:"\0",name:"identity",encode:i=>e2(i),decode:i=>QD(i)});var c2=Object.freeze({__proto__:null,identity:a2});const u2=Xt({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var h2=Object.freeze({__proto__:null,base2:u2});const l2=Xt({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var f2=Object.freeze({__proto__:null,base8:l2});const d2=Cs({prefix:"9",name:"base10",alphabet:"0123456789"});var p2=Object.freeze({__proto__:null,base10:d2});const g2=Xt({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),y2=Xt({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var v2=Object.freeze({__proto__:null,base16:g2,base16upper:y2});const m2=Xt({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),_2=Xt({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),b2=Xt({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),w2=Xt({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),E2=Xt({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),D2=Xt({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),I2=Xt({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),S2=Xt({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),x2=Xt({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var O2=Object.freeze({__proto__:null,base32:m2,base32upper:_2,base32pad:b2,base32padupper:w2,base32hex:E2,base32hexupper:D2,base32hexpad:I2,base32hexpadupper:S2,base32z:x2});const A2=Cs({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),P2=Cs({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var C2=Object.freeze({__proto__:null,base36:A2,base36upper:P2});const T2=Cs({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),N2=Cs({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var R2=Object.freeze({__proto__:null,base58btc:T2,base58flickr:N2});const F2=Xt({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),$2=Xt({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),U2=Xt({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),L2=Xt({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var M2=Object.freeze({__proto__:null,base64:F2,base64pad:$2,base64url:U2,base64urlpad:L2});const Wp=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),j2=Wp.reduce((i,e,t)=>(i[t]=e,i),[]),B2=Wp.reduce((i,e,t)=>(i[e.codePointAt(0)]=t,i),[]);function z2(i){return i.reduce((e,t)=>(e+=j2[t],e),"")}function q2(i){const e=[];for(const t of i){const s=B2[t.codePointAt(0)];if(s===void 0)throw new Error(`Non-base256emoji character: ${t}`);e.push(s)}return new Uint8Array(e)}const H2=ga({prefix:"🚀",name:"base256emoji",encode:z2,decode:q2});var K2=Object.freeze({__proto__:null,base256emoji:H2}),k2=Gp,td=128,V2=127,W2=~V2,G2=Math.pow(2,31);function Gp(i,e,t){e=e||[],t=t||0;for(var s=t;i>=G2;)e[t++]=i&255|td,i/=128;for(;i&W2;)e[t++]=i&255|td,i>>>=7;return e[t]=i|0,Gp.bytes=t-s+1,e}var Y2=Du,J2=128,rd=127;function Du(i,s){var t=0,s=s||0,o=0,c=s,f,d=i.length;do{if(c>=d)throw Du.bytes=0,new RangeError("Could not decode varint");f=i[c++],t+=o<28?(f&rd)<<o:(f&rd)*Math.pow(2,o),o+=7}while(f>=J2);return Du.bytes=c-s,t}var X2=Math.pow(2,7),Z2=Math.pow(2,14),Q2=Math.pow(2,21),e5=Math.pow(2,28),t5=Math.pow(2,35),r5=Math.pow(2,42),i5=Math.pow(2,49),n5=Math.pow(2,56),s5=Math.pow(2,63),o5=function(i){return i<X2?1:i<Z2?2:i<Q2?3:i<e5?4:i<t5?5:i<r5?6:i<i5?7:i<n5?8:i<s5?9:10},a5={encode:k2,decode:Y2,encodingLength:o5},Yp=a5;const id=(i,e,t=0)=>(Yp.encode(i,e,t),e),nd=i=>Yp.encodingLength(i),Iu=(i,e)=>{const t=e.byteLength,s=nd(i),o=s+nd(t),c=new Uint8Array(o+t);return id(i,c,0),id(t,c,s),c.set(e,o),new c5(i,t,e,c)};class c5{constructor(e,t,s,o){this.code=e,this.size=t,this.digest=s,this.bytes=o}}const Jp=({name:i,code:e,encode:t})=>new u5(i,e,t);class u5{constructor(e,t,s){this.name=e,this.code=t,this.encode=s}digest(e){if(e instanceof Uint8Array){const t=this.encode(e);return t instanceof Uint8Array?Iu(this.code,t):t.then(s=>Iu(this.code,s))}else throw Error("Unknown type, must be binary type")}}const Xp=i=>async e=>new Uint8Array(await crypto.subtle.digest(i,e)),h5=Jp({name:"sha2-256",code:18,encode:Xp("SHA-256")}),l5=Jp({name:"sha2-512",code:19,encode:Xp("SHA-512")});var f5=Object.freeze({__proto__:null,sha256:h5,sha512:l5});const Zp=0,d5="identity",Qp=kp,p5=i=>Iu(Zp,Qp(i)),g5={code:Zp,name:d5,encode:Qp,digest:p5};var y5=Object.freeze({__proto__:null,identity:g5});new TextEncoder,new TextDecoder;const sd={...c2,...h2,...f2,...p2,...v2,...O2,...C2,...R2,...M2,...K2};({...f5,...y5});function eg(i){return globalThis.Buffer!=null?new Uint8Array(i.buffer,i.byteOffset,i.byteLength):i}function v5(i=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?eg(globalThis.Buffer.allocUnsafe(i)):new Uint8Array(i)}function tg(i,e,t,s){return{name:i,prefix:e,encoder:{name:i,prefix:e,encode:t},decoder:{decode:s}}}const od=tg("utf8","u",i=>"u"+new TextDecoder("utf8").decode(i),i=>new TextEncoder().encode(i.substring(1))),Zc=tg("ascii","a",i=>{let e="a";for(let t=0;t<i.length;t++)e+=String.fromCharCode(i[t]);return e},i=>{i=i.substring(1);const e=v5(i.length);for(let t=0;t<i.length;t++)e[t]=i.charCodeAt(t);return e}),m5={utf8:od,"utf-8":od,hex:sd.base16,latin1:Zc,ascii:Zc,binary:Zc,...sd};function _5(i,e="utf8"){const t=m5[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?eg(globalThis.Buffer.from(i,"utf-8")):t.decoder.decode(`${t.prefix}${i}`)}const rg="wc",b5=2,Yu="core",Ui=`${rg}@2:${Yu}:`,w5={name:Yu,logger:"error"},E5={database:":memory:"},D5="crypto",ad="client_ed25519_seed",I5=ve.ONE_DAY,S5="keychain",x5="0.3",O5="messages",A5="0.3",P5=ve.SIX_HOURS,C5="publisher",ig="irn",T5="error",ng="wss://relay.walletconnect.com",cd="wss://relay.walletconnect.org",N5="relayer",At={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},R5="_subscription",ls={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},F5=ve.ONE_SECOND/2,$5="2.9.0",U5=1e4,L5="0.3",M5="WALLETCONNECT_CLIENT_ID",ni={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},j5="subscription",B5="0.3",z5=ve.FIVE_SECONDS*1e3,q5="pairing",H5="0.3",fs={wc_pairingDelete:{req:{ttl:ve.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:ve.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:ve.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:ve.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:ve.ONE_DAY,prompt:!1,tag:0},res:{ttl:ve.ONE_DAY,prompt:!1,tag:0}}},ii={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},K5="history",k5="0.3",V5="expirer",jr={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},W5="0.3",Qc="verify-api",ud="https://verify.walletconnect.com";class G5{constructor(e,t){this.core=e,this.logger=t,this.keychain=new Map,this.name=S5,this.version=x5,this.initialized=!1,this.storagePrefix=Ui,this.init=async()=>{if(!this.initialized){const s=await this.getKeyChain();typeof s<"u"&&(this.keychain=s),this.initialized=!0}},this.has=s=>(this.isInitialized(),this.keychain.has(s)),this.set=async(s,o)=>{this.isInitialized(),this.keychain.set(s,o),await this.persist()},this.get=s=>{this.isInitialized();const o=this.keychain.get(s);if(typeof o>"u"){const{message:c}=ce("NO_MATCHING_KEY",`${this.name}: ${s}`);throw new Error(c)}return o},this.del=async s=>{this.isInitialized(),this.keychain.delete(s),await this.persist()},this.core=e,this.logger=Ar(t,this.name)}get context(){return br(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,wp(e))}async getKeyChain(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?Ep(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:e}=ce("NOT_INITIALIZED",this.name);throw new Error(e)}}}class Y5{constructor(e,t,s){this.core=e,this.logger=t,this.name=D5,this.initialized=!1,this.init=async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)},this.hasKeys=o=>(this.isInitialized(),this.keychain.has(o)),this.getClientId=async()=>{this.isInitialized();const o=await this.getClientSeed(),c=Wf(o);return Up(c.publicKey)},this.generateKeyPair=()=>{this.isInitialized();const o=zE();return this.setPrivateKey(o.publicKey,o.privateKey)},this.signJWT=async o=>{this.isInitialized();const c=await this.getClientSeed(),f=Wf(c),d=_u();return await xD(d,o,I5,f)},this.generateSharedKey=(o,c,f)=>{this.isInitialized();const d=this.getPrivateKey(o),y=qE(d,c);return this.setSymKey(y,f)},this.setSymKey=async(o,c)=>{this.isInitialized();const f=c||HE(o);return await this.keychain.set(f,o),f},this.deleteKeyPair=async o=>{this.isInitialized(),await this.keychain.del(o)},this.deleteSymKey=async o=>{this.isInitialized(),await this.keychain.del(o)},this.encode=async(o,c,f)=>{this.isInitialized();const d=_p(f),y=nn(c);if(If(d)){const A=d.senderPublicKey,O=d.receiverPublicKey;o=await this.generateSharedKey(A,O)}const p=this.getSymKey(o),{type:m,senderPublicKey:D}=d;return kE({type:m,symKey:p,message:y,senderPublicKey:D})},this.decode=async(o,c,f)=>{this.isInitialized();const d=GE(c,f);if(If(d)){const m=d.receiverPublicKey,D=d.senderPublicKey;o=await this.generateSharedKey(m,D)}const y=this.getSymKey(o),p=VE({symKey:y,encoded:c});return xs(p)},this.getPayloadType=o=>{const c=Jo(o);return Is(c.type)},this.getPayloadSenderPublicKey=o=>{const c=Jo(o);return c.senderPublicKey?ur(c.senderPublicKey,cr):void 0},this.core=e,this.logger=Ar(t,this.name),this.keychain=s||new G5(this.core,this.logger)}get context(){return br(this.logger)}async setPrivateKey(e,t){return await this.keychain.set(e,t),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(ad)}catch{e=_u(),await this.keychain.set(ad,e)}return _5(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){const{message:e}=ce("NOT_INITIALIZED",this.name);throw new Error(e)}}}class J5 extends nD{constructor(e,t){super(e,t),this.logger=e,this.core=t,this.messages=new Map,this.name=O5,this.version=A5,this.initialized=!1,this.storagePrefix=Ui,this.init=async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const s=await this.getRelayerMessages();typeof s<"u"&&(this.messages=s),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(s){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(s)}finally{this.initialized=!0}}},this.set=async(s,o)=>{this.isInitialized();const c=Un(o);let f=this.messages.get(s);return typeof f>"u"&&(f={}),typeof f[c]<"u"||(f[c]=o,this.messages.set(s,f),await this.persist()),c},this.get=s=>{this.isInitialized();let o=this.messages.get(s);return typeof o>"u"&&(o={}),o},this.has=(s,o)=>{this.isInitialized();const c=this.get(s),f=Un(o);return typeof c[f]<"u"},this.del=async s=>{this.isInitialized(),this.messages.delete(s),await this.persist()},this.logger=Ar(e,this.name),this.core=t}get context(){return br(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,wp(e))}async getRelayerMessages(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?Ep(e):void 0}async persist(){await this.setRelayerMessages(this.messages)}isInitialized(){if(!this.initialized){const{message:e}=ce("NOT_INITIALIZED",this.name);throw new Error(e)}}}class X5 extends sD{constructor(e,t){super(e,t),this.relayer=e,this.logger=t,this.events=new _r.EventEmitter,this.name=C5,this.queue=new Map,this.publishTimeout=ve.toMiliseconds(ve.TEN_SECONDS),this.queueTimeout=ve.toMiliseconds(ve.FIVE_SECONDS),this.needsTransportRestart=!1,this.publish=async(s,o,c)=>{this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:s,message:o,opts:c}});try{const f=(c==null?void 0:c.ttl)||P5,d=bu(c),y=(c==null?void 0:c.prompt)||!1,p=(c==null?void 0:c.tag)||0,m=(c==null?void 0:c.id)||da().toString(),D={topic:s,message:o,opts:{ttl:f,relay:d,prompt:y,tag:p,id:m}},A=setTimeout(()=>this.queue.set(m,D),this.queueTimeout);try{await await Xo(this.rpcPublish(s,o,f,d,y,p,m),this.publishTimeout),clearTimeout(A),this.relayer.events.emit(At.publish,D)}catch{this.logger.debug("Publishing Payload stalled"),this.needsTransportRestart=!0;return}this.logger.debug("Successfully Published Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:s,message:o,opts:c}})}catch(f){throw this.logger.debug("Failed to Publish Payload"),this.logger.error(f),f}},this.on=(s,o)=>{this.events.on(s,o)},this.once=(s,o)=>{this.events.once(s,o)},this.off=(s,o)=>{this.events.off(s,o)},this.removeListener=(s,o)=>{this.events.removeListener(s,o)},this.relayer=e,this.logger=Ar(t,this.name),this.registerEventListeners()}get context(){return br(this.logger)}rpcPublish(e,t,s,o,c,f,d){var y,p,m,D;const A={method:Ho(o.protocol).publish,params:{topic:e,message:t,ttl:s,prompt:c,tag:f},id:d};return ar((y=A.params)==null?void 0:y.prompt)&&((p=A.params)==null||delete p.prompt),ar((m=A.params)==null?void 0:m.tag)&&((D=A.params)==null||delete D.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:A}),this.relayer.request(A)}onPublish(e){this.queue.delete(e)}checkQueue(){this.queue.forEach(async e=>{const{topic:t,message:s,opts:o}=e;await this.publish(t,s,o)})}registerEventListeners(){this.relayer.core.heartbeat.on(zn.HEARTBEAT_EVENTS.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(At.connection_stalled);return}this.checkQueue()}),this.relayer.on(At.message_ack,e=>{this.onPublish(e.id.toString())})}}class Z5{constructor(){this.map=new Map,this.set=(e,t)=>{const s=this.get(e);this.exists(e,t)||this.map.set(e,[...s,t])},this.get=e=>this.map.get(e)||[],this.exists=(e,t)=>this.get(e).includes(t),this.delete=(e,t)=>{if(typeof t>"u"){this.map.delete(e);return}if(!this.map.has(e))return;const s=this.get(e);if(!this.exists(e,t))return;const o=s.filter(c=>c!==t);if(!o.length){this.map.delete(e);return}this.map.set(e,o)},this.clear=()=>{this.map.clear()}}get topics(){return Array.from(this.map.keys())}}var Q5=Object.defineProperty,eI=Object.defineProperties,tI=Object.getOwnPropertyDescriptors,hd=Object.getOwnPropertySymbols,rI=Object.prototype.hasOwnProperty,iI=Object.prototype.propertyIsEnumerable,ld=(i,e,t)=>e in i?Q5(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,ds=(i,e)=>{for(var t in e||(e={}))rI.call(e,t)&&ld(i,t,e[t]);if(hd)for(var t of hd(e))iI.call(e,t)&&ld(i,t,e[t]);return i},eu=(i,e)=>eI(i,tI(e));class nI extends cD{constructor(e,t){super(e,t),this.relayer=e,this.logger=t,this.subscriptions=new Map,this.topicMap=new Z5,this.events=new _r.EventEmitter,this.name=j5,this.version=B5,this.pending=new Map,this.cached=[],this.initialized=!1,this.pendingSubscriptionWatchLabel="pending_sub_watch_label",this.pollingInterval=20,this.storagePrefix=Ui,this.subscribeTimeout=1e4,this.restartInProgress=!1,this.batchSubscribeTopicsLimit=500,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restart(),this.registerEventListeners(),this.onEnable(),this.clientId=await this.relayer.core.crypto.getClientId())},this.subscribe=async(s,o)=>{await this.restartToComplete(),this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:s,opts:o}});try{const c=bu(o),f={topic:s,relay:c};this.pending.set(s,f);const d=await this.rpcSubscribe(s,c);return this.onSubscribe(d,f),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:s,opts:o}}),d}catch(c){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(c),c}},this.unsubscribe=async(s,o)=>{await this.restartToComplete(),this.isInitialized(),typeof(o==null?void 0:o.id)<"u"?await this.unsubscribeById(s,o.id,o):await this.unsubscribeByTopic(s,o)},this.isSubscribed=async s=>this.topics.includes(s)?!0:await new Promise((o,c)=>{const f=new ve.Watch;f.start(this.pendingSubscriptionWatchLabel);const d=setInterval(()=>{!this.pending.has(s)&&this.topics.includes(s)&&(clearInterval(d),f.stop(this.pendingSubscriptionWatchLabel),o(!0)),f.elapsed(this.pendingSubscriptionWatchLabel)>=z5&&(clearInterval(d),f.stop(this.pendingSubscriptionWatchLabel),c(new Error("Subscription resolution timeout")))},this.pollingInterval)}).catch(()=>!1),this.on=(s,o)=>{this.events.on(s,o)},this.once=(s,o)=>{this.events.once(s,o)},this.off=(s,o)=>{this.events.off(s,o)},this.removeListener=(s,o)=>{this.events.removeListener(s,o)},this.restart=async()=>{this.restartInProgress=!0,await this.restore(),await this.reset(),this.restartInProgress=!1},this.relayer=e,this.logger=Ar(t,this.name),this.clientId=""}get context(){return br(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}hasSubscription(e,t){let s=!1;try{s=this.getSubscription(e).topic===t}catch{}return s}onEnable(){this.cached=[],this.initialized=!0}onDisable(){this.cached=this.values,this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,t){const s=this.topicMap.get(e);await Promise.all(s.map(async o=>await this.unsubscribeById(e,o,t)))}async unsubscribeById(e,t,s){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:t,opts:s}});try{const o=bu(s);await this.rpcUnsubscribe(e,t,o);const c=Rt("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,t,c),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:t,opts:s}})}catch(o){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(o),o}}async rpcSubscribe(e,t){const s={method:Ho(t.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:s});try{await await Xo(this.relayer.request(s),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(At.connection_stalled)}return Un(e+this.clientId)}async rpcBatchSubscribe(e){if(!e.length)return;const t=e[0].relay,s={method:Ho(t.protocol).batchSubscribe,params:{topics:e.map(o=>o.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:s});try{return await await Xo(this.relayer.request(s),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Payload stalled"),this.relayer.events.emit(At.connection_stalled)}}rpcUnsubscribe(e,t,s){const o={method:Ho(s.protocol).unsubscribe,params:{topic:e,id:t}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:o}),this.relayer.request(o)}onSubscribe(e,t){this.setSubscription(e,eu(ds({},t),{id:e})),this.pending.delete(t.topic)}onBatchSubscribe(e){e.length&&e.forEach(t=>{this.setSubscription(t.id,ds({},t)),this.pending.delete(t.topic)})}async onUnsubscribe(e,t,s){this.events.removeAllListeners(t),this.hasSubscription(t,e)&&this.deleteSubscription(t,s),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,t){this.subscriptions.has(e)||(this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:t}),this.addSubscription(e,t))}addSubscription(e,t){this.subscriptions.set(e,ds({},t)),this.topicMap.set(t.topic,e),this.events.emit(ni.created,t)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});const t=this.subscriptions.get(e);if(!t){const{message:s}=ce("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(s)}return t}deleteSubscription(e,t){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:t});const s=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(s.topic,e),this.events.emit(ni.deleted,eu(ds({},s),{reason:t}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(ni.sync)}async reset(){if(this.cached.length){const e=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let t=0;t<e;t++){const s=this.cached.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(s)}}this.events.emit(ni.resubscribed)}async restore(){try{const e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size){const{message:t}=ce("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(t)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){if(!e.length)return;const t=await this.rpcBatchSubscribe(e);oi(t)&&this.onBatchSubscribe(t.map((s,o)=>eu(ds({},e[o]),{id:s})))}async onConnect(){this.restartInProgress||(await this.restart(),this.onEnable())}onDisconnect(){this.onDisable()}async checkPending(){if(this.relayer.transportExplicitlyClosed)return;const e=[];this.pending.forEach(t=>{e.push(t)}),await this.batchSubscribe(e)}registerEventListeners(){this.relayer.core.heartbeat.on(zn.HEARTBEAT_EVENTS.pulse,async()=>{await this.checkPending()}),this.relayer.on(At.connect,async()=>{await this.onConnect()}),this.relayer.on(At.disconnect,()=>{this.onDisconnect()}),this.events.on(ni.created,async e=>{const t=ni.created;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),await this.persist()}),this.events.on(ni.deleted,async e=>{const t=ni.deleted;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),await this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=ce("NOT_INITIALIZED",this.name);throw new Error(e)}}async restartToComplete(){this.restartInProgress&&await new Promise(e=>{const t=setInterval(()=>{this.restartInProgress||(clearInterval(t),e())},this.pollingInterval)})}}var sI=Object.defineProperty,fd=Object.getOwnPropertySymbols,oI=Object.prototype.hasOwnProperty,aI=Object.prototype.propertyIsEnumerable,dd=(i,e,t)=>e in i?sI(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,cI=(i,e)=>{for(var t in e||(e={}))oI.call(e,t)&&dd(i,t,e[t]);if(fd)for(var t of fd(e))aI.call(e,t)&&dd(i,t,e[t]);return i};class uI extends oD{constructor(e){super(e),this.protocol="wc",this.version=2,this.events=new _r.EventEmitter,this.name=N5,this.transportExplicitlyClosed=!1,this.initialized=!1,this.reconnecting=!1,this.connectionStatusPollingInterval=20,this.staleConnectionErrors=["socket hang up","socket stalled"],this.request=async t=>{this.logger.debug("Publishing Request Payload");try{return await this.toEstablishConnection(),await this.provider.request(t)}catch(s){throw this.logger.debug("Failed to Publish Request"),this.logger.error(s),s}},this.core=e.core,this.logger=typeof e.logger<"u"&&typeof e.logger!="string"?Ar(e.logger,this.name):la(fa({level:e.logger||T5})),this.messages=new J5(this.logger,e.core),this.subscriber=new nI(this,this.logger),this.publisher=new X5(this,this.logger),this.relayUrl=(e==null?void 0:e.relayUrl)||ng,this.projectId=e.projectId,this.provider={}}async init(){this.logger.trace("Initialized"),await this.createProvider(),await Promise.all([this.messages.init(),this.subscriber.init()]);try{await this.transportOpen()}catch{this.logger.warn(`Connection via ${this.relayUrl} failed, attempting to connect via failover domain ${cd}...`),await this.restartTransport(cd)}this.registerEventListeners(),this.initialized=!0,setTimeout(async()=>{this.subscriber.topics.length===0&&(this.logger.info("No topics subscribed to after init, closing transport"),await this.transportClose(),this.transportExplicitlyClosed=!1)},U5)}get context(){return br(this.logger)}get connected(){return this.provider.connection.connected}get connecting(){return this.provider.connection.connecting}async publish(e,t,s){this.isInitialized(),await this.publisher.publish(e,t,s),await this.recordMessageEvent({topic:e,message:t,publishedAt:Date.now()})}async subscribe(e,t){var s;this.isInitialized();let o=((s=this.subscriber.topicMap.get(e))==null?void 0:s[0])||"";return o||(await Promise.all([new Promise(c=>{this.subscriber.once(ni.created,f=>{f.topic===e&&c()})}),new Promise(async c=>{o=await this.subscriber.subscribe(e,t),c()})]),o)}async unsubscribe(e,t){this.isInitialized(),await this.subscriber.unsubscribe(e,t)}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async transportClose(){this.transportExplicitlyClosed=!0,this.connected&&(await this.provider.disconnect(),this.events.emit(At.transport_closed))}async transportOpen(e){if(this.transportExplicitlyClosed=!1,!this.reconnecting){this.relayUrl=e||this.relayUrl,this.reconnecting=!0;try{await Promise.all([new Promise(t=>{this.initialized||t(),this.subscriber.once(ni.resubscribed,()=>{t()})}),await Promise.race([new Promise(async(t,s)=>{await Xo(this.provider.connect(),5e3,`Socket stalled when trying to connect to ${this.relayUrl}`).catch(o=>s(o)).then(()=>t()).finally(()=>this.removeListener(At.transport_closed,this.rejectTransportOpen))}),new Promise(t=>this.once(At.transport_closed,this.rejectTransportOpen))])])}catch(t){this.logger.error(t);const s=t;if(!this.isConnectionStalled(s.message))throw t;this.events.emit(At.transport_closed)}finally{this.reconnecting=!1}}}async restartTransport(e){this.transportExplicitlyClosed||this.reconnecting||(this.relayUrl=e||this.relayUrl,this.connected&&await Promise.all([new Promise(t=>{this.provider.once(ls.disconnect,()=>{t()})}),this.transportClose()]),await this.createProvider(),await this.transportOpen())}isConnectionStalled(e){return this.staleConnectionErrors.some(t=>e.includes(t))}rejectTransportOpen(){throw new Error("Attempt to connect to relay via `transportOpen` has stalled. Retrying...")}async createProvider(){const e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new HD(new WD(s3({sdkVersion:$5,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0}))),this.registerProviderListeners()}async recordMessageEvent(e){const{topic:t,message:s}=e;await this.messages.set(t,s)}async shouldIgnoreMessageEvent(e){const{topic:t,message:s}=e;return await this.subscriber.isSubscribed(t)?this.messages.has(t,s):!0}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),Gu(e)){if(!e.method.endsWith(R5))return;const t=e.params,{topic:s,message:o,publishedAt:c}=t.data,f={topic:s,message:o,publishedAt:c};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(cI({type:"event",event:t.id},f)),this.events.emit(t.id,f),await this.acknowledgePayload(e),await this.onMessageEvent(f)}else Ps(e)&&this.events.emit(At.message_ack,e)}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(this.events.emit(At.message,e),await this.recordMessageEvent(e))}async acknowledgePayload(e){const t=Wu(e.id,!0);await this.provider.connection.send(t)}registerProviderListeners(){this.provider.on(ls.payload,e=>this.onProviderPayload(e)),this.provider.on(ls.connect,()=>{this.events.emit(At.connect)}),this.provider.on(ls.disconnect,()=>{this.onProviderDisconnect()}),this.provider.on(ls.error,e=>{this.logger.error(e),this.events.emit(At.error,e)})}registerEventListeners(){this.events.on(At.connection_stalled,async()=>{await this.restartTransport()})}onProviderDisconnect(){this.events.emit(At.disconnect),this.attemptToReconnect()}attemptToReconnect(){this.transportExplicitlyClosed||setTimeout(async()=>{await this.restartTransport()},ve.toMiliseconds(F5))}isInitialized(){if(!this.initialized){const{message:e}=ce("NOT_INITIALIZED",this.name);throw new Error(e)}}async toEstablishConnection(){if(!this.connected){if(this.connecting)return await new Promise(e=>{const t=setInterval(()=>{this.connected&&(clearInterval(t),e())},this.connectionStatusPollingInterval)});await this.restartTransport()}}}var hI=Object.defineProperty,pd=Object.getOwnPropertySymbols,lI=Object.prototype.hasOwnProperty,fI=Object.prototype.propertyIsEnumerable,gd=(i,e,t)=>e in i?hI(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,yd=(i,e)=>{for(var t in e||(e={}))lI.call(e,t)&&gd(i,t,e[t]);if(pd)for(var t of pd(e))fI.call(e,t)&&gd(i,t,e[t]);return i};class ya extends aD{constructor(e,t,s,o=Ui,c=void 0){super(e,t,s,o),this.core=e,this.logger=t,this.name=s,this.map=new Map,this.version=L5,this.cached=[],this.initialized=!1,this.storagePrefix=Ui,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(f=>{this.getKey&&f!==null&&!ar(f)?this.map.set(this.getKey(f),f):A3(f)?this.map.set(f.id,f):P3(f)&&this.map.set(f.topic,f)}),this.cached=[],this.initialized=!0)},this.set=async(f,d)=>{this.isInitialized(),this.map.has(f)?await this.update(f,d):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:f,value:d}),this.map.set(f,d),await this.persist())},this.get=f=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:f}),this.getData(f)),this.getAll=f=>(this.isInitialized(),f?this.values.filter(d=>Object.keys(f).every(y=>YD(d[y],f[y]))):this.values),this.update=async(f,d)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:f,update:d});const y=yd(yd({},this.getData(f)),d);this.map.set(f,y),await this.persist()},this.delete=async(f,d)=>{this.isInitialized(),this.map.has(f)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:f,reason:d}),this.map.delete(f),await this.persist())},this.logger=Ar(t,this.name),this.storagePrefix=o,this.getKey=c}get context(){return br(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){const t=this.map.get(e);if(!t){const{message:s}=ce("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(s),new Error(s)}return t}async persist(){await this.setDataStore(this.values)}async restore(){try{const e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){const{message:t}=ce("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),new Error(t)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){const{message:e}=ce("NOT_INITIALIZED",this.name);throw new Error(e)}}}class dI{constructor(e,t){this.core=e,this.logger=t,this.name=q5,this.version=H5,this.events=new Tu,this.initialized=!1,this.storagePrefix=Ui,this.ignoredPayloadTypes=[on],this.registeredMethods=[],this.init=async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))},this.register=({methods:s})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...s])]},this.create=async()=>{this.isInitialized();const s=_u(),o=await this.core.crypto.setSymKey(s),c=Gr(ve.FIVE_MINUTES),f={protocol:ig},d={topic:o,expiry:c,relay:f,active:!1},y=m3({protocol:this.core.protocol,version:this.core.version,topic:o,symKey:s,relay:f});return await this.pairings.set(o,d),await this.core.relayer.subscribe(o),this.core.expirer.set(o,c),{topic:o,uri:y}},this.pair=async s=>{this.isInitialized(),this.isValidPair(s);const{topic:o,symKey:c,relay:f}=g3(s.uri);if(this.pairings.keys.includes(o))throw new Error(`Pairing already exists: ${o}`);if(this.core.crypto.hasKeys(o))throw new Error(`Keychain already exists: ${o}`);const d=Gr(ve.FIVE_MINUTES),y={topic:o,relay:f,expiry:d,active:!1};return await this.pairings.set(o,y),await this.core.crypto.setSymKey(c,o),await this.core.relayer.subscribe(o,{relay:f}),this.core.expirer.set(o,d),s.activatePairing&&await this.activate({topic:o}),y},this.activate=async({topic:s})=>{this.isInitialized();const o=Gr(ve.THIRTY_DAYS);await this.pairings.update(s,{active:!0,expiry:o}),this.core.expirer.set(s,o)},this.ping=async s=>{this.isInitialized(),await this.isValidPing(s);const{topic:o}=s;if(this.pairings.keys.includes(o)){const c=await this.sendRequest(o,"wc_pairingPing",{}),{done:f,resolve:d,reject:y}=Fn();this.events.once(qt("pairing_ping",c),({error:p})=>{p?y(p):d()}),await f()}},this.updateExpiry=async({topic:s,expiry:o})=>{this.isInitialized(),await this.pairings.update(s,{expiry:o})},this.updateMetadata=async({topic:s,metadata:o})=>{this.isInitialized(),await this.pairings.update(s,{peerMetadata:o})},this.getPairings=()=>(this.isInitialized(),this.pairings.values),this.disconnect=async s=>{this.isInitialized(),await this.isValidDisconnect(s);const{topic:o}=s;this.pairings.keys.includes(o)&&(await this.sendRequest(o,"wc_pairingDelete",Rt("USER_DISCONNECTED")),await this.deletePairing(o))},this.sendRequest=async(s,o,c)=>{const f=As(o,c),d=await this.core.crypto.encode(s,f),y=fs[o].req;return this.core.history.set(s,f),this.core.relayer.publish(s,d,y),f.id},this.sendResult=async(s,o,c)=>{const f=Wu(s,c),d=await this.core.crypto.encode(o,f),y=await this.core.history.get(o,s),p=fs[y.request.method].res;await this.core.relayer.publish(o,d,p),await this.core.history.resolve(f)},this.sendError=async(s,o,c)=>{const f=pa(s,c),d=await this.core.crypto.encode(o,f),y=await this.core.history.get(o,s),p=fs[y.request.method]?fs[y.request.method].res:fs.unregistered_method.res;await this.core.relayer.publish(o,d,p),await this.core.history.resolve(f)},this.deletePairing=async(s,o)=>{await this.core.relayer.unsubscribe(s),await Promise.all([this.pairings.delete(s,Rt("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(s),o?Promise.resolve():this.core.expirer.del(s)])},this.cleanup=async()=>{const s=this.pairings.getAll().filter(o=>Fi(o.expiry));await Promise.all(s.map(o=>this.deletePairing(o.topic)))},this.onRelayEventRequest=s=>{const{topic:o,payload:c}=s,f=c.method;if(this.pairings.keys.includes(o))switch(f){case"wc_pairingPing":return this.onPairingPingRequest(o,c);case"wc_pairingDelete":return this.onPairingDeleteRequest(o,c);default:return this.onUnknownRpcMethodRequest(o,c)}},this.onRelayEventResponse=async s=>{const{topic:o,payload:c}=s,f=(await this.core.history.get(o,c.id)).request.method;if(this.pairings.keys.includes(o))switch(f){case"wc_pairingPing":return this.onPairingPingResponse(o,c);default:return this.onUnknownRpcMethodResponse(f)}},this.onPairingPingRequest=async(s,o)=>{const{id:c}=o;try{this.isValidPing({topic:s}),await this.sendResult(c,s,!0),this.events.emit("pairing_ping",{id:c,topic:s})}catch(f){await this.sendError(c,s,f),this.logger.error(f)}},this.onPairingPingResponse=(s,o)=>{const{id:c}=o;setTimeout(()=>{wi(o)?this.events.emit(qt("pairing_ping",c),{}):Br(o)&&this.events.emit(qt("pairing_ping",c),{error:o.error})},500)},this.onPairingDeleteRequest=async(s,o)=>{const{id:c}=o;try{this.isValidDisconnect({topic:s}),await this.deletePairing(s),this.events.emit("pairing_delete",{id:c,topic:s})}catch(f){await this.sendError(c,s,f),this.logger.error(f)}},this.onUnknownRpcMethodRequest=async(s,o)=>{const{id:c,method:f}=o;try{if(this.registeredMethods.includes(f))return;const d=Rt("WC_METHOD_UNSUPPORTED",f);await this.sendError(c,s,d),this.logger.error(d)}catch(d){await this.sendError(c,s,d),this.logger.error(d)}},this.onUnknownRpcMethodResponse=s=>{this.registeredMethods.includes(s)||this.logger.error(Rt("WC_METHOD_UNSUPPORTED",s))},this.isValidPair=s=>{if(!vr(s)){const{message:o}=ce("MISSING_OR_INVALID",`pair() params: ${s}`);throw new Error(o)}if(!O3(s.uri)){const{message:o}=ce("MISSING_OR_INVALID",`pair() uri: ${s.uri}`);throw new Error(o)}},this.isValidPing=async s=>{if(!vr(s)){const{message:c}=ce("MISSING_OR_INVALID",`ping() params: ${s}`);throw new Error(c)}const{topic:o}=s;await this.isValidPairingTopic(o)},this.isValidDisconnect=async s=>{if(!vr(s)){const{message:c}=ce("MISSING_OR_INVALID",`disconnect() params: ${s}`);throw new Error(c)}const{topic:o}=s;await this.isValidPairingTopic(o)},this.isValidPairingTopic=async s=>{if(!Gt(s,!1)){const{message:o}=ce("MISSING_OR_INVALID",`pairing topic should be a string: ${s}`);throw new Error(o)}if(!this.pairings.keys.includes(s)){const{message:o}=ce("NO_MATCHING_KEY",`pairing topic doesn't exist: ${s}`);throw new Error(o)}if(Fi(this.pairings.get(s).expiry)){await this.deletePairing(s);const{message:o}=ce("EXPIRED",`pairing topic: ${s}`);throw new Error(o)}},this.core=e,this.logger=Ar(t,this.name),this.pairings=new ya(this.core,this.logger,this.name,this.storagePrefix)}get context(){return br(this.logger)}isInitialized(){if(!this.initialized){const{message:e}=ce("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.core.relayer.on(At.message,async e=>{const{topic:t,message:s}=e;if(this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(s)))return;const o=await this.core.crypto.decode(t,s);Gu(o)?(this.core.history.set(t,o),this.onRelayEventRequest({topic:t,payload:o})):Ps(o)&&(await this.core.history.resolve(o),await this.onRelayEventResponse({topic:t,payload:o}),this.core.history.delete(t,o.id))})}registerExpirerEvents(){this.core.expirer.on(jr.expired,async e=>{const{topic:t}=Ip(e.target);t&&this.pairings.keys.includes(t)&&(await this.deletePairing(t,!0),this.events.emit("pairing_expire",{topic:t}))})}}class pI extends iD{constructor(e,t){super(e,t),this.core=e,this.logger=t,this.records=new Map,this.events=new _r.EventEmitter,this.name=K5,this.version=k5,this.cached=[],this.initialized=!1,this.storagePrefix=Ui,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(s=>this.records.set(s.id,s)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.set=(s,o,c)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:s,request:o,chainId:c}),this.records.has(o.id))return;const f={id:o.id,topic:s,request:{method:o.method,params:o.params||null},chainId:c,expiry:Gr(ve.THIRTY_DAYS)};this.records.set(f.id,f),this.events.emit(ii.created,f)},this.resolve=async s=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:s}),!this.records.has(s.id))return;const o=await this.getRecord(s.id);typeof o.response>"u"&&(o.response=Br(s)?{error:s.error}:{result:s.result},this.records.set(o.id,o),this.events.emit(ii.updated,o))},this.get=async(s,o)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:s,id:o}),await this.getRecord(o)),this.delete=(s,o)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:o}),this.values.forEach(c=>{if(c.topic===s){if(typeof o<"u"&&c.id!==o)return;this.records.delete(c.id),this.events.emit(ii.deleted,c)}})},this.exists=async(s,o)=>(this.isInitialized(),this.records.has(o)?(await this.getRecord(o)).topic===s:!1),this.on=(s,o)=>{this.events.on(s,o)},this.once=(s,o)=>{this.events.once(s,o)},this.off=(s,o)=>{this.events.off(s,o)},this.removeListener=(s,o)=>{this.events.removeListener(s,o)},this.logger=Ar(t,this.name)}get context(){return br(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const e=[];return this.values.forEach(t=>{if(typeof t.response<"u")return;const s={topic:t.topic,request:As(t.request.method,t.request.params,t.id),chainId:t.chainId};return e.push(s)}),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();const t=this.records.get(e);if(!t){const{message:s}=ce("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(s)}return t}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(ii.sync)}async restore(){try{const e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){const{message:t}=ce("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),new Error(t)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(ii.created,e=>{const t=ii.created;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e}),this.persist()}),this.events.on(ii.updated,e=>{const t=ii.updated;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e}),this.persist()}),this.events.on(ii.deleted,e=>{const t=ii.deleted;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e}),this.persist()}),this.core.heartbeat.on(zn.HEARTBEAT_EVENTS.pulse,()=>{this.cleanup()})}cleanup(){try{this.records.forEach(e=>{ve.toMiliseconds(e.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${e.id}`),this.delete(e.topic,e.id))})}catch(e){this.logger.warn(e)}}isInitialized(){if(!this.initialized){const{message:e}=ce("NOT_INITIALIZED",this.name);throw new Error(e)}}}class gI extends uD{constructor(e,t){super(e,t),this.core=e,this.logger=t,this.expirations=new Map,this.events=new _r.EventEmitter,this.name=V5,this.version=W5,this.cached=[],this.initialized=!1,this.storagePrefix=Ui,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(s=>this.expirations.set(s.target,s)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.has=s=>{try{const o=this.formatTarget(s);return typeof this.getExpiration(o)<"u"}catch{return!1}},this.set=(s,o)=>{this.isInitialized();const c=this.formatTarget(s),f={target:c,expiry:o};this.expirations.set(c,f),this.checkExpiry(c,f),this.events.emit(jr.created,{target:c,expiration:f})},this.get=s=>{this.isInitialized();const o=this.formatTarget(s);return this.getExpiration(o)},this.del=s=>{if(this.isInitialized(),this.has(s)){const o=this.formatTarget(s),c=this.getExpiration(o);this.expirations.delete(o),this.events.emit(jr.deleted,{target:o,expiration:c})}},this.on=(s,o)=>{this.events.on(s,o)},this.once=(s,o)=>{this.events.once(s,o)},this.off=(s,o)=>{this.events.off(s,o)},this.removeListener=(s,o)=>{this.events.removeListener(s,o)},this.logger=Ar(t,this.name)}get context(){return br(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if(typeof e=="string")return o3(e);if(typeof e=="number")return a3(e);const{message:t}=ce("UNKNOWN_TYPE",`Target type: ${typeof e}`);throw new Error(t)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(jr.sync)}async restore(){try{const e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){const{message:t}=ce("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),new Error(t)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){const t=this.expirations.get(e);if(!t){const{message:s}=ce("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(s),new Error(s)}return t}checkExpiry(e,t){const{expiry:s}=t;ve.toMiliseconds(s)-Date.now()<=0&&this.expire(e,t)}expire(e,t){this.expirations.delete(e),this.events.emit(jr.expired,{target:e,expiration:t})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((e,t)=>this.checkExpiry(t,e))}registerEventListeners(){this.core.heartbeat.on(zn.HEARTBEAT_EVENTS.pulse,()=>this.checkExpirations()),this.events.on(jr.created,e=>{const t=jr.created;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()}),this.events.on(jr.expired,e=>{const t=jr.expired;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()}),this.events.on(jr.deleted,e=>{const t=jr.deleted;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=ce("NOT_INITIALIZED",this.name);throw new Error(e)}}}class yI extends hD{constructor(e,t){super(e,t),this.projectId=e,this.logger=t,this.name=Qc,this.initialized=!1,this.init=async s=>{bp()||!zu()||(this.verifyUrl=(s==null?void 0:s.verifyUrl)||ud,await this.createIframe())},this.register=async s=>{var o;if(this.initialized||await this.init(),!!this.iframe)try{(o=this.iframe.contentWindow)==null||o.postMessage(s.attestationId,this.verifyUrl),this.logger.info(`postMessage sent: ${s.attestationId} ${this.verifyUrl}`)}catch{}},this.resolve=async s=>{var o;if(this.isDevEnv)return"";this.logger.info(`resolving attestation: ${s.attestationId}`);const c=this.startAbortTimer(ve.FIVE_SECONDS),f=await fetch(`${this.verifyUrl}/attestation/${s.attestationId}`,{signal:this.abortController.signal});return clearTimeout(c),f.status===200?(o=await f.json())==null?void 0:o.origin:""},this.createIframe=async()=>{try{await Promise.race([new Promise((s,o)=>{if(document.getElementById(Qc))return s();const c=document.createElement("iframe");c.setAttribute("id",Qc),c.setAttribute("src",`${this.verifyUrl}/${this.projectId}`),c.style.display="none",c.addEventListener("load",()=>{this.initialized=!0,s()}),c.addEventListener("error",f=>{o(f)}),document.body.append(c),this.iframe=c}),new Promise(s=>{setTimeout(()=>s("iframe load timeout"),ve.toMiliseconds(ve.ONE_SECOND/2))})])}catch(s){this.logger.error(`Verify iframe failed to load: ${this.verifyUrl}`),this.logger.error(s)}},this.logger=Ar(t,this.name),this.verifyUrl=ud,this.abortController=new AbortController,this.isDevEnv=Bu()&&{}.IS_VITEST}get context(){return br(this.logger)}startAbortTimer(e){return setTimeout(()=>this.abortController.abort(),ve.toMiliseconds(e))}}var vI=Object.defineProperty,vd=Object.getOwnPropertySymbols,mI=Object.prototype.hasOwnProperty,_I=Object.prototype.propertyIsEnumerable,md=(i,e,t)=>e in i?vI(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,_d=(i,e)=>{for(var t in e||(e={}))mI.call(e,t)&&md(i,t,e[t]);if(vd)for(var t of vd(e))_I.call(e,t)&&md(i,t,e[t]);return i};class Ju extends rD{constructor(e){super(e),this.protocol=rg,this.version=b5,this.name=Yu,this.events=new _r.EventEmitter,this.initialized=!1,this.on=(s,o)=>this.events.on(s,o),this.once=(s,o)=>this.events.once(s,o),this.off=(s,o)=>this.events.off(s,o),this.removeListener=(s,o)=>this.events.removeListener(s,o),this.projectId=e==null?void 0:e.projectId,this.relayUrl=(e==null?void 0:e.relayUrl)||ng;const t=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:la(fa({level:(e==null?void 0:e.logger)||w5.logger}));this.logger=Ar(t,this.name),this.heartbeat=new zn.HeartBeat,this.crypto=new Y5(this,this.logger,e==null?void 0:e.keychain),this.history=new pI(this,this.logger),this.expirer=new gI(this,this.logger),this.storage=e!=null&&e.storage?e.storage:new S6(_d(_d({},E5),e==null?void 0:e.storageOptions)),this.relayer=new uI({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new dI(this,this.logger),this.verify=new yI(this.projectId||"",this.logger)}static async init(e){const t=new Ju(e);await t.initialize();const s=await t.crypto.getClientId();return await t.storage.setItem(M5,s),t}get context(){return br(this.logger)}async start(){this.initialized||await this.initialize()}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,e),this.logger.error(e.message),e}}}const bI=Ju,sg="wc",og=2,ag="client",Xu=`${sg}@${og}:${ag}:`,tu={name:ag,logger:"error",controller:!1,relayUrl:"wss://relay.walletconnect.com"},wI="WALLETCONNECT_DEEPLINK_CHOICE",EI="proposal",cg="Proposal expired",DI="session",jo=ve.SEVEN_DAYS,II="engine",ps={wc_sessionPropose:{req:{ttl:ve.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:ve.FIVE_MINUTES,prompt:!1,tag:1101}},wc_sessionSettle:{req:{ttl:ve.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:ve.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:ve.ONE_DAY,prompt:!1,tag:1104},res:{ttl:ve.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:ve.ONE_DAY,prompt:!1,tag:1106},res:{ttl:ve.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:ve.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:ve.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:ve.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:ve.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:ve.ONE_DAY,prompt:!1,tag:1112},res:{ttl:ve.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:ve.THIRTY_SECONDS,prompt:!1,tag:1114},res:{ttl:ve.THIRTY_SECONDS,prompt:!1,tag:1115}}},ru={min:ve.FIVE_MINUTES,max:ve.SEVEN_DAYS},SI="request",xI=["wc_sessionPropose","wc_sessionRequest","wc_authRequest"];var OI=Object.defineProperty,AI=Object.defineProperties,PI=Object.getOwnPropertyDescriptors,bd=Object.getOwnPropertySymbols,CI=Object.prototype.hasOwnProperty,TI=Object.prototype.propertyIsEnumerable,wd=(i,e,t)=>e in i?OI(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,Mr=(i,e)=>{for(var t in e||(e={}))CI.call(e,t)&&wd(i,t,e[t]);if(bd)for(var t of bd(e))TI.call(e,t)&&wd(i,t,e[t]);return i},iu=(i,e)=>AI(i,PI(e));class NI extends fD{constructor(e){super(e),this.name=II,this.events=new Tu,this.initialized=!1,this.ignoredPayloadTypes=[on],this.init=async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.client.core.pairing.register({methods:Object.keys(ps)}),this.initialized=!0)},this.connect=async t=>{this.isInitialized();const s=iu(Mr({},t),{requiredNamespaces:t.requiredNamespaces||{},optionalNamespaces:t.optionalNamespaces||{}});await this.isValidConnect(s);const{pairingTopic:o,requiredNamespaces:c,optionalNamespaces:f,sessionProperties:d,relays:y}=s;let p=o,m,D=!1;if(p&&(D=this.client.core.pairing.pairings.get(p).active),!p||!D){const{topic:U,uri:I}=await this.client.core.pairing.create();p=U,m=I}const A=await this.client.core.crypto.generateKeyPair(),O=Mr({requiredNamespaces:c,optionalNamespaces:f,relays:y??[{protocol:ig}],proposer:{publicKey:A,metadata:this.client.metadata}},d&&{sessionProperties:d}),{reject:S,resolve:k,done:H}=Fn(ve.FIVE_MINUTES,cg);if(this.events.once(qt("session_connect"),async({error:U,session:I})=>{if(U)S(U);else if(I){I.self.publicKey=A;const C=iu(Mr({},I),{requiredNamespaces:I.requiredNamespaces,optionalNamespaces:I.optionalNamespaces});await this.client.session.set(I.topic,C),await this.setExpiry(I.topic,I.expiry),p&&await this.client.core.pairing.updateMetadata({topic:p,metadata:I.peer.metadata}),k(C)}}),!p){const{message:U}=ce("NO_MATCHING_KEY",`connect() pairing topic: ${p}`);throw new Error(U)}const re=await this.sendRequest(p,"wc_sessionPropose",O),F=Gr(ve.FIVE_MINUTES);return await this.setProposal(re,Mr({id:re,expiry:F},O)),{uri:m,approval:H}},this.pair=async t=>(this.isInitialized(),await this.client.core.pairing.pair(t)),this.approve=async t=>{this.isInitialized(),await this.isValidApprove(t);const{id:s,relayProtocol:o,namespaces:c,sessionProperties:f}=t,d=this.client.proposal.get(s);let{pairingTopic:y,proposer:p,requiredNamespaces:m,optionalNamespaces:D}=d;y=y||"",Ln(m)||(m=E3(c,"approve()"));const A=await this.client.core.crypto.generateKeyPair(),O=p.publicKey,S=await this.client.core.crypto.generateSharedKey(A,O);y&&s&&(await this.client.core.pairing.updateMetadata({topic:y,metadata:p.metadata}),await this.sendResult(s,y,{relay:{protocol:o??"irn"},responderPublicKey:A}),await this.client.proposal.delete(s,Rt("USER_DISCONNECTED")),await this.client.core.pairing.activate({topic:y}));const k=Mr({relay:{protocol:o??"irn"},namespaces:c,requiredNamespaces:m,optionalNamespaces:D,pairingTopic:y,controller:{publicKey:A,metadata:this.client.metadata},expiry:Gr(jo)},f&&{sessionProperties:f});await this.client.core.relayer.subscribe(S),await this.sendRequest(S,"wc_sessionSettle",k);const H=iu(Mr({},k),{topic:S,pairingTopic:y,acknowledged:!1,self:k.controller,peer:{publicKey:p.publicKey,metadata:p.metadata},controller:A});return await this.client.session.set(S,H),await this.setExpiry(S,Gr(jo)),{topic:S,acknowledged:()=>new Promise(re=>setTimeout(()=>re(this.client.session.get(S)),500))}},this.reject=async t=>{this.isInitialized(),await this.isValidReject(t);const{id:s,reason:o}=t,{pairingTopic:c}=this.client.proposal.get(s);c&&(await this.sendError(s,c,o),await this.client.proposal.delete(s,Rt("USER_DISCONNECTED")))},this.update=async t=>{this.isInitialized(),await this.isValidUpdate(t);const{topic:s,namespaces:o}=t,c=await this.sendRequest(s,"wc_sessionUpdate",{namespaces:o}),{done:f,resolve:d,reject:y}=Fn();return this.events.once(qt("session_update",c),({error:p})=>{p?y(p):d()}),await this.client.session.update(s,{namespaces:o}),{acknowledged:f}},this.extend=async t=>{this.isInitialized(),await this.isValidExtend(t);const{topic:s}=t,o=await this.sendRequest(s,"wc_sessionExtend",{}),{done:c,resolve:f,reject:d}=Fn();return this.events.once(qt("session_extend",o),({error:y})=>{y?d(y):f()}),await this.setExpiry(s,Gr(jo)),{acknowledged:c}},this.request=async t=>{this.isInitialized(),await this.isValidRequest(t);const{chainId:s,request:o,topic:c,expiry:f}=t,d=await this.sendRequest(c,"wc_sessionRequest",{request:o,chainId:s},f),{done:y,resolve:p,reject:m}=Fn(f);this.events.once(qt("session_request",d),({error:A,result:O})=>{A?m(A):p(O)}),this.client.events.emit("session_request_sent",{topic:c,request:o,chainId:s,id:d});const D=await this.client.core.storage.getItem(wI);return c3({id:d,topic:c,wcDeepLink:D}),await y()},this.respond=async t=>{this.isInitialized(),await this.isValidRespond(t);const{topic:s,response:o}=t,{id:c}=o;wi(o)?await this.sendResult(c,s,o.result):Br(o)&&await this.sendError(c,s,o.error),this.deletePendingSessionRequest(t.response.id,{message:"fulfilled",code:0})},this.ping=async t=>{this.isInitialized(),await this.isValidPing(t);const{topic:s}=t;if(this.client.session.keys.includes(s)){const o=await this.sendRequest(s,"wc_sessionPing",{}),{done:c,resolve:f,reject:d}=Fn();this.events.once(qt("session_ping",o),({error:y})=>{y?d(y):f()}),await c()}else this.client.core.pairing.pairings.keys.includes(s)&&await this.client.core.pairing.ping({topic:s})},this.emit=async t=>{this.isInitialized(),await this.isValidEmit(t);const{topic:s,event:o,chainId:c}=t;await this.sendRequest(s,"wc_sessionEvent",{event:o,chainId:c})},this.disconnect=async t=>{this.isInitialized(),await this.isValidDisconnect(t);const{topic:s}=t;if(this.client.session.keys.includes(s)){const o=da().toString();let c;const f=d=>{(d==null?void 0:d.id.toString())===o&&(this.client.core.relayer.events.removeListener(At.message_ack,f),c())};await Promise.all([new Promise(d=>{c=d,this.client.core.relayer.on(At.message_ack,f)}),this.sendRequest(s,"wc_sessionDelete",Rt("USER_DISCONNECTED"),void 0,o)]),await this.deleteSession(s)}else await this.client.core.pairing.disconnect({topic:s})},this.find=t=>(this.isInitialized(),this.client.session.getAll().filter(s=>S3(s,t))),this.getPendingSessionRequests=()=>(this.isInitialized(),this.client.pendingRequest.getAll()),this.cleanupDuplicatePairings=async t=>{if(t.pairingTopic)try{const s=this.client.core.pairing.pairings.get(t.pairingTopic),o=this.client.core.pairing.pairings.getAll().filter(c=>{var f,d;return((f=c.peerMetadata)==null?void 0:f.url)&&((d=c.peerMetadata)==null?void 0:d.url)===t.peer.metadata.url&&c.topic&&c.topic!==s.topic});if(o.length===0)return;this.client.logger.info(`Cleaning up ${o.length} duplicate pairing(s)`),await Promise.all(o.map(c=>this.client.core.pairing.disconnect({topic:c.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(s){this.client.logger.error(s)}},this.deleteSession=async(t,s)=>{const{self:o}=this.client.session.get(t);await this.client.core.relayer.unsubscribe(t),this.client.session.delete(t,Rt("USER_DISCONNECTED")),this.client.core.crypto.keychain.has(o.publicKey)&&await this.client.core.crypto.deleteKeyPair(o.publicKey),this.client.core.crypto.keychain.has(t)&&await this.client.core.crypto.deleteSymKey(t),s||this.client.core.expirer.del(t)},this.deleteProposal=async(t,s)=>{await Promise.all([this.client.proposal.delete(t,Rt("USER_DISCONNECTED")),s?Promise.resolve():this.client.core.expirer.del(t)])},this.deletePendingSessionRequest=async(t,s,o=!1)=>{await Promise.all([this.client.pendingRequest.delete(t,s),o?Promise.resolve():this.client.core.expirer.del(t)])},this.setExpiry=async(t,s)=>{this.client.session.keys.includes(t)&&await this.client.session.update(t,{expiry:s}),this.client.core.expirer.set(t,s)},this.setProposal=async(t,s)=>{await this.client.proposal.set(t,s),this.client.core.expirer.set(t,s.expiry)},this.setPendingSessionRequest=async t=>{const s=ps.wc_sessionRequest.req.ttl,{id:o,topic:c,params:f}=t;await this.client.pendingRequest.set(o,{id:o,topic:c,params:f}),s&&this.client.core.expirer.set(o,Gr(s))},this.sendRequest=async(t,s,o,c,f)=>{const d=As(s,o);if(zu()&&xI.includes(s)){const m=Un(JSON.stringify(d));await this.client.core.verify.register({attestationId:m})}const y=await this.client.core.crypto.encode(t,d),p=ps[s].req;return c&&(p.ttl=c),f&&(p.id=f),this.client.core.history.set(t,d),this.client.core.relayer.publish(t,y,p),d.id},this.sendResult=async(t,s,o)=>{const c=Wu(t,o),f=await this.client.core.crypto.encode(s,c),d=await this.client.core.history.get(s,t),y=ps[d.request.method].res;this.client.core.relayer.publish(s,f,y),await this.client.core.history.resolve(c)},this.sendError=async(t,s,o)=>{const c=pa(t,o),f=await this.client.core.crypto.encode(s,c),d=await this.client.core.history.get(s,t),y=ps[d.request.method].res;this.client.core.relayer.publish(s,f,y),await this.client.core.history.resolve(c)},this.cleanup=async()=>{const t=[],s=[];this.client.session.getAll().forEach(o=>{Fi(o.expiry)&&t.push(o.topic)}),this.client.proposal.getAll().forEach(o=>{Fi(o.expiry)&&s.push(o.id)}),await Promise.all([...t.map(o=>this.deleteSession(o)),...s.map(o=>this.deleteProposal(o))])},this.onRelayEventRequest=t=>{const{topic:s,payload:o}=t,c=o.method;switch(c){case"wc_sessionPropose":return this.onSessionProposeRequest(s,o);case"wc_sessionSettle":return this.onSessionSettleRequest(s,o);case"wc_sessionUpdate":return this.onSessionUpdateRequest(s,o);case"wc_sessionExtend":return this.onSessionExtendRequest(s,o);case"wc_sessionPing":return this.onSessionPingRequest(s,o);case"wc_sessionDelete":return this.onSessionDeleteRequest(s,o);case"wc_sessionRequest":return this.onSessionRequest(s,o);case"wc_sessionEvent":return this.onSessionEventRequest(s,o);default:return this.client.logger.info(`Unsupported request method ${c}`)}},this.onRelayEventResponse=async t=>{const{topic:s,payload:o}=t,c=(await this.client.core.history.get(s,o.id)).request.method;switch(c){case"wc_sessionPropose":return this.onSessionProposeResponse(s,o);case"wc_sessionSettle":return this.onSessionSettleResponse(s,o);case"wc_sessionUpdate":return this.onSessionUpdateResponse(s,o);case"wc_sessionExtend":return this.onSessionExtendResponse(s,o);case"wc_sessionPing":return this.onSessionPingResponse(s,o);case"wc_sessionRequest":return this.onSessionRequestResponse(s,o);default:return this.client.logger.info(`Unsupported response method ${c}`)}},this.onRelayEventUnknownPayload=t=>{const{topic:s}=t,{message:o}=ce("MISSING_OR_INVALID",`Decoded payload on topic ${s} is not identifiable as a JSON-RPC request or a response.`);throw new Error(o)},this.onSessionProposeRequest=async(t,s)=>{const{params:o,id:c}=s;try{this.isValidConnect(Mr({},s.params));const f=Gr(ve.FIVE_MINUTES),d=Mr({id:c,pairingTopic:t,expiry:f},o);await this.setProposal(c,d);const y=Un(JSON.stringify(s)),p=await this.getVerifyContext(y,d.proposer.metadata);this.client.events.emit("session_proposal",{id:c,params:d,verifyContext:p})}catch(f){await this.sendError(c,t,f),this.client.logger.error(f)}},this.onSessionProposeResponse=async(t,s)=>{const{id:o}=s;if(wi(s)){const{result:c}=s;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:c});const f=this.client.proposal.get(o);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:f});const d=f.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:d});const y=c.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:y});const p=await this.client.core.crypto.generateSharedKey(d,y);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",sessionTopic:p});const m=await this.client.core.relayer.subscribe(p);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:m}),await this.client.core.pairing.activate({topic:t})}else Br(s)&&(await this.client.proposal.delete(o,Rt("USER_DISCONNECTED")),this.events.emit(qt("session_connect"),{error:s.error}))},this.onSessionSettleRequest=async(t,s)=>{const{id:o,params:c}=s;try{this.isValidSessionSettleRequest(c);const{relay:f,controller:d,expiry:y,namespaces:p,requiredNamespaces:m,optionalNamespaces:D,sessionProperties:A,pairingTopic:O}=s.params,S=Mr({topic:t,relay:f,expiry:y,namespaces:p,acknowledged:!0,pairingTopic:O,requiredNamespaces:m,optionalNamespaces:D,controller:d.publicKey,self:{publicKey:"",metadata:this.client.metadata},peer:{publicKey:d.publicKey,metadata:d.metadata}},A&&{sessionProperties:A});await this.sendResult(s.id,t,!0),this.events.emit(qt("session_connect"),{session:S}),this.cleanupDuplicatePairings(S)}catch(f){await this.sendError(o,t,f),this.client.logger.error(f)}},this.onSessionSettleResponse=async(t,s)=>{const{id:o}=s;wi(s)?(await this.client.session.update(t,{acknowledged:!0}),this.events.emit(qt("session_approve",o),{})):Br(s)&&(await this.client.session.delete(t,Rt("USER_DISCONNECTED")),this.events.emit(qt("session_approve",o),{error:s.error}))},this.onSessionUpdateRequest=async(t,s)=>{const{params:o,id:c}=s;try{this.isValidUpdate(Mr({topic:t},o)),await this.client.session.update(t,{namespaces:o.namespaces}),await this.sendResult(c,t,!0),this.client.events.emit("session_update",{id:c,topic:t,params:o})}catch(f){await this.sendError(c,t,f),this.client.logger.error(f)}},this.onSessionUpdateResponse=(t,s)=>{const{id:o}=s;wi(s)?this.events.emit(qt("session_update",o),{}):Br(s)&&this.events.emit(qt("session_update",o),{error:s.error})},this.onSessionExtendRequest=async(t,s)=>{const{id:o}=s;try{this.isValidExtend({topic:t}),await this.setExpiry(t,Gr(jo)),await this.sendResult(o,t,!0),this.client.events.emit("session_extend",{id:o,topic:t})}catch(c){await this.sendError(o,t,c),this.client.logger.error(c)}},this.onSessionExtendResponse=(t,s)=>{const{id:o}=s;wi(s)?this.events.emit(qt("session_extend",o),{}):Br(s)&&this.events.emit(qt("session_extend",o),{error:s.error})},this.onSessionPingRequest=async(t,s)=>{const{id:o}=s;try{this.isValidPing({topic:t}),await this.sendResult(o,t,!0),this.client.events.emit("session_ping",{id:o,topic:t})}catch(c){await this.sendError(o,t,c),this.client.logger.error(c)}},this.onSessionPingResponse=(t,s)=>{const{id:o}=s;setTimeout(()=>{wi(s)?this.events.emit(qt("session_ping",o),{}):Br(s)&&this.events.emit(qt("session_ping",o),{error:s.error})},500)},this.onSessionDeleteRequest=async(t,s)=>{const{id:o}=s;try{this.isValidDisconnect({topic:t,reason:s.params}),await Promise.all([new Promise(c=>{this.client.core.relayer.once(At.publish,async()=>{c(await this.deleteSession(t))})}),this.sendResult(o,t,!0)]),this.client.events.emit("session_delete",{id:o,topic:t})}catch(c){this.client.logger.error(c)}},this.onSessionRequest=async(t,s)=>{const{id:o,params:c}=s;try{this.isValidRequest(Mr({topic:t},c)),await this.setPendingSessionRequest({id:o,topic:t,params:c});const f=Un(JSON.stringify(s)),d=this.client.session.get(t),y=await this.getVerifyContext(f,d.peer.metadata);this.client.events.emit("session_request",{id:o,topic:t,params:c,verifyContext:y})}catch(f){await this.sendError(o,t,f),this.client.logger.error(f)}},this.onSessionRequestResponse=(t,s)=>{const{id:o}=s;wi(s)?this.events.emit(qt("session_request",o),{result:s.result}):Br(s)&&this.events.emit(qt("session_request",o),{error:s.error})},this.onSessionEventRequest=async(t,s)=>{const{id:o,params:c}=s;try{this.isValidEmit(Mr({topic:t},c)),this.client.events.emit("session_event",{id:o,topic:t,params:c})}catch(f){await this.sendError(o,t,f),this.client.logger.error(f)}},this.isValidConnect=async t=>{if(!vr(t)){const{message:y}=ce("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(t)}`);throw new Error(y)}const{pairingTopic:s,requiredNamespaces:o,optionalNamespaces:c,sessionProperties:f,relays:d}=t;if(ar(s)||await this.isValidPairingTopic(s),!L3(d,!0)){const{message:y}=ce("MISSING_OR_INVALID",`connect() relays: ${d}`);throw new Error(y)}!ar(o)&&Ln(o)!==0&&this.validateNamespaces(o,"requiredNamespaces"),!ar(c)&&Ln(c)!==0&&this.validateNamespaces(c,"optionalNamespaces"),ar(f)||this.validateSessionProps(f,"sessionProperties")},this.validateNamespaces=(t,s)=>{const o=U3(t,"connect()",s);if(o)throw new Error(o.message)},this.isValidApprove=async t=>{if(!vr(t))throw new Error(ce("MISSING_OR_INVALID",`approve() params: ${t}`).message);const{id:s,namespaces:o,relayProtocol:c,sessionProperties:f}=t;await this.isValidProposalId(s);const d=this.client.proposal.get(s),y=ko(o,"approve()");if(y)throw new Error(y.message);const p=Nf(d.requiredNamespaces,o,"approve()");if(p)throw new Error(p.message);if(!Gt(c,!0)){const{message:m}=ce("MISSING_OR_INVALID",`approve() relayProtocol: ${c}`);throw new Error(m)}ar(f)||this.validateSessionProps(f,"sessionProperties")},this.isValidReject=async t=>{if(!vr(t)){const{message:c}=ce("MISSING_OR_INVALID",`reject() params: ${t}`);throw new Error(c)}const{id:s,reason:o}=t;if(await this.isValidProposalId(s),!j3(o)){const{message:c}=ce("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(o)}`);throw new Error(c)}},this.isValidSessionSettleRequest=t=>{if(!vr(t)){const{message:p}=ce("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${t}`);throw new Error(p)}const{relay:s,controller:o,namespaces:c,expiry:f}=t;if(!xp(s)){const{message:p}=ce("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(p)}const d=C3(o,"onSessionSettleRequest()");if(d)throw new Error(d.message);const y=ko(c,"onSessionSettleRequest()");if(y)throw new Error(y.message);if(Fi(f)){const{message:p}=ce("EXPIRED","onSessionSettleRequest()");throw new Error(p)}},this.isValidUpdate=async t=>{if(!vr(t)){const{message:y}=ce("MISSING_OR_INVALID",`update() params: ${t}`);throw new Error(y)}const{topic:s,namespaces:o}=t;await this.isValidSessionTopic(s);const c=this.client.session.get(s),f=ko(o,"update()");if(f)throw new Error(f.message);const d=Nf(c.requiredNamespaces,o,"update()");if(d)throw new Error(d.message)},this.isValidExtend=async t=>{if(!vr(t)){const{message:o}=ce("MISSING_OR_INVALID",`extend() params: ${t}`);throw new Error(o)}const{topic:s}=t;await this.isValidSessionTopic(s)},this.isValidRequest=async t=>{if(!vr(t)){const{message:y}=ce("MISSING_OR_INVALID",`request() params: ${t}`);throw new Error(y)}const{topic:s,request:o,chainId:c,expiry:f}=t;await this.isValidSessionTopic(s);const{namespaces:d}=this.client.session.get(s);if(!Tf(d,c)){const{message:y}=ce("MISSING_OR_INVALID",`request() chainId: ${c}`);throw new Error(y)}if(!B3(o)){const{message:y}=ce("MISSING_OR_INVALID",`request() ${JSON.stringify(o)}`);throw new Error(y)}if(!H3(d,c,o.method)){const{message:y}=ce("MISSING_OR_INVALID",`request() method: ${o.method}`);throw new Error(y)}if(f&&!W3(f,ru)){const{message:y}=ce("MISSING_OR_INVALID",`request() expiry: ${f}. Expiry must be a number (in seconds) between ${ru.min} and ${ru.max}`);throw new Error(y)}},this.isValidRespond=async t=>{if(!vr(t)){const{message:c}=ce("MISSING_OR_INVALID",`respond() params: ${t}`);throw new Error(c)}const{topic:s,response:o}=t;if(await this.isValidSessionTopic(s),!z3(o)){const{message:c}=ce("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(o)}`);throw new Error(c)}},this.isValidPing=async t=>{if(!vr(t)){const{message:o}=ce("MISSING_OR_INVALID",`ping() params: ${t}`);throw new Error(o)}const{topic:s}=t;await this.isValidSessionOrPairingTopic(s)},this.isValidEmit=async t=>{if(!vr(t)){const{message:d}=ce("MISSING_OR_INVALID",`emit() params: ${t}`);throw new Error(d)}const{topic:s,event:o,chainId:c}=t;await this.isValidSessionTopic(s);const{namespaces:f}=this.client.session.get(s);if(!Tf(f,c)){const{message:d}=ce("MISSING_OR_INVALID",`emit() chainId: ${c}`);throw new Error(d)}if(!q3(o)){const{message:d}=ce("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(o)}`);throw new Error(d)}if(!K3(f,c,o.name)){const{message:d}=ce("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(o)}`);throw new Error(d)}},this.isValidDisconnect=async t=>{if(!vr(t)){const{message:o}=ce("MISSING_OR_INVALID",`disconnect() params: ${t}`);throw new Error(o)}const{topic:s}=t;await this.isValidSessionOrPairingTopic(s)},this.getVerifyContext=async(t,s)=>{const o={verified:{verifyUrl:s.verifyUrl||"",validation:"UNKNOWN",origin:s.url||""}};try{const c=await this.client.core.verify.resolve({attestationId:t,verifyUrl:s.verifyUrl});c&&(o.verified.origin=c,o.verified.validation=c===s.url?"VALID":"INVALID")}catch(c){this.client.logger.error(c)}return this.client.logger.info(`Verify context: ${JSON.stringify(o)}`),o},this.validateSessionProps=(t,s)=>{Object.values(t).forEach(o=>{if(!Gt(o,!1)){const{message:c}=ce("MISSING_OR_INVALID",`${s} must be in Record<string, string> format. Received: ${JSON.stringify(o)}`);throw new Error(c)}})}}isInitialized(){if(!this.initialized){const{message:e}=ce("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.client.core.relayer.on(At.message,async e=>{const{topic:t,message:s}=e;if(this.ignoredPayloadTypes.includes(this.client.core.crypto.getPayloadType(s)))return;const o=await this.client.core.crypto.decode(t,s);Gu(o)?(this.client.core.history.set(t,o),this.onRelayEventRequest({topic:t,payload:o})):Ps(o)?(await this.client.core.history.resolve(o),await this.onRelayEventResponse({topic:t,payload:o}),this.client.core.history.delete(t,o.id)):this.onRelayEventUnknownPayload({topic:t,payload:o})})}registerExpirerEvents(){this.client.core.expirer.on(jr.expired,async e=>{const{topic:t,id:s}=Ip(e.target);if(s&&this.client.pendingRequest.keys.includes(s))return await this.deletePendingSessionRequest(s,ce("EXPIRED"),!0);t?this.client.session.keys.includes(t)&&(await this.deleteSession(t,!0),this.client.events.emit("session_expire",{topic:t})):s&&(await this.deleteProposal(s,!0),this.client.events.emit("proposal_expire",{id:s}))})}isValidPairingTopic(e){if(!Gt(e,!1)){const{message:t}=ce("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(t)}if(!this.client.core.pairing.pairings.keys.includes(e)){const{message:t}=ce("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(t)}if(Fi(this.client.core.pairing.pairings.get(e).expiry)){const{message:t}=ce("EXPIRED",`pairing topic: ${e}`);throw new Error(t)}}async isValidSessionTopic(e){if(!Gt(e,!1)){const{message:t}=ce("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw new Error(t)}if(!this.client.session.keys.includes(e)){const{message:t}=ce("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw new Error(t)}if(Fi(this.client.session.get(e).expiry)){await this.deleteSession(e);const{message:t}=ce("EXPIRED",`session topic: ${e}`);throw new Error(t)}}async isValidSessionOrPairingTopic(e){if(this.client.session.keys.includes(e))await this.isValidSessionTopic(e);else if(this.client.core.pairing.pairings.keys.includes(e))this.isValidPairingTopic(e);else if(Gt(e,!1)){const{message:t}=ce("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw new Error(t)}else{const{message:t}=ce("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw new Error(t)}}async isValidProposalId(e){if(!M3(e)){const{message:t}=ce("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw new Error(t)}if(!this.client.proposal.keys.includes(e)){const{message:t}=ce("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw new Error(t)}if(Fi(this.client.proposal.get(e).expiry)){await this.deleteProposal(e);const{message:t}=ce("EXPIRED",`proposal id: ${e}`);throw new Error(t)}}}class RI extends ya{constructor(e,t){super(e,t,EI,Xu),this.core=e,this.logger=t}}class FI extends ya{constructor(e,t){super(e,t,DI,Xu),this.core=e,this.logger=t}}class $I extends ya{constructor(e,t){super(e,t,SI,Xu,s=>s.id),this.core=e,this.logger=t}}let UI=class ug extends lD{constructor(e){super(e),this.protocol=sg,this.version=og,this.name=tu.name,this.events=new _r.EventEmitter,this.on=(s,o)=>this.events.on(s,o),this.once=(s,o)=>this.events.once(s,o),this.off=(s,o)=>this.events.off(s,o),this.removeListener=(s,o)=>this.events.removeListener(s,o),this.removeAllListeners=s=>this.events.removeAllListeners(s),this.connect=async s=>{try{return await this.engine.connect(s)}catch(o){throw this.logger.error(o.message),o}},this.pair=async s=>{try{return await this.engine.pair(s)}catch(o){throw this.logger.error(o.message),o}},this.approve=async s=>{try{return await this.engine.approve(s)}catch(o){throw this.logger.error(o.message),o}},this.reject=async s=>{try{return await this.engine.reject(s)}catch(o){throw this.logger.error(o.message),o}},this.update=async s=>{try{return await this.engine.update(s)}catch(o){throw this.logger.error(o.message),o}},this.extend=async s=>{try{return await this.engine.extend(s)}catch(o){throw this.logger.error(o.message),o}},this.request=async s=>{try{return await this.engine.request(s)}catch(o){throw this.logger.error(o.message),o}},this.respond=async s=>{try{return await this.engine.respond(s)}catch(o){throw this.logger.error(o.message),o}},this.ping=async s=>{try{return await this.engine.ping(s)}catch(o){throw this.logger.error(o.message),o}},this.emit=async s=>{try{return await this.engine.emit(s)}catch(o){throw this.logger.error(o.message),o}},this.disconnect=async s=>{try{return await this.engine.disconnect(s)}catch(o){throw this.logger.error(o.message),o}},this.find=s=>{try{return this.engine.find(s)}catch(o){throw this.logger.error(o.message),o}},this.getPendingSessionRequests=()=>{try{return this.engine.getPendingSessionRequests()}catch(s){throw this.logger.error(s.message),s}},this.name=(e==null?void 0:e.name)||tu.name,this.metadata=(e==null?void 0:e.metadata)||t3();const t=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:la(fa({level:(e==null?void 0:e.logger)||tu.logger}));this.core=(e==null?void 0:e.core)||new bI(e),this.logger=Ar(t,this.name),this.session=new FI(this.core,this.logger),this.proposal=new RI(this.core,this.logger),this.pendingRequest=new $I(this.core,this.logger),this.engine=new NI(this)}static async init(e){const t=new ug(e);return await t.initialize(),t}get context(){return br(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.engine.init(),this.core.verify.init({verifyUrl:this.metadata.verifyUrl}),this.logger.info("SignClient Initialization Success")}catch(e){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(e.message),e}}};var Su={exports:{}};(function(i,e){var t=typeof self<"u"?self:Yr,s=function(){function c(){this.fetch=!1,this.DOMException=t.DOMException}return c.prototype=t,new c}();(function(c){(function(f){var d={searchParams:"URLSearchParams"in c,iterable:"Symbol"in c&&"iterator"in Symbol,blob:"FileReader"in c&&"Blob"in c&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in c,arrayBuffer:"ArrayBuffer"in c};function y(E){return E&&DataView.prototype.isPrototypeOf(E)}if(d.arrayBuffer)var p=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],m=ArrayBuffer.isView||function(E){return E&&p.indexOf(Object.prototype.toString.call(E))>-1};function D(E){if(typeof E!="string"&&(E=String(E)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(E))throw new TypeError("Invalid character in header field name");return E.toLowerCase()}function A(E){return typeof E!="string"&&(E=String(E)),E}function O(E){var N={next:function(){var Z=E.shift();return{done:Z===void 0,value:Z}}};return d.iterable&&(N[Symbol.iterator]=function(){return N}),N}function S(E){this.map={},E instanceof S?E.forEach(function(N,Z){this.append(Z,N)},this):Array.isArray(E)?E.forEach(function(N){this.append(N[0],N[1])},this):E&&Object.getOwnPropertyNames(E).forEach(function(N){this.append(N,E[N])},this)}S.prototype.append=function(E,N){E=D(E),N=A(N);var Z=this.map[E];this.map[E]=Z?Z+", "+N:N},S.prototype.delete=function(E){delete this.map[D(E)]},S.prototype.get=function(E){return E=D(E),this.has(E)?this.map[E]:null},S.prototype.has=function(E){return this.map.hasOwnProperty(D(E))},S.prototype.set=function(E,N){this.map[D(E)]=A(N)},S.prototype.forEach=function(E,N){for(var Z in this.map)this.map.hasOwnProperty(Z)&&E.call(N,this.map[Z],Z,this)},S.prototype.keys=function(){var E=[];return this.forEach(function(N,Z){E.push(Z)}),O(E)},S.prototype.values=function(){var E=[];return this.forEach(function(N){E.push(N)}),O(E)},S.prototype.entries=function(){var E=[];return this.forEach(function(N,Z){E.push([Z,N])}),O(E)},d.iterable&&(S.prototype[Symbol.iterator]=S.prototype.entries);function k(E){if(E.bodyUsed)return Promise.reject(new TypeError("Already read"));E.bodyUsed=!0}function H(E){return new Promise(function(N,Z){E.onload=function(){N(E.result)},E.onerror=function(){Z(E.error)}})}function re(E){var N=new FileReader,Z=H(N);return N.readAsArrayBuffer(E),Z}function F(E){var N=new FileReader,Z=H(N);return N.readAsText(E),Z}function U(E){for(var N=new Uint8Array(E),Z=new Array(N.length),J=0;J<N.length;J++)Z[J]=String.fromCharCode(N[J]);return Z.join("")}function I(E){if(E.slice)return E.slice(0);var N=new Uint8Array(E.byteLength);return N.set(new Uint8Array(E)),N.buffer}function C(){return this.bodyUsed=!1,this._initBody=function(E){this._bodyInit=E,E?typeof E=="string"?this._bodyText=E:d.blob&&Blob.prototype.isPrototypeOf(E)?this._bodyBlob=E:d.formData&&FormData.prototype.isPrototypeOf(E)?this._bodyFormData=E:d.searchParams&&URLSearchParams.prototype.isPrototypeOf(E)?this._bodyText=E.toString():d.arrayBuffer&&d.blob&&y(E)?(this._bodyArrayBuffer=I(E.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):d.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(E)||m(E))?this._bodyArrayBuffer=I(E):this._bodyText=E=Object.prototype.toString.call(E):this._bodyText="",this.headers.get("content-type")||(typeof E=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):d.searchParams&&URLSearchParams.prototype.isPrototypeOf(E)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},d.blob&&(this.blob=function(){var E=k(this);if(E)return E;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?k(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(re)}),this.text=function(){var E=k(this);if(E)return E;if(this._bodyBlob)return F(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(U(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},d.formData&&(this.formData=function(){return this.text().then(Q)}),this.json=function(){return this.text().then(JSON.parse)},this}var T=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function h(E){var N=E.toUpperCase();return T.indexOf(N)>-1?N:E}function b(E,N){N=N||{};var Z=N.body;if(E instanceof b){if(E.bodyUsed)throw new TypeError("Already read");this.url=E.url,this.credentials=E.credentials,N.headers||(this.headers=new S(E.headers)),this.method=E.method,this.mode=E.mode,this.signal=E.signal,!Z&&E._bodyInit!=null&&(Z=E._bodyInit,E.bodyUsed=!0)}else this.url=String(E);if(this.credentials=N.credentials||this.credentials||"same-origin",(N.headers||!this.headers)&&(this.headers=new S(N.headers)),this.method=h(N.method||this.method||"GET"),this.mode=N.mode||this.mode||null,this.signal=N.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&Z)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(Z)}b.prototype.clone=function(){return new b(this,{body:this._bodyInit})};function Q(E){var N=new FormData;return E.trim().split("&").forEach(function(Z){if(Z){var J=Z.split("="),K=J.shift().replace(/\+/g," "),V=J.join("=").replace(/\+/g," ");N.append(decodeURIComponent(K),decodeURIComponent(V))}}),N}function ne(E){var N=new S,Z=E.replace(/\r?\n[\t ]+/g," ");return Z.split(/\r?\n/).forEach(function(J){var K=J.split(":"),V=K.shift().trim();if(V){var ee=K.join(":").trim();N.append(V,ee)}}),N}C.call(b.prototype);function ue(E,N){N||(N={}),this.type="default",this.status=N.status===void 0?200:N.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in N?N.statusText:"OK",this.headers=new S(N.headers),this.url=N.url||"",this._initBody(E)}C.call(ue.prototype),ue.prototype.clone=function(){return new ue(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new S(this.headers),url:this.url})},ue.error=function(){var E=new ue(null,{status:0,statusText:""});return E.type="error",E};var ge=[301,302,303,307,308];ue.redirect=function(E,N){if(ge.indexOf(N)===-1)throw new RangeError("Invalid status code");return new ue(null,{status:N,headers:{location:E}})},f.DOMException=c.DOMException;try{new f.DOMException}catch{f.DOMException=function(N,Z){this.message=N,this.name=Z;var J=Error(N);this.stack=J.stack},f.DOMException.prototype=Object.create(Error.prototype),f.DOMException.prototype.constructor=f.DOMException}function ye(E,N){return new Promise(function(Z,J){var K=new b(E,N);if(K.signal&&K.signal.aborted)return J(new f.DOMException("Aborted","AbortError"));var V=new XMLHttpRequest;function ee(){V.abort()}V.onload=function(){var ie={status:V.status,statusText:V.statusText,headers:ne(V.getAllResponseHeaders()||"")};ie.url="responseURL"in V?V.responseURL:ie.headers.get("X-Request-URL");var De="response"in V?V.response:V.responseText;Z(new ue(De,ie))},V.onerror=function(){J(new TypeError("Network request failed"))},V.ontimeout=function(){J(new TypeError("Network request failed"))},V.onabort=function(){J(new f.DOMException("Aborted","AbortError"))},V.open(K.method,K.url,!0),K.credentials==="include"?V.withCredentials=!0:K.credentials==="omit"&&(V.withCredentials=!1),"responseType"in V&&d.blob&&(V.responseType="blob"),K.headers.forEach(function(ie,De){V.setRequestHeader(De,ie)}),K.signal&&(K.signal.addEventListener("abort",ee),V.onreadystatechange=function(){V.readyState===4&&K.signal.removeEventListener("abort",ee)}),V.send(typeof K._bodyInit>"u"?null:K._bodyInit)})}return ye.polyfill=!0,c.fetch||(c.fetch=ye,c.Headers=S,c.Request=b,c.Response=ue),f.Headers=S,f.Request=b,f.Response=ue,f.fetch=ye,Object.defineProperty(f,"__esModule",{value:!0}),f})({})})(s),s.fetch.ponyfill=!0,delete s.fetch.polyfill;var o=s;e=o.fetch,e.default=o.fetch,e.fetch=o.fetch,e.Headers=o.Headers,e.Request=o.Request,e.Response=o.Response,i.exports=e})(Su,Su.exports);var LI=Su.exports;const Ed=ra(LI);var MI=Object.defineProperty,jI=Object.defineProperties,BI=Object.getOwnPropertyDescriptors,Dd=Object.getOwnPropertySymbols,zI=Object.prototype.hasOwnProperty,qI=Object.prototype.propertyIsEnumerable,Id=(i,e,t)=>e in i?MI(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,Sd=(i,e)=>{for(var t in e||(e={}))zI.call(e,t)&&Id(i,t,e[t]);if(Dd)for(var t of Dd(e))qI.call(e,t)&&Id(i,t,e[t]);return i},xd=(i,e)=>jI(i,BI(e));const HI={Accept:"application/json","Content-Type":"application/json"},KI="POST",Od={headers:HI,method:KI},Ad=10;let un=class{constructor(e,t=!1){if(this.url=e,this.disableProviderPing=t,this.events=new _r.EventEmitter,this.isAvailable=!1,this.registering=!1,!Xf(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);this.url=e,this.disableProviderPing=t}get connected(){return this.isAvailable}get connecting(){return this.registering}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async open(e=this.url){await this.register(e)}async close(){if(!this.isAvailable)throw new Error("Connection already closed");this.onClose()}async send(e){this.isAvailable||await this.register();try{const t=nn(e),s=await(await Ed(this.url,xd(Sd({},Od),{body:t}))).json();this.onPayload({data:s})}catch(t){this.onError(e.id,t)}}async register(e=this.url){if(!Xf(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);if(this.registering){const t=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=t||this.events.listenerCount("open")>=t)&&this.events.setMaxListeners(t+1),new Promise((s,o)=>{this.events.once("register_error",c=>{this.resetMaxListeners(),o(c)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.isAvailable>"u")return o(new Error("HTTP connection is missing or invalid"));s()})})}this.url=e,this.registering=!0;try{if(!this.disableProviderPing){const t=nn({id:1,jsonrpc:"2.0",method:"test",params:[]});await Ed(e,xd(Sd({},Od),{body:t}))}this.onOpen()}catch(t){const s=this.parseError(t);throw this.events.emit("register_error",s),this.onClose(),s}}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(e){if(typeof e.data>"u")return;const t=typeof e.data=="string"?xs(e.data):e.data;this.events.emit("payload",t)}onError(e,t){const s=this.parseError(t),o=s.message||s.toString(),c=pa(e,o);this.events.emit("payload",c)}parseError(e,t=this.url){return jp(e,t,"HTTP")}resetMaxListeners(){this.events.getMaxListeners()>Ad&&this.events.setMaxListeners(Ad)}};class hn extends qp{constructor(e){super(e),this.events=new _r.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}async connect(e=this.connection){await this.open(e)}async disconnect(){await this.close()}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async request(e,t){return this.requestStrict(As(e.method,e.params||[],e.id||da().toString()),t)}async requestStrict(e,t){return new Promise(async(s,o)=>{if(!this.connection.connected)try{await this.open()}catch(c){o(c)}this.events.on(`${e.id}`,c=>{Br(c)?o(c.error):s(c.result)});try{await this.connection.send(e,t)}catch(c){o(c)}})}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),Ps(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&e.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}async open(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),typeof e=="string"&&(await this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",e=>this.onPayload(e)),this.connection.on("close",e=>this.onClose(e)),this.connection.on("error",e=>this.events.emit("error",e)),this.connection.on("register_error",e=>this.onClose()),this.hasRegisteredEventListeners=!0)}}const Pd="error",kI="wss://relay.walletconnect.com",VI="wc",WI="universal_provider",Cd=`${VI}@2:${WI}:`,GI="https://rpc.walletconnect.com/v1",Mi={DEFAULT_CHAIN_CHANGED:"default_chain_changed"};var gs=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},xu={exports:{}};/**
* @license
* Lodash <https://lodash.com/>
* Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
* Released under MIT license <https://lodash.com/license>
* Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
* Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
*/(function(i,e){(function(){var t,s="4.17.21",o=200,c="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",f="Expected a function",d="Invalid `variable` option passed into `_.template`",y="__lodash_hash_undefined__",p=500,m="__lodash_placeholder__",D=1,A=2,O=4,S=1,k=2,H=1,re=2,F=4,U=8,I=16,C=32,T=64,h=128,b=256,Q=512,ne=30,ue="...",ge=800,ye=16,E=1,N=2,Z=3,J=1/0,K=9007199254740991,V=17976931348623157e292,ee=0/0,ie=4294967295,De=ie-1,oe=ie>>>1,Ie=[["ary",h],["bind",H],["bindKey",re],["curry",U],["curryRight",I],["flip",Q],["partial",C],["partialRight",T],["rearg",b]],le="[object Arguments]",Ce="[object Array]",z="[object AsyncFunction]",B="[object Boolean]",$="[object Date]",l="[object DOMException]",P="[object Error]",se="[object Function]",he="[object GeneratorFunction]",Ee="[object Map]",qe="[object Number]",ke="[object Null]",Le="[object Object]",pt="[object Promise]",gt="[object Proxy]",je="[object RegExp]",Se="[object Set]",Re="[object String]",Fe="[object Symbol]",Be="[object Undefined]",Oe="[object WeakMap]",$e="[object WeakSet]",we="[object ArrayBuffer]",Ae="[object DataView]",He="[object Float32Array]",xe="[object Float64Array]",Ve="[object Int8Array]",Ge="[object Int16Array]",Qe="[object Int32Array]",et="[object Uint8Array]",Je="[object Uint8ClampedArray]",tr="[object Uint16Array]",hr="[object Uint32Array]",Jr=/\b__p \+= '';/g,rr=/\b(__p \+=) '' \+/g,ai=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Di=/&(?:amp|lt|gt|quot|#39);/g,ji=/[&<>"']/g,wt=RegExp(Di.source),yt=RegExp(ji.source),Et=/<%-([\s\S]+?)%>/g,Dt=/<%([\s\S]+?)%>/g,_t=/<%=([\s\S]+?)%>/g,vt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,$t=/^\w*$/,Ut=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,It=/[\\^$.*+?()[\]{}|]/g,Lt=RegExp(It.source),St=/^\s+/,Pt=/\s/,xt=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ht=/\{\n\/\* \[wrapped with (.+)\] \*/,Mt=/,? & /,jt=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,va=/[()=,{}\[\]\/\s]/,ma=/\\(\\)?/g,_a=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Pr=/\w*$/,ba=/^[-+]0x[0-9a-f]+$/i,wa=/^0b[01]+$/i,Ea=/^\[object .+?Constructor\]$/,Da=/^0o[0-7]+$/i,Ia=/^(?:0|[1-9]\d*)$/,ci=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ln=/($^)/,Sa=/['\n\r\u2028\u2029\\]/g,fn="\\ud800-\\udfff",xa="\\u0300-\\u036f",Oa="\\ufe20-\\ufe2f",dn="\\u20d0-\\u20ff",Ts=xa+Oa+dn,Ns="\\u2700-\\u27bf",qr="a-z\\xdf-\\xf6\\xf8-\\xff",Aa="\\xac\\xb1\\xd7\\xf7",Pa="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Ca="\\u2000-\\u206f",Ta=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Rs="A-Z\\xc0-\\xd6\\xd8-\\xde",Fs="\\ufe0e\\ufe0f",Bi=Aa+Pa+Ca+Ta,qn="['’]",zi="["+fn+"]",Hn="["+Bi+"]",qi="["+Ts+"]",$s="\\d+",Na="["+Ns+"]",Us="["+qr+"]",Ls="[^"+fn+Bi+$s+Ns+qr+Rs+"]",pn="\\ud83c[\\udffb-\\udfff]",Ra="(?:"+qi+"|"+pn+")",Ms="[^"+fn+"]",gn="(?:\\ud83c[\\udde6-\\uddff]){2}",Ii="[\\ud800-\\udbff][\\udc00-\\udfff]",wr="["+Rs+"]",js="\\u200d",Bs="(?:"+Us+"|"+Ls+")",Xr="(?:"+wr+"|"+Ls+")",zs="(?:"+qn+"(?:d|ll|m|re|s|t|ve))?",qs="(?:"+qn+"(?:D|LL|M|RE|S|T|VE))?",Hs=Ra+"?",Ks="["+Fs+"]?",Fa="(?:"+js+"(?:"+[Ms,gn,Ii].join("|")+")"+Ks+Hs+")*",ui="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",ks="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Vs=Ks+Hs+Fa,yn="(?:"+[Na,gn,Ii].join("|")+")"+Vs,$a="(?:"+[Ms+qi+"?",qi,gn,Ii,zi].join("|")+")",Kn=RegExp(qn,"g"),Ua=RegExp(qi,"g"),vn=RegExp(pn+"(?="+pn+")|"+$a+Vs,"g"),Ws=RegExp([wr+"?"+Us+"+"+zs+"(?="+[Hn,wr,"$"].join("|")+")",Xr+"+"+qs+"(?="+[Hn,wr+Bs,"$"].join("|")+")",wr+"?"+Bs+"+"+zs,wr+"+"+qs,ks,ui,$s,yn].join("|"),"g"),Gs=RegExp("["+js+fn+Ts+Fs+"]"),Hi=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Ys=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],La=-1,ot={};ot[He]=ot[xe]=ot[Ve]=ot[Ge]=ot[Qe]=ot[et]=ot[Je]=ot[tr]=ot[hr]=!0,ot[le]=ot[Ce]=ot[we]=ot[B]=ot[Ae]=ot[$]=ot[P]=ot[se]=ot[Ee]=ot[qe]=ot[Le]=ot[je]=ot[Se]=ot[Re]=ot[Oe]=!1;var nt={};nt[le]=nt[Ce]=nt[we]=nt[Ae]=nt[B]=nt[$]=nt[He]=nt[xe]=nt[Ve]=nt[Ge]=nt[Qe]=nt[Ee]=nt[qe]=nt[Le]=nt[je]=nt[Se]=nt[Re]=nt[Fe]=nt[et]=nt[Je]=nt[tr]=nt[hr]=!0,nt[P]=nt[se]=nt[Oe]=!1;var w={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},L={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},X={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},fe={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},at=parseFloat,Te=parseInt,ft=typeof gs=="object"&&gs&&gs.Object===Object&&gs,Bt=typeof self=="object"&&self&&self.Object===Object&&self,Xe=ft||Bt||Function("return this")(),ct=e&&!e.nodeType&&e,Ct=ct&&!0&&i&&!i.nodeType&&i,lr=Ct&&Ct.exports===ct,zt=lr&&ft.process,dt=function(){try{var M=Ct&&Ct.require&&Ct.require("util").types;return M||zt&&zt.binding&&zt.binding("util")}catch{}}(),ir=dt&&dt.isArrayBuffer,Hr=dt&&dt.isDate,Cr=dt&&dt.isMap,Zr=dt&&dt.isRegExp,kn=dt&&dt.isSet,Ki=dt&&dt.isTypedArray;function kt(M,W,q){switch(q.length){case 0:return M.call(W);case 1:return M.call(W,q[0]);case 2:return M.call(W,q[0],q[1]);case 3:return M.call(W,q[0],q[1],q[2])}return M.apply(W,q)}function fg(M,W,q,de){for(var Pe=-1,tt=M==null?0:M.length;++Pe<tt;){var Ht=M[Pe];W(de,Ht,q(Ht),M)}return de}function Tr(M,W){for(var q=-1,de=M==null?0:M.length;++q<de&&W(M[q],q,M)!==!1;);return M}function dg(M,W){for(var q=M==null?0:M.length;q--&&W(M[q],q,M)!==!1;);return M}function eh(M,W){for(var q=-1,de=M==null?0:M.length;++q<de;)if(!W(M[q],q,M))return!1;return!0}function Si(M,W){for(var q=-1,de=M==null?0:M.length,Pe=0,tt=[];++q<de;){var Ht=M[q];W(Ht,q,M)&&(tt[Pe++]=Ht)}return tt}function Js(M,W){var q=M==null?0:M.length;return!!q&&mn(M,W,0)>-1}function Ma(M,W,q){for(var de=-1,Pe=M==null?0:M.length;++de<Pe;)if(q(W,M[de]))return!0;return!1}function mt(M,W){for(var q=-1,de=M==null?0:M.length,Pe=Array(de);++q<de;)Pe[q]=W(M[q],q,M);return Pe}function xi(M,W){for(var q=-1,de=W.length,Pe=M.length;++q<de;)M[Pe+q]=W[q];return M}function ja(M,W,q,de){var Pe=-1,tt=M==null?0:M.length;for(de&&tt&&(q=M[++Pe]);++Pe<tt;)q=W(q,M[Pe],Pe,M);return q}function pg(M,W,q,de){var Pe=M==null?0:M.length;for(de&&Pe&&(q=M[--Pe]);Pe--;)q=W(q,M[Pe],Pe,M);return q}function Ba(M,W){for(var q=-1,de=M==null?0:M.length;++q<de;)if(W(M[q],q,M))return!0;return!1}var gg=za("length");function yg(M){return M.split("")}function vg(M){return M.match(jt)||[]}function th(M,W,q){var de;return q(M,function(Pe,tt,Ht){if(W(Pe,tt,Ht))return de=tt,!1}),de}function Xs(M,W,q,de){for(var Pe=M.length,tt=q+(de?1:-1);de?tt--:++tt<Pe;)if(W(M[tt],tt,M))return tt;return-1}function mn(M,W,q){return W===W?Pg(M,W,q):Xs(M,rh,q)}function mg(M,W,q,de){for(var Pe=q-1,tt=M.length;++Pe<tt;)if(de(M[Pe],W))return Pe;return-1}function rh(M){return M!==M}function ih(M,W){var q=M==null?0:M.length;return q?Ha(M,W)/q:ee}function za(M){return function(W){return W==null?t:W[M]}}function qa(M){return function(W){return M==null?t:M[W]}}function nh(M,W,q,de,Pe){return Pe(M,function(tt,Ht,ut){q=de?(de=!1,tt):W(q,tt,Ht,ut)}),q}function _g(M,W){var q=M.length;for(M.sort(W);q--;)M[q]=M[q].value;return M}function Ha(M,W){for(var q,de=-1,Pe=M.length;++de<Pe;){var tt=W(M[de]);tt!==t&&(q=q===t?tt:q+tt)}return q}function Ka(M,W){for(var q=-1,de=Array(M);++q<M;)de[q]=W(q);return de}function bg(M,W){return mt(W,function(q){return[q,M[q]]})}function sh(M){return M&&M.slice(0,uh(M)+1).replace(St,"")}function Er(M){return function(W){return M(W)}}function ka(M,W){return mt(W,function(q){return M[q]})}function Vn(M,W){return M.has(W)}function oh(M,W){for(var q=-1,de=M.length;++q<de&&mn(W,M[q],0)>-1;);return q}function ah(M,W){for(var q=M.length;q--&&mn(W,M[q],0)>-1;);return q}function wg(M,W){for(var q=M.length,de=0;q--;)M[q]===W&&++de;return de}var Eg=qa(w),Dg=qa(L);function Ig(M){return"\\"+fe[M]}function Sg(M,W){return M==null?t:M[W]}function _n(M){return Gs.test(M)}function xg(M){return Hi.test(M)}function Og(M){for(var W,q=[];!(W=M.next()).done;)q.push(W.value);return q}function Va(M){var W=-1,q=Array(M.size);return M.forEach(function(de,Pe){q[++W]=[Pe,de]}),q}function ch(M,W){return function(q){return M(W(q))}}function Oi(M,W){for(var q=-1,de=M.length,Pe=0,tt=[];++q<de;){var Ht=M[q];(Ht===W||Ht===m)&&(M[q]=m,tt[Pe++]=q)}return tt}function Zs(M){var W=-1,q=Array(M.size);return M.forEach(function(de){q[++W]=de}),q}function Ag(M){var W=-1,q=Array(M.size);return M.forEach(function(de){q[++W]=[de,de]}),q}function Pg(M,W,q){for(var de=q-1,Pe=M.length;++de<Pe;)if(M[de]===W)return de;return-1}function Cg(M,W,q){for(var de=q+1;de--;)if(M[de]===W)return de;return de}function bn(M){return _n(M)?Ng(M):gg(M)}function Kr(M){return _n(M)?Rg(M):yg(M)}function uh(M){for(var W=M.length;W--&&Pt.test(M.charAt(W)););return W}var Tg=qa(X);function Ng(M){for(var W=vn.lastIndex=0;vn.test(M);)++W;return W}function Rg(M){return M.match(vn)||[]}function Fg(M){return M.match(Ws)||[]}var $g=function M(W){W=W==null?Xe:wn.defaults(Xe.Object(),W,wn.pick(Xe,Ys));var q=W.Array,de=W.Date,Pe=W.Error,tt=W.Function,Ht=W.Math,ut=W.Object,Wa=W.RegExp,Ug=W.String,Nr=W.TypeError,Qs=q.prototype,Lg=tt.prototype,En=ut.prototype,eo=W["__core-js_shared__"],to=Lg.toString,it=En.hasOwnProperty,Mg=0,hh=function(){var r=/[^.]+$/.exec(eo&&eo.keys&&eo.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}(),ro=En.toString,jg=to.call(ut),Bg=Xe._,zg=Wa("^"+to.call(it).replace(It,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),io=lr?W.Buffer:t,Ai=W.Symbol,no=W.Uint8Array,lh=io?io.allocUnsafe:t,so=ch(ut.getPrototypeOf,ut),fh=ut.create,dh=En.propertyIsEnumerable,oo=Qs.splice,ph=Ai?Ai.isConcatSpreadable:t,Wn=Ai?Ai.iterator:t,ki=Ai?Ai.toStringTag:t,ao=function(){try{var r=Ji(ut,"defineProperty");return r({},"",{}),r}catch{}}(),qg=W.clearTimeout!==Xe.clearTimeout&&W.clearTimeout,Hg=de&&de.now!==Xe.Date.now&&de.now,Kg=W.setTimeout!==Xe.setTimeout&&W.setTimeout,co=Ht.ceil,uo=Ht.floor,Ga=ut.getOwnPropertySymbols,kg=io?io.isBuffer:t,gh=W.isFinite,Vg=Qs.join,Wg=ch(ut.keys,ut),Kt=Ht.max,Zt=Ht.min,Gg=de.now,Yg=W.parseInt,yh=Ht.random,Jg=Qs.reverse,Ya=Ji(W,"DataView"),Gn=Ji(W,"Map"),Ja=Ji(W,"Promise"),Dn=Ji(W,"Set"),Yn=Ji(W,"WeakMap"),Jn=Ji(ut,"create"),ho=Yn&&new Yn,In={},Xg=Xi(Ya),Zg=Xi(Gn),Qg=Xi(Ja),e0=Xi(Dn),t0=Xi(Yn),lo=Ai?Ai.prototype:t,Xn=lo?lo.valueOf:t,vh=lo?lo.toString:t;function v(r){if(Ot(r)&&!Ne(r)&&!(r instanceof Ye)){if(r instanceof Rr)return r;if(it.call(r,"__wrapped__"))return ml(r)}return new Rr(r)}var Sn=function(){function r(){}return function(n){if(!bt(n))return{};if(fh)return fh(n);r.prototype=n;var a=new r;return r.prototype=t,a}}();function fo(){}function Rr(r,n){this.__wrapped__=r,this.__actions__=[],this.__chain__=!!n,this.__index__=0,this.__values__=t}v.templateSettings={escape:Et,evaluate:Dt,interpolate:_t,variable:"",imports:{_:v}},v.prototype=fo.prototype,v.prototype.constructor=v,Rr.prototype=Sn(fo.prototype),Rr.prototype.constructor=Rr;function Ye(r){this.__wrapped__=r,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=ie,this.__views__=[]}function r0(){var r=new Ye(this.__wrapped__);return r.__actions__=fr(this.__actions__),r.__dir__=this.__dir__,r.__filtered__=this.__filtered__,r.__iteratees__=fr(this.__iteratees__),r.__takeCount__=this.__takeCount__,r.__views__=fr(this.__views__),r}function i0(){if(this.__filtered__){var r=new Ye(this);r.__dir__=-1,r.__filtered__=!0}else r=this.clone(),r.__dir__*=-1;return r}function n0(){var r=this.__wrapped__.value(),n=this.__dir__,a=Ne(r),u=n<0,g=a?r.length:0,_=yy(0,g,this.__views__),x=_.start,R=_.end,j=R-x,G=u?R:x-1,Y=this.__iteratees__,te=Y.length,ae=0,pe=Zt(j,this.__takeCount__);if(!a||!u&&g==j&&pe==j)return zh(r,this.__actions__);var _e=[];e:for(;j--&&ae<pe;){G+=n;for(var ze=-1,be=r[G];++ze<te;){var We=Y[ze],Ze=We.iteratee,Sr=We.type,or=Ze(be);if(Sr==N)be=or;else if(!or){if(Sr==E)continue e;break e}}_e[ae++]=be}return _e}Ye.prototype=Sn(fo.prototype),Ye.prototype.constructor=Ye;function Vi(r){var n=-1,a=r==null?0:r.length;for(this.clear();++n<a;){var u=r[n];this.set(u[0],u[1])}}function s0(){this.__data__=Jn?Jn(null):{},this.size=0}function o0(r){var n=this.has(r)&&delete this.__data__[r];return this.size-=n?1:0,n}function a0(r){var n=this.__data__;if(Jn){var a=n[r];return a===y?t:a}return it.call(n,r)?n[r]:t}function c0(r){var n=this.__data__;return Jn?n[r]!==t:it.call(n,r)}function u0(r,n){var a=this.__data__;return this.size+=this.has(r)?0:1,a[r]=Jn&&n===t?y:n,this}Vi.prototype.clear=s0,Vi.prototype.delete=o0,Vi.prototype.get=a0,Vi.prototype.has=c0,Vi.prototype.set=u0;function hi(r){var n=-1,a=r==null?0:r.length;for(this.clear();++n<a;){var u=r[n];this.set(u[0],u[1])}}function h0(){this.__data__=[],this.size=0}function l0(r){var n=this.__data__,a=po(n,r);if(a<0)return!1;var u=n.length-1;return a==u?n.pop():oo.call(n,a,1),--this.size,!0}function f0(r){var n=this.__data__,a=po(n,r);return a<0?t:n[a][1]}function d0(r){return po(this.__data__,r)>-1}function p0(r,n){var a=this.__data__,u=po(a,r);return u<0?(++this.size,a.push([r,n])):a[u][1]=n,this}hi.prototype.clear=h0,hi.prototype.delete=l0,hi.prototype.get=f0,hi.prototype.has=d0,hi.prototype.set=p0;function li(r){var n=-1,a=r==null?0:r.length;for(this.clear();++n<a;){var u=r[n];this.set(u[0],u[1])}}function g0(){this.size=0,this.__data__={hash:new Vi,map:new(Gn||hi),string:new Vi}}function y0(r){var n=xo(this,r).delete(r);return this.size-=n?1:0,n}function v0(r){return xo(this,r).get(r)}function m0(r){return xo(this,r).has(r)}function _0(r,n){var a=xo(this,r),u=a.size;return a.set(r,n),this.size+=a.size==u?0:1,this}li.prototype.clear=g0,li.prototype.delete=y0,li.prototype.get=v0,li.prototype.has=m0,li.prototype.set=_0;function Wi(r){var n=-1,a=r==null?0:r.length;for(this.__data__=new li;++n<a;)this.add(r[n])}function b0(r){return this.__data__.set(r,y),this}function w0(r){return this.__data__.has(r)}Wi.prototype.add=Wi.prototype.push=b0,Wi.prototype.has=w0;function kr(r){var n=this.__data__=new hi(r);this.size=n.size}function E0(){this.__data__=new hi,this.size=0}function D0(r){var n=this.__data__,a=n.delete(r);return this.size=n.size,a}function I0(r){return this.__data__.get(r)}function S0(r){return this.__data__.has(r)}function x0(r,n){var a=this.__data__;if(a instanceof hi){var u=a.__data__;if(!Gn||u.length<o-1)return u.push([r,n]),this.size=++a.size,this;a=this.__data__=new li(u)}return a.set(r,n),this.size=a.size,this}kr.prototype.clear=E0,kr.prototype.delete=D0,kr.prototype.get=I0,kr.prototype.has=S0,kr.prototype.set=x0;function mh(r,n){var a=Ne(r),u=!a&&Zi(r),g=!a&&!u&&Ri(r),_=!a&&!u&&!g&&Pn(r),x=a||u||g||_,R=x?Ka(r.length,Ug):[],j=R.length;for(var G in r)(n||it.call(r,G))&&!(x&&(G=="length"||g&&(G=="offset"||G=="parent")||_&&(G=="buffer"||G=="byteLength"||G=="byteOffset")||gi(G,j)))&&R.push(G);return R}function _h(r){var n=r.length;return n?r[ac(0,n-1)]:t}function O0(r,n){return Oo(fr(r),Gi(n,0,r.length))}function A0(r){return Oo(fr(r))}function Xa(r,n,a){(a!==t&&!Vr(r[n],a)||a===t&&!(n in r))&&fi(r,n,a)}function Zn(r,n,a){var u=r[n];(!(it.call(r,n)&&Vr(u,a))||a===t&&!(n in r))&&fi(r,n,a)}function po(r,n){for(var a=r.length;a--;)if(Vr(r[a][0],n))return a;return-1}function P0(r,n,a,u){return Pi(r,function(g,_,x){n(u,g,a(g),x)}),u}function bh(r,n){return r&&ei(n,Vt(n),r)}function C0(r,n){return r&&ei(n,pr(n),r)}function fi(r,n,a){n=="__proto__"&&ao?ao(r,n,{configurable:!0,enumerable:!0,value:a,writable:!0}):r[n]=a}function Za(r,n){for(var a=-1,u=n.length,g=q(u),_=r==null;++a<u;)g[a]=_?t:Nc(r,n[a]);return g}function Gi(r,n,a){return r===r&&(a!==t&&(r=r<=a?r:a),n!==t&&(r=r>=n?r:n)),r}function Fr(r,n,a,u,g,_){var x,R=n&D,j=n&A,G=n&O;if(a&&(x=g?a(r,u,g,_):a(r)),x!==t)return x;if(!bt(r))return r;var Y=Ne(r);if(Y){if(x=my(r),!R)return fr(r,x)}else{var te=Qt(r),ae=te==se||te==he;if(Ri(r))return Kh(r,R);if(te==Le||te==le||ae&&!g){if(x=j||ae?{}:ul(r),!R)return j?ay(r,C0(x,r)):oy(r,bh(x,r))}else{if(!nt[te])return g?r:{};x=_y(r,te,R)}}_||(_=new kr);var pe=_.get(r);if(pe)return pe;_.set(r,x),Ml(r)?r.forEach(function(be){x.add(Fr(be,n,a,be,r,_))}):Ul(r)&&r.forEach(function(be,We){x.set(We,Fr(be,n,a,We,r,_))});var _e=G?j?mc:vc:j?pr:Vt,ze=Y?t:_e(r);return Tr(ze||r,function(be,We){ze&&(We=be,be=r[We]),Zn(x,We,Fr(be,n,a,We,r,_))}),x}function T0(r){var n=Vt(r);return function(a){return wh(a,r,n)}}function wh(r,n,a){var u=a.length;if(r==null)return!u;for(r=ut(r);u--;){var g=a[u],_=n[g],x=r[g];if(x===t&&!(g in r)||!_(x))return!1}return!0}function Eh(r,n,a){if(typeof r!="function")throw new Nr(f);return ss(function(){r.apply(t,a)},n)}function Qn(r,n,a,u){var g=-1,_=Js,x=!0,R=r.length,j=[],G=n.length;if(!R)return j;a&&(n=mt(n,Er(a))),u?(_=Ma,x=!1):n.length>=o&&(_=Vn,x=!1,n=new Wi(n));e:for(;++g<R;){var Y=r[g],te=a==null?Y:a(Y);if(Y=u||Y!==0?Y:0,x&&te===te){for(var ae=G;ae--;)if(n[ae]===te)continue e;j.push(Y)}else _(n,te,u)||j.push(Y)}return j}var Pi=Yh(Qr),Dh=Yh(ec,!0);function N0(r,n){var a=!0;return Pi(r,function(u,g,_){return a=!!n(u,g,_),a}),a}function go(r,n,a){for(var u=-1,g=r.length;++u<g;){var _=r[u],x=n(_);if(x!=null&&(R===t?x===x&&!Ir(x):a(x,R)))var R=x,j=_}return j}function R0(r,n,a,u){var g=r.length;for(a=Me(a),a<0&&(a=-a>g?0:g+a),u=u===t||u>g?g:Me(u),u<0&&(u+=g),u=a>u?0:Bl(u);a<u;)r[a++]=n;return r}function Ih(r,n){var a=[];return Pi(r,function(u,g,_){n(u,g,_)&&a.push(u)}),a}function Yt(r,n,a,u,g){var _=-1,x=r.length;for(a||(a=wy),g||(g=[]);++_<x;){var R=r[_];n>0&&a(R)?n>1?Yt(R,n-1,a,u,g):xi(g,R):u||(g[g.length]=R)}return g}var Qa=Jh(),Sh=Jh(!0);function Qr(r,n){return r&&Qa(r,n,Vt)}function ec(r,n){return r&&Sh(r,n,Vt)}function yo(r,n){return Si(n,function(a){return yi(r[a])})}function Yi(r,n){n=Ti(n,r);for(var a=0,u=n.length;r!=null&&a<u;)r=r[ti(n[a++])];return a&&a==u?r:t}function xh(r,n,a){var u=n(r);return Ne(r)?u:xi(u,a(r))}function nr(r){return r==null?r===t?Be:ke:ki&&ki in ut(r)?gy(r):Ay(r)}function tc(r,n){return r>n}function F0(r,n){return r!=null&&it.call(r,n)}function $0(r,n){return r!=null&&n in ut(r)}function U0(r,n,a){return r>=Zt(n,a)&&r<Kt(n,a)}function rc(r,n,a){for(var u=a?Ma:Js,g=r[0].length,_=r.length,x=_,R=q(_),j=1/0,G=[];x--;){var Y=r[x];x&&n&&(Y=mt(Y,Er(n))),j=Zt(Y.length,j),R[x]=!a&&(n||g>=120&&Y.length>=120)?new Wi(x&&Y):t}Y=r[0];var te=-1,ae=R[0];e:for(;++te<g&&G.length<j;){var pe=Y[te],_e=n?n(pe):pe;if(pe=a||pe!==0?pe:0,!(ae?Vn(ae,_e):u(G,_e,a))){for(x=_;--x;){var ze=R[x];if(!(ze?Vn(ze,_e):u(r[x],_e,a)))continue e}ae&&ae.push(_e),G.push(pe)}}return G}function L0(r,n,a,u){return Qr(r,function(g,_,x){n(u,a(g),_,x)}),u}function es(r,n,a){n=Ti(n,r),r=dl(r,n);var u=r==null?r:r[ti(Ur(n))];return u==null?t:kt(u,r,a)}function Oh(r){return Ot(r)&&nr(r)==le}function M0(r){return Ot(r)&&nr(r)==we}function j0(r){return Ot(r)&&nr(r)==$}function ts(r,n,a,u,g){return r===n?!0:r==null||n==null||!Ot(r)&&!Ot(n)?r!==r&&n!==n:B0(r,n,a,u,ts,g)}function B0(r,n,a,u,g,_){var x=Ne(r),R=Ne(n),j=x?Ce:Qt(r),G=R?Ce:Qt(n);j=j==le?Le:j,G=G==le?Le:G;var Y=j==Le,te=G==Le,ae=j==G;if(ae&&Ri(r)){if(!Ri(n))return!1;x=!0,Y=!1}if(ae&&!Y)return _||(_=new kr),x||Pn(r)?ol(r,n,a,u,g,_):dy(r,n,j,a,u,g,_);if(!(a&S)){var pe=Y&&it.call(r,"__wrapped__"),_e=te&&it.call(n,"__wrapped__");if(pe||_e){var ze=pe?r.value():r,be=_e?n.value():n;return _||(_=new kr),g(ze,be,a,u,_)}}return ae?(_||(_=new kr),py(r,n,a,u,g,_)):!1}function z0(r){return Ot(r)&&Qt(r)==Ee}function ic(r,n,a,u){var g=a.length,_=g,x=!u;if(r==null)return!_;for(r=ut(r);g--;){var R=a[g];if(x&&R[2]?R[1]!==r[R[0]]:!(R[0]in r))return!1}for(;++g<_;){R=a[g];var j=R[0],G=r[j],Y=R[1];if(x&&R[2]){if(G===t&&!(j in r))return!1}else{var te=new kr;if(u)var ae=u(G,Y,j,r,n,te);if(!(ae===t?ts(Y,G,S|k,u,te):ae))return!1}}return!0}function Ah(r){if(!bt(r)||Dy(r))return!1;var n=yi(r)?zg:Ea;return n.test(Xi(r))}function q0(r){return Ot(r)&&nr(r)==je}function H0(r){return Ot(r)&&Qt(r)==Se}function K0(r){return Ot(r)&&Ro(r.length)&&!!ot[nr(r)]}function Ph(r){return typeof r=="function"?r:r==null?gr:typeof r=="object"?Ne(r)?Nh(r[0],r[1]):Th(r):Xl(r)}function nc(r){if(!ns(r))return Wg(r);var n=[];for(var a in ut(r))it.call(r,a)&&a!="constructor"&&n.push(a);return n}function k0(r){if(!bt(r))return Oy(r);var n=ns(r),a=[];for(var u in r)u=="constructor"&&(n||!it.call(r,u))||a.push(u);return a}function sc(r,n){return r<n}function Ch(r,n){var a=-1,u=dr(r)?q(r.length):[];return Pi(r,function(g,_,x){u[++a]=n(g,_,x)}),u}function Th(r){var n=bc(r);return n.length==1&&n[0][2]?ll(n[0][0],n[0][1]):function(a){return a===r||ic(a,r,n)}}function Nh(r,n){return Ec(r)&&hl(n)?ll(ti(r),n):function(a){var u=Nc(a,r);return u===t&&u===n?Rc(a,r):ts(n,u,S|k)}}function vo(r,n,a,u,g){r!==n&&Qa(n,function(_,x){if(g||(g=new kr),bt(_))V0(r,n,x,a,vo,u,g);else{var R=u?u(Ic(r,x),_,x+"",r,n,g):t;R===t&&(R=_),Xa(r,x,R)}},pr)}function V0(r,n,a,u,g,_,x){var R=Ic(r,a),j=Ic(n,a),G=x.get(j);if(G){Xa(r,a,G);return}var Y=_?_(R,j,a+"",r,n,x):t,te=Y===t;if(te){var ae=Ne(j),pe=!ae&&Ri(j),_e=!ae&&!pe&&Pn(j);Y=j,ae||pe||_e?Ne(R)?Y=R:Tt(R)?Y=fr(R):pe?(te=!1,Y=Kh(j,!0)):_e?(te=!1,Y=kh(j,!0)):Y=[]:os(j)||Zi(j)?(Y=R,Zi(R)?Y=zl(R):(!bt(R)||yi(R))&&(Y=ul(j))):te=!1}te&&(x.set(j,Y),g(Y,j,u,_,x),x.delete(j)),Xa(r,a,Y)}function Rh(r,n){var a=r.length;if(a)return n+=n<0?a:0,gi(n,a)?r[n]:t}function Fh(r,n,a){n.length?n=mt(n,function(_){return Ne(_)?function(x){return Yi(x,_.length===1?_[0]:_)}:_}):n=[gr];var u=-1;n=mt(n,Er(me()));var g=Ch(r,function(_,x,R){var j=mt(n,function(G){return G(_)});return{criteria:j,index:++u,value:_}});return _g(g,function(_,x){return sy(_,x,a)})}function W0(r,n){return $h(r,n,function(a,u){return Rc(r,u)})}function $h(r,n,a){for(var u=-1,g=n.length,_={};++u<g;){var x=n[u],R=Yi(r,x);a(R,x)&&rs(_,Ti(x,r),R)}return _}function G0(r){return function(n){return Yi(n,r)}}function oc(r,n,a,u){var g=u?mg:mn,_=-1,x=n.length,R=r;for(r===n&&(n=fr(n)),a&&(R=mt(r,Er(a)));++_<x;)for(var j=0,G=n[_],Y=a?a(G):G;(j=g(R,Y,j,u))>-1;)R!==r&&oo.call(R,j,1),oo.call(r,j,1);return r}function Uh(r,n){for(var a=r?n.length:0,u=a-1;a--;){var g=n[a];if(a==u||g!==_){var _=g;gi(g)?oo.call(r,g,1):hc(r,g)}}return r}function ac(r,n){return r+uo(yh()*(n-r+1))}function Y0(r,n,a,u){for(var g=-1,_=Kt(co((n-r)/(a||1)),0),x=q(_);_--;)x[u?_:++g]=r,r+=a;return x}function cc(r,n){var a="";if(!r||n<1||n>K)return a;do n%2&&(a+=r),n=uo(n/2),n&&(r+=r);while(n);return a}function Ke(r,n){return Sc(fl(r,n,gr),r+"")}function J0(r){return _h(Cn(r))}function X0(r,n){var a=Cn(r);return Oo(a,Gi(n,0,a.length))}function rs(r,n,a,u){if(!bt(r))return r;n=Ti(n,r);for(var g=-1,_=n.length,x=_-1,R=r;R!=null&&++g<_;){var j=ti(n[g]),G=a;if(j==="__proto__"||j==="constructor"||j==="prototype")return r;if(g!=x){var Y=R[j];G=u?u(Y,j,R):t,G===t&&(G=bt(Y)?Y:gi(n[g+1])?[]:{})}Zn(R,j,G),R=R[j]}return r}var Lh=ho?function(r,n){return ho.set(r,n),r}:gr,Z0=ao?function(r,n){return ao(r,"toString",{configurable:!0,enumerable:!1,value:$c(n),writable:!0})}:gr;function Q0(r){return Oo(Cn(r))}function $r(r,n,a){var u=-1,g=r.length;n<0&&(n=-n>g?0:g+n),a=a>g?g:a,a<0&&(a+=g),g=n>a?0:a-n>>>0,n>>>=0;for(var _=q(g);++u<g;)_[u]=r[u+n];return _}function ey(r,n){var a;return Pi(r,function(u,g,_){return a=n(u,g,_),!a}),!!a}function mo(r,n,a){var u=0,g=r==null?u:r.length;if(typeof n=="number"&&n===n&&g<=oe){for(;u<g;){var _=u+g>>>1,x=r[_];x!==null&&!Ir(x)&&(a?x<=n:x<n)?u=_+1:g=_}return g}return uc(r,n,gr,a)}function uc(r,n,a,u){var g=0,_=r==null?0:r.length;if(_===0)return 0;n=a(n);for(var x=n!==n,R=n===null,j=Ir(n),G=n===t;g<_;){var Y=uo((g+_)/2),te=a(r[Y]),ae=te!==t,pe=te===null,_e=te===te,ze=Ir(te);if(x)var be=u||_e;else G?be=_e&&(u||ae):R?be=_e&&ae&&(u||!pe):j?be=_e&&ae&&!pe&&(u||!ze):pe||ze?be=!1:be=u?te<=n:te<n;be?g=Y+1:_=Y}return Zt(_,De)}function Mh(r,n){for(var a=-1,u=r.length,g=0,_=[];++a<u;){var x=r[a],R=n?n(x):x;if(!a||!Vr(R,j)){var j=R;_[g++]=x===0?0:x}}return _}function jh(r){return typeof r=="number"?r:Ir(r)?ee:+r}function Dr(r){if(typeof r=="string")return r;if(Ne(r))return mt(r,Dr)+"";if(Ir(r))return vh?vh.call(r):"";var n=r+"";return n=="0"&&1/r==-J?"-0":n}function Ci(r,n,a){var u=-1,g=Js,_=r.length,x=!0,R=[],j=R;if(a)x=!1,g=Ma;else if(_>=o){var G=n?null:ly(r);if(G)return Zs(G);x=!1,g=Vn,j=new Wi}else j=n?[]:R;e:for(;++u<_;){var Y=r[u],te=n?n(Y):Y;if(Y=a||Y!==0?Y:0,x&&te===te){for(var ae=j.length;ae--;)if(j[ae]===te)continue e;n&&j.push(te),R.push(Y)}else g(j,te,a)||(j!==R&&j.push(te),R.push(Y))}return R}function hc(r,n){return n=Ti(n,r),r=dl(r,n),r==null||delete r[ti(Ur(n))]}function Bh(r,n,a,u){return rs(r,n,a(Yi(r,n)),u)}function _o(r,n,a,u){for(var g=r.length,_=u?g:-1;(u?_--:++_<g)&&n(r[_],_,r););return a?$r(r,u?0:_,u?_+1:g):$r(r,u?_+1:0,u?g:_)}function zh(r,n){var a=r;return a instanceof Ye&&(a=a.value()),ja(n,function(u,g){return g.func.apply(g.thisArg,xi([u],g.args))},a)}function lc(r,n,a){var u=r.length;if(u<2)return u?Ci(r[0]):[];for(var g=-1,_=q(u);++g<u;)for(var x=r[g],R=-1;++R<u;)R!=g&&(_[g]=Qn(_[g]||x,r[R],n,a));return Ci(Yt(_,1),n,a)}function qh(r,n,a){for(var u=-1,g=r.length,_=n.length,x={};++u<g;){var R=u<_?n[u]:t;a(x,r[u],R)}return x}function fc(r){return Tt(r)?r:[]}function dc(r){return typeof r=="function"?r:gr}function Ti(r,n){return Ne(r)?r:Ec(r,n)?[r]:vl(rt(r))}var ty=Ke;function Ni(r,n,a){var u=r.length;return a=a===t?u:a,!n&&a>=u?r:$r(r,n,a)}var Hh=qg||function(r){return Xe.clearTimeout(r)};function Kh(r,n){if(n)return r.slice();var a=r.length,u=lh?lh(a):new r.constructor(a);return r.copy(u),u}function pc(r){var n=new r.constructor(r.byteLength);return new no(n).set(new no(r)),n}function ry(r,n){var a=n?pc(r.buffer):r.buffer;return new r.constructor(a,r.byteOffset,r.byteLength)}function iy(r){var n=new r.constructor(r.source,Pr.exec(r));return n.lastIndex=r.lastIndex,n}function ny(r){return Xn?ut(Xn.call(r)):{}}function kh(r,n){var a=n?pc(r.buffer):r.buffer;return new r.constructor(a,r.byteOffset,r.length)}function Vh(r,n){if(r!==n){var a=r!==t,u=r===null,g=r===r,_=Ir(r),x=n!==t,R=n===null,j=n===n,G=Ir(n);if(!R&&!G&&!_&&r>n||_&&x&&j&&!R&&!G||u&&x&&j||!a&&j||!g)return 1;if(!u&&!_&&!G&&r<n||G&&a&&g&&!u&&!_||R&&a&&g||!x&&g||!j)return-1}return 0}function sy(r,n,a){for(var u=-1,g=r.criteria,_=n.criteria,x=g.length,R=a.length;++u<x;){var j=Vh(g[u],_[u]);if(j){if(u>=R)return j;var G=a[u];return j*(G=="desc"?-1:1)}}return r.index-n.index}function Wh(r,n,a,u){for(var g=-1,_=r.length,x=a.length,R=-1,j=n.length,G=Kt(_-x,0),Y=q(j+G),te=!u;++R<j;)Y[R]=n[R];for(;++g<x;)(te||g<_)&&(Y[a[g]]=r[g]);for(;G--;)Y[R++]=r[g++];return Y}function Gh(r,n,a,u){for(var g=-1,_=r.length,x=-1,R=a.length,j=-1,G=n.length,Y=Kt(_-R,0),te=q(Y+G),ae=!u;++g<Y;)te[g]=r[g];for(var pe=g;++j<G;)te[pe+j]=n[j];for(;++x<R;)(ae||g<_)&&(te[pe+a[x]]=r[g++]);return te}function fr(r,n){var a=-1,u=r.length;for(n||(n=q(u));++a<u;)n[a]=r[a];return n}function ei(r,n,a,u){var g=!a;a||(a={});for(var _=-1,x=n.length;++_<x;){var R=n[_],j=u?u(a[R],r[R],R,a,r):t;j===t&&(j=r[R]),g?fi(a,R,j):Zn(a,R,j)}return a}function oy(r,n){return ei(r,wc(r),n)}function ay(r,n){return ei(r,al(r),n)}function bo(r,n){return function(a,u){var g=Ne(a)?fg:P0,_=n?n():{};return g(a,r,me(u,2),_)}}function xn(r){return Ke(function(n,a){var u=-1,g=a.length,_=g>1?a[g-1]:t,x=g>2?a[2]:t;for(_=r.length>3&&typeof _=="function"?(g--,_):t,x&&sr(a[0],a[1],x)&&(_=g<3?t:_,g=1),n=ut(n);++u<g;){var R=a[u];R&&r(n,R,u,_)}return n})}function Yh(r,n){return function(a,u){if(a==null)return a;if(!dr(a))return r(a,u);for(var g=a.length,_=n?g:-1,x=ut(a);(n?_--:++_<g)&&u(x[_],_,x)!==!1;);return a}}function Jh(r){return function(n,a,u){for(var g=-1,_=ut(n),x=u(n),R=x.length;R--;){var j=x[r?R:++g];if(a(_[j],j,_)===!1)break}return n}}function cy(r,n,a){var u=n&H,g=is(r);function _(){var x=this&&this!==Xe&&this instanceof _?g:r;return x.apply(u?a:this,arguments)}return _}function Xh(r){return function(n){n=rt(n);var a=_n(n)?Kr(n):t,u=a?a[0]:n.charAt(0),g=a?Ni(a,1).join(""):n.slice(1);return u[r]()+g}}function On(r){return function(n){return ja(Yl(Gl(n).replace(Kn,"")),r,"")}}function is(r){return function(){var n=arguments;switch(n.length){case 0:return new r;case 1:return new r(n[0]);case 2:return new r(n[0],n[1]);case 3:return new r(n[0],n[1],n[2]);case 4:return new r(n[0],n[1],n[2],n[3]);case 5:return new r(n[0],n[1],n[2],n[3],n[4]);case 6:return new r(n[0],n[1],n[2],n[3],n[4],n[5]);case 7:return new r(n[0],n[1],n[2],n[3],n[4],n[5],n[6])}var a=Sn(r.prototype),u=r.apply(a,n);return bt(u)?u:a}}function uy(r,n,a){var u=is(r);function g(){for(var _=arguments.length,x=q(_),R=_,j=An(g);R--;)x[R]=arguments[R];var G=_<3&&x[0]!==j&&x[_-1]!==j?[]:Oi(x,j);if(_-=G.length,_<a)return rl(r,n,wo,g.placeholder,t,x,G,t,t,a-_);var Y=this&&this!==Xe&&this instanceof g?u:r;return kt(Y,this,x)}return g}function Zh(r){return function(n,a,u){var g=ut(n);if(!dr(n)){var _=me(a,3);n=Vt(n),a=function(R){return _(g[R],R,g)}}var x=r(n,a,u);return x>-1?g[_?n[x]:x]:t}}function Qh(r){return pi(function(n){var a=n.length,u=a,g=Rr.prototype.thru;for(r&&n.reverse();u--;){var _=n[u];if(typeof _!="function")throw new Nr(f);if(g&&!x&&So(_)=="wrapper")var x=new Rr([],!0)}for(u=x?u:a;++u<a;){_=n[u];var R=So(_),j=R=="wrapper"?_c(_):t;j&&Dc(j[0])&&j[1]==(h|U|C|b)&&!j[4].length&&j[9]==1?x=x[So(j[0])].apply(x,j[3]):x=_.length==1&&Dc(_)?x[R]():x.thru(_)}return function(){var G=arguments,Y=G[0];if(x&&G.length==1&&Ne(Y))return x.plant(Y).value();for(var te=0,ae=a?n[te].apply(this,G):Y;++te<a;)ae=n[te].call(this,ae);return ae}})}function wo(r,n,a,u,g,_,x,R,j,G){var Y=n&h,te=n&H,ae=n&re,pe=n&(U|I),_e=n&Q,ze=ae?t:is(r);function be(){for(var We=arguments.length,Ze=q(We),Sr=We;Sr--;)Ze[Sr]=arguments[Sr];if(pe)var or=An(be),xr=wg(Ze,or);if(u&&(Ze=Wh(Ze,u,g,pe)),_&&(Ze=Gh(Ze,_,x,pe)),We-=xr,pe&&We<G){var Nt=Oi(Ze,or);return rl(r,n,wo,be.placeholder,a,Ze,Nt,R,j,G-We)}var Wr=te?a:this,mi=ae?Wr[r]:r;return We=Ze.length,R?Ze=Py(Ze,R):_e&&We>1&&Ze.reverse(),Y&&j<We&&(Ze.length=j),this&&this!==Xe&&this instanceof be&&(mi=ze||is(mi)),mi.apply(Wr,Ze)}return be}function el(r,n){return function(a,u){return L0(a,r,n(u),{})}}function Eo(r,n){return function(a,u){var g;if(a===t&&u===t)return n;if(a!==t&&(g=a),u!==t){if(g===t)return u;typeof a=="string"||typeof u=="string"?(a=Dr(a),u=Dr(u)):(a=jh(a),u=jh(u)),g=r(a,u)}return g}}function gc(r){return pi(function(n){return n=mt(n,Er(me())),Ke(function(a){var u=this;return r(n,function(g){return kt(g,u,a)})})})}function Do(r,n){n=n===t?" ":Dr(n);var a=n.length;if(a<2)return a?cc(n,r):n;var u=cc(n,co(r/bn(n)));return _n(n)?Ni(Kr(u),0,r).join(""):u.slice(0,r)}function hy(r,n,a,u){var g=n&H,_=is(r);function x(){for(var R=-1,j=arguments.length,G=-1,Y=u.length,te=q(Y+j),ae=this&&this!==Xe&&this instanceof x?_:r;++G<Y;)te[G]=u[G];for(;j--;)te[G++]=arguments[++R];return kt(ae,g?a:this,te)}return x}function tl(r){return function(n,a,u){return u&&typeof u!="number"&&sr(n,a,u)&&(a=u=t),n=vi(n),a===t?(a=n,n=0):a=vi(a),u=u===t?n<a?1:-1:vi(u),Y0(n,a,u,r)}}function Io(r){return function(n,a){return typeof n=="string"&&typeof a=="string"||(n=Lr(n),a=Lr(a)),r(n,a)}}function rl(r,n,a,u,g,_,x,R,j,G){var Y=n&U,te=Y?x:t,ae=Y?t:x,pe=Y?_:t,_e=Y?t:_;n|=Y?C:T,n&=~(Y?T:C),n&F||(n&=~(H|re));var ze=[r,n,g,pe,te,_e,ae,R,j,G],be=a.apply(t,ze);return Dc(r)&&pl(be,ze),be.placeholder=u,gl(be,r,n)}function yc(r){var n=Ht[r];return function(a,u){if(a=Lr(a),u=u==null?0:Zt(Me(u),292),u&&gh(a)){var g=(rt(a)+"e").split("e"),_=n(g[0]+"e"+(+g[1]+u));return g=(rt(_)+"e").split("e"),+(g[0]+"e"+(+g[1]-u))}return n(a)}}var ly=Dn&&1/Zs(new Dn([,-0]))[1]==J?function(r){return new Dn(r)}:Mc;function il(r){return function(n){var a=Qt(n);return a==Ee?Va(n):a==Se?Ag(n):bg(n,r(n))}}function di(r,n,a,u,g,_,x,R){var j=n&re;if(!j&&typeof r!="function")throw new Nr(f);var G=u?u.length:0;if(G||(n&=~(C|T),u=g=t),x=x===t?x:Kt(Me(x),0),R=R===t?R:Me(R),G-=g?g.length:0,n&T){var Y=u,te=g;u=g=t}var ae=j?t:_c(r),pe=[r,n,a,u,g,Y,te,_,x,R];if(ae&&xy(pe,ae),r=pe[0],n=pe[1],a=pe[2],u=pe[3],g=pe[4],R=pe[9]=pe[9]===t?j?0:r.length:Kt(pe[9]-G,0),!R&&n&(U|I)&&(n&=~(U|I)),!n||n==H)var _e=cy(r,n,a);else n==U||n==I?_e=uy(r,n,R):(n==C||n==(H|C))&&!g.length?_e=hy(r,n,a,u):_e=wo.apply(t,pe);var ze=ae?Lh:pl;return gl(ze(_e,pe),r,n)}function nl(r,n,a,u){return r===t||Vr(r,En[a])&&!it.call(u,a)?n:r}function sl(r,n,a,u,g,_){return bt(r)&&bt(n)&&(_.set(n,r),vo(r,n,t,sl,_),_.delete(n)),r}function fy(r){return os(r)?t:r}function ol(r,n,a,u,g,_){var x=a&S,R=r.length,j=n.length;if(R!=j&&!(x&&j>R))return!1;var G=_.get(r),Y=_.get(n);if(G&&Y)return G==n&&Y==r;var te=-1,ae=!0,pe=a&k?new Wi:t;for(_.set(r,n),_.set(n,r);++te<R;){var _e=r[te],ze=n[te];if(u)var be=x?u(ze,_e,te,n,r,_):u(_e,ze,te,r,n,_);if(be!==t){if(be)continue;ae=!1;break}if(pe){if(!Ba(n,function(We,Ze){if(!Vn(pe,Ze)&&(_e===We||g(_e,We,a,u,_)))return pe.push(Ze)})){ae=!1;break}}else if(!(_e===ze||g(_e,ze,a,u,_))){ae=!1;break}}return _.delete(r),_.delete(n),ae}function dy(r,n,a,u,g,_,x){switch(a){case Ae:if(r.byteLength!=n.byteLength||r.byteOffset!=n.byteOffset)return!1;r=r.buffer,n=n.buffer;case we:return!(r.byteLength!=n.byteLength||!_(new no(r),new no(n)));case B:case $:case qe:return Vr(+r,+n);case P:return r.name==n.name&&r.message==n.message;case je:case Re:return r==n+"";case Ee:var R=Va;case Se:var j=u&S;if(R||(R=Zs),r.size!=n.size&&!j)return!1;var G=x.get(r);if(G)return G==n;u|=k,x.set(r,n);var Y=ol(R(r),R(n),u,g,_,x);return x.delete(r),Y;case Fe:if(Xn)return Xn.call(r)==Xn.call(n)}return!1}function py(r,n,a,u,g,_){var x=a&S,R=vc(r),j=R.length,G=vc(n),Y=G.length;if(j!=Y&&!x)return!1;for(var te=j;te--;){var ae=R[te];if(!(x?ae in n:it.call(n,ae)))return!1}var pe=_.get(r),_e=_.get(n);if(pe&&_e)return pe==n&&_e==r;var ze=!0;_.set(r,n),_.set(n,r);for(var be=x;++te<j;){ae=R[te];var We=r[ae],Ze=n[ae];if(u)var Sr=x?u(Ze,We,ae,n,r,_):u(We,Ze,ae,r,n,_);if(!(Sr===t?We===Ze||g(We,Ze,a,u,_):Sr)){ze=!1;break}be||(be=ae=="constructor")}if(ze&&!be){var or=r.constructor,xr=n.constructor;or!=xr&&"constructor"in r&&"constructor"in n&&!(typeof or=="function"&&or instanceof or&&typeof xr=="function"&&xr instanceof xr)&&(ze=!1)}return _.delete(r),_.delete(n),ze}function pi(r){return Sc(fl(r,t,wl),r+"")}function vc(r){return xh(r,Vt,wc)}function mc(r){return xh(r,pr,al)}var _c=ho?function(r){return ho.get(r)}:Mc;function So(r){for(var n=r.name+"",a=In[n],u=it.call(In,n)?a.length:0;u--;){var g=a[u],_=g.func;if(_==null||_==r)return g.name}return n}function An(r){var n=it.call(v,"placeholder")?v:r;return n.placeholder}function me(){var r=v.iteratee||Uc;return r=r===Uc?Ph:r,arguments.length?r(arguments[0],arguments[1]):r}function xo(r,n){var a=r.__data__;return Ey(n)?a[typeof n=="string"?"string":"hash"]:a.map}function bc(r){for(var n=Vt(r),a=n.length;a--;){var u=n[a],g=r[u];n[a]=[u,g,hl(g)]}return n}function Ji(r,n){var a=Sg(r,n);return Ah(a)?a:t}function gy(r){var n=it.call(r,ki),a=r[ki];try{r[ki]=t;var u=!0}catch{}var g=ro.call(r);return u&&(n?r[ki]=a:delete r[ki]),g}var wc=Ga?function(r){return r==null?[]:(r=ut(r),Si(Ga(r),function(n){return dh.call(r,n)}))}:jc,al=Ga?function(r){for(var n=[];r;)xi(n,wc(r)),r=so(r);return n}:jc,Qt=nr;(Ya&&Qt(new Ya(new ArrayBuffer(1)))!=Ae||Gn&&Qt(new Gn)!=Ee||Ja&&Qt(Ja.resolve())!=pt||Dn&&Qt(new Dn)!=Se||Yn&&Qt(new Yn)!=Oe)&&(Qt=function(r){var n=nr(r),a=n==Le?r.constructor:t,u=a?Xi(a):"";if(u)switch(u){case Xg:return Ae;case Zg:return Ee;case Qg:return pt;case e0:return Se;case t0:return Oe}return n});function yy(r,n,a){for(var u=-1,g=a.length;++u<g;){var _=a[u],x=_.size;switch(_.type){case"drop":r+=x;break;case"dropRight":n-=x;break;case"take":n=Zt(n,r+x);break;case"takeRight":r=Kt(r,n-x);break}}return{start:r,end:n}}function vy(r){var n=r.match(ht);return n?n[1].split(Mt):[]}function cl(r,n,a){n=Ti(n,r);for(var u=-1,g=n.length,_=!1;++u<g;){var x=ti(n[u]);if(!(_=r!=null&&a(r,x)))break;r=r[x]}return _||++u!=g?_:(g=r==null?0:r.length,!!g&&Ro(g)&&gi(x,g)&&(Ne(r)||Zi(r)))}function my(r){var n=r.length,a=new r.constructor(n);return n&&typeof r[0]=="string"&&it.call(r,"index")&&(a.index=r.index,a.input=r.input),a}function ul(r){return typeof r.constructor=="function"&&!ns(r)?Sn(so(r)):{}}function _y(r,n,a){var u=r.constructor;switch(n){case we:return pc(r);case B:case $:return new u(+r);case Ae:return ry(r,a);case He:case xe:case Ve:case Ge:case Qe:case et:case Je:case tr:case hr:return kh(r,a);case Ee:return new u;case qe:case Re:return new u(r);case je:return iy(r);case Se:return new u;case Fe:return ny(r)}}function by(r,n){var a=n.length;if(!a)return r;var u=a-1;return n[u]=(a>1?"& ":"")+n[u],n=n.join(a>2?", ":" "),r.replace(xt,`{
/* [wrapped with `+n+`] */
`)}function wy(r){return Ne(r)||Zi(r)||!!(ph&&r&&r[ph])}function gi(r,n){var a=typeof r;return n=n??K,!!n&&(a=="number"||a!="symbol"&&Ia.test(r))&&r>-1&&r%1==0&&r<n}function sr(r,n,a){if(!bt(a))return!1;var u=typeof n;return(u=="number"?dr(a)&&gi(n,a.length):u=="string"&&n in a)?Vr(a[n],r):!1}function Ec(r,n){if(Ne(r))return!1;var a=typeof r;return a=="number"||a=="symbol"||a=="boolean"||r==null||Ir(r)?!0:$t.test(r)||!vt.test(r)||n!=null&&r in ut(n)}function Ey(r){var n=typeof r;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?r!=="__proto__":r===null}function Dc(r){var n=So(r),a=v[n];if(typeof a!="function"||!(n in Ye.prototype))return!1;if(r===a)return!0;var u=_c(a);return!!u&&r===u[0]}function Dy(r){return!!hh&&hh in r}var Iy=eo?yi:Bc;function ns(r){var n=r&&r.constructor,a=typeof n=="function"&&n.prototype||En;return r===a}function hl(r){return r===r&&!bt(r)}function ll(r,n){return function(a){return a==null?!1:a[r]===n&&(n!==t||r in ut(a))}}function Sy(r){var n=To(r,function(u){return a.size===p&&a.clear(),u}),a=n.cache;return n}function xy(r,n){var a=r[1],u=n[1],g=a|u,_=g<(H|re|h),x=u==h&&a==U||u==h&&a==b&&r[7].length<=n[8]||u==(h|b)&&n[7].length<=n[8]&&a==U;if(!(_||x))return r;u&H&&(r[2]=n[2],g|=a&H?0:F);var R=n[3];if(R){var j=r[3];r[3]=j?Wh(j,R,n[4]):R,r[4]=j?Oi(r[3],m):n[4]}return R=n[5],R&&(j=r[5],r[5]=j?Gh(j,R,n[6]):R,r[6]=j?Oi(r[5],m):n[6]),R=n[7],R&&(r[7]=R),u&h&&(r[8]=r[8]==null?n[8]:Zt(r[8],n[8])),r[9]==null&&(r[9]=n[9]),r[0]=n[0],r[1]=g,r}function Oy(r){var n=[];if(r!=null)for(var a in ut(r))n.push(a);return n}function Ay(r){return ro.call(r)}function fl(r,n,a){return n=Kt(n===t?r.length-1:n,0),function(){for(var u=arguments,g=-1,_=Kt(u.length-n,0),x=q(_);++g<_;)x[g]=u[n+g];g=-1;for(var R=q(n+1);++g<n;)R[g]=u[g];return R[n]=a(x),kt(r,this,R)}}function dl(r,n){return n.length<2?r:Yi(r,$r(n,0,-1))}function Py(r,n){for(var a=r.length,u=Zt(n.length,a),g=fr(r);u--;){var _=n[u];r[u]=gi(_,a)?g[_]:t}return r}function Ic(r,n){if(!(n==="constructor"&&typeof r[n]=="function")&&n!="__proto__")return r[n]}var pl=yl(Lh),ss=Kg||function(r,n){return Xe.setTimeout(r,n)},Sc=yl(Z0);function gl(r,n,a){var u=n+"";return Sc(r,by(u,Cy(vy(u),a)))}function yl(r){var n=0,a=0;return function(){var u=Gg(),g=ye-(u-a);if(a=u,g>0){if(++n>=ge)return arguments[0]}else n=0;return r.apply(t,arguments)}}function Oo(r,n){var a=-1,u=r.length,g=u-1;for(n=n===t?u:n;++a<n;){var _=ac(a,g),x=r[_];r[_]=r[a],r[a]=x}return r.length=n,r}var vl=Sy(function(r){var n=[];return r.charCodeAt(0)===46&&n.push(""),r.replace(Ut,function(a,u,g,_){n.push(g?_.replace(ma,"$1"):u||a)}),n});function ti(r){if(typeof r=="string"||Ir(r))return r;var n=r+"";return n=="0"&&1/r==-J?"-0":n}function Xi(r){if(r!=null){try{return to.call(r)}catch{}try{return r+""}catch{}}return""}function Cy(r,n){return Tr(Ie,function(a){var u="_."+a[0];n&a[1]&&!Js(r,u)&&r.push(u)}),r.sort()}function ml(r){if(r instanceof Ye)return r.clone();var n=new Rr(r.__wrapped__,r.__chain__);return n.__actions__=fr(r.__actions__),n.__index__=r.__index__,n.__values__=r.__values__,n}function Ty(r,n,a){(a?sr(r,n,a):n===t)?n=1:n=Kt(Me(n),0);var u=r==null?0:r.length;if(!u||n<1)return[];for(var g=0,_=0,x=q(co(u/n));g<u;)x[_++]=$r(r,g,g+=n);return x}function Ny(r){for(var n=-1,a=r==null?0:r.length,u=0,g=[];++n<a;){var _=r[n];_&&(g[u++]=_)}return g}function Ry(){var r=arguments.length;if(!r)return[];for(var n=q(r-1),a=arguments[0],u=r;u--;)n[u-1]=arguments[u];return xi(Ne(a)?fr(a):[a],Yt(n,1))}var Fy=Ke(function(r,n){return Tt(r)?Qn(r,Yt(n,1,Tt,!0)):[]}),$y=Ke(function(r,n){var a=Ur(n);return Tt(a)&&(a=t),Tt(r)?Qn(r,Yt(n,1,Tt,!0),me(a,2)):[]}),Uy=Ke(function(r,n){var a=Ur(n);return Tt(a)&&(a=t),Tt(r)?Qn(r,Yt(n,1,Tt,!0),t,a):[]});function Ly(r,n,a){var u=r==null?0:r.length;return u?(n=a||n===t?1:Me(n),$r(r,n<0?0:n,u)):[]}function My(r,n,a){var u=r==null?0:r.length;return u?(n=a||n===t?1:Me(n),n=u-n,$r(r,0,n<0?0:n)):[]}function jy(r,n){return r&&r.length?_o(r,me(n,3),!0,!0):[]}function By(r,n){return r&&r.length?_o(r,me(n,3),!0):[]}function zy(r,n,a,u){var g=r==null?0:r.length;return g?(a&&typeof a!="number"&&sr(r,n,a)&&(a=0,u=g),R0(r,n,a,u)):[]}function _l(r,n,a){var u=r==null?0:r.length;if(!u)return-1;var g=a==null?0:Me(a);return g<0&&(g=Kt(u+g,0)),Xs(r,me(n,3),g)}function bl(r,n,a){var u=r==null?0:r.length;if(!u)return-1;var g=u-1;return a!==t&&(g=Me(a),g=a<0?Kt(u+g,0):Zt(g,u-1)),Xs(r,me(n,3),g,!0)}function wl(r){var n=r==null?0:r.length;return n?Yt(r,1):[]}function qy(r){var n=r==null?0:r.length;return n?Yt(r,J):[]}function Hy(r,n){var a=r==null?0:r.length;return a?(n=n===t?1:Me(n),Yt(r,n)):[]}function Ky(r){for(var n=-1,a=r==null?0:r.length,u={};++n<a;){var g=r[n];u[g[0]]=g[1]}return u}function El(r){return r&&r.length?r[0]:t}function ky(r,n,a){var u=r==null?0:r.length;if(!u)return-1;var g=a==null?0:Me(a);return g<0&&(g=Kt(u+g,0)),mn(r,n,g)}function Vy(r){var n=r==null?0:r.length;return n?$r(r,0,-1):[]}var Wy=Ke(function(r){var n=mt(r,fc);return n.length&&n[0]===r[0]?rc(n):[]}),Gy=Ke(function(r){var n=Ur(r),a=mt(r,fc);return n===Ur(a)?n=t:a.pop(),a.length&&a[0]===r[0]?rc(a,me(n,2)):[]}),Yy=Ke(function(r){var n=Ur(r),a=mt(r,fc);return n=typeof n=="function"?n:t,n&&a.pop(),a.length&&a[0]===r[0]?rc(a,t,n):[]});function Jy(r,n){return r==null?"":Vg.call(r,n)}function Ur(r){var n=r==null?0:r.length;return n?r[n-1]:t}function Xy(r,n,a){var u=r==null?0:r.length;if(!u)return-1;var g=u;return a!==t&&(g=Me(a),g=g<0?Kt(u+g,0):Zt(g,u-1)),n===n?Cg(r,n,g):Xs(r,rh,g,!0)}function Zy(r,n){return r&&r.length?Rh(r,Me(n)):t}var Qy=Ke(Dl);function Dl(r,n){return r&&r.length&&n&&n.length?oc(r,n):r}function ev(r,n,a){return r&&r.length&&n&&n.length?oc(r,n,me(a,2)):r}function tv(r,n,a){return r&&r.length&&n&&n.length?oc(r,n,t,a):r}var rv=pi(function(r,n){var a=r==null?0:r.length,u=Za(r,n);return Uh(r,mt(n,function(g){return gi(g,a)?+g:g}).sort(Vh)),u});function iv(r,n){var a=[];if(!(r&&r.length))return a;var u=-1,g=[],_=r.length;for(n=me(n,3);++u<_;){var x=r[u];n(x,u,r)&&(a.push(x),g.push(u))}return Uh(r,g),a}function xc(r){return r==null?r:Jg.call(r)}function nv(r,n,a){var u=r==null?0:r.length;return u?(a&&typeof a!="number"&&sr(r,n,a)?(n=0,a=u):(n=n==null?0:Me(n),a=a===t?u:Me(a)),$r(r,n,a)):[]}function sv(r,n){return mo(r,n)}function ov(r,n,a){return uc(r,n,me(a,2))}function av(r,n){var a=r==null?0:r.length;if(a){var u=mo(r,n);if(u<a&&Vr(r[u],n))return u}return-1}function cv(r,n){return mo(r,n,!0)}function uv(r,n,a){return uc(r,n,me(a,2),!0)}function hv(r,n){var a=r==null?0:r.length;if(a){var u=mo(r,n,!0)-1;if(Vr(r[u],n))return u}return-1}function lv(r){return r&&r.length?Mh(r):[]}function fv(r,n){return r&&r.length?Mh(r,me(n,2)):[]}function dv(r){var n=r==null?0:r.length;return n?$r(r,1,n):[]}function pv(r,n,a){return r&&r.length?(n=a||n===t?1:Me(n),$r(r,0,n<0?0:n)):[]}function gv(r,n,a){var u=r==null?0:r.length;return u?(n=a||n===t?1:Me(n),n=u-n,$r(r,n<0?0:n,u)):[]}function yv(r,n){return r&&r.length?_o(r,me(n,3),!1,!0):[]}function vv(r,n){return r&&r.length?_o(r,me(n,3)):[]}var mv=Ke(function(r){return Ci(Yt(r,1,Tt,!0))}),_v=Ke(function(r){var n=Ur(r);return Tt(n)&&(n=t),Ci(Yt(r,1,Tt,!0),me(n,2))}),bv=Ke(function(r){var n=Ur(r);return n=typeof n=="function"?n:t,Ci(Yt(r,1,Tt,!0),t,n)});function wv(r){return r&&r.length?Ci(r):[]}function Ev(r,n){return r&&r.length?Ci(r,me(n,2)):[]}function Dv(r,n){return n=typeof n=="function"?n:t,r&&r.length?Ci(r,t,n):[]}function Oc(r){if(!(r&&r.length))return[];var n=0;return r=Si(r,function(a){if(Tt(a))return n=Kt(a.length,n),!0}),Ka(n,function(a){return mt(r,za(a))})}function Il(r,n){if(!(r&&r.length))return[];var a=Oc(r);return n==null?a:mt(a,function(u){return kt(n,t,u)})}var Iv=Ke(function(r,n){return Tt(r)?Qn(r,n):[]}),Sv=Ke(function(r){return lc(Si(r,Tt))}),xv=Ke(function(r){var n=Ur(r);return Tt(n)&&(n=t),lc(Si(r,Tt),me(n,2))}),Ov=Ke(function(r){var n=Ur(r);return n=typeof n=="function"?n:t,lc(Si(r,Tt),t,n)}),Av=Ke(Oc);function Pv(r,n){return qh(r||[],n||[],Zn)}function Cv(r,n){return qh(r||[],n||[],rs)}var Tv=Ke(function(r){var n=r.length,a=n>1?r[n-1]:t;return a=typeof a=="function"?(r.pop(),a):t,Il(r,a)});function Sl(r){var n=v(r);return n.__chain__=!0,n}function Nv(r,n){return n(r),r}function Ao(r,n){return n(r)}var Rv=pi(function(r){var n=r.length,a=n?r[0]:0,u=this.__wrapped__,g=function(_){return Za(_,r)};return n>1||this.__actions__.length||!(u instanceof Ye)||!gi(a)?this.thru(g):(u=u.slice(a,+a+(n?1:0)),u.__actions__.push({func:Ao,args:[g],thisArg:t}),new Rr(u,this.__chain__).thru(function(_){return n&&!_.length&&_.push(t),_}))});function Fv(){return Sl(this)}function $v(){return new Rr(this.value(),this.__chain__)}function Uv(){this.__values__===t&&(this.__values__=jl(this.value()));var r=this.__index__>=this.__values__.length,n=r?t:this.__values__[this.__index__++];return{done:r,value:n}}function Lv(){return this}function Mv(r){for(var n,a=this;a instanceof fo;){var u=ml(a);u.__index__=0,u.__values__=t,n?g.__wrapped__=u:n=u;var g=u;a=a.__wrapped__}return g.__wrapped__=r,n}function jv(){var r=this.__wrapped__;if(r instanceof Ye){var n=r;return this.__actions__.length&&(n=new Ye(this)),n=n.reverse(),n.__actions__.push({func:Ao,args:[xc],thisArg:t}),new Rr(n,this.__chain__)}return this.thru(xc)}function Bv(){return zh(this.__wrapped__,this.__actions__)}var zv=bo(function(r,n,a){it.call(r,a)?++r[a]:fi(r,a,1)});function qv(r,n,a){var u=Ne(r)?eh:N0;return a&&sr(r,n,a)&&(n=t),u(r,me(n,3))}function Hv(r,n){var a=Ne(r)?Si:Ih;return a(r,me(n,3))}var Kv=Zh(_l),kv=Zh(bl);function Vv(r,n){return Yt(Po(r,n),1)}function Wv(r,n){return Yt(Po(r,n),J)}function Gv(r,n,a){return a=a===t?1:Me(a),Yt(Po(r,n),a)}function xl(r,n){var a=Ne(r)?Tr:Pi;return a(r,me(n,3))}function Ol(r,n){var a=Ne(r)?dg:Dh;return a(r,me(n,3))}var Yv=bo(function(r,n,a){it.call(r,a)?r[a].push(n):fi(r,a,[n])});function Jv(r,n,a,u){r=dr(r)?r:Cn(r),a=a&&!u?Me(a):0;var g=r.length;return a<0&&(a=Kt(g+a,0)),Fo(r)?a<=g&&r.indexOf(n,a)>-1:!!g&&mn(r,n,a)>-1}var Xv=Ke(function(r,n,a){var u=-1,g=typeof n=="function",_=dr(r)?q(r.length):[];return Pi(r,function(x){_[++u]=g?kt(n,x,a):es(x,n,a)}),_}),Zv=bo(function(r,n,a){fi(r,a,n)});function Po(r,n){var a=Ne(r)?mt:Ch;return a(r,me(n,3))}function Qv(r,n,a,u){return r==null?[]:(Ne(n)||(n=n==null?[]:[n]),a=u?t:a,Ne(a)||(a=a==null?[]:[a]),Fh(r,n,a))}var e1=bo(function(r,n,a){r[a?0:1].push(n)},function(){return[[],[]]});function t1(r,n,a){var u=Ne(r)?ja:nh,g=arguments.length<3;return u(r,me(n,4),a,g,Pi)}function r1(r,n,a){var u=Ne(r)?pg:nh,g=arguments.length<3;return u(r,me(n,4),a,g,Dh)}function i1(r,n){var a=Ne(r)?Si:Ih;return a(r,No(me(n,3)))}function n1(r){var n=Ne(r)?_h:J0;return n(r)}function s1(r,n,a){(a?sr(r,n,a):n===t)?n=1:n=Me(n);var u=Ne(r)?O0:X0;return u(r,n)}function o1(r){var n=Ne(r)?A0:Q0;return n(r)}function a1(r){if(r==null)return 0;if(dr(r))return Fo(r)?bn(r):r.length;var n=Qt(r);return n==Ee||n==Se?r.size:nc(r).length}function c1(r,n,a){var u=Ne(r)?Ba:ey;return a&&sr(r,n,a)&&(n=t),u(r,me(n,3))}var u1=Ke(function(r,n){if(r==null)return[];var a=n.length;return a>1&&sr(r,n[0],n[1])?n=[]:a>2&&sr(n[0],n[1],n[2])&&(n=[n[0]]),Fh(r,Yt(n,1),[])}),Co=Hg||function(){return Xe.Date.now()};function h1(r,n){if(typeof n!="function")throw new Nr(f);return r=Me(r),function(){if(--r<1)return n.apply(this,arguments)}}function Al(r,n,a){return n=a?t:n,n=r&&n==null?r.length:n,di(r,h,t,t,t,t,n)}function Pl(r,n){var a;if(typeof n!="function")throw new Nr(f);return r=Me(r),function(){return--r>0&&(a=n.apply(this,arguments)),r<=1&&(n=t),a}}var Ac=Ke(function(r,n,a){var u=H;if(a.length){var g=Oi(a,An(Ac));u|=C}return di(r,u,n,a,g)}),Cl=Ke(function(r,n,a){var u=H|re;if(a.length){var g=Oi(a,An(Cl));u|=C}return di(n,u,r,a,g)});function Tl(r,n,a){n=a?t:n;var u=di(r,U,t,t,t,t,t,n);return u.placeholder=Tl.placeholder,u}function Nl(r,n,a){n=a?t:n;var u=di(r,I,t,t,t,t,t,n);return u.placeholder=Nl.placeholder,u}function Rl(r,n,a){var u,g,_,x,R,j,G=0,Y=!1,te=!1,ae=!0;if(typeof r!="function")throw new Nr(f);n=Lr(n)||0,bt(a)&&(Y=!!a.leading,te="maxWait"in a,_=te?Kt(Lr(a.maxWait)||0,n):_,ae="trailing"in a?!!a.trailing:ae);function pe(Nt){var Wr=u,mi=g;return u=g=t,G=Nt,x=r.apply(mi,Wr),x}function _e(Nt){return G=Nt,R=ss(We,n),Y?pe(Nt):x}function ze(Nt){var Wr=Nt-j,mi=Nt-G,Zl=n-Wr;return te?Zt(Zl,_-mi):Zl}function be(Nt){var Wr=Nt-j,mi=Nt-G;return j===t||Wr>=n||Wr<0||te&&mi>=_}function We(){var Nt=Co();if(be(Nt))return Ze(Nt);R=ss(We,ze(Nt))}function Ze(Nt){return R=t,ae&&u?pe(Nt):(u=g=t,x)}function Sr(){R!==t&&Hh(R),G=0,u=j=g=R=t}function or(){return R===t?x:Ze(Co())}function xr(){var Nt=Co(),Wr=be(Nt);if(u=arguments,g=this,j=Nt,Wr){if(R===t)return _e(j);if(te)return Hh(R),R=ss(We,n),pe(j)}return R===t&&(R=ss(We,n)),x}return xr.cancel=Sr,xr.flush=or,xr}var l1=Ke(function(r,n){return Eh(r,1,n)}),f1=Ke(function(r,n,a){return Eh(r,Lr(n)||0,a)});function d1(r){return di(r,Q)}function To(r,n){if(typeof r!="function"||n!=null&&typeof n!="function")throw new Nr(f);var a=function(){var u=arguments,g=n?n.apply(this,u):u[0],_=a.cache;if(_.has(g))return _.get(g);var x=r.apply(this,u);return a.cache=_.set(g,x)||_,x};return a.cache=new(To.Cache||li),a}To.Cache=li;function No(r){if(typeof r!="function")throw new Nr(f);return function(){var n=arguments;switch(n.length){case 0:return!r.call(this);case 1:return!r.call(this,n[0]);case 2:return!r.call(this,n[0],n[1]);case 3:return!r.call(this,n[0],n[1],n[2])}return!r.apply(this,n)}}function p1(r){return Pl(2,r)}var g1=ty(function(r,n){n=n.length==1&&Ne(n[0])?mt(n[0],Er(me())):mt(Yt(n,1),Er(me()));var a=n.length;return Ke(function(u){for(var g=-1,_=Zt(u.length,a);++g<_;)u[g]=n[g].call(this,u[g]);return kt(r,this,u)})}),Pc=Ke(function(r,n){var a=Oi(n,An(Pc));return di(r,C,t,n,a)}),Fl=Ke(function(r,n){var a=Oi(n,An(Fl));return di(r,T,t,n,a)}),y1=pi(function(r,n){return di(r,b,t,t,t,n)});function v1(r,n){if(typeof r!="function")throw new Nr(f);return n=n===t?n:Me(n),Ke(r,n)}function m1(r,n){if(typeof r!="function")throw new Nr(f);return n=n==null?0:Kt(Me(n),0),Ke(function(a){var u=a[n],g=Ni(a,0,n);return u&&xi(g,u),kt(r,this,g)})}function _1(r,n,a){var u=!0,g=!0;if(typeof r!="function")throw new Nr(f);return bt(a)&&(u="leading"in a?!!a.leading:u,g="trailing"in a?!!a.trailing:g),Rl(r,n,{leading:u,maxWait:n,trailing:g})}function b1(r){return Al(r,1)}function w1(r,n){return Pc(dc(n),r)}function E1(){if(!arguments.length)return[];var r=arguments[0];return Ne(r)?r:[r]}function D1(r){return Fr(r,O)}function I1(r,n){return n=typeof n=="function"?n:t,Fr(r,O,n)}function S1(r){return Fr(r,D|O)}function x1(r,n){return n=typeof n=="function"?n:t,Fr(r,D|O,n)}function O1(r,n){return n==null||wh(r,n,Vt(n))}function Vr(r,n){return r===n||r!==r&&n!==n}var A1=Io(tc),P1=Io(function(r,n){return r>=n}),Zi=Oh(function(){return arguments}())?Oh:function(r){return Ot(r)&&it.call(r,"callee")&&!dh.call(r,"callee")},Ne=q.isArray,C1=ir?Er(ir):M0;function dr(r){return r!=null&&Ro(r.length)&&!yi(r)}function Tt(r){return Ot(r)&&dr(r)}function T1(r){return r===!0||r===!1||Ot(r)&&nr(r)==B}var Ri=kg||Bc,N1=Hr?Er(Hr):j0;function R1(r){return Ot(r)&&r.nodeType===1&&!os(r)}function F1(r){if(r==null)return!0;if(dr(r)&&(Ne(r)||typeof r=="string"||typeof r.splice=="function"||Ri(r)||Pn(r)||Zi(r)))return!r.length;var n=Qt(r);if(n==Ee||n==Se)return!r.size;if(ns(r))return!nc(r).length;for(var a in r)if(it.call(r,a))return!1;return!0}function $1(r,n){return ts(r,n)}function U1(r,n,a){a=typeof a=="function"?a:t;var u=a?a(r,n):t;return u===t?ts(r,n,t,a):!!u}function Cc(r){if(!Ot(r))return!1;var n=nr(r);return n==P||n==l||typeof r.message=="string"&&typeof r.name=="string"&&!os(r)}function L1(r){return typeof r=="number"&&gh(r)}function yi(r){if(!bt(r))return!1;var n=nr(r);return n==se||n==he||n==z||n==gt}function $l(r){return typeof r=="number"&&r==Me(r)}function Ro(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=K}function bt(r){var n=typeof r;return r!=null&&(n=="object"||n=="function")}function Ot(r){return r!=null&&typeof r=="object"}var Ul=Cr?Er(Cr):z0;function M1(r,n){return r===n||ic(r,n,bc(n))}function j1(r,n,a){return a=typeof a=="function"?a:t,ic(r,n,bc(n),a)}function B1(r){return Ll(r)&&r!=+r}function z1(r){if(Iy(r))throw new Pe(c);return Ah(r)}function q1(r){return r===null}function H1(r){return r==null}function Ll(r){return typeof r=="number"||Ot(r)&&nr(r)==qe}function os(r){if(!Ot(r)||nr(r)!=Le)return!1;var n=so(r);if(n===null)return!0;var a=it.call(n,"constructor")&&n.constructor;return typeof a=="function"&&a instanceof a&&to.call(a)==jg}var Tc=Zr?Er(Zr):q0;function K1(r){return $l(r)&&r>=-K&&r<=K}var Ml=kn?Er(kn):H0;function Fo(r){return typeof r=="string"||!Ne(r)&&Ot(r)&&nr(r)==Re}function Ir(r){return typeof r=="symbol"||Ot(r)&&nr(r)==Fe}var Pn=Ki?Er(Ki):K0;function k1(r){return r===t}function V1(r){return Ot(r)&&Qt(r)==Oe}function W1(r){return Ot(r)&&nr(r)==$e}var G1=Io(sc),Y1=Io(function(r,n){return r<=n});function jl(r){if(!r)return[];if(dr(r))return Fo(r)?Kr(r):fr(r);if(Wn&&r[Wn])return Og(r[Wn]());var n=Qt(r),a=n==Ee?Va:n==Se?Zs:Cn;return a(r)}function vi(r){if(!r)return r===0?r:0;if(r=Lr(r),r===J||r===-J){var n=r<0?-1:1;return n*V}return r===r?r:0}function Me(r){var n=vi(r),a=n%1;return n===n?a?n-a:n:0}function Bl(r){return r?Gi(Me(r),0,ie):0}function Lr(r){if(typeof r=="number")return r;if(Ir(r))return ee;if(bt(r)){var n=typeof r.valueOf=="function"?r.valueOf():r;r=bt(n)?n+"":n}if(typeof r!="string")return r===0?r:+r;r=sh(r);var a=wa.test(r);return a||Da.test(r)?Te(r.slice(2),a?2:8):ba.test(r)?ee:+r}function zl(r){return ei(r,pr(r))}function J1(r){return r?Gi(Me(r),-K,K):r===0?r:0}function rt(r){return r==null?"":Dr(r)}var X1=xn(function(r,n){if(ns(n)||dr(n)){ei(n,Vt(n),r);return}for(var a in n)it.call(n,a)&&Zn(r,a,n[a])}),ql=xn(function(r,n){ei(n,pr(n),r)}),$o=xn(function(r,n,a,u){ei(n,pr(n),r,u)}),Z1=xn(function(r,n,a,u){ei(n,Vt(n),r,u)}),Q1=pi(Za);function em(r,n){var a=Sn(r);return n==null?a:bh(a,n)}var tm=Ke(function(r,n){r=ut(r);var a=-1,u=n.length,g=u>2?n[2]:t;for(g&&sr(n[0],n[1],g)&&(u=1);++a<u;)for(var _=n[a],x=pr(_),R=-1,j=x.length;++R<j;){var G=x[R],Y=r[G];(Y===t||Vr(Y,En[G])&&!it.call(r,G))&&(r[G]=_[G])}return r}),rm=Ke(function(r){return r.push(t,sl),kt(Hl,t,r)});function im(r,n){return th(r,me(n,3),Qr)}function nm(r,n){return th(r,me(n,3),ec)}function sm(r,n){return r==null?r:Qa(r,me(n,3),pr)}function om(r,n){return r==null?r:Sh(r,me(n,3),pr)}function am(r,n){return r&&Qr(r,me(n,3))}function cm(r,n){return r&&ec(r,me(n,3))}function um(r){return r==null?[]:yo(r,Vt(r))}function hm(r){return r==null?[]:yo(r,pr(r))}function Nc(r,n,a){var u=r==null?t:Yi(r,n);return u===t?a:u}function lm(r,n){return r!=null&&cl(r,n,F0)}function Rc(r,n){return r!=null&&cl(r,n,$0)}var fm=el(function(r,n,a){n!=null&&typeof n.toString!="function"&&(n=ro.call(n)),r[n]=a},$c(gr)),dm=el(function(r,n,a){n!=null&&typeof n.toString!="function"&&(n=ro.call(n)),it.call(r,n)?r[n].push(a):r[n]=[a]},me),pm=Ke(es);function Vt(r){return dr(r)?mh(r):nc(r)}function pr(r){return dr(r)?mh(r,!0):k0(r)}function gm(r,n){var a={};return n=me(n,3),Qr(r,function(u,g,_){fi(a,n(u,g,_),u)}),a}function ym(r,n){var a={};return n=me(n,3),Qr(r,function(u,g,_){fi(a,g,n(u,g,_))}),a}var vm=xn(function(r,n,a){vo(r,n,a)}),Hl=xn(function(r,n,a,u){vo(r,n,a,u)}),mm=pi(function(r,n){var a={};if(r==null)return a;var u=!1;n=mt(n,function(_){return _=Ti(_,r),u||(u=_.length>1),_}),ei(r,mc(r),a),u&&(a=Fr(a,D|A|O,fy));for(var g=n.length;g--;)hc(a,n[g]);return a});function _m(r,n){return Kl(r,No(me(n)))}var bm=pi(function(r,n){return r==null?{}:W0(r,n)});function Kl(r,n){if(r==null)return{};var a=mt(mc(r),function(u){return[u]});return n=me(n),$h(r,a,function(u,g){return n(u,g[0])})}function wm(r,n,a){n=Ti(n,r);var u=-1,g=n.length;for(g||(g=1,r=t);++u<g;){var _=r==null?t:r[ti(n[u])];_===t&&(u=g,_=a),r=yi(_)?_.call(r):_}return r}function Em(r,n,a){return r==null?r:rs(r,n,a)}function Dm(r,n,a,u){return u=typeof u=="function"?u:t,r==null?r:rs(r,n,a,u)}var kl=il(Vt),Vl=il(pr);function Im(r,n,a){var u=Ne(r),g=u||Ri(r)||Pn(r);if(n=me(n,4),a==null){var _=r&&r.constructor;g?a=u?new _:[]:bt(r)?a=yi(_)?Sn(so(r)):{}:a={}}return(g?Tr:Qr)(r,function(x,R,j){return n(a,x,R,j)}),a}function Sm(r,n){return r==null?!0:hc(r,n)}function xm(r,n,a){return r==null?r:Bh(r,n,dc(a))}function Om(r,n,a,u){return u=typeof u=="function"?u:t,r==null?r:Bh(r,n,dc(a),u)}function Cn(r){return r==null?[]:ka(r,Vt(r))}function Am(r){return r==null?[]:ka(r,pr(r))}function Pm(r,n,a){return a===t&&(a=n,n=t),a!==t&&(a=Lr(a),a=a===a?a:0),n!==t&&(n=Lr(n),n=n===n?n:0),Gi(Lr(r),n,a)}function Cm(r,n,a){return n=vi(n),a===t?(a=n,n=0):a=vi(a),r=Lr(r),U0(r,n,a)}function Tm(r,n,a){if(a&&typeof a!="boolean"&&sr(r,n,a)&&(n=a=t),a===t&&(typeof n=="boolean"?(a=n,n=t):typeof r=="boolean"&&(a=r,r=t)),r===t&&n===t?(r=0,n=1):(r=vi(r),n===t?(n=r,r=0):n=vi(n)),r>n){var u=r;r=n,n=u}if(a||r%1||n%1){var g=yh();return Zt(r+g*(n-r+at("1e-"+((g+"").length-1))),n)}return ac(r,n)}var Nm=On(function(r,n,a){return n=n.toLowerCase(),r+(a?Wl(n):n)});function Wl(r){return Fc(rt(r).toLowerCase())}function Gl(r){return r=rt(r),r&&r.replace(ci,Eg).replace(Ua,"")}function Rm(r,n,a){r=rt(r),n=Dr(n);var u=r.length;a=a===t?u:Gi(Me(a),0,u);var g=a;return a-=n.length,a>=0&&r.slice(a,g)==n}function Fm(r){return r=rt(r),r&&yt.test(r)?r.replace(ji,Dg):r}function $m(r){return r=rt(r),r&&Lt.test(r)?r.replace(It,"\\$&"):r}var Um=On(function(r,n,a){return r+(a?"-":"")+n.toLowerCase()}),Lm=On(function(r,n,a){return r+(a?" ":"")+n.toLowerCase()}),Mm=Xh("toLowerCase");function jm(r,n,a){r=rt(r),n=Me(n);var u=n?bn(r):0;if(!n||u>=n)return r;var g=(n-u)/2;return Do(uo(g),a)+r+Do(co(g),a)}function Bm(r,n,a){r=rt(r),n=Me(n);var u=n?bn(r):0;return n&&u<n?r+Do(n-u,a):r}function zm(r,n,a){r=rt(r),n=Me(n);var u=n?bn(r):0;return n&&u<n?Do(n-u,a)+r:r}function qm(r,n,a){return a||n==null?n=0:n&&(n=+n),Yg(rt(r).replace(St,""),n||0)}function Hm(r,n,a){return(a?sr(r,n,a):n===t)?n=1:n=Me(n),cc(rt(r),n)}function Km(){var r=arguments,n=rt(r[0]);return r.length<3?n:n.replace(r[1],r[2])}var km=On(function(r,n,a){return r+(a?"_":"")+n.toLowerCase()});function Vm(r,n,a){return a&&typeof a!="number"&&sr(r,n,a)&&(n=a=t),a=a===t?ie:a>>>0,a?(r=rt(r),r&&(typeof n=="string"||n!=null&&!Tc(n))&&(n=Dr(n),!n&&_n(r))?Ni(Kr(r),0,a):r.split(n,a)):[]}var Wm=On(function(r,n,a){return r+(a?" ":"")+Fc(n)});function Gm(r,n,a){return r=rt(r),a=a==null?0:Gi(Me(a),0,r.length),n=Dr(n),r.slice(a,a+n.length)==n}function Ym(r,n,a){var u=v.templateSettings;a&&sr(r,n,a)&&(n=t),r=rt(r),n=$o({},n,u,nl);var g=$o({},n.imports,u.imports,nl),_=Vt(g),x=ka(g,_),R,j,G=0,Y=n.interpolate||ln,te="__p += '",ae=Wa((n.escape||ln).source+"|"+Y.source+"|"+(Y===_t?_a:ln).source+"|"+(n.evaluate||ln).source+"|$","g"),pe="//# sourceURL="+(it.call(n,"sourceURL")?(n.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++La+"]")+`
`;r.replace(ae,function(be,We,Ze,Sr,or,xr){return Ze||(Ze=Sr),te+=r.slice(G,xr).replace(Sa,Ig),We&&(R=!0,te+=`' +
__e(`+We+`) +
'`),or&&(j=!0,te+=`';
`+or+`;
__p += '`),Ze&&(te+=`' +
((__t = (`+Ze+`)) == null ? '' : __t) +
'`),G=xr+be.length,be}),te+=`';
`;var _e=it.call(n,"variable")&&n.variable;if(!_e)te=`with (obj) {
`+te+`
}
`;else if(va.test(_e))throw new Pe(d);te=(j?te.replace(Jr,""):te).replace(rr,"$1").replace(ai,"$1;"),te="function("+(_e||"obj")+`) {
`+(_e?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(R?", __e = _.escape":"")+(j?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+te+`return __p
}`;var ze=Jl(function(){return tt(_,pe+"return "+te).apply(t,x)});if(ze.source=te,Cc(ze))throw ze;return ze}function Jm(r){return rt(r).toLowerCase()}function Xm(r){return rt(r).toUpperCase()}function Zm(r,n,a){if(r=rt(r),r&&(a||n===t))return sh(r);if(!r||!(n=Dr(n)))return r;var u=Kr(r),g=Kr(n),_=oh(u,g),x=ah(u,g)+1;return Ni(u,_,x).join("")}function Qm(r,n,a){if(r=rt(r),r&&(a||n===t))return r.slice(0,uh(r)+1);if(!r||!(n=Dr(n)))return r;var u=Kr(r),g=ah(u,Kr(n))+1;return Ni(u,0,g).join("")}function e_(r,n,a){if(r=rt(r),r&&(a||n===t))return r.replace(St,"");if(!r||!(n=Dr(n)))return r;var u=Kr(r),g=oh(u,Kr(n));return Ni(u,g).join("")}function t_(r,n){var a=ne,u=ue;if(bt(n)){var g="separator"in n?n.separator:g;a="length"in n?Me(n.length):a,u="omission"in n?Dr(n.omission):u}r=rt(r);var _=r.length;if(_n(r)){var x=Kr(r);_=x.length}if(a>=_)return r;var R=a-bn(u);if(R<1)return u;var j=x?Ni(x,0,R).join(""):r.slice(0,R);if(g===t)return j+u;if(x&&(R+=j.length-R),Tc(g)){if(r.slice(R).search(g)){var G,Y=j;for(g.global||(g=Wa(g.source,rt(Pr.exec(g))+"g")),g.lastIndex=0;G=g.exec(Y);)var te=G.index;j=j.slice(0,te===t?R:te)}}else if(r.indexOf(Dr(g),R)!=R){var ae=j.lastIndexOf(g);ae>-1&&(j=j.slice(0,ae))}return j+u}function r_(r){return r=rt(r),r&&wt.test(r)?r.replace(Di,Tg):r}var i_=On(function(r,n,a){return r+(a?" ":"")+n.toUpperCase()}),Fc=Xh("toUpperCase");function Yl(r,n,a){return r=rt(r),n=a?t:n,n===t?xg(r)?Fg(r):vg(r):r.match(n)||[]}var Jl=Ke(function(r,n){try{return kt(r,t,n)}catch(a){return Cc(a)?a:new Pe(a)}}),n_=pi(function(r,n){return Tr(n,function(a){a=ti(a),fi(r,a,Ac(r[a],r))}),r});function s_(r){var n=r==null?0:r.length,a=me();return r=n?mt(r,function(u){if(typeof u[1]!="function")throw new Nr(f);return[a(u[0]),u[1]]}):[],Ke(function(u){for(var g=-1;++g<n;){var _=r[g];if(kt(_[0],this,u))return kt(_[1],this,u)}})}function o_(r){return T0(Fr(r,D))}function $c(r){return function(){return r}}function a_(r,n){return r==null||r!==r?n:r}var c_=Qh(),u_=Qh(!0);function gr(r){return r}function Uc(r){return Ph(typeof r=="function"?r:Fr(r,D))}function h_(r){return Th(Fr(r,D))}function l_(r,n){return Nh(r,Fr(n,D))}var f_=Ke(function(r,n){return function(a){return es(a,r,n)}}),d_=Ke(function(r,n){return function(a){return es(r,a,n)}});function Lc(r,n,a){var u=Vt(n),g=yo(n,u);a==null&&!(bt(n)&&(g.length||!u.length))&&(a=n,n=r,r=this,g=yo(n,Vt(n)));var _=!(bt(a)&&"chain"in a)||!!a.chain,x=yi(r);return Tr(g,function(R){var j=n[R];r[R]=j,x&&(r.prototype[R]=function(){var G=this.__chain__;if(_||G){var Y=r(this.__wrapped__),te=Y.__actions__=fr(this.__actions__);return te.push({func:j,args:arguments,thisArg:r}),Y.__chain__=G,Y}return j.apply(r,xi([this.value()],arguments))})}),r}function p_(){return Xe._===this&&(Xe._=Bg),this}function Mc(){}function g_(r){return r=Me(r),Ke(function(n){return Rh(n,r)})}var y_=gc(mt),v_=gc(eh),m_=gc(Ba);function Xl(r){return Ec(r)?za(ti(r)):G0(r)}function __(r){return function(n){return r==null?t:Yi(r,n)}}var b_=tl(),w_=tl(!0);function jc(){return[]}function Bc(){return!1}function E_(){return{}}function D_(){return""}function I_(){return!0}function S_(r,n){if(r=Me(r),r<1||r>K)return[];var a=ie,u=Zt(r,ie);n=me(n),r-=ie;for(var g=Ka(u,n);++a<r;)n(a);return g}function x_(r){return Ne(r)?mt(r,ti):Ir(r)?[r]:fr(vl(rt(r)))}function O_(r){var n=++Mg;return rt(r)+n}var A_=Eo(function(r,n){return r+n},0),P_=yc("ceil"),C_=Eo(function(r,n){return r/n},1),T_=yc("floor");function N_(r){return r&&r.length?go(r,gr,tc):t}function R_(r,n){return r&&r.length?go(r,me(n,2),tc):t}function F_(r){return ih(r,gr)}function $_(r,n){return ih(r,me(n,2))}function U_(r){return r&&r.length?go(r,gr,sc):t}function L_(r,n){return r&&r.length?go(r,me(n,2),sc):t}var M_=Eo(function(r,n){return r*n},1),j_=yc("round"),B_=Eo(function(r,n){return r-n},0);function z_(r){return r&&r.length?Ha(r,gr):0}function q_(r,n){return r&&r.length?Ha(r,me(n,2)):0}return v.after=h1,v.ary=Al,v.assign=X1,v.assignIn=ql,v.assignInWith=$o,v.assignWith=Z1,v.at=Q1,v.before=Pl,v.bind=Ac,v.bindAll=n_,v.bindKey=Cl,v.castArray=E1,v.chain=Sl,v.chunk=Ty,v.compact=Ny,v.concat=Ry,v.cond=s_,v.conforms=o_,v.constant=$c,v.countBy=zv,v.create=em,v.curry=Tl,v.curryRight=Nl,v.debounce=Rl,v.defaults=tm,v.defaultsDeep=rm,v.defer=l1,v.delay=f1,v.difference=Fy,v.differenceBy=$y,v.differenceWith=Uy,v.drop=Ly,v.dropRight=My,v.dropRightWhile=jy,v.dropWhile=By,v.fill=zy,v.filter=Hv,v.flatMap=Vv,v.flatMapDeep=Wv,v.flatMapDepth=Gv,v.flatten=wl,v.flattenDeep=qy,v.flattenDepth=Hy,v.flip=d1,v.flow=c_,v.flowRight=u_,v.fromPairs=Ky,v.functions=um,v.functionsIn=hm,v.groupBy=Yv,v.initial=Vy,v.intersection=Wy,v.intersectionBy=Gy,v.intersectionWith=Yy,v.invert=fm,v.invertBy=dm,v.invokeMap=Xv,v.iteratee=Uc,v.keyBy=Zv,v.keys=Vt,v.keysIn=pr,v.map=Po,v.mapKeys=gm,v.mapValues=ym,v.matches=h_,v.matchesProperty=l_,v.memoize=To,v.merge=vm,v.mergeWith=Hl,v.method=f_,v.methodOf=d_,v.mixin=Lc,v.negate=No,v.nthArg=g_,v.omit=mm,v.omitBy=_m,v.once=p1,v.orderBy=Qv,v.over=y_,v.overArgs=g1,v.overEvery=v_,v.overSome=m_,v.partial=Pc,v.partialRight=Fl,v.partition=e1,v.pick=bm,v.pickBy=Kl,v.property=Xl,v.propertyOf=__,v.pull=Qy,v.pullAll=Dl,v.pullAllBy=ev,v.pullAllWith=tv,v.pullAt=rv,v.range=b_,v.rangeRight=w_,v.rearg=y1,v.reject=i1,v.remove=iv,v.rest=v1,v.reverse=xc,v.sampleSize=s1,v.set=Em,v.setWith=Dm,v.shuffle=o1,v.slice=nv,v.sortBy=u1,v.sortedUniq=lv,v.sortedUniqBy=fv,v.split=Vm,v.spread=m1,v.tail=dv,v.take=pv,v.takeRight=gv,v.takeRightWhile=yv,v.takeWhile=vv,v.tap=Nv,v.throttle=_1,v.thru=Ao,v.toArray=jl,v.toPairs=kl,v.toPairsIn=Vl,v.toPath=x_,v.toPlainObject=zl,v.transform=Im,v.unary=b1,v.union=mv,v.unionBy=_v,v.unionWith=bv,v.uniq=wv,v.uniqBy=Ev,v.uniqWith=Dv,v.unset=Sm,v.unzip=Oc,v.unzipWith=Il,v.update=xm,v.updateWith=Om,v.values=Cn,v.valuesIn=Am,v.without=Iv,v.words=Yl,v.wrap=w1,v.xor=Sv,v.xorBy=xv,v.xorWith=Ov,v.zip=Av,v.zipObject=Pv,v.zipObjectDeep=Cv,v.zipWith=Tv,v.entries=kl,v.entriesIn=Vl,v.extend=ql,v.extendWith=$o,Lc(v,v),v.add=A_,v.attempt=Jl,v.camelCase=Nm,v.capitalize=Wl,v.ceil=P_,v.clamp=Pm,v.clone=D1,v.cloneDeep=S1,v.cloneDeepWith=x1,v.cloneWith=I1,v.conformsTo=O1,v.deburr=Gl,v.defaultTo=a_,v.divide=C_,v.endsWith=Rm,v.eq=Vr,v.escape=Fm,v.escapeRegExp=$m,v.every=qv,v.find=Kv,v.findIndex=_l,v.findKey=im,v.findLast=kv,v.findLastIndex=bl,v.findLastKey=nm,v.floor=T_,v.forEach=xl,v.forEachRight=Ol,v.forIn=sm,v.forInRight=om,v.forOwn=am,v.forOwnRight=cm,v.get=Nc,v.gt=A1,v.gte=P1,v.has=lm,v.hasIn=Rc,v.head=El,v.identity=gr,v.includes=Jv,v.indexOf=ky,v.inRange=Cm,v.invoke=pm,v.isArguments=Zi,v.isArray=Ne,v.isArrayBuffer=C1,v.isArrayLike=dr,v.isArrayLikeObject=Tt,v.isBoolean=T1,v.isBuffer=Ri,v.isDate=N1,v.isElement=R1,v.isEmpty=F1,v.isEqual=$1,v.isEqualWith=U1,v.isError=Cc,v.isFinite=L1,v.isFunction=yi,v.isInteger=$l,v.isLength=Ro,v.isMap=Ul,v.isMatch=M1,v.isMatchWith=j1,v.isNaN=B1,v.isNative=z1,v.isNil=H1,v.isNull=q1,v.isNumber=Ll,v.isObject=bt,v.isObjectLike=Ot,v.isPlainObject=os,v.isRegExp=Tc,v.isSafeInteger=K1,v.isSet=Ml,v.isString=Fo,v.isSymbol=Ir,v.isTypedArray=Pn,v.isUndefined=k1,v.isWeakMap=V1,v.isWeakSet=W1,v.join=Jy,v.kebabCase=Um,v.last=Ur,v.lastIndexOf=Xy,v.lowerCase=Lm,v.lowerFirst=Mm,v.lt=G1,v.lte=Y1,v.max=N_,v.maxBy=R_,v.mean=F_,v.meanBy=$_,v.min=U_,v.minBy=L_,v.stubArray=jc,v.stubFalse=Bc,v.stubObject=E_,v.stubString=D_,v.stubTrue=I_,v.multiply=M_,v.nth=Zy,v.noConflict=p_,v.noop=Mc,v.now=Co,v.pad=jm,v.padEnd=Bm,v.padStart=zm,v.parseInt=qm,v.random=Tm,v.reduce=t1,v.reduceRight=r1,v.repeat=Hm,v.replace=Km,v.result=wm,v.round=j_,v.runInContext=M,v.sample=n1,v.size=a1,v.snakeCase=km,v.some=c1,v.sortedIndex=sv,v.sortedIndexBy=ov,v.sortedIndexOf=av,v.sortedLastIndex=cv,v.sortedLastIndexBy=uv,v.sortedLastIndexOf=hv,v.startCase=Wm,v.startsWith=Gm,v.subtract=B_,v.sum=z_,v.sumBy=q_,v.template=Ym,v.times=S_,v.toFinite=vi,v.toInteger=Me,v.toLength=Bl,v.toLower=Jm,v.toNumber=Lr,v.toSafeInteger=J1,v.toString=rt,v.toUpper=Xm,v.trim=Zm,v.trimEnd=Qm,v.trimStart=e_,v.truncate=t_,v.unescape=r_,v.uniqueId=O_,v.upperCase=i_,v.upperFirst=Fc,v.each=xl,v.eachRight=Ol,v.first=El,Lc(v,function(){var r={};return Qr(v,function(n,a){it.call(v.prototype,a)||(r[a]=n)}),r}(),{chain:!1}),v.VERSION=s,Tr(["bind","bindKey","curry","curryRight","partial","partialRight"],function(r){v[r].placeholder=v}),Tr(["drop","take"],function(r,n){Ye.prototype[r]=function(a){a=a===t?1:Kt(Me(a),0);var u=this.__filtered__&&!n?new Ye(this):this.clone();return u.__filtered__?u.__takeCount__=Zt(a,u.__takeCount__):u.__views__.push({size:Zt(a,ie),type:r+(u.__dir__<0?"Right":"")}),u},Ye.prototype[r+"Right"]=function(a){return this.reverse()[r](a).reverse()}}),Tr(["filter","map","takeWhile"],function(r,n){var a=n+1,u=a==E||a==Z;Ye.prototype[r]=function(g){var _=this.clone();return _.__iteratees__.push({iteratee:me(g,3),type:a}),_.__filtered__=_.__filtered__||u,_}}),Tr(["head","last"],function(r,n){var a="take"+(n?"Right":"");Ye.prototype[r]=function(){return this[a](1).value()[0]}}),Tr(["initial","tail"],function(r,n){var a="drop"+(n?"":"Right");Ye.prototype[r]=function(){return this.__filtered__?new Ye(this):this[a](1)}}),Ye.prototype.compact=function(){return this.filter(gr)},Ye.prototype.find=function(r){return this.filter(r).head()},Ye.prototype.findLast=function(r){return this.reverse().find(r)},Ye.prototype.invokeMap=Ke(function(r,n){return typeof r=="function"?new Ye(this):this.map(function(a){return es(a,r,n)})}),Ye.prototype.reject=function(r){return this.filter(No(me(r)))},Ye.prototype.slice=function(r,n){r=Me(r);var a=this;return a.__filtered__&&(r>0||n<0)?new Ye(a):(r<0?a=a.takeRight(-r):r&&(a=a.drop(r)),n!==t&&(n=Me(n),a=n<0?a.dropRight(-n):a.take(n-r)),a)},Ye.prototype.takeRightWhile=function(r){return this.reverse().takeWhile(r).reverse()},Ye.prototype.toArray=function(){return this.take(ie)},Qr(Ye.prototype,function(r,n){var a=/^(?:filter|find|map|reject)|While$/.test(n),u=/^(?:head|last)$/.test(n),g=v[u?"take"+(n=="last"?"Right":""):n],_=u||/^find/.test(n);g&&(v.prototype[n]=function(){var x=this.__wrapped__,R=u?[1]:arguments,j=x instanceof Ye,G=R[0],Y=j||Ne(x),te=function(We){var Ze=g.apply(v,xi([We],R));return u&&ae?Ze[0]:Ze};Y&&a&&typeof G=="function"&&G.length!=1&&(j=Y=!1);var ae=this.__chain__,pe=!!this.__actions__.length,_e=_&&!ae,ze=j&&!pe;if(!_&&Y){x=ze?x:new Ye(this);var be=r.apply(x,R);return be.__actions__.push({func:Ao,args:[te],thisArg:t}),new Rr(be,ae)}return _e&&ze?r.apply(this,R):(be=this.thru(te),_e?u?be.value()[0]:be.value():be)})}),Tr(["pop","push","shift","sort","splice","unshift"],function(r){var n=Qs[r],a=/^(?:push|sort|unshift)$/.test(r)?"tap":"thru",u=/^(?:pop|shift)$/.test(r);v.prototype[r]=function(){var g=arguments;if(u&&!this.__chain__){var _=this.value();return n.apply(Ne(_)?_:[],g)}return this[a](function(x){return n.apply(Ne(x)?x:[],g)})}}),Qr(Ye.prototype,function(r,n){var a=v[n];if(a){var u=a.name+"";it.call(In,u)||(In[u]=[]),In[u].push({name:n,func:a})}}),In[wo(t,re).name]=[{name:"wrapper",func:t}],Ye.prototype.clone=r0,Ye.prototype.reverse=i0,Ye.prototype.value=n0,v.prototype.at=Rv,v.prototype.chain=Fv,v.prototype.commit=$v,v.prototype.next=Uv,v.prototype.plant=Mv,v.prototype.reverse=jv,v.prototype.toJSON=v.prototype.valueOf=v.prototype.value=Bv,v.prototype.first=v.prototype.head,Wn&&(v.prototype[Wn]=Lv),v},wn=$g();Ct?((Ct.exports=wn)._=wn,ct._=wn):Xe._=wn}).call(gs)})(xu,xu.exports);var YI=Object.defineProperty,JI=Object.defineProperties,XI=Object.getOwnPropertyDescriptors,Td=Object.getOwnPropertySymbols,ZI=Object.prototype.hasOwnProperty,QI=Object.prototype.propertyIsEnumerable,Nd=(i,e,t)=>e in i?YI(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,Bo=(i,e)=>{for(var t in e||(e={}))ZI.call(e,t)&&Nd(i,t,e[t]);if(Td)for(var t of Td(e))QI.call(e,t)&&Nd(i,t,e[t]);return i},eS=(i,e)=>JI(i,XI(e));function zr(i,e,t){let s;const o=Ou(i);return e.rpcMap&&(s=e.rpcMap[o]),s||(s=`${GI}?chainId=eip155:${o}&projectId=${t}`),s}function Ou(i){return i.includes("eip155")?Number(i.split(":")[1]):Number(i)}function hg(i){return i.map(e=>`${e.split(":")[0]}:${e.split(":")[1]}`)}function tS(i,e){const t=Object.keys(e.namespaces).filter(o=>o.includes(i));if(!t.length)return[];const s=[];return t.forEach(o=>{const c=e.namespaces[o].accounts;s.push(...c)}),s}function rS(i={},e={}){const t=Rd(i),s=Rd(e);return xu.exports.merge(t,s)}function Rd(i){var e,t,s,o;const c={};if(!Ln(i))return c;for(const[f,d]of Object.entries(i)){const y=Hu(f)?[f]:d.chains,p=d.methods||[],m=d.events||[],D=d.rpcMap||{},A=Ko(f);c[A]=eS(Bo(Bo({},c[A]),d),{chains:Vc(y,(e=c[A])==null?void 0:e.chains),methods:Vc(p,(t=c[A])==null?void 0:t.methods),events:Vc(m,(s=c[A])==null?void 0:s.events),rpcMap:Bo(Bo({},D),(o=c[A])==null?void 0:o.rpcMap)})}return c}function iS(i){return i.includes(":")?i.split(":")[2]:i}function nS(i){const e={};for(const[t,s]of Object.entries(i)){const o=s.methods||[],c=s.events||[],f=s.accounts||[],d=Hu(t)?[t]:s.chains?s.chains:hg(s.accounts);e[t]={chains:d,methods:o,events:c,accounts:f}}return e}const lg={},Ft=i=>lg[i],nu=(i,e)=>{lg[i]=e};class sS{constructor(e){this.name="polkadot",this.namespace=e.namespace,this.events=Ft("events"),this.client=Ft("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(this.chainId=e,!this.httpProviders[e]){const s=t||zr(`${this.name}:${e}`,this.namespace);if(!s)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,s)}this.events.emit(Mi.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var s;e[t]=this.createHttpProvider(t,(s=this.namespace.rpcMap)==null?void 0:s[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const s=this.createHttpProvider(e,t);s&&(this.httpProviders[e]=s)}createHttpProvider(e,t){const s=t||zr(e,this.namespace);return typeof s>"u"?void 0:new hn(new un(s,Ft("disableProviderPing")))}}class oS{constructor(e){this.name="eip155",this.namespace=e.namespace,this.events=Ft("events"),this.client=Ft("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}async request(e){switch(e.request.method){case"eth_requestAccounts":return this.getAccounts();case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return await this.handleSwitchChain(e);case"eth_chainId":return parseInt(this.getDefaultChain())}return this.namespace.methods.includes(e.request.method)?await this.client.request(e):this.getHttpProvider().request(e.request)}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}setDefaultChain(e,t){const s=Ou(e);if(!this.httpProviders[s]){const o=t||zr(`${this.name}:${s}`,this.namespace,this.client.core.projectId);if(!o)throw new Error(`No RPC url provided for chainId: ${s}`);this.setHttpProvider(s,o)}this.chainId=s,this.events.emit(Mi.DEFAULT_CHAIN_CHANGED,`${this.name}:${s}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}createHttpProvider(e,t){const s=t||zr(`${this.name}:${e}`,this.namespace,this.client.core.projectId);return typeof s>"u"?void 0:new hn(new un(s,Ft("disableProviderPing")))}setHttpProvider(e,t){const s=this.createHttpProvider(e,t);s&&(this.httpProviders[e]=s)}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var s;const o=Ou(t);e[o]=this.createHttpProvider(o,(s=this.namespace.rpcMap)==null?void 0:s[t])}),e}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}getHttpProvider(){const e=this.chainId,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}async handleSwitchChain(e){var t,s;let o=e.request.params?(t=e.request.params[0])==null?void 0:t.chainId:"0x0";o=o.startsWith("0x")?o:`0x${o}`;const c=parseInt(o,16);if(this.isChainApproved(c))this.setDefaultChain(`${c}`);else if(this.namespace.methods.includes("wallet_switchEthereumChain"))await this.client.request({topic:e.topic,request:{method:e.request.method,params:[{chainId:o}]},chainId:(s=this.namespace.chains)==null?void 0:s[0]}),this.setDefaultChain(`${c}`);else throw new Error(`Failed to switch to chain 'eip155:${c}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);return null}isChainApproved(e){return this.namespace.chains.includes(`${this.name}:${e}`)}}class aS{constructor(e){this.name="solana",this.namespace=e.namespace,this.events=Ft("events"),this.client=Ft("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(!this.httpProviders[e]){const s=t||zr(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!s)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,s)}this.chainId=e,this.events.emit(Mi.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var s;e[t]=this.createHttpProvider(t,(s=this.namespace.rpcMap)==null?void 0:s[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const s=this.createHttpProvider(e,t);s&&(this.httpProviders[e]=s)}createHttpProvider(e,t){const s=t||zr(e,this.namespace,this.client.core.projectId);return typeof s>"u"?void 0:new hn(new un(s,Ft("disableProviderPing")))}}class cS{constructor(e){this.name="cosmos",this.namespace=e.namespace,this.events=Ft("events"),this.client=Ft("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(this.chainId=e,!this.httpProviders[e]){const s=t||zr(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!s)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,s)}this.events.emit(Mi.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var s;e[t]=this.createHttpProvider(t,(s=this.namespace.rpcMap)==null?void 0:s[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const s=this.createHttpProvider(e,t);s&&(this.httpProviders[e]=s)}createHttpProvider(e,t){const s=t||zr(e,this.namespace,this.client.core.projectId);return typeof s>"u"?void 0:new hn(new un(s,Ft("disableProviderPing")))}}class uS{constructor(e){this.name="cip34",this.namespace=e.namespace,this.events=Ft("events"),this.client=Ft("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(this.chainId=e,!this.httpProviders[e]){const s=t||this.getCardanoRPCUrl(e);if(!s)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,s)}this.events.emit(Mi.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{const s=this.getCardanoRPCUrl(t);e[t]=this.createHttpProvider(t,s)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}getCardanoRPCUrl(e){const t=this.namespace.rpcMap;if(t)return t[e]}setHttpProvider(e,t){const s=this.createHttpProvider(e,t);s&&(this.httpProviders[e]=s)}createHttpProvider(e,t){const s=t||this.getCardanoRPCUrl(e);return typeof s>"u"?void 0:new hn(new un(s,Ft("disableProviderPing")))}}class hS{constructor(e){this.name="elrond",this.namespace=e.namespace,this.events=Ft("events"),this.client=Ft("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(!this.httpProviders[e]){const s=t||zr(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!s)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,s)}this.chainId=e,this.events.emit(Mi.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var s;e[t]=this.createHttpProvider(t,(s=this.namespace.rpcMap)==null?void 0:s[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const s=this.createHttpProvider(e,t);s&&(this.httpProviders[e]=s)}createHttpProvider(e,t){const s=t||zr(e,this.namespace,this.client.core.projectId);return typeof s>"u"?void 0:new hn(new un(s,Ft("disableProviderPing")))}}class lS{constructor(e){this.name="multiversx",this.namespace=e.namespace,this.events=Ft("events"),this.client=Ft("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(!this.httpProviders[e]){const s=t||zr(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!s)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,s)}this.chainId=e,this.events.emit(Mi.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var s;e[t]=this.createHttpProvider(t,(s=this.namespace.rpcMap)==null?void 0:s[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const s=this.createHttpProvider(e,t);s&&(this.httpProviders[e]=s)}createHttpProvider(e,t){const s=t||zr(e,this.namespace,this.client.core.projectId);return typeof s>"u"?void 0:new hn(new un(s,Ft("disableProviderPing")))}}var fS=Object.defineProperty,dS=Object.defineProperties,pS=Object.getOwnPropertyDescriptors,Fd=Object.getOwnPropertySymbols,gS=Object.prototype.hasOwnProperty,yS=Object.prototype.propertyIsEnumerable,$d=(i,e,t)=>e in i?fS(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,zo=(i,e)=>{for(var t in e||(e={}))gS.call(e,t)&&$d(i,t,e[t]);if(Fd)for(var t of Fd(e))yS.call(e,t)&&$d(i,t,e[t]);return i},su=(i,e)=>dS(i,pS(e));class Zu{constructor(e){this.events=new Tu,this.rpcProviders={},this.shouldAbortPairingAttempt=!1,this.maxPairingAttempts=10,this.disableProviderPing=!1,this.providerOpts=e,this.logger=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:la(fa({level:(e==null?void 0:e.logger)||Pd})),this.disableProviderPing=(e==null?void 0:e.disableProviderPing)||!1}static async init(e){const t=new Zu(e);return await t.initialize(),t}async request(e,t){const[s,o]=this.validateChain(t);if(!this.session)throw new Error("Please call connect() before request()");return await this.getProvider(s).request({request:zo({},e),chainId:`${s}:${o}`,topic:this.session.topic})}sendAsync(e,t,s){this.request(e,s).then(o=>t(null,o)).catch(o=>t(o,void 0))}async enable(){if(!this.client)throw new Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties}),await this.requestAccounts()}async disconnect(){var e;if(!this.session)throw new Error("Please call connect() before enable()");await this.client.disconnect({topic:(e=this.session)==null?void 0:e.topic,reason:Rt("USER_DISCONNECTED")}),await this.cleanup()}async connect(e){if(!this.client)throw new Error("Sign Client not initialized");if(this.setNamespaces(e),await this.cleanupPendingPairings(),!e.skipPairing)return await this.pair(e.pairingTopic)}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}removeListener(e,t){this.events.removeListener(e,t)}off(e,t){this.events.off(e,t)}get isWalletConnect(){return!0}async pair(e){this.shouldAbortPairingAttempt=!1;let t=0;do{if(this.shouldAbortPairingAttempt)throw new Error("Pairing aborted");if(t>=this.maxPairingAttempts)throw new Error("Max auto pairing attempts reached");const{uri:s,approval:o}=await this.client.connect({pairingTopic:e,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties});s&&(this.uri=s,this.events.emit("display_uri",s)),await o().then(c=>{this.session=c,this.namespaces||(this.namespaces=nS(c.namespaces),this.persist("namespaces",this.namespaces))}).catch(c=>{if(c.message!==cg)throw c;t++})}while(!this.session);return this.onConnect(),this.session}setDefaultChain(e,t){try{if(!this.session)return;const[s,o]=this.validateChain(e);this.getProvider(s).setDefaultChain(o,t)}catch(s){if(!/Please call connect/.test(s.message))throw s}}async cleanupPendingPairings(e={}){this.logger.info("Cleaning up inactive pairings...");const t=this.client.pairing.getAll();if(oi(t)){for(const s of t)e.deletePairings?this.client.core.expirer.set(s.topic,0):await this.client.core.relayer.subscriber.unsubscribe(s.topic);this.logger.info(`Inactive pairings cleared: ${t.length}`)}}abortPairingAttempt(){this.shouldAbortPairingAttempt=!0}async checkStorage(){if(this.namespaces=await this.getFromStore("namespaces"),this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.client.session.length){const e=this.client.session.keys.length-1;this.session=this.client.session.get(this.client.session.keys[e]),this.createProviders()}}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){this.client=this.providerOpts.client||await UI.init({logger:this.providerOpts.logger||Pd,relayUrl:this.providerOpts.relayUrl||kI,projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,name:this.providerOpts.name}),this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");if(!this.session)throw new Error("Session not initialized. Please call connect() before enable()");const e=[...new Set(Object.keys(this.session.namespaces).map(t=>Ko(t)))];nu("client",this.client),nu("events",this.events),nu("disableProviderPing",this.disableProviderPing),e.forEach(t=>{if(!this.session)return;const s=tS(t,this.session),o=hg(s),c=rS(this.namespaces,this.optionalNamespaces),f=su(zo({},c[t]),{accounts:s,chains:o});switch(t){case"eip155":this.rpcProviders[t]=new oS({namespace:f});break;case"solana":this.rpcProviders[t]=new aS({namespace:f});break;case"cosmos":this.rpcProviders[t]=new cS({namespace:f});break;case"polkadot":this.rpcProviders[t]=new sS({namespace:f});break;case"cip34":this.rpcProviders[t]=new uS({namespace:f});break;case"elrond":this.rpcProviders[t]=new hS({namespace:f});break;case"multiversx":this.rpcProviders[t]=new lS({namespace:f});break}})}registerEventListeners(){if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",e=>{this.events.emit("session_ping",e)}),this.client.on("session_event",e=>{const{params:t}=e,{event:s}=t;if(s.name==="accountsChanged"){const o=s.data;o&&oi(o)&&this.events.emit("accountsChanged",o.map(iS))}else s.name==="chainChanged"?this.onChainChanged(t.chainId):this.events.emit(s.name,s.data);this.events.emit("session_event",e)}),this.client.on("session_update",({topic:e,params:t})=>{var s;const{namespaces:o}=t,c=(s=this.client)==null?void 0:s.session.get(e);this.session=su(zo({},c),{namespaces:o}),this.onSessionUpdate(),this.events.emit("session_update",{topic:e,params:t})}),this.client.on("session_delete",async e=>{await this.cleanup(),this.events.emit("session_delete",e),this.events.emit("disconnect",su(zo({},Rt("USER_DISCONNECTED")),{data:e.topic}))}),this.on(Mi.DEFAULT_CHAIN_CHANGED,e=>{this.onChainChanged(e,!0)})}getProvider(e){if(!this.rpcProviders[e])throw new Error(`Provider not found: ${e}`);return this.rpcProviders[e]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(e=>{var t;this.getProvider(e).updateNamespace((t=this.session)==null?void 0:t.namespaces[e])})}setNamespaces(e){const{namespaces:t,optionalNamespaces:s,sessionProperties:o}=e;t&&Object.keys(t).length&&(this.namespaces=t),s&&Object.keys(s).length&&(this.optionalNamespaces=s),this.sessionProperties=o,this.persist("namespaces",t),this.persist("optionalNamespaces",s)}validateChain(e){const[t,s]=(e==null?void 0:e.split(":"))||["",""];if(!this.namespaces||!Object.keys(this.namespaces).length)return[t,s];if(t&&!Object.keys(this.namespaces||{}).map(f=>Ko(f)).includes(t))throw new Error(`Namespace '${t}' is not configured. Please call connect() first with namespace config.`);if(t&&s)return[t,s];const o=Ko(Object.keys(this.namespaces)[0]),c=this.rpcProviders[o].getDefaultChain();return[o,c]}async requestAccounts(){const[e]=this.validateChain();return await this.getProvider(e).requestAccounts()}onChainChanged(e,t=!1){var s;if(!this.namespaces)return;const[o,c]=this.validateChain(e);t||this.getProvider(o).setDefaultChain(c),((s=this.namespaces[o])!=null?s:this.namespaces[`${o}:${c}`]).defaultChain=c,this.persist("namespaces",this.namespaces),this.events.emit("chainChanged",c)}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.session=void 0,this.namespaces=void 0,this.optionalNamespaces=void 0,this.sessionProperties=void 0,this.persist("namespaces",void 0),this.persist("optionalNamespaces",void 0),this.persist("sessionProperties",void 0),await this.cleanupPendingPairings({deletePairings:!0})}persist(e,t){this.client.core.storage.setItem(`${Cd}/${e}`,t)}async getFromStore(e){return await this.client.core.storage.getItem(`${Cd}/${e}`)}}const vS=Zu,mS="wc",_S="ethereum_provider",bS=`${mS}@2:${_S}:`,wS="https://rpc.walletconnect.com/v1/",Au=["eth_sendTransaction","personal_sign"],ES=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode"],Pu=["chainChanged","accountsChanged"],DS=["message","disconnect","connect"];var IS=Object.defineProperty,SS=Object.defineProperties,xS=Object.getOwnPropertyDescriptors,Ud=Object.getOwnPropertySymbols,OS=Object.prototype.hasOwnProperty,AS=Object.prototype.propertyIsEnumerable,Ld=(i,e,t)=>e in i?IS(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,ys=(i,e)=>{for(var t in e||(e={}))OS.call(e,t)&&Ld(i,t,e[t]);if(Ud)for(var t of Ud(e))AS.call(e,t)&&Ld(i,t,e[t]);return i},Md=(i,e)=>SS(i,xS(e));function ta(i){return Number(i[0].split(":")[1])}function ou(i){return`0x${i.toString(16)}`}function PS(i){const{chains:e,optionalChains:t,methods:s,optionalMethods:o,events:c,optionalEvents:f,rpcMap:d}=i;if(!oi(e))throw new Error("Invalid chains");const y={chains:e,methods:s||Au,events:c||Pu,rpcMap:ys({},e.length?{[ta(e)]:d[ta(e)]}:{})},p=c==null?void 0:c.filter(O=>!Pu.includes(O)),m=s==null?void 0:s.filter(O=>!Au.includes(O));if(!t&&!f&&!o&&!(p!=null&&p.length)&&!(m!=null&&m.length))return{required:e.length?y:void 0};const D=(p==null?void 0:p.length)&&(m==null?void 0:m.length)||!t,A={chains:[...new Set(D?y.chains.concat(t||[]):t)],methods:[...new Set(y.methods.concat(o!=null&&o.length?o:ES))],events:[...new Set(y.events.concat(f||DS))],rpcMap:d};return{required:e.length?y:void 0,optional:t.length?A:void 0}}class Qu{constructor(){this.events=new _r.EventEmitter,this.namespace="eip155",this.accounts=[],this.chainId=1,this.STORAGE_KEY=bS,this.on=(e,t)=>(this.events.on(e,t),this),this.once=(e,t)=>(this.events.once(e,t),this),this.removeListener=(e,t)=>(this.events.removeListener(e,t),this),this.off=(e,t)=>(this.events.off(e,t),this),this.parseAccount=e=>this.isCompatibleChainId(e)?this.parseAccountId(e).address:e,this.signer={},this.rpc={}}static async init(e){const t=new Qu;return await t.initialize(e),t}async request(e){return await this.signer.request(e,this.formatChainId(this.chainId))}sendAsync(e,t){this.signer.sendAsync(e,t,this.formatChainId(this.chainId))}get connected(){return this.signer.client?this.signer.client.core.relayer.connected:!1}get connecting(){return this.signer.client?this.signer.client.core.relayer.connecting:!1}async enable(){return this.session||await this.connect(),await this.request({method:"eth_requestAccounts"})}async connect(e){if(!this.signer.client)throw new Error("Provider not initialized. Call init() first");this.loadConnectOpts(e);const{required:t,optional:s}=PS(this.rpc);try{const o=await new Promise(async(f,d)=>{var y;this.rpc.showQrModal&&((y=this.modal)==null||y.subscribeModal(p=>{!p.open&&!this.signer.session&&(this.signer.abortPairingAttempt(),d(new Error("Connection request reset. Please try again.")))})),await this.signer.connect(Md(ys({namespaces:ys({},t&&{[this.namespace]:t})},s&&{optionalNamespaces:{[this.namespace]:s}}),{pairingTopic:e==null?void 0:e.pairingTopic})).then(p=>{f(p)}).catch(p=>{d(new Error(p.message))})});if(!o)return;this.setChainIds(this.rpc.chains);const c=jE(o.namespaces,[this.namespace]);this.setAccounts(c),this.events.emit("connect",{chainId:ou(this.chainId)})}catch(o){throw this.signer.logger.error(o),o}finally{this.modal&&this.modal.closeModal()}}async disconnect(){this.session&&await this.signer.disconnect(),this.reset()}get isWalletConnect(){return!0}get session(){return this.signer.session}registerEventListeners(){this.signer.on("session_event",e=>{const{params:t}=e,{event:s}=t;s.name==="accountsChanged"?(this.accounts=this.parseAccounts(s.data),this.events.emit("accountsChanged",this.accounts)):s.name==="chainChanged"?this.setChainId(this.formatChainId(s.data)):this.events.emit(s.name,s.data),this.events.emit("session_event",e)}),this.signer.on("chainChanged",e=>{const t=parseInt(e);this.chainId=t,this.events.emit("chainChanged",ou(this.chainId)),this.persist()}),this.signer.on("session_update",e=>{this.events.emit("session_update",e)}),this.signer.on("session_delete",e=>{this.reset(),this.events.emit("session_delete",e),this.events.emit("disconnect",Md(ys({},Rt("USER_DISCONNECTED")),{data:e.topic,name:"USER_DISCONNECTED"}))}),this.signer.on("display_uri",e=>{var t,s;this.rpc.showQrModal&&((t=this.modal)==null||t.closeModal(),(s=this.modal)==null||s.openModal({uri:e})),this.events.emit("display_uri",e)})}switchEthereumChain(e){this.request({method:"wallet_switchEthereumChain",params:[{chainId:e.toString(16)}]})}isCompatibleChainId(e){return typeof e=="string"?e.startsWith(`${this.namespace}:`):!1}formatChainId(e){return`${this.namespace}:${e}`}parseChainId(e){return Number(e.split(":")[1])}setChainIds(e){const t=e.filter(s=>this.isCompatibleChainId(s)).map(s=>this.parseChainId(s));t.length&&(this.chainId=t[0],this.events.emit("chainChanged",ou(this.chainId)),this.persist())}setChainId(e){if(this.isCompatibleChainId(e)){const t=this.parseChainId(e);this.chainId=t,this.switchEthereumChain(t)}}parseAccountId(e){const[t,s,o]=e.split(":");return{chainId:`${t}:${s}`,address:o}}setAccounts(e){this.accounts=e.filter(t=>this.parseChainId(this.parseAccountId(t).chainId)===this.chainId).map(t=>this.parseAccountId(t).address),this.events.emit("accountsChanged",this.accounts)}getRpcConfig(e){var t,s;const o=(t=e==null?void 0:e.chains)!=null?t:[],c=(s=e==null?void 0:e.optionalChains)!=null?s:[],f=o.concat(c);if(!f.length)throw new Error("No chains specified in either `chains` or `optionalChains`");const d=o.length?(e==null?void 0:e.methods)||Au:[],y=o.length?(e==null?void 0:e.events)||Pu:[],p=(e==null?void 0:e.optionalMethods)||[],m=(e==null?void 0:e.optionalEvents)||[],D=(e==null?void 0:e.rpcMap)||this.buildRpcMap(f,e.projectId),A=(e==null?void 0:e.qrModalOptions)||void 0;return{chains:o==null?void 0:o.map(O=>this.formatChainId(O)),optionalChains:c.map(O=>this.formatChainId(O)),methods:d,events:y,optionalMethods:p,optionalEvents:m,rpcMap:D,showQrModal:!!(e!=null&&e.showQrModal),qrModalOptions:A,projectId:e.projectId,metadata:e.metadata}}buildRpcMap(e,t){const s={};return e.forEach(o=>{s[o]=this.getRpcUrl(o,t)}),s}async initialize(e){if(this.rpc=this.getRpcConfig(e),this.chainId=this.rpc.chains.length?ta(this.rpc.chains):ta(this.rpc.optionalChains),this.signer=await vS.init({projectId:this.rpc.projectId,metadata:this.rpc.metadata,disableProviderPing:e.disableProviderPing,relayUrl:e.relayUrl,storageOptions:e.storageOptions}),this.registerEventListeners(),await this.loadPersistedSession(),this.rpc.showQrModal){let t;try{const{WalletConnectModal:s}=await H_(()=>import("./index-2b0896fd.js").then(o=>o.i),["assets/index-2b0896fd.js","assets/preload-helper-f61836a9.js","assets/index-a526c5e9.js","assets/_commonjsHelpers-de833af9.js"]);t=s}catch{throw new Error("To use QR modal, please install @walletconnect/modal package")}if(t)try{this.modal=new t(ys({walletConnectVersion:2,projectId:this.rpc.projectId,standaloneChains:this.rpc.chains},this.rpc.qrModalOptions))}catch(s){throw this.signer.logger.error(s),new Error("Could not generate WalletConnectModal Instance")}}}loadConnectOpts(e){if(!e)return;const{chains:t,optionalChains:s,rpcMap:o}=e;t&&oi(t)&&(this.rpc.chains=t.map(c=>this.formatChainId(c)),t.forEach(c=>{this.rpc.rpcMap[c]=(o==null?void 0:o[c])||this.getRpcUrl(c)})),s&&oi(s)&&(this.rpc.optionalChains=[],this.rpc.optionalChains=s==null?void 0:s.map(c=>this.formatChainId(c)),s.forEach(c=>{this.rpc.rpcMap[c]=(o==null?void 0:o[c])||this.getRpcUrl(c)}))}getRpcUrl(e,t){var s;return((s=this.rpc.rpcMap)==null?void 0:s[e])||`${wS}?chainId=eip155:${e}&projectId=${t||this.rpc.projectId}`}async loadPersistedSession(){if(!this.session)return;const e=await this.signer.client.core.storage.getItem(`${this.STORAGE_KEY}/chainId`),t=this.session.namespaces[`${this.namespace}:${e}`]?this.session.namespaces[`${this.namespace}:${e}`]:this.session.namespaces[this.namespace];this.setChainIds(e?[this.formatChainId(e)]:t==null?void 0:t.accounts),this.setAccounts(t==null?void 0:t.accounts)}reset(){this.chainId=1,this.accounts=[]}persist(){this.session&&this.signer.client.core.storage.setItem(`${this.STORAGE_KEY}/chainId`,this.chainId)}parseAccounts(e){return typeof e=="string"||e instanceof String?[this.parseAccount(e)]:e.map(t=>this.parseAccount(t))}}const WS=Qu;export{WS as EthereumProvider,DS as OPTIONAL_EVENTS,ES as OPTIONAL_METHODS,Pu as REQUIRED_EVENTS,Au as REQUIRED_METHODS,Qu as default};
