import{_ as c}from"./preload-helper-f61836a9.js";import{u as N}from"./user-4c9e2e6d.js";import{u as S}from"./market-4a8d5095.js";import{_ as x,j as i,s as z,k as p,u as F,z as U,r as d,o as n,c as M,a as R,e as l,i as W,F as j,f as K}from"./bootstrap-9979bcf7.js";import"./_commonjsHelpers-de833af9.js";import"./browser-77dd377d.js";import"./axios-4a70c6fc.js";const q={components:{Markets:i(()=>c(()=>import("./Markets-ba73e845.js").then(r=>r.b),["assets/Markets-ba73e845.js","assets/bootstrap-9979bcf7.js","assets/_commonjsHelpers-de833af9.js","assets/browser-77dd377d.js","assets/preload-helper-f61836a9.js","assets/axios-4a70c6fc.js","assets/bootstrap-fc0de13c.css","assets/market-4a8d5095.js","assets/Markets-70f27e4b.css","assets/LoadingCircles-9ea86c11.css"])),Trades:i(()=>c(()=>import("./Trades-4e3843fc.js"),["assets/Trades-4e3843fc.js","assets/bootstrap-9979bcf7.js","assets/_commonjsHelpers-de833af9.js","assets/browser-77dd377d.js","assets/preload-helper-f61836a9.js","assets/axios-4a70c6fc.js","assets/bootstrap-fc0de13c.css","assets/market-4a8d5095.js","assets/LoadingCircles-fe2f796e.js","assets/LoadingCircles-9ea86c11.css"])),Marketinfo:i(()=>c(()=>import("./Marketinfo-49164d44.js"),["assets/Marketinfo-49164d44.js","assets/market-4a8d5095.js","assets/bootstrap-9979bcf7.js","assets/_commonjsHelpers-de833af9.js","assets/browser-77dd377d.js","assets/preload-helper-f61836a9.js","assets/axios-4a70c6fc.js","assets/bootstrap-fc0de13c.css","assets/LoadingCircles-fe2f796e.js","assets/LoadingCircles-9ea86c11.css","assets/Marketinfo-536790f3.css"])),Tradingview:i(()=>c(()=>import("./Tradingview-0cf0d1fe.js"),["assets/Tradingview-0cf0d1fe.js","assets/bootstrap-9979bcf7.js","assets/_commonjsHelpers-de833af9.js","assets/browser-77dd377d.js","assets/preload-helper-f61836a9.js","assets/axios-4a70c6fc.js","assets/bootstrap-fc0de13c.css"])),EcoTradingview:i(()=>c(()=>import("./Tradingview-dd903123.js"),["assets/Tradingview-dd903123.js","assets/datafeed-d62ae98f.js","assets/_commonjsHelpers-de833af9.js","assets/market-4a8d5095.js","assets/bootstrap-9979bcf7.js","assets/browser-77dd377d.js","assets/preload-helper-f61836a9.js","assets/axios-4a70c6fc.js","assets/bootstrap-fc0de13c.css"])),Order:i(()=>c(()=>import("./Order-9d844156.js"),["assets/Order-9d844156.js","assets/bootstrap-9979bcf7.js","assets/_commonjsHelpers-de833af9.js","assets/browser-77dd377d.js","assets/preload-helper-f61836a9.js","assets/axios-4a70c6fc.js","assets/bootstrap-fc0de13c.css","assets/flowbite-vue-3e651750.js","assets/market-4a8d5095.js","assets/user-4c9e2e6d.js","assets/PriceInput-9a4e96a7.js","assets/Order-0745f0d9.css"])),Orders:i(()=>c(()=>import("./Orders-f7a33bad.js"),["assets/Orders-f7a33bad.js","assets/bootstrap-9979bcf7.js","assets/_commonjsHelpers-de833af9.js","assets/browser-77dd377d.js","assets/preload-helper-f61836a9.js","assets/axios-4a70c6fc.js","assets/bootstrap-fc0de13c.css","assets/flowbite-vue-3e651750.js","assets/toMoney-eef014ed.js","assets/toDate-035af62a.js","assets/Filter-f10b47ed.js","assets/Col-4463c6d7.js","assets/market-4a8d5095.js"])),Orderbook:i(()=>c(()=>import("./Orderbook-4904c1cf.js"),["assets/Orderbook-4904c1cf.js","assets/bootstrap-9979bcf7.js","assets/_commonjsHelpers-de833af9.js","assets/browser-77dd377d.js","assets/preload-helper-f61836a9.js","assets/axios-4a70c6fc.js","assets/bootstrap-fc0de13c.css","assets/ListItem-0775ff45.js","assets/market-4a8d5095.js","assets/LoadingCircles-fe2f796e.js","assets/LoadingCircles-9ea86c11.css"]))},setup(){const r=N(),t=S(),k=z(),o=k.params.symbol,s=k.params.currency,h=window.provider,g=async()=>{if(t.markets.length===0)try{await t.fetch_markets()}catch(e){console.log(e)}t.markets[s]&&(t.market=t.markets[s][o+"/"+s])};t.market||g();const m=p(null),_=p(null),f=p(null),y={proxy:gnl.cors,options:{tradesLimit:10},newUpdates:!0,timeout:2e4};t.exchange===null&&(t.exchange=new ccxt.pro[h](y));let u=plat.mobile.charting==1?"pills-chart":"pills-orderbook",b=0;const O=e=>u===e,T=e=>{u=e},P=(e,a)=>(e=Math.ceil(e),a=Math.floor(a),Math.floor(Math.random()*(a-e))+e),V=e=>{ask=e},I=e=>{bid=e},D=()=>{axios.post("/user/trade/"+o+"/"+s).then(e=>{m.value=e.provide,_.value=e.fee,f.value=e.pfee})},$=p({open:[],closed:[]}),w=p(!1),E=p(!1);async function v(){try{const e=await axios.post(`/user/fetch/trade/orders/${o}/${s}`);$.value=e.orders}catch(e){$toast.error(e.response.data.message)}}async function L(e){E.value=!0;try{const a=await axios.post("/user/trade/fetch_order",{order_id:e,symbol:o,currency:s});v()}catch(a){$toast.error(a.response.data.message)}finally{E.value=!1}}async function B(e){w.value=!0;try{const a=await axios.post("/user/trade/cancel",{order_id:e,symbol:o,currency:s});$toast[a.type](a.message),v(),t.fetchWallet(o,1),t.fetchWallet(s,2)}catch(a){$toast.error(a.response.data.message)}finally{w.value=!1}}const A=F();async function C(){plat.kyc.kyc_status==1&&Number(plat.kyc.trading_restriction)===1&&(r.user||await r.fetch(),r.user.kyc_application||A.push("/identity"),r.user.kyc_application&&r.user.kyc_application.level<2&&r.user.kyc_application.status!=="approved"&&A.push("/identity"))}return U(()=>{C(),D(),v()}),{userStore:r,marketStore:t,currency:o,pair:s,config:y,activeItem:u,ordersRender:b,isActive:O,setActive:T,getRandomInt:P,setBestAsk:V,setBestBid:I,provide:m,fee:_,pfee:f,provider:h,orders:$,fetchOrders:v,fetchOrder:L,cancelOrder:B,loading:w,refreshing:E}}},G={style:{"font-family":"BinancePlex, Arial, sans-serif !important"}},H={class:"containered",style:{margin:"-18px -20px 3px -20px"}},J={id:"creatable",class:"Chart border border-gray-100 bg-white shadow dark:border-gray-700 dark:bg-gray-900"};function Q(r,t,k,o,s,h){const g=d("Marketinfo"),m=d("Orderbook"),_=d("Markets"),f=d("Trades"),y=d("EcoTradingview"),u=d("Tradingview"),b=d("Order"),O=d("Orders");return n(),M("div",G,[R("div",H,[(n(),l(g,{key:r.$route.params.symbol+r.$route.params.currency+"marketinfo"})),(n(),l(m,{key:r.$route.params.symbol+r.$route.params.currency+"orderbook"})),W(_,{style:{"overflow-y":"auto","overflow-x":"hidden"},type:"trade",subtype:"non"}),(n(),l(f,{key:r.$route.params.symbol+r.$route.params.currency+"trades",style:{"overflow-y":"auto","overflow-x":"hidden"}})),R("div",J,[r.ext.eco==1&&o.provider!="coinbasepro"?(n(),l(y,{key:r.$route.params.symbol+r.$route.params.currency+"eco"})):(n(),M(j,{key:1},[o.provide!=null?(n(),l(u,{key:r.$route.params.symbol+r.$route.params.currency+"tradingview",provide:o.provide},null,8,["provide"])):K("",!0)],64))]),(n(),l(b,{key:r.$route.params.symbol+r.$route.params.currency+"order",fee:o.fee,pfee:o.pfee,onOrderPlaced:t[0]||(t[0]=T=>o.fetchOrders())},null,8,["fee","pfee"]))]),(n(),l(O,{key:r.$route.params.symbol+r.$route.params.currency,orders:o.orders,"fetch-order":o.fetchOrder,"cancel-order":o.cancelOrder,loading:o.loading,refreshing:o.refreshing},null,8,["orders","fetch-order","cancel-order","loading","refreshing"]))])}const ae=x(q,[["render",Q]]);export{ae as default};
