import{W as b,P as w}from"./PurchaseModal-e45564ff.js";import{u as y}from"./ecommerce-d93c3141.js";import{_ as k,r as l,m as M,o as n,c as u,a as t,i as c,w as p,h as E,t as r,f as m,g as _,n as C,F as S,A as B,B as D}from"./bootstrap-2a895a5a.js";const T={components:{WishlistButton:b,PurchaseModal:w},props:{product:{type:Object,required:!0}},emits:["add-to-cart"],setup(){return{ecommerceStore:y()}},data(){return{showPurchaseModal:!1,isExpanded:!1,loading:!1}},computed:{productId(){return this.product.id},productName(){return this.product.name},badge(){return this.product.hot===1?"badge":""},productThumbnail(){return this.product.thumbnail!=null?"/assets/images/ecommerce/product/thumbnail/"+this.product.thumbnail:"/assets/no-image.png"},productDescription(){return this.product.description},productPrice(){return this.product.price},productOldPrice(){return this.product.discount},productDiscountedPrice(){return this.product.price-this.product.discount},productLink(){return"/marketplace/product/"+this.product.id},inWishlist(){return this.product.in_wishlist}},updated(){this.isExpanded?this.$refs.textElement.classList.remove("line-clamp-2"):this.$refs.textElement.classList.add("line-clamp-2")},methods:{expandText(){this.isExpanded=!this.isExpanded,this.isExpanded?this.$refs.textElement.classList.remove("line-clamp-2"):this.$refs.textElement.classList.add("line-clamp-2")},openPurchaseModal(){this.$emit("add-to-cart",this.product),this.showPurchaseModal=!0},closePurchaseModal(){this.showPurchaseModal=!1},purchaseProduct(){this.loading=!0,axios.post("/user/marketplace/purchase",{id:this.product.id}).then(s=>{this.$toast[s.type](s.message)}).catch(s=>{this.$toast.error(s.response.data.message)}).finally(()=>{this.loading=!1,this.closePurchaseModal(),this.ecommerceStore.fetch_products()})}}},x=s=>(B("data-v-f0643f7f"),s=s(),D(),s),z={class:"card duration-300 hover:scale-105"},H={class:"relative"},I={class:"image-container relative"},N={class:"rounded-t-lg p-8",alt:"product image"},W={class:"icon-wrapper flex items-center justify-center"},L={key:0,class:"absolute top-0 left-0 mt-1 ml-1"},O={class:"mr-2 rounded bg-red-100 px-2.5 py-0.5 text-xs font-medium text-red-800 dark:bg-red-900 dark:text-red-300"},V={class:"p-3"},j={class:"relative flex items-center"},A=x(()=>t("i",{class:"bi bi-three-dots-vertical"},null,-1)),F=[A],q={class:"card-footer flex justify-between"},G={class:"text-2xl font-bold text-gray-900 dark:text-white"},J={class:"font-normal text-gray-500 dark:text-gray-400"},K={key:0},Q=x(()=>t("svg",{"aria-hidden":"true",class:"h-5 w-5",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},[t("path",{d:"M3 1a1 1 0 000 2h1.22l.305 1.222a.997.997 0 00.01.042l1.358 5.43-.893.892C3.74 11.846 4.632 14 6.414 14H15a1 1 0 000-2H6.414l1-1H14a1 1 0 00.894-.553l3-6A1 1 0 0017 3H6.28l-.31-1.243A1 1 0 005 1H3zM16 16.5a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0zM6.5 18a1.5 1.5 0 100-3 1.5 1.5 0 000 3z"})],-1)),R=[Q];function U(s,o,a,f,d,e){const h=l("router-link"),g=l("WishlistButton"),v=l("PurchaseModal"),P=M("lazy");return n(),u(S,null,[t("div",z,[t("div",H,[t("div",I,[c(h,{to:"/marketplace/product/"+a.product.id},{default:p(()=>[E(t("img",N,null,512),[[P,e.productThumbnail]])]),_:1},8,["to"]),t("div",W,[c(g,{class:"wishlist-button absolute hidden","product-id":e.productId,"is-active":e.inWishlist},null,8,["product-id","is-active"])])]),a.product.hot===1?(n(),u("div",L,[t("span",O,r(s.$t("HOT")),1)])):m("",!0)]),t("div",V,[c(h,{to:"/marketplace/product/"+a.product.id,class:"mr-3 max-w-full text-lg font-semibold tracking-tight text-gray-900 dark:text-white sm:text-2xl md:text-3xl lg:text-3xl xl:text-3xl"},{default:p(()=>[_(r(e.productName),1)]),_:1},8,["to"]),t("div",j,[t("p",{ref:"textElement",class:C(["text-sm leading-5 text-gray-600 line-clamp-2 dark:text-gray-400",{"line-clamp-2":!d.isExpanded}])},r(e.productDescription),3),t("button",{style:{position:"fixed",top:"auto",right:"0",color:"skyblue"},onClick:o[0]||(o[0]=(...i)=>e.expandText&&e.expandText(...i))},F)])]),t("div",q,[t("span",G,[t("small",J,[e.productOldPrice>0?(n(),u("del",K,r(e.productPrice),1)):m("",!0)]),_(" $"+r(e.productOldPrice>0?e.productDiscountedPrice:e.productPrice),1)]),t("button",{type:"button",class:"btn btn-info",style:{"padding-right":"1 !important"},onClick:o[1]||(o[1]=(...i)=>e.openPurchaseModal&&e.openPurchaseModal(...i))},R)])]),c(v,{product:a.product,visible:d.showPurchaseModal,wallet:f.ecommerceStore.wallet,loading:d.loading,onClose:e.closePurchaseModal,onPurchase:e.purchaseProduct},null,8,["product","visible","wallet","loading","onClose","onPurchase"])],64)}const $=k(T,[["render",U],["__scopeId","data-v-f0643f7f"]]);export{$ as P};
