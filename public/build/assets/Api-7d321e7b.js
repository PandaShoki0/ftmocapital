import{_ as f,o as d,c as r,a as e,n as m,t as o,g as h,f as k,q as y,h as c,W as _,$ as u,F as v,d as g}from"./bootstrap-2a895a5a.js";import"./_commonjsHelpers-de833af9.js";import"./browser-77dd377d.js";import"./preload-helper-f61836a9.js";import"./axios-4a70c6fc.js";const w={data(){return{tokens:[],status:[],abilities:[],newabilities:[],edit:null,newAPI:!1,newApiTitle:null}},created(){this.fetch()},mounted(){},methods:{async fetch(){await axios.get("/user/fetch/api/tokens").then(s=>{this.tokens=s.tokens,this.tokens.forEach(i=>{this.status.push({id:i.id,token:!1,edit:!1})})})},async editApi(s,i){await axios.post("/user/api/tokens/edit",{token:s.id,abilities:this.abilities}).then(b=>{this.fetch(),this.$toast[b.type](b.message)}).catch(b=>{this.$toast.error(b.response.data.message)}).finally(()=>{this.status[i].edit=!1,this.abilities=[]})},async createApi(){await axios.post("/user/api/tokens/store",{name:this.newApiTitle,abilities:this.newabilities}).then(s=>{this.fetch(),this.$toast[s.type](s.message)}).catch(s=>{this.$toast.error(s.response.data.message)}).finally(()=>{this.newAPI=!1,this.newApiTitle=null,this.newabilities=[]})},async deleteApi(s){await axios.post("/user/api/tokens/delete",{id:s}).then(i=>{this.fetch(),this.$toast[i.type](i.message)}).catch(i=>{this.$toast.error(i.response.data.message)})},selectedToken(s,i){this.edit=this.edit==i?null:i,this.status[i].edit=!this.status[i].edit,this.abilities=s.abilities}}},x={class:"card"},A={class:"card-title"},C={class:"title-gradient"},P={class:"space-x-2"},T={key:0},I=e("i",{class:"bi bi-plus-lg"},null,-1),V={key:1},U=e("i",{class:"bi bi-x-lg"},null,-1),D={class:"btn btn-outline-success",href:"/docs/api",target:"_blank"},S=e("i",{class:"bi bi-file-earmark-medical"},null,-1),E={class:"card-body"},M={class:"list-disc px-4 py-3"},j={class:"flex justify-between"},B={class:"text-medium mb-2 text-xl text-blue-500"},K={type:"submit",class:"btn btn-outline-success btn-sm"},N={class:"my-5 max-w-sm"},W={for:"newApiTitle"},q={class:"grid gap-4 py-3 xs:grid-cols-2 md:grid-cols-4"},F={class:"flex space-x-2"},z={for:"default-checkbox"},L={class:"flex space-x-2"},Y={for:"default-checkbox"},G={class:"flex space-x-2"},H={for:"default-checkbox"},J={class:"space-y-5"},O={key:0},Q={class:"rounded border border-gray-300 p-1 dark:border-gray-600"},R=["onClick"],X={key:1},Z={class:"ml-2 rounded border border-gray-300 p-1 dark:border-gray-600"},$=["onClick"],ee={class:"space-x-2"},te=["disabled","onClick"],se=["onClick"],ie=["onSubmit"],oe={class:"flex justify-between"},le={class:"text-medium mb-2 text-xl text-blue-500"},ne={type:"submit",class:"btn btn-outline-success btn-sm"},ae={class:"grid gap-4 py-3 xs:grid-cols-2 md:grid-cols-4"},de={class:"flex space-x-2"},re=["checked"],ce={for:"default-checkbox"},ue={class:"flex space-x-2"},be=["checked"],he={for:"default-checkbox"},pe={class:"flex space-x-2"},ke=["checked"],me={for:"default-checkbox"};function ye(s,i,b,fe,t,p){return d(),r("div",null,[e("div",x,[e("div",{class:m(["card-header",t.tokens.length<=10?"flex justify-between":""])},[e("div",A,[e("div",C,o(s.$t("API Management")),1)]),e("div",P,[t.tokens.length<=10?(d(),r("button",{key:0,type:"submit",class:m(["btn",t.newAPI==!1?"btn-outline-primary":"btn-outline-danger"]),onClick:i[0]||(i[0]=l=>t.newAPI=!t.newAPI)},[t.newAPI==!1?(d(),r("span",T,[I,h(o(s.$t("Create API")),1)])):(d(),r("span",V,[U,h(o(s.$t("Close")),1)]))],2)):k("",!0),e("a",D,[S,h(" "+o(s.$t("API Docs")),1)])])],2),e("div",E,[e("ul",M,[e("li",null,o(s.$t("Each account can create up to 30 API Keys"))+".",1),e("li",null,o(s.$t("Do not disclose your API Key to anyone to avoid asset losses. You should treat your API Key like your passwords"))+". ",1)]),t.newAPI==!0?(d(),r("div",{key:t.newAPI,class:"my-5 rounded border border-gray-300 p-5 dark:border-gray-600"},[e("form",{method:"post",onSubmit:i[5]||(i[5]=y(l=>p.createApi(),["prevent"]))},[e("div",j,[e("div",B,o(s.$t("Permissions")),1),e("div",null,[e("button",K,o(s.$t("Create")),1)])]),e("div",N,[e("label",W,o(s.$t("Token Title")),1),c(e("input",{"onUpdate:modelValue":i[1]||(i[1]=l=>t.newApiTitle=l),type:"text",class:"form-control",required:""},null,512),[[_,t.newApiTitle]])]),e("div",q,[e("div",F,[c(e("input",{id:"default-checkbox","onUpdate:modelValue":i[2]||(i[2]=l=>t.newabilities=l),type:"checkbox",value:"trading"},null,512),[[u,t.newabilities]]),e("label",z,o(s.$t("Trading")),1)]),e("div",L,[c(e("input",{id:"default-checkbox","onUpdate:modelValue":i[3]||(i[3]=l=>t.newabilities=l),type:"checkbox",value:"transfer"},null,512),[[u,t.newabilities]]),e("label",Y,o(s.$t("Transfer")),1)]),e("div",G,[c(e("input",{id:"default-checkbox","onUpdate:modelValue":i[4]||(i[4]=l=>t.newabilities=l),type:"checkbox",value:"withdraw"},null,512),[[u,t.newabilities]]),e("label",H,o(s.$t("Withdraw")),1)])])],32)])):k("",!0),e("div",J,[t.tokens.length>0?(d(!0),r(v,{key:0},g(t.tokens,(l,n)=>(d(),r("div",{key:n,class:"rounded border border-gray-300 dark:border-gray-600"},[e("div",{class:m(["grid gap-5 xs:grid-cols-1 md:grid-cols-3 px-4 py-3",t.status[n].edit==!0?"border-b border-gray-300 dark:border-gray-600":""])},[e("div",null,o(l.name),1),(d(),r("div",{key:t.status[n].token},[t.status[n].token==!1?(d(),r("span",O,[h("***************** "),e("a",Q,[e("i",{class:"bi bi-eye px-1",style:{"margin-right":"0 !important"},onClick:a=>t.status[n].token=!t.status[n].token},null,8,R)])])):(d(),r("span",X,[h(o(l.token),1),e("a",Z,[e("i",{class:"bi bi-eye-slash px-1 text-red-500",style:{"margin-right":"0 !important"},onClick:a=>t.status[n].token=!t.status[n].token},null,8,$)])]))])),e("div",ee,[e("button",{type:"button",class:"btn btn-outline-warning btn-sm",disabled:t.edit!==n&&t.edit!==null,onClick:a=>p.selectedToken(l,n)},o(s.$t("Edit")),9,te),e("button",{type:"button",class:"btn btn-outline-danger btn-sm",onClick:a=>p.deleteApi(l.id)},o(s.$t("Delete")),9,se)])],2),t.status[n].edit==!0?(d(),r("div",{key:t.status[n].edit,class:"space-y-3 px-4 py-3"},[e("form",{method:"post",onSubmit:y(a=>p.editApi(l,n),["prevent"])},[e("div",oe,[e("div",le,o(s.$t("Permissions")),1),e("div",null,[e("button",ne,o(s.$t("Save")),1)])]),e("div",ae,[e("div",de,[c(e("input",{id:"default-checkbox","onUpdate:modelValue":i[6]||(i[6]=a=>t.abilities=a),type:"checkbox",checked:t.abilities.includes("trading"),value:"trading"},null,8,re),[[u,t.abilities]]),e("label",ce,o(s.$t("Trading")),1)]),e("div",ue,[c(e("input",{id:"default-checkbox","onUpdate:modelValue":i[7]||(i[7]=a=>t.abilities=a),type:"checkbox",checked:t.abilities.includes("transfer"),value:"transfer"},null,8,be),[[u,t.abilities]]),e("label",he,o(s.$t("Transfer")),1)]),e("div",pe,[c(e("input",{id:"default-checkbox","onUpdate:modelValue":i[8]||(i[8]=a=>t.abilities=a),type:"checkbox",checked:t.abilities.includes("withdraw"),value:"withdraw",onClick:i[9]||(i[9]=a=>s.value=!s.value)},null,8,ke),[[u,t.abilities]]),e("label",me,o(s.$t("Withdraw")),1)])])],40,ie)])):k("",!0)]))),128)):k("",!0)])])])])}const Ae=f(w,[["render",ye]]);export{Ae as default};
