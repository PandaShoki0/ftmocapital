import{_ as eb}from"./preload-helper-f61836a9.js";import{g as ia,a as na,c as Yr}from"./_commonjsHelpers-de833af9.js";import{x as tb}from"./index-879345db.js";var Bu={exports:{}},$n=typeof Reflect=="object"?Reflect:null,hf=$n&&typeof $n.apply=="function"?$n.apply:function(e,t,s){return Function.prototype.apply.call(e,t,s)},Ho;$n&&typeof $n.ownKeys=="function"?Ho=$n.ownKeys:Object.getOwnPropertySymbols?Ho=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Ho=function(e){return Object.getOwnPropertyNames(e)};function rb(i){console&&console.warn&&console.warn(i)}var Yd=Number.isNaN||function(e){return e!==e};function st(){st.init.call(this)}Bu.exports=st;Bu.exports.once=ob;st.EventEmitter=st;st.prototype._events=void 0;st.prototype._eventsCount=0;st.prototype._maxListeners=void 0;var lf=10;function sa(i){if(typeof i!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof i)}Object.defineProperty(st,"defaultMaxListeners",{enumerable:!0,get:function(){return lf},set:function(i){if(typeof i!="number"||i<0||Yd(i))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+i+".");lf=i}});st.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};st.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||Yd(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function Jd(i){return i._maxListeners===void 0?st.defaultMaxListeners:i._maxListeners}st.prototype.getMaxListeners=function(){return Jd(this)};st.prototype.emit=function(e){for(var t=[],s=1;s<arguments.length;s++)t.push(arguments[s]);var o=e==="error",c=this._events;if(c!==void 0)o=o&&c.error===void 0;else if(!o)return!1;if(o){var l;if(t.length>0&&(l=t[0]),l instanceof Error)throw l;var d=new Error("Unhandled error."+(l?" ("+l.message+")":""));throw d.context=l,d}var g=c[e];if(g===void 0)return!1;if(typeof g=="function")hf(g,this,t);else for(var p=g.length,v=tp(g,p),s=0;s<p;++s)hf(v[s],this,t);return!0};function Xd(i,e,t,s){var o,c,l;if(sa(t),c=i._events,c===void 0?(c=i._events=Object.create(null),i._eventsCount=0):(c.newListener!==void 0&&(i.emit("newListener",e,t.listener?t.listener:t),c=i._events),l=c[e]),l===void 0)l=c[e]=t,++i._eventsCount;else if(typeof l=="function"?l=c[e]=s?[t,l]:[l,t]:s?l.unshift(t):l.push(t),o=Jd(i),o>0&&l.length>o&&!l.warned){l.warned=!0;var d=new Error("Possible EventEmitter memory leak detected. "+l.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");d.name="MaxListenersExceededWarning",d.emitter=i,d.type=e,d.count=l.length,rb(d)}return i}st.prototype.addListener=function(e,t){return Xd(this,e,t,!1)};st.prototype.on=st.prototype.addListener;st.prototype.prependListener=function(e,t){return Xd(this,e,t,!0)};function ib(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function Zd(i,e,t){var s={fired:!1,wrapFn:void 0,target:i,type:e,listener:t},o=ib.bind(s);return o.listener=t,s.wrapFn=o,o}st.prototype.once=function(e,t){return sa(t),this.on(e,Zd(this,e,t)),this};st.prototype.prependOnceListener=function(e,t){return sa(t),this.prependListener(e,Zd(this,e,t)),this};st.prototype.removeListener=function(e,t){var s,o,c,l,d;if(sa(t),o=this._events,o===void 0)return this;if(s=o[e],s===void 0)return this;if(s===t||s.listener===t)--this._eventsCount===0?this._events=Object.create(null):(delete o[e],o.removeListener&&this.emit("removeListener",e,s.listener||t));else if(typeof s!="function"){for(c=-1,l=s.length-1;l>=0;l--)if(s[l]===t||s[l].listener===t){d=s[l].listener,c=l;break}if(c<0)return this;c===0?s.shift():nb(s,c),s.length===1&&(o[e]=s[0]),o.removeListener!==void 0&&this.emit("removeListener",e,d||t)}return this};st.prototype.off=st.prototype.removeListener;st.prototype.removeAllListeners=function(e){var t,s,o;if(s=this._events,s===void 0)return this;if(s.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):s[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete s[e]),this;if(arguments.length===0){var c=Object.keys(s),l;for(o=0;o<c.length;++o)l=c[o],l!=="removeListener"&&this.removeAllListeners(l);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(t=s[e],typeof t=="function")this.removeListener(e,t);else if(t!==void 0)for(o=t.length-1;o>=0;o--)this.removeListener(e,t[o]);return this};function Qd(i,e,t){var s=i._events;if(s===void 0)return[];var o=s[e];return o===void 0?[]:typeof o=="function"?t?[o.listener||o]:[o]:t?sb(o):tp(o,o.length)}st.prototype.listeners=function(e){return Qd(this,e,!0)};st.prototype.rawListeners=function(e){return Qd(this,e,!1)};st.listenerCount=function(i,e){return typeof i.listenerCount=="function"?i.listenerCount(e):ep.call(i,e)};st.prototype.listenerCount=ep;function ep(i){var e=this._events;if(e!==void 0){var t=e[i];if(typeof t=="function")return 1;if(t!==void 0)return t.length}return 0}st.prototype.eventNames=function(){return this._eventsCount>0?Ho(this._events):[]};function tp(i,e){for(var t=new Array(e),s=0;s<e;++s)t[s]=i[s];return t}function nb(i,e){for(;e+1<i.length;e++)i[e]=i[e+1];i.pop()}function sb(i){for(var e=new Array(i.length),t=0;t<e.length;++t)e[t]=i[t].listener||i[t];return e}function ob(i,e){return new Promise(function(t,s){function o(l){i.removeListener(e,c),s(l)}function c(){typeof i.removeListener=="function"&&i.removeListener("error",o),t([].slice.call(arguments))}rp(i,e,c,{once:!0}),e!=="error"&&ab(i,o,{once:!0})})}function ab(i,e,t){typeof i.on=="function"&&rp(i,"error",e,t)}function rp(i,e,t,s){if(typeof i.on=="function")s.once?i.once(e,t):i.on(e,t);else if(typeof i.addEventListener=="function")i.addEventListener(e,function o(c){s.once&&i.removeEventListener(e,o),t(c)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof i)}var mr=Bu.exports;const zu=ia(mr);var qu={},oa={},Ue={},ip={};(function(i){Object.defineProperty(i,"__esModule",{value:!0});function e(d,g){var p=d>>>16&65535,v=d&65535,b=g>>>16&65535,S=g&65535;return v*S+(p*S+v*b<<16>>>0)|0}i.mul=Math.imul||e;function t(d,g){return d+g|0}i.add=t;function s(d,g){return d-g|0}i.sub=s;function o(d,g){return d<<g|d>>>32-g}i.rotl=o;function c(d,g){return d<<32-g|d>>>g}i.rotr=c;function l(d){return typeof d=="number"&&isFinite(d)&&Math.floor(d)===d}i.isInteger=Number.isInteger||l,i.MAX_SAFE_INTEGER=9007199254740991,i.isSafeInteger=function(d){return i.isInteger(d)&&d>=-i.MAX_SAFE_INTEGER&&d<=i.MAX_SAFE_INTEGER}})(ip);Object.defineProperty(Ue,"__esModule",{value:!0});var np=ip;function cb(i,e){return e===void 0&&(e=0),(i[e+0]<<8|i[e+1])<<16>>16}Ue.readInt16BE=cb;function ub(i,e){return e===void 0&&(e=0),(i[e+0]<<8|i[e+1])>>>0}Ue.readUint16BE=ub;function hb(i,e){return e===void 0&&(e=0),(i[e+1]<<8|i[e])<<16>>16}Ue.readInt16LE=hb;function lb(i,e){return e===void 0&&(e=0),(i[e+1]<<8|i[e])>>>0}Ue.readUint16LE=lb;function sp(i,e,t){return e===void 0&&(e=new Uint8Array(2)),t===void 0&&(t=0),e[t+0]=i>>>8,e[t+1]=i>>>0,e}Ue.writeUint16BE=sp;Ue.writeInt16BE=sp;function op(i,e,t){return e===void 0&&(e=new Uint8Array(2)),t===void 0&&(t=0),e[t+0]=i>>>0,e[t+1]=i>>>8,e}Ue.writeUint16LE=op;Ue.writeInt16LE=op;function lu(i,e){return e===void 0&&(e=0),i[e]<<24|i[e+1]<<16|i[e+2]<<8|i[e+3]}Ue.readInt32BE=lu;function fu(i,e){return e===void 0&&(e=0),(i[e]<<24|i[e+1]<<16|i[e+2]<<8|i[e+3])>>>0}Ue.readUint32BE=fu;function du(i,e){return e===void 0&&(e=0),i[e+3]<<24|i[e+2]<<16|i[e+1]<<8|i[e]}Ue.readInt32LE=du;function pu(i,e){return e===void 0&&(e=0),(i[e+3]<<24|i[e+2]<<16|i[e+1]<<8|i[e])>>>0}Ue.readUint32LE=pu;function Yo(i,e,t){return e===void 0&&(e=new Uint8Array(4)),t===void 0&&(t=0),e[t+0]=i>>>24,e[t+1]=i>>>16,e[t+2]=i>>>8,e[t+3]=i>>>0,e}Ue.writeUint32BE=Yo;Ue.writeInt32BE=Yo;function Jo(i,e,t){return e===void 0&&(e=new Uint8Array(4)),t===void 0&&(t=0),e[t+0]=i>>>0,e[t+1]=i>>>8,e[t+2]=i>>>16,e[t+3]=i>>>24,e}Ue.writeUint32LE=Jo;Ue.writeInt32LE=Jo;function fb(i,e){e===void 0&&(e=0);var t=lu(i,e),s=lu(i,e+4);return t*4294967296+s-(s>>31)*4294967296}Ue.readInt64BE=fb;function db(i,e){e===void 0&&(e=0);var t=fu(i,e),s=fu(i,e+4);return t*4294967296+s}Ue.readUint64BE=db;function pb(i,e){e===void 0&&(e=0);var t=du(i,e),s=du(i,e+4);return s*4294967296+t-(t>>31)*4294967296}Ue.readInt64LE=pb;function gb(i,e){e===void 0&&(e=0);var t=pu(i,e),s=pu(i,e+4);return s*4294967296+t}Ue.readUint64LE=gb;function ap(i,e,t){return e===void 0&&(e=new Uint8Array(8)),t===void 0&&(t=0),Yo(i/4294967296>>>0,e,t),Yo(i>>>0,e,t+4),e}Ue.writeUint64BE=ap;Ue.writeInt64BE=ap;function cp(i,e,t){return e===void 0&&(e=new Uint8Array(8)),t===void 0&&(t=0),Jo(i>>>0,e,t),Jo(i/4294967296>>>0,e,t+4),e}Ue.writeUint64LE=cp;Ue.writeInt64LE=cp;function yb(i,e,t){if(t===void 0&&(t=0),i%8!==0)throw new Error("readUintBE supports only bitLengths divisible by 8");if(i/8>e.length-t)throw new Error("readUintBE: array is too short for the given bitLength");for(var s=0,o=1,c=i/8+t-1;c>=t;c--)s+=e[c]*o,o*=256;return s}Ue.readUintBE=yb;function vb(i,e,t){if(t===void 0&&(t=0),i%8!==0)throw new Error("readUintLE supports only bitLengths divisible by 8");if(i/8>e.length-t)throw new Error("readUintLE: array is too short for the given bitLength");for(var s=0,o=1,c=t;c<t+i/8;c++)s+=e[c]*o,o*=256;return s}Ue.readUintLE=vb;function _b(i,e,t,s){if(t===void 0&&(t=new Uint8Array(i/8)),s===void 0&&(s=0),i%8!==0)throw new Error("writeUintBE supports only bitLengths divisible by 8");if(!np.isSafeInteger(e))throw new Error("writeUintBE value must be an integer");for(var o=1,c=i/8+s-1;c>=s;c--)t[c]=e/o&255,o*=256;return t}Ue.writeUintBE=_b;function mb(i,e,t,s){if(t===void 0&&(t=new Uint8Array(i/8)),s===void 0&&(s=0),i%8!==0)throw new Error("writeUintLE supports only bitLengths divisible by 8");if(!np.isSafeInteger(e))throw new Error("writeUintLE value must be an integer");for(var o=1,c=s;c<s+i/8;c++)t[c]=e/o&255,o*=256;return t}Ue.writeUintLE=mb;function bb(i,e){e===void 0&&(e=0);var t=new DataView(i.buffer,i.byteOffset,i.byteLength);return t.getFloat32(e)}Ue.readFloat32BE=bb;function wb(i,e){e===void 0&&(e=0);var t=new DataView(i.buffer,i.byteOffset,i.byteLength);return t.getFloat32(e,!0)}Ue.readFloat32LE=wb;function Eb(i,e){e===void 0&&(e=0);var t=new DataView(i.buffer,i.byteOffset,i.byteLength);return t.getFloat64(e)}Ue.readFloat64BE=Eb;function Db(i,e){e===void 0&&(e=0);var t=new DataView(i.buffer,i.byteOffset,i.byteLength);return t.getFloat64(e,!0)}Ue.readFloat64LE=Db;function Sb(i,e,t){e===void 0&&(e=new Uint8Array(4)),t===void 0&&(t=0);var s=new DataView(e.buffer,e.byteOffset,e.byteLength);return s.setFloat32(t,i),e}Ue.writeFloat32BE=Sb;function Ib(i,e,t){e===void 0&&(e=new Uint8Array(4)),t===void 0&&(t=0);var s=new DataView(e.buffer,e.byteOffset,e.byteLength);return s.setFloat32(t,i,!0),e}Ue.writeFloat32LE=Ib;function xb(i,e,t){e===void 0&&(e=new Uint8Array(8)),t===void 0&&(t=0);var s=new DataView(e.buffer,e.byteOffset,e.byteLength);return s.setFloat64(t,i),e}Ue.writeFloat64BE=xb;function Ob(i,e,t){e===void 0&&(e=new Uint8Array(8)),t===void 0&&(t=0);var s=new DataView(e.buffer,e.byteOffset,e.byteLength);return s.setFloat64(t,i,!0),e}Ue.writeFloat64LE=Ob;var Or={};Object.defineProperty(Or,"__esModule",{value:!0});function Pb(i){for(var e=0;e<i.length;e++)i[e]=0;return i}Or.wipe=Pb;Object.defineProperty(oa,"__esModule",{value:!0});var er=Ue,gu=Or,Ab=20;function Cb(i,e,t){for(var s=1634760805,o=857760878,c=2036477234,l=1797285236,d=t[3]<<24|t[2]<<16|t[1]<<8|t[0],g=t[7]<<24|t[6]<<16|t[5]<<8|t[4],p=t[11]<<24|t[10]<<16|t[9]<<8|t[8],v=t[15]<<24|t[14]<<16|t[13]<<8|t[12],b=t[19]<<24|t[18]<<16|t[17]<<8|t[16],S=t[23]<<24|t[22]<<16|t[21]<<8|t[20],O=t[27]<<24|t[26]<<16|t[25]<<8|t[24],I=t[31]<<24|t[30]<<16|t[29]<<8|t[28],K=e[3]<<24|e[2]<<16|e[1]<<8|e[0],H=e[7]<<24|e[6]<<16|e[5]<<8|e[4],re=e[11]<<24|e[10]<<16|e[9]<<8|e[8],$=e[15]<<24|e[14]<<16|e[13]<<8|e[12],U=s,x=o,C=c,T=l,h=d,w=g,Q=p,ne=v,ue=b,ge=S,ye=O,D=I,N=K,Z=H,J=re,V=$,k=0;k<Ab;k+=2)U=U+h|0,N^=U,N=N>>>32-16|N<<16,ue=ue+N|0,h^=ue,h=h>>>32-12|h<<12,x=x+w|0,Z^=x,Z=Z>>>32-16|Z<<16,ge=ge+Z|0,w^=ge,w=w>>>32-12|w<<12,C=C+Q|0,J^=C,J=J>>>32-16|J<<16,ye=ye+J|0,Q^=ye,Q=Q>>>32-12|Q<<12,T=T+ne|0,V^=T,V=V>>>32-16|V<<16,D=D+V|0,ne^=D,ne=ne>>>32-12|ne<<12,C=C+Q|0,J^=C,J=J>>>32-8|J<<8,ye=ye+J|0,Q^=ye,Q=Q>>>32-7|Q<<7,T=T+ne|0,V^=T,V=V>>>32-8|V<<8,D=D+V|0,ne^=D,ne=ne>>>32-7|ne<<7,x=x+w|0,Z^=x,Z=Z>>>32-8|Z<<8,ge=ge+Z|0,w^=ge,w=w>>>32-7|w<<7,U=U+h|0,N^=U,N=N>>>32-8|N<<8,ue=ue+N|0,h^=ue,h=h>>>32-7|h<<7,U=U+w|0,V^=U,V=V>>>32-16|V<<16,ye=ye+V|0,w^=ye,w=w>>>32-12|w<<12,x=x+Q|0,N^=x,N=N>>>32-16|N<<16,D=D+N|0,Q^=D,Q=Q>>>32-12|Q<<12,C=C+ne|0,Z^=C,Z=Z>>>32-16|Z<<16,ue=ue+Z|0,ne^=ue,ne=ne>>>32-12|ne<<12,T=T+h|0,J^=T,J=J>>>32-16|J<<16,ge=ge+J|0,h^=ge,h=h>>>32-12|h<<12,C=C+ne|0,Z^=C,Z=Z>>>32-8|Z<<8,ue=ue+Z|0,ne^=ue,ne=ne>>>32-7|ne<<7,T=T+h|0,J^=T,J=J>>>32-8|J<<8,ge=ge+J|0,h^=ge,h=h>>>32-7|h<<7,x=x+Q|0,N^=x,N=N>>>32-8|N<<8,D=D+N|0,Q^=D,Q=Q>>>32-7|Q<<7,U=U+w|0,V^=U,V=V>>>32-8|V<<8,ye=ye+V|0,w^=ye,w=w>>>32-7|w<<7;er.writeUint32LE(U+s|0,i,0),er.writeUint32LE(x+o|0,i,4),er.writeUint32LE(C+c|0,i,8),er.writeUint32LE(T+l|0,i,12),er.writeUint32LE(h+d|0,i,16),er.writeUint32LE(w+g|0,i,20),er.writeUint32LE(Q+p|0,i,24),er.writeUint32LE(ne+v|0,i,28),er.writeUint32LE(ue+b|0,i,32),er.writeUint32LE(ge+S|0,i,36),er.writeUint32LE(ye+O|0,i,40),er.writeUint32LE(D+I|0,i,44),er.writeUint32LE(N+K|0,i,48),er.writeUint32LE(Z+H|0,i,52),er.writeUint32LE(J+re|0,i,56),er.writeUint32LE(V+$|0,i,60)}function up(i,e,t,s,o){if(o===void 0&&(o=0),i.length!==32)throw new Error("ChaCha: key size must be 32 bytes");if(s.length<t.length)throw new Error("ChaCha: destination is shorter than source");var c,l;if(o===0){if(e.length!==8&&e.length!==12)throw new Error("ChaCha nonce must be 8 or 12 bytes");c=new Uint8Array(16),l=c.length-e.length,c.set(e,l)}else{if(e.length!==16)throw new Error("ChaCha nonce with counter must be 16 bytes");c=e,l=o}for(var d=new Uint8Array(64),g=0;g<t.length;g+=64){Cb(d,c,i);for(var p=g;p<g+64&&p<t.length;p++)s[p]=t[p]^d[p-g];Nb(c,0,l)}return gu.wipe(d),o===0&&gu.wipe(c),s}oa.streamXOR=up;function Tb(i,e,t,s){return s===void 0&&(s=0),gu.wipe(t),up(i,e,t,t,s)}oa.stream=Tb;function Nb(i,e,t){for(var s=1;t--;)s=s+(i[e]&255)|0,i[e]=s&255,s>>>=8,e++;if(s>0)throw new Error("ChaCha: counter overflow")}var hp={},Ui={};Object.defineProperty(Ui,"__esModule",{value:!0});function Rb(i,e,t){return~(i-1)&e|i-1&t}Ui.select=Rb;function $b(i,e){return(i|0)-(e|0)-1>>>31&1}Ui.lessOrEqual=$b;function lp(i,e){if(i.length!==e.length)return 0;for(var t=0,s=0;s<i.length;s++)t|=i[s]^e[s];return 1&t-1>>>8}Ui.compare=lp;function Fb(i,e){return i.length===0||e.length===0?!1:lp(i,e)!==0}Ui.equal=Fb;(function(i){Object.defineProperty(i,"__esModule",{value:!0});var e=Ui,t=Or;i.DIGEST_LENGTH=16;var s=function(){function l(d){this.digestLength=i.DIGEST_LENGTH,this._buffer=new Uint8Array(16),this._r=new Uint16Array(10),this._h=new Uint16Array(10),this._pad=new Uint16Array(8),this._leftover=0,this._fin=0,this._finished=!1;var g=d[0]|d[1]<<8;this._r[0]=g&8191;var p=d[2]|d[3]<<8;this._r[1]=(g>>>13|p<<3)&8191;var v=d[4]|d[5]<<8;this._r[2]=(p>>>10|v<<6)&7939;var b=d[6]|d[7]<<8;this._r[3]=(v>>>7|b<<9)&8191;var S=d[8]|d[9]<<8;this._r[4]=(b>>>4|S<<12)&255,this._r[5]=S>>>1&8190;var O=d[10]|d[11]<<8;this._r[6]=(S>>>14|O<<2)&8191;var I=d[12]|d[13]<<8;this._r[7]=(O>>>11|I<<5)&8065;var K=d[14]|d[15]<<8;this._r[8]=(I>>>8|K<<8)&8191,this._r[9]=K>>>5&127,this._pad[0]=d[16]|d[17]<<8,this._pad[1]=d[18]|d[19]<<8,this._pad[2]=d[20]|d[21]<<8,this._pad[3]=d[22]|d[23]<<8,this._pad[4]=d[24]|d[25]<<8,this._pad[5]=d[26]|d[27]<<8,this._pad[6]=d[28]|d[29]<<8,this._pad[7]=d[30]|d[31]<<8}return l.prototype._blocks=function(d,g,p){for(var v=this._fin?0:2048,b=this._h[0],S=this._h[1],O=this._h[2],I=this._h[3],K=this._h[4],H=this._h[5],re=this._h[6],$=this._h[7],U=this._h[8],x=this._h[9],C=this._r[0],T=this._r[1],h=this._r[2],w=this._r[3],Q=this._r[4],ne=this._r[5],ue=this._r[6],ge=this._r[7],ye=this._r[8],D=this._r[9];p>=16;){var N=d[g+0]|d[g+1]<<8;b+=N&8191;var Z=d[g+2]|d[g+3]<<8;S+=(N>>>13|Z<<3)&8191;var J=d[g+4]|d[g+5]<<8;O+=(Z>>>10|J<<6)&8191;var V=d[g+6]|d[g+7]<<8;I+=(J>>>7|V<<9)&8191;var k=d[g+8]|d[g+9]<<8;K+=(V>>>4|k<<12)&8191,H+=k>>>1&8191;var ee=d[g+10]|d[g+11]<<8;re+=(k>>>14|ee<<2)&8191;var ie=d[g+12]|d[g+13]<<8;$+=(ee>>>11|ie<<5)&8191;var De=d[g+14]|d[g+15]<<8;U+=(ie>>>8|De<<8)&8191,x+=De>>>5|v;var oe=0,Se=oe;Se+=b*C,Se+=S*(5*D),Se+=O*(5*ye),Se+=I*(5*ge),Se+=K*(5*ue),oe=Se>>>13,Se&=8191,Se+=H*(5*ne),Se+=re*(5*Q),Se+=$*(5*w),Se+=U*(5*h),Se+=x*(5*T),oe+=Se>>>13,Se&=8191;var le=oe;le+=b*T,le+=S*C,le+=O*(5*D),le+=I*(5*ye),le+=K*(5*ge),oe=le>>>13,le&=8191,le+=H*(5*ue),le+=re*(5*ne),le+=$*(5*Q),le+=U*(5*w),le+=x*(5*h),oe+=le>>>13,le&=8191;var Ce=oe;Ce+=b*h,Ce+=S*T,Ce+=O*C,Ce+=I*(5*D),Ce+=K*(5*ye),oe=Ce>>>13,Ce&=8191,Ce+=H*(5*ge),Ce+=re*(5*ue),Ce+=$*(5*ne),Ce+=U*(5*Q),Ce+=x*(5*w),oe+=Ce>>>13,Ce&=8191;var z=oe;z+=b*w,z+=S*h,z+=O*T,z+=I*C,z+=K*(5*D),oe=z>>>13,z&=8191,z+=H*(5*ye),z+=re*(5*ge),z+=$*(5*ue),z+=U*(5*ne),z+=x*(5*Q),oe+=z>>>13,z&=8191;var B=oe;B+=b*Q,B+=S*w,B+=O*h,B+=I*T,B+=K*C,oe=B>>>13,B&=8191,B+=H*(5*D),B+=re*(5*ye),B+=$*(5*ge),B+=U*(5*ue),B+=x*(5*ne),oe+=B>>>13,B&=8191;var F=oe;F+=b*ne,F+=S*Q,F+=O*w,F+=I*h,F+=K*T,oe=F>>>13,F&=8191,F+=H*C,F+=re*(5*D),F+=$*(5*ye),F+=U*(5*ge),F+=x*(5*ue),oe+=F>>>13,F&=8191;var f=oe;f+=b*ue,f+=S*ne,f+=O*Q,f+=I*w,f+=K*h,oe=f>>>13,f&=8191,f+=H*T,f+=re*C,f+=$*(5*D),f+=U*(5*ye),f+=x*(5*ge),oe+=f>>>13,f&=8191;var A=oe;A+=b*ge,A+=S*ue,A+=O*ne,A+=I*Q,A+=K*w,oe=A>>>13,A&=8191,A+=H*h,A+=re*T,A+=$*C,A+=U*(5*D),A+=x*(5*ye),oe+=A>>>13,A&=8191;var se=oe;se+=b*ye,se+=S*ge,se+=O*ue,se+=I*ne,se+=K*Q,oe=se>>>13,se&=8191,se+=H*w,se+=re*h,se+=$*T,se+=U*C,se+=x*(5*D),oe+=se>>>13,se&=8191;var he=oe;he+=b*D,he+=S*ye,he+=O*ge,he+=I*ue,he+=K*ne,oe=he>>>13,he&=8191,he+=H*Q,he+=re*w,he+=$*h,he+=U*T,he+=x*C,oe+=he>>>13,he&=8191,oe=(oe<<2)+oe|0,oe=oe+Se|0,Se=oe&8191,oe=oe>>>13,le+=oe,b=Se,S=le,O=Ce,I=z,K=B,H=F,re=f,$=A,U=se,x=he,g+=16,p-=16}this._h[0]=b,this._h[1]=S,this._h[2]=O,this._h[3]=I,this._h[4]=K,this._h[5]=H,this._h[6]=re,this._h[7]=$,this._h[8]=U,this._h[9]=x},l.prototype.finish=function(d,g){g===void 0&&(g=0);var p=new Uint16Array(10),v,b,S,O;if(this._leftover){for(O=this._leftover,this._buffer[O++]=1;O<16;O++)this._buffer[O]=0;this._fin=1,this._blocks(this._buffer,0,16)}for(v=this._h[1]>>>13,this._h[1]&=8191,O=2;O<10;O++)this._h[O]+=v,v=this._h[O]>>>13,this._h[O]&=8191;for(this._h[0]+=v*5,v=this._h[0]>>>13,this._h[0]&=8191,this._h[1]+=v,v=this._h[1]>>>13,this._h[1]&=8191,this._h[2]+=v,p[0]=this._h[0]+5,v=p[0]>>>13,p[0]&=8191,O=1;O<10;O++)p[O]=this._h[O]+v,v=p[O]>>>13,p[O]&=8191;for(p[9]-=8192,b=(v^1)-1,O=0;O<10;O++)p[O]&=b;for(b=~b,O=0;O<10;O++)this._h[O]=this._h[O]&b|p[O];for(this._h[0]=(this._h[0]|this._h[1]<<13)&65535,this._h[1]=(this._h[1]>>>3|this._h[2]<<10)&65535,this._h[2]=(this._h[2]>>>6|this._h[3]<<7)&65535,this._h[3]=(this._h[3]>>>9|this._h[4]<<4)&65535,this._h[4]=(this._h[4]>>>12|this._h[5]<<1|this._h[6]<<14)&65535,this._h[5]=(this._h[6]>>>2|this._h[7]<<11)&65535,this._h[6]=(this._h[7]>>>5|this._h[8]<<8)&65535,this._h[7]=(this._h[8]>>>8|this._h[9]<<5)&65535,S=this._h[0]+this._pad[0],this._h[0]=S&65535,O=1;O<8;O++)S=(this._h[O]+this._pad[O]|0)+(S>>>16)|0,this._h[O]=S&65535;return d[g+0]=this._h[0]>>>0,d[g+1]=this._h[0]>>>8,d[g+2]=this._h[1]>>>0,d[g+3]=this._h[1]>>>8,d[g+4]=this._h[2]>>>0,d[g+5]=this._h[2]>>>8,d[g+6]=this._h[3]>>>0,d[g+7]=this._h[3]>>>8,d[g+8]=this._h[4]>>>0,d[g+9]=this._h[4]>>>8,d[g+10]=this._h[5]>>>0,d[g+11]=this._h[5]>>>8,d[g+12]=this._h[6]>>>0,d[g+13]=this._h[6]>>>8,d[g+14]=this._h[7]>>>0,d[g+15]=this._h[7]>>>8,this._finished=!0,this},l.prototype.update=function(d){var g=0,p=d.length,v;if(this._leftover){v=16-this._leftover,v>p&&(v=p);for(var b=0;b<v;b++)this._buffer[this._leftover+b]=d[g+b];if(p-=v,g+=v,this._leftover+=v,this._leftover<16)return this;this._blocks(this._buffer,0,16),this._leftover=0}if(p>=16&&(v=p-p%16,this._blocks(d,g,v),g+=v,p-=v),p){for(var b=0;b<p;b++)this._buffer[this._leftover+b]=d[g+b];this._leftover+=p}return this},l.prototype.digest=function(){if(this._finished)throw new Error("Poly1305 was finished");var d=new Uint8Array(16);return this.finish(d),d},l.prototype.clean=function(){return t.wipe(this._buffer),t.wipe(this._r),t.wipe(this._h),t.wipe(this._pad),this._leftover=0,this._fin=0,this._finished=!0,this},l}();i.Poly1305=s;function o(l,d){var g=new s(l);g.update(d);var p=g.digest();return g.clean(),p}i.oneTimeAuth=o;function c(l,d){return l.length!==i.DIGEST_LENGTH||d.length!==i.DIGEST_LENGTH?!1:e.equal(l,d)}i.equal=c})(hp);(function(i){Object.defineProperty(i,"__esModule",{value:!0});var e=oa,t=hp,s=Or,o=Ue,c=Ui;i.KEY_LENGTH=32,i.NONCE_LENGTH=12,i.TAG_LENGTH=16;var l=new Uint8Array(16),d=function(){function g(p){if(this.nonceLength=i.NONCE_LENGTH,this.tagLength=i.TAG_LENGTH,p.length!==i.KEY_LENGTH)throw new Error("ChaCha20Poly1305 needs 32-byte key");this._key=new Uint8Array(p)}return g.prototype.seal=function(p,v,b,S){if(p.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");var O=new Uint8Array(16);O.set(p,O.length-p.length);var I=new Uint8Array(32);e.stream(this._key,O,I,4);var K=v.length+this.tagLength,H;if(S){if(S.length!==K)throw new Error("ChaCha20Poly1305: incorrect destination length");H=S}else H=new Uint8Array(K);return e.streamXOR(this._key,O,v,H,4),this._authenticate(H.subarray(H.length-this.tagLength,H.length),I,H.subarray(0,H.length-this.tagLength),b),s.wipe(O),H},g.prototype.open=function(p,v,b,S){if(p.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");if(v.length<this.tagLength)return null;var O=new Uint8Array(16);O.set(p,O.length-p.length);var I=new Uint8Array(32);e.stream(this._key,O,I,4);var K=new Uint8Array(this.tagLength);if(this._authenticate(K,I,v.subarray(0,v.length-this.tagLength),b),!c.equal(K,v.subarray(v.length-this.tagLength,v.length)))return null;var H=v.length-this.tagLength,re;if(S){if(S.length!==H)throw new Error("ChaCha20Poly1305: incorrect destination length");re=S}else re=new Uint8Array(H);return e.streamXOR(this._key,O,v.subarray(0,v.length-this.tagLength),re,4),s.wipe(O),re},g.prototype.clean=function(){return s.wipe(this._key),this},g.prototype._authenticate=function(p,v,b,S){var O=new t.Poly1305(v);S&&(O.update(S),S.length%16>0&&O.update(l.subarray(S.length%16))),O.update(b),b.length%16>0&&O.update(l.subarray(b.length%16));var I=new Uint8Array(8);S&&o.writeUint64LE(S.length,I),O.update(I),o.writeUint64LE(b.length,I),O.update(I);for(var K=O.digest(),H=0;H<K.length;H++)p[H]=K[H];O.clean(),s.wipe(K),s.wipe(I)},g}();i.ChaCha20Poly1305=d})(qu);var fp={},Ds={},Hu={};Object.defineProperty(Hu,"__esModule",{value:!0});function Ub(i){return typeof i.saveState<"u"&&typeof i.restoreState<"u"&&typeof i.cleanSavedState<"u"}Hu.isSerializableHash=Ub;Object.defineProperty(Ds,"__esModule",{value:!0});var ri=Hu,jb=Ui,Lb=Or,dp=function(){function i(e,t){this._finished=!1,this._inner=new e,this._outer=new e,this.blockSize=this._outer.blockSize,this.digestLength=this._outer.digestLength;var s=new Uint8Array(this.blockSize);t.length>this.blockSize?this._inner.update(t).finish(s).clean():s.set(t);for(var o=0;o<s.length;o++)s[o]^=54;this._inner.update(s);for(var o=0;o<s.length;o++)s[o]^=106;this._outer.update(s),ri.isSerializableHash(this._inner)&&ri.isSerializableHash(this._outer)&&(this._innerKeyedState=this._inner.saveState(),this._outerKeyedState=this._outer.saveState()),Lb.wipe(s)}return i.prototype.reset=function(){if(!ri.isSerializableHash(this._inner)||!ri.isSerializableHash(this._outer))throw new Error("hmac: can't reset() because hash doesn't implement restoreState()");return this._inner.restoreState(this._innerKeyedState),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},i.prototype.clean=function(){ri.isSerializableHash(this._inner)&&this._inner.cleanSavedState(this._innerKeyedState),ri.isSerializableHash(this._outer)&&this._outer.cleanSavedState(this._outerKeyedState),this._inner.clean(),this._outer.clean()},i.prototype.update=function(e){return this._inner.update(e),this},i.prototype.finish=function(e){return this._finished?(this._outer.finish(e),this):(this._inner.finish(e),this._outer.update(e.subarray(0,this.digestLength)).finish(e),this._finished=!0,this)},i.prototype.digest=function(){var e=new Uint8Array(this.digestLength);return this.finish(e),e},i.prototype.saveState=function(){if(!ri.isSerializableHash(this._inner))throw new Error("hmac: can't saveState() because hash doesn't implement it");return this._inner.saveState()},i.prototype.restoreState=function(e){if(!ri.isSerializableHash(this._inner)||!ri.isSerializableHash(this._outer))throw new Error("hmac: can't restoreState() because hash doesn't implement it");return this._inner.restoreState(e),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},i.prototype.cleanSavedState=function(e){if(!ri.isSerializableHash(this._inner))throw new Error("hmac: can't cleanSavedState() because hash doesn't implement it");this._inner.cleanSavedState(e)},i}();Ds.HMAC=dp;function Mb(i,e,t){var s=new dp(i,e);s.update(t);var o=s.digest();return s.clean(),o}Ds.hmac=Mb;Ds.equal=jb.equal;Object.defineProperty(fp,"__esModule",{value:!0});var ff=Ds,df=Or,Bb=function(){function i(e,t,s,o){s===void 0&&(s=new Uint8Array(0)),this._counter=new Uint8Array(1),this._hash=e,this._info=o;var c=ff.hmac(this._hash,s,t);this._hmac=new ff.HMAC(e,c),this._buffer=new Uint8Array(this._hmac.digestLength),this._bufpos=this._buffer.length}return i.prototype._fillBuffer=function(){this._counter[0]++;var e=this._counter[0];if(e===0)throw new Error("hkdf: cannot expand more");this._hmac.reset(),e>1&&this._hmac.update(this._buffer),this._info&&this._hmac.update(this._info),this._hmac.update(this._counter),this._hmac.finish(this._buffer),this._bufpos=0},i.prototype.expand=function(e){for(var t=new Uint8Array(e),s=0;s<t.length;s++)this._bufpos===this._buffer.length&&this._fillBuffer(),t[s]=this._buffer[this._bufpos++];return t},i.prototype.clean=function(){this._hmac.clean(),df.wipe(this._buffer),df.wipe(this._counter),this._bufpos=0},i}(),zb=fp.HKDF=Bb,jn={},aa={},ca={};Object.defineProperty(ca,"__esModule",{value:!0});ca.BrowserRandomSource=void 0;const pf=65536;class qb{constructor(){this.isAvailable=!1,this.isInstantiated=!1;const e=typeof self<"u"?self.crypto||self.msCrypto:null;e&&e.getRandomValues!==void 0&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Browser random byte generator is not available.");const t=new Uint8Array(e);for(let s=0;s<t.length;s+=pf)this._crypto.getRandomValues(t.subarray(s,s+Math.min(t.length-s,pf)));return t}}ca.BrowserRandomSource=qb;function Hb(i){throw new Error('Could not dynamically require "'+i+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var ua={};Object.defineProperty(ua,"__esModule",{value:!0});ua.NodeRandomSource=void 0;const Kb=Or;class Vb{constructor(){if(this.isAvailable=!1,this.isInstantiated=!1,typeof Hb<"u"){const e=tb;e&&e.randomBytes&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Node.js random byte generator is not available.");let t=this._crypto.randomBytes(e);if(t.length!==e)throw new Error("NodeRandomSource: got fewer bytes than requested");const s=new Uint8Array(e);for(let o=0;o<s.length;o++)s[o]=t[o];return(0,Kb.wipe)(t),s}}ua.NodeRandomSource=Vb;Object.defineProperty(aa,"__esModule",{value:!0});aa.SystemRandomSource=void 0;const kb=ca,Wb=ua;class Gb{constructor(){if(this.isAvailable=!1,this.name="",this._source=new kb.BrowserRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Browser";return}if(this._source=new Wb.NodeRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Node";return}}randomBytes(e){if(!this.isAvailable)throw new Error("System random byte generator is not available.");return this._source.randomBytes(e)}}aa.SystemRandomSource=Gb;(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.randomStringForEntropy=i.randomString=i.randomUint32=i.randomBytes=i.defaultRandomSource=void 0;const e=aa,t=Ue,s=Or;i.defaultRandomSource=new e.SystemRandomSource;function o(p,v=i.defaultRandomSource){return v.randomBytes(p)}i.randomBytes=o;function c(p=i.defaultRandomSource){const v=o(4,p),b=(0,t.readUint32LE)(v);return(0,s.wipe)(v),b}i.randomUint32=c;const l="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function d(p,v=l,b=i.defaultRandomSource){if(v.length<2)throw new Error("randomString charset is too short");if(v.length>256)throw new Error("randomString charset is too long");let S="";const O=v.length,I=256-256%O;for(;p>0;){const K=o(Math.ceil(p*256/I),b);for(let H=0;H<K.length&&p>0;H++){const re=K[H];re<I&&(S+=v.charAt(re%O),p--)}(0,s.wipe)(K)}return S}i.randomString=d;function g(p,v=l,b=i.defaultRandomSource){const S=Math.ceil(p/(Math.log(v.length)/Math.LN2));return d(S,v,b)}i.randomStringForEntropy=g})(jn);var ha={};(function(i){Object.defineProperty(i,"__esModule",{value:!0});var e=Ue,t=Or;i.DIGEST_LENGTH=32,i.BLOCK_SIZE=64;var s=function(){function d(){this.digestLength=i.DIGEST_LENGTH,this.blockSize=i.BLOCK_SIZE,this._state=new Int32Array(8),this._temp=new Int32Array(64),this._buffer=new Uint8Array(128),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return d.prototype._initState=function(){this._state[0]=1779033703,this._state[1]=3144134277,this._state[2]=1013904242,this._state[3]=2773480762,this._state[4]=1359893119,this._state[5]=2600822924,this._state[6]=528734635,this._state[7]=1541459225},d.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},d.prototype.clean=function(){t.wipe(this._buffer),t.wipe(this._temp),this.reset()},d.prototype.update=function(g,p){if(p===void 0&&(p=g.length),this._finished)throw new Error("SHA256: can't update because hash was finished.");var v=0;if(this._bytesHashed+=p,this._bufferLength>0){for(;this._bufferLength<this.blockSize&&p>0;)this._buffer[this._bufferLength++]=g[v++],p--;this._bufferLength===this.blockSize&&(c(this._temp,this._state,this._buffer,0,this.blockSize),this._bufferLength=0)}for(p>=this.blockSize&&(v=c(this._temp,this._state,g,v,p),p%=this.blockSize);p>0;)this._buffer[this._bufferLength++]=g[v++],p--;return this},d.prototype.finish=function(g){if(!this._finished){var p=this._bytesHashed,v=this._bufferLength,b=p/536870912|0,S=p<<3,O=p%64<56?64:128;this._buffer[v]=128;for(var I=v+1;I<O-8;I++)this._buffer[I]=0;e.writeUint32BE(b,this._buffer,O-8),e.writeUint32BE(S,this._buffer,O-4),c(this._temp,this._state,this._buffer,0,O),this._finished=!0}for(var I=0;I<this.digestLength/4;I++)e.writeUint32BE(this._state[I],g,I*4);return this},d.prototype.digest=function(){var g=new Uint8Array(this.digestLength);return this.finish(g),g},d.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{state:new Int32Array(this._state),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},d.prototype.restoreState=function(g){return this._state.set(g.state),this._bufferLength=g.bufferLength,g.buffer&&this._buffer.set(g.buffer),this._bytesHashed=g.bytesHashed,this._finished=!1,this},d.prototype.cleanSavedState=function(g){t.wipe(g.state),g.buffer&&t.wipe(g.buffer),g.bufferLength=0,g.bytesHashed=0},d}();i.SHA256=s;var o=new Int32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function c(d,g,p,v,b){for(;b>=64;){for(var S=g[0],O=g[1],I=g[2],K=g[3],H=g[4],re=g[5],$=g[6],U=g[7],x=0;x<16;x++){var C=v+x*4;d[x]=e.readUint32BE(p,C)}for(var x=16;x<64;x++){var T=d[x-2],h=(T>>>17|T<<32-17)^(T>>>19|T<<32-19)^T>>>10;T=d[x-15];var w=(T>>>7|T<<32-7)^(T>>>18|T<<32-18)^T>>>3;d[x]=(h+d[x-7]|0)+(w+d[x-16]|0)}for(var x=0;x<64;x++){var h=(((H>>>6|H<<26)^(H>>>11|H<<21)^(H>>>25|H<<7))+(H&re^~H&$)|0)+(U+(o[x]+d[x]|0)|0)|0,w=((S>>>2|S<<32-2)^(S>>>13|S<<32-13)^(S>>>22|S<<32-22))+(S&O^S&I^O&I)|0;U=$,$=re,re=H,H=K+h|0,K=I,I=O,O=S,S=h+w|0}g[0]+=S,g[1]+=O,g[2]+=I,g[3]+=K,g[4]+=H,g[5]+=re,g[6]+=$,g[7]+=U,v+=64,b-=64}return v}function l(d){var g=new s;g.update(d);var p=g.digest();return g.clean(),p}i.hash=l})(ha);var Ku={};(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.sharedKey=i.generateKeyPair=i.generateKeyPairFromSeed=i.scalarMultBase=i.scalarMult=i.SHARED_KEY_LENGTH=i.SECRET_KEY_LENGTH=i.PUBLIC_KEY_LENGTH=void 0;const e=jn,t=Or;i.PUBLIC_KEY_LENGTH=32,i.SECRET_KEY_LENGTH=32,i.SHARED_KEY_LENGTH=32;function s(x){const C=new Float64Array(16);if(x)for(let T=0;T<x.length;T++)C[T]=x[T];return C}const o=new Uint8Array(32);o[0]=9;const c=s([56129,1]);function l(x){let C=1;for(let T=0;T<16;T++){let h=x[T]+C+65535;C=Math.floor(h/65536),x[T]=h-C*65536}x[0]+=C-1+37*(C-1)}function d(x,C,T){const h=~(T-1);for(let w=0;w<16;w++){const Q=h&(x[w]^C[w]);x[w]^=Q,C[w]^=Q}}function g(x,C){const T=s(),h=s();for(let w=0;w<16;w++)h[w]=C[w];l(h),l(h),l(h);for(let w=0;w<2;w++){T[0]=h[0]-65517;for(let ne=1;ne<15;ne++)T[ne]=h[ne]-65535-(T[ne-1]>>16&1),T[ne-1]&=65535;T[15]=h[15]-32767-(T[14]>>16&1);const Q=T[15]>>16&1;T[14]&=65535,d(h,T,1-Q)}for(let w=0;w<16;w++)x[2*w]=h[w]&255,x[2*w+1]=h[w]>>8}function p(x,C){for(let T=0;T<16;T++)x[T]=C[2*T]+(C[2*T+1]<<8);x[15]&=32767}function v(x,C,T){for(let h=0;h<16;h++)x[h]=C[h]+T[h]}function b(x,C,T){for(let h=0;h<16;h++)x[h]=C[h]-T[h]}function S(x,C,T){let h,w,Q=0,ne=0,ue=0,ge=0,ye=0,D=0,N=0,Z=0,J=0,V=0,k=0,ee=0,ie=0,De=0,oe=0,Se=0,le=0,Ce=0,z=0,B=0,F=0,f=0,A=0,se=0,he=0,Ee=0,qe=0,Ve=0,je=0,pt=0,gt=0,Me=T[0],Ie=T[1],Re=T[2],$e=T[3],Be=T[4],Oe=T[5],Fe=T[6],we=T[7],Pe=T[8],He=T[9],xe=T[10],ke=T[11],Ge=T[12],Qe=T[13],et=T[14],Je=T[15];h=C[0],Q+=h*Me,ne+=h*Ie,ue+=h*Re,ge+=h*$e,ye+=h*Be,D+=h*Oe,N+=h*Fe,Z+=h*we,J+=h*Pe,V+=h*He,k+=h*xe,ee+=h*ke,ie+=h*Ge,De+=h*Qe,oe+=h*et,Se+=h*Je,h=C[1],ne+=h*Me,ue+=h*Ie,ge+=h*Re,ye+=h*$e,D+=h*Be,N+=h*Oe,Z+=h*Fe,J+=h*we,V+=h*Pe,k+=h*He,ee+=h*xe,ie+=h*ke,De+=h*Ge,oe+=h*Qe,Se+=h*et,le+=h*Je,h=C[2],ue+=h*Me,ge+=h*Ie,ye+=h*Re,D+=h*$e,N+=h*Be,Z+=h*Oe,J+=h*Fe,V+=h*we,k+=h*Pe,ee+=h*He,ie+=h*xe,De+=h*ke,oe+=h*Ge,Se+=h*Qe,le+=h*et,Ce+=h*Je,h=C[3],ge+=h*Me,ye+=h*Ie,D+=h*Re,N+=h*$e,Z+=h*Be,J+=h*Oe,V+=h*Fe,k+=h*we,ee+=h*Pe,ie+=h*He,De+=h*xe,oe+=h*ke,Se+=h*Ge,le+=h*Qe,Ce+=h*et,z+=h*Je,h=C[4],ye+=h*Me,D+=h*Ie,N+=h*Re,Z+=h*$e,J+=h*Be,V+=h*Oe,k+=h*Fe,ee+=h*we,ie+=h*Pe,De+=h*He,oe+=h*xe,Se+=h*ke,le+=h*Ge,Ce+=h*Qe,z+=h*et,B+=h*Je,h=C[5],D+=h*Me,N+=h*Ie,Z+=h*Re,J+=h*$e,V+=h*Be,k+=h*Oe,ee+=h*Fe,ie+=h*we,De+=h*Pe,oe+=h*He,Se+=h*xe,le+=h*ke,Ce+=h*Ge,z+=h*Qe,B+=h*et,F+=h*Je,h=C[6],N+=h*Me,Z+=h*Ie,J+=h*Re,V+=h*$e,k+=h*Be,ee+=h*Oe,ie+=h*Fe,De+=h*we,oe+=h*Pe,Se+=h*He,le+=h*xe,Ce+=h*ke,z+=h*Ge,B+=h*Qe,F+=h*et,f+=h*Je,h=C[7],Z+=h*Me,J+=h*Ie,V+=h*Re,k+=h*$e,ee+=h*Be,ie+=h*Oe,De+=h*Fe,oe+=h*we,Se+=h*Pe,le+=h*He,Ce+=h*xe,z+=h*ke,B+=h*Ge,F+=h*Qe,f+=h*et,A+=h*Je,h=C[8],J+=h*Me,V+=h*Ie,k+=h*Re,ee+=h*$e,ie+=h*Be,De+=h*Oe,oe+=h*Fe,Se+=h*we,le+=h*Pe,Ce+=h*He,z+=h*xe,B+=h*ke,F+=h*Ge,f+=h*Qe,A+=h*et,se+=h*Je,h=C[9],V+=h*Me,k+=h*Ie,ee+=h*Re,ie+=h*$e,De+=h*Be,oe+=h*Oe,Se+=h*Fe,le+=h*we,Ce+=h*Pe,z+=h*He,B+=h*xe,F+=h*ke,f+=h*Ge,A+=h*Qe,se+=h*et,he+=h*Je,h=C[10],k+=h*Me,ee+=h*Ie,ie+=h*Re,De+=h*$e,oe+=h*Be,Se+=h*Oe,le+=h*Fe,Ce+=h*we,z+=h*Pe,B+=h*He,F+=h*xe,f+=h*ke,A+=h*Ge,se+=h*Qe,he+=h*et,Ee+=h*Je,h=C[11],ee+=h*Me,ie+=h*Ie,De+=h*Re,oe+=h*$e,Se+=h*Be,le+=h*Oe,Ce+=h*Fe,z+=h*we,B+=h*Pe,F+=h*He,f+=h*xe,A+=h*ke,se+=h*Ge,he+=h*Qe,Ee+=h*et,qe+=h*Je,h=C[12],ie+=h*Me,De+=h*Ie,oe+=h*Re,Se+=h*$e,le+=h*Be,Ce+=h*Oe,z+=h*Fe,B+=h*we,F+=h*Pe,f+=h*He,A+=h*xe,se+=h*ke,he+=h*Ge,Ee+=h*Qe,qe+=h*et,Ve+=h*Je,h=C[13],De+=h*Me,oe+=h*Ie,Se+=h*Re,le+=h*$e,Ce+=h*Be,z+=h*Oe,B+=h*Fe,F+=h*we,f+=h*Pe,A+=h*He,se+=h*xe,he+=h*ke,Ee+=h*Ge,qe+=h*Qe,Ve+=h*et,je+=h*Je,h=C[14],oe+=h*Me,Se+=h*Ie,le+=h*Re,Ce+=h*$e,z+=h*Be,B+=h*Oe,F+=h*Fe,f+=h*we,A+=h*Pe,se+=h*He,he+=h*xe,Ee+=h*ke,qe+=h*Ge,Ve+=h*Qe,je+=h*et,pt+=h*Je,h=C[15],Se+=h*Me,le+=h*Ie,Ce+=h*Re,z+=h*$e,B+=h*Be,F+=h*Oe,f+=h*Fe,A+=h*we,se+=h*Pe,he+=h*He,Ee+=h*xe,qe+=h*ke,Ve+=h*Ge,je+=h*Qe,pt+=h*et,gt+=h*Je,Q+=38*le,ne+=38*Ce,ue+=38*z,ge+=38*B,ye+=38*F,D+=38*f,N+=38*A,Z+=38*se,J+=38*he,V+=38*Ee,k+=38*qe,ee+=38*Ve,ie+=38*je,De+=38*pt,oe+=38*gt,w=1,h=Q+w+65535,w=Math.floor(h/65536),Q=h-w*65536,h=ne+w+65535,w=Math.floor(h/65536),ne=h-w*65536,h=ue+w+65535,w=Math.floor(h/65536),ue=h-w*65536,h=ge+w+65535,w=Math.floor(h/65536),ge=h-w*65536,h=ye+w+65535,w=Math.floor(h/65536),ye=h-w*65536,h=D+w+65535,w=Math.floor(h/65536),D=h-w*65536,h=N+w+65535,w=Math.floor(h/65536),N=h-w*65536,h=Z+w+65535,w=Math.floor(h/65536),Z=h-w*65536,h=J+w+65535,w=Math.floor(h/65536),J=h-w*65536,h=V+w+65535,w=Math.floor(h/65536),V=h-w*65536,h=k+w+65535,w=Math.floor(h/65536),k=h-w*65536,h=ee+w+65535,w=Math.floor(h/65536),ee=h-w*65536,h=ie+w+65535,w=Math.floor(h/65536),ie=h-w*65536,h=De+w+65535,w=Math.floor(h/65536),De=h-w*65536,h=oe+w+65535,w=Math.floor(h/65536),oe=h-w*65536,h=Se+w+65535,w=Math.floor(h/65536),Se=h-w*65536,Q+=w-1+37*(w-1),w=1,h=Q+w+65535,w=Math.floor(h/65536),Q=h-w*65536,h=ne+w+65535,w=Math.floor(h/65536),ne=h-w*65536,h=ue+w+65535,w=Math.floor(h/65536),ue=h-w*65536,h=ge+w+65535,w=Math.floor(h/65536),ge=h-w*65536,h=ye+w+65535,w=Math.floor(h/65536),ye=h-w*65536,h=D+w+65535,w=Math.floor(h/65536),D=h-w*65536,h=N+w+65535,w=Math.floor(h/65536),N=h-w*65536,h=Z+w+65535,w=Math.floor(h/65536),Z=h-w*65536,h=J+w+65535,w=Math.floor(h/65536),J=h-w*65536,h=V+w+65535,w=Math.floor(h/65536),V=h-w*65536,h=k+w+65535,w=Math.floor(h/65536),k=h-w*65536,h=ee+w+65535,w=Math.floor(h/65536),ee=h-w*65536,h=ie+w+65535,w=Math.floor(h/65536),ie=h-w*65536,h=De+w+65535,w=Math.floor(h/65536),De=h-w*65536,h=oe+w+65535,w=Math.floor(h/65536),oe=h-w*65536,h=Se+w+65535,w=Math.floor(h/65536),Se=h-w*65536,Q+=w-1+37*(w-1),x[0]=Q,x[1]=ne,x[2]=ue,x[3]=ge,x[4]=ye,x[5]=D,x[6]=N,x[7]=Z,x[8]=J,x[9]=V,x[10]=k,x[11]=ee,x[12]=ie,x[13]=De,x[14]=oe,x[15]=Se}function O(x,C){S(x,C,C)}function I(x,C){const T=s();for(let h=0;h<16;h++)T[h]=C[h];for(let h=253;h>=0;h--)O(T,T),h!==2&&h!==4&&S(T,T,C);for(let h=0;h<16;h++)x[h]=T[h]}function K(x,C){const T=new Uint8Array(32),h=new Float64Array(80),w=s(),Q=s(),ne=s(),ue=s(),ge=s(),ye=s();for(let J=0;J<31;J++)T[J]=x[J];T[31]=x[31]&127|64,T[0]&=248,p(h,C);for(let J=0;J<16;J++)Q[J]=h[J];w[0]=ue[0]=1;for(let J=254;J>=0;--J){const V=T[J>>>3]>>>(J&7)&1;d(w,Q,V),d(ne,ue,V),v(ge,w,ne),b(w,w,ne),v(ne,Q,ue),b(Q,Q,ue),O(ue,ge),O(ye,w),S(w,ne,w),S(ne,Q,ge),v(ge,w,ne),b(w,w,ne),O(Q,w),b(ne,ue,ye),S(w,ne,c),v(w,w,ue),S(ne,ne,w),S(w,ue,ye),S(ue,Q,h),O(Q,ge),d(w,Q,V),d(ne,ue,V)}for(let J=0;J<16;J++)h[J+16]=w[J],h[J+32]=ne[J],h[J+48]=Q[J],h[J+64]=ue[J];const D=h.subarray(32),N=h.subarray(16);I(D,D),S(N,N,D);const Z=new Uint8Array(32);return g(Z,N),Z}i.scalarMult=K;function H(x){return K(x,o)}i.scalarMultBase=H;function re(x){if(x.length!==i.SECRET_KEY_LENGTH)throw new Error(`x25519: seed must be ${i.SECRET_KEY_LENGTH} bytes`);const C=new Uint8Array(x);return{publicKey:H(C),secretKey:C}}i.generateKeyPairFromSeed=re;function $(x){const C=(0,e.randomBytes)(32,x),T=re(C);return(0,t.wipe)(C),T}i.generateKeyPair=$;function U(x,C,T=!1){if(x.length!==i.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect secret key length");if(C.length!==i.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect public key length");const h=K(x,C);if(T){let w=0;for(let Q=0;Q<h.length;Q++)w|=h[Q];if(w===0)throw new Error("X25519: invalid shared key")}return h}i.sharedKey=U})(Ku);function Vu(i){return globalThis.Buffer!=null?new Uint8Array(i.buffer,i.byteOffset,i.byteLength):i}function pp(i=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?Vu(globalThis.Buffer.allocUnsafe(i)):new Uint8Array(i)}function yu(i,e){e||(e=i.reduce((o,c)=>o+c.length,0));const t=pp(e);let s=0;for(const o of i)t.set(o,s),s+=o.length;return Vu(t)}function Yb(i,e){if(i.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),s=0;s<t.length;s++)t[s]=255;for(var o=0;o<i.length;o++){var c=i.charAt(o),l=c.charCodeAt(0);if(t[l]!==255)throw new TypeError(c+" is ambiguous");t[l]=o}var d=i.length,g=i.charAt(0),p=Math.log(d)/Math.log(256),v=Math.log(256)/Math.log(d);function b(I){if(I instanceof Uint8Array||(ArrayBuffer.isView(I)?I=new Uint8Array(I.buffer,I.byteOffset,I.byteLength):Array.isArray(I)&&(I=Uint8Array.from(I))),!(I instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(I.length===0)return"";for(var K=0,H=0,re=0,$=I.length;re!==$&&I[re]===0;)re++,K++;for(var U=($-re)*v+1>>>0,x=new Uint8Array(U);re!==$;){for(var C=I[re],T=0,h=U-1;(C!==0||T<H)&&h!==-1;h--,T++)C+=256*x[h]>>>0,x[h]=C%d>>>0,C=C/d>>>0;if(C!==0)throw new Error("Non-zero carry");H=T,re++}for(var w=U-H;w!==U&&x[w]===0;)w++;for(var Q=g.repeat(K);w<U;++w)Q+=i.charAt(x[w]);return Q}function S(I){if(typeof I!="string")throw new TypeError("Expected String");if(I.length===0)return new Uint8Array;var K=0;if(I[K]!==" "){for(var H=0,re=0;I[K]===g;)H++,K++;for(var $=(I.length-K)*p+1>>>0,U=new Uint8Array($);I[K];){var x=t[I.charCodeAt(K)];if(x===255)return;for(var C=0,T=$-1;(x!==0||C<re)&&T!==-1;T--,C++)x+=d*U[T]>>>0,U[T]=x%256>>>0,x=x/256>>>0;if(x!==0)throw new Error("Non-zero carry");re=C,K++}if(I[K]!==" "){for(var h=$-re;h!==$&&U[h]===0;)h++;for(var w=new Uint8Array(H+($-h)),Q=H;h!==$;)w[Q++]=U[h++];return w}}}function O(I){var K=S(I);if(K)return K;throw new Error(`Non-${e} character`)}return{encode:b,decodeUnsafe:S,decode:O}}var Jb=Yb,Xb=Jb;const Zb=i=>{if(i instanceof Uint8Array&&i.constructor.name==="Uint8Array")return i;if(i instanceof ArrayBuffer)return new Uint8Array(i);if(ArrayBuffer.isView(i))return new Uint8Array(i.buffer,i.byteOffset,i.byteLength);throw new Error("Unknown type, must be binary type")},Qb=i=>new TextEncoder().encode(i),ew=i=>new TextDecoder().decode(i);class tw{constructor(e,t,s){this.name=e,this.prefix=t,this.baseEncode=s}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class rw{constructor(e,t,s){if(this.name=e,this.prefix=t,t.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=s}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return gp(this,e)}}class iw{constructor(e){this.decoders=e}or(e){return gp(this,e)}decode(e){const t=e[0],s=this.decoders[t];if(s)return s.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const gp=(i,e)=>new iw({...i.decoders||{[i.prefix]:i},...e.decoders||{[e.prefix]:e}});class nw{constructor(e,t,s,o){this.name=e,this.prefix=t,this.baseEncode=s,this.baseDecode=o,this.encoder=new tw(e,t,s),this.decoder=new rw(e,t,o)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const la=({name:i,prefix:e,encode:t,decode:s})=>new nw(i,e,t,s),Ss=({prefix:i,name:e,alphabet:t})=>{const{encode:s,decode:o}=Xb(t,e);return la({prefix:i,name:e,encode:s,decode:c=>Zb(o(c))})},sw=(i,e,t,s)=>{const o={};for(let v=0;v<e.length;++v)o[e[v]]=v;let c=i.length;for(;i[c-1]==="=";)--c;const l=new Uint8Array(c*t/8|0);let d=0,g=0,p=0;for(let v=0;v<c;++v){const b=o[i[v]];if(b===void 0)throw new SyntaxError(`Non-${s} character`);g=g<<t|b,d+=t,d>=8&&(d-=8,l[p++]=255&g>>d)}if(d>=t||255&g<<8-d)throw new SyntaxError("Unexpected end of data");return l},ow=(i,e,t)=>{const s=e[e.length-1]==="=",o=(1<<t)-1;let c="",l=0,d=0;for(let g=0;g<i.length;++g)for(d=d<<8|i[g],l+=8;l>t;)l-=t,c+=e[o&d>>l];if(l&&(c+=e[o&d<<t-l]),s)for(;c.length*t&7;)c+="=";return c},Jt=({name:i,prefix:e,bitsPerChar:t,alphabet:s})=>la({prefix:e,name:i,encode(o){return ow(o,s,t)},decode(o){return sw(o,s,t,i)}}),aw=la({prefix:"\0",name:"identity",encode:i=>ew(i),decode:i=>Qb(i)}),cw=Object.freeze(Object.defineProperty({__proto__:null,identity:aw},Symbol.toStringTag,{value:"Module"})),uw=Jt({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),hw=Object.freeze(Object.defineProperty({__proto__:null,base2:uw},Symbol.toStringTag,{value:"Module"})),lw=Jt({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),fw=Object.freeze(Object.defineProperty({__proto__:null,base8:lw},Symbol.toStringTag,{value:"Module"})),dw=Ss({prefix:"9",name:"base10",alphabet:"0123456789"}),pw=Object.freeze(Object.defineProperty({__proto__:null,base10:dw},Symbol.toStringTag,{value:"Module"})),gw=Jt({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),yw=Jt({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),vw=Object.freeze(Object.defineProperty({__proto__:null,base16:gw,base16upper:yw},Symbol.toStringTag,{value:"Module"})),_w=Jt({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),mw=Jt({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),bw=Jt({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),ww=Jt({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Ew=Jt({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Dw=Jt({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Sw=Jt({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Iw=Jt({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),xw=Jt({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),Ow=Object.freeze(Object.defineProperty({__proto__:null,base32:_w,base32hex:Ew,base32hexpad:Sw,base32hexpadupper:Iw,base32hexupper:Dw,base32pad:bw,base32padupper:ww,base32upper:mw,base32z:xw},Symbol.toStringTag,{value:"Module"})),Pw=Ss({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Aw=Ss({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),Cw=Object.freeze(Object.defineProperty({__proto__:null,base36:Pw,base36upper:Aw},Symbol.toStringTag,{value:"Module"})),Tw=Ss({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Nw=Ss({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),Rw=Object.freeze(Object.defineProperty({__proto__:null,base58btc:Tw,base58flickr:Nw},Symbol.toStringTag,{value:"Module"})),$w=Jt({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Fw=Jt({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Uw=Jt({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),jw=Jt({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),Lw=Object.freeze(Object.defineProperty({__proto__:null,base64:$w,base64pad:Fw,base64url:Uw,base64urlpad:jw},Symbol.toStringTag,{value:"Module"})),yp=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),Mw=yp.reduce((i,e,t)=>(i[t]=e,i),[]),Bw=yp.reduce((i,e,t)=>(i[e.codePointAt(0)]=t,i),[]);function zw(i){return i.reduce((e,t)=>(e+=Mw[t],e),"")}function qw(i){const e=[];for(const t of i){const s=Bw[t.codePointAt(0)];if(s===void 0)throw new Error(`Non-base256emoji character: ${t}`);e.push(s)}return new Uint8Array(e)}const Hw=la({prefix:"🚀",name:"base256emoji",encode:zw,decode:qw}),Kw=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:Hw},Symbol.toStringTag,{value:"Module"}));new TextEncoder;new TextDecoder;const gf={...cw,...hw,...fw,...pw,...vw,...Ow,...Cw,...Rw,...Lw,...Kw};function vp(i,e,t,s){return{name:i,prefix:e,encoder:{name:i,prefix:e,encode:t},decoder:{decode:s}}}const yf=vp("utf8","u",i=>"u"+new TextDecoder("utf8").decode(i),i=>new TextEncoder().encode(i.substring(1))),Vc=vp("ascii","a",i=>{let e="a";for(let t=0;t<i.length;t++)e+=String.fromCharCode(i[t]);return e},i=>{i=i.substring(1);const e=pp(i.length);for(let t=0;t<i.length;t++)e[t]=i.charCodeAt(t);return e}),_p={utf8:yf,"utf-8":yf,hex:gf.base16,latin1:Vc,ascii:Vc,binary:Vc,...gf};function _r(i,e="utf8"){const t=_p[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?Vu(globalThis.Buffer.from(i,"utf-8")):t.decoder.decode(`${t.prefix}${i}`)}function ur(i,e="utf8"){const t=_p[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(i.buffer,i.byteOffset,i.byteLength).toString("utf8"):t.encoder.encode(i).substring(1)}var vf=globalThis&&globalThis.__spreadArray||function(i,e,t){if(t||arguments.length===2)for(var s=0,o=e.length,c;s<o;s++)(c||!(s in e))&&(c||(c=Array.prototype.slice.call(e,0,s)),c[s]=e[s]);return i.concat(c||Array.prototype.slice.call(e))},Vw=function(){function i(e,t,s){this.name=e,this.version=t,this.os=s,this.type="browser"}return i}(),kw=function(){function i(e){this.version=e,this.type="node",this.name="node",this.os=process.platform}return i}(),Ww=function(){function i(e,t,s,o){this.name=e,this.version=t,this.os=s,this.bot=o,this.type="bot-device"}return i}(),Gw=function(){function i(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return i}(),Yw=function(){function i(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return i}(),Jw=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,Xw=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,_f=3,Zw=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",Jw]],mf=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function Qw(i){return i?bf(i):typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new Yw:typeof navigator<"u"?bf(navigator.userAgent):rE()}function eE(i){return i!==""&&Zw.reduce(function(e,t){var s=t[0],o=t[1];if(e)return e;var c=o.exec(i);return!!c&&[s,c]},!1)}function bf(i){var e=eE(i);if(!e)return null;var t=e[0],s=e[1];if(t==="searchbot")return new Gw;var o=s[1]&&s[1].split(".").join("_").split("_").slice(0,3);o?o.length<_f&&(o=vf(vf([],o,!0),iE(_f-o.length),!0)):o=[];var c=o.join("."),l=tE(i),d=Xw.exec(i);return d&&d[1]?new Ww(t,c,l,d[1]):new Vw(t,c,l)}function tE(i){for(var e=0,t=mf.length;e<t;e++){var s=mf[e],o=s[0],c=s[1],l=c.exec(i);if(l)return o}return null}function rE(){var i=typeof process<"u"&&process.version;return i?new kw(process.version.slice(1)):null}function iE(i){for(var e=[],t=0;t<i;t++)e.push("0");return e}var ve={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var vu=function(i,e){return vu=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)s.hasOwnProperty(o)&&(t[o]=s[o])},vu(i,e)};function nE(i,e){vu(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var _u=function(){return _u=Object.assign||function(e){for(var t,s=1,o=arguments.length;s<o;s++){t=arguments[s];for(var c in t)Object.prototype.hasOwnProperty.call(t,c)&&(e[c]=t[c])}return e},_u.apply(this,arguments)};function sE(i,e){var t={};for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&e.indexOf(s)<0&&(t[s]=i[s]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,s=Object.getOwnPropertySymbols(i);o<s.length;o++)e.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(i,s[o])&&(t[s[o]]=i[s[o]]);return t}function oE(i,e,t,s){var o=arguments.length,c=o<3?e:s===null?s=Object.getOwnPropertyDescriptor(e,t):s,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(i,e,t,s);else for(var d=i.length-1;d>=0;d--)(l=i[d])&&(c=(o<3?l(c):o>3?l(e,t,c):l(e,t))||c);return o>3&&c&&Object.defineProperty(e,t,c),c}function aE(i,e){return function(t,s){e(t,s,i)}}function cE(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)}function uE(i,e,t,s){function o(c){return c instanceof t?c:new t(function(l){l(c)})}return new(t||(t=Promise))(function(c,l){function d(v){try{p(s.next(v))}catch(b){l(b)}}function g(v){try{p(s.throw(v))}catch(b){l(b)}}function p(v){v.done?c(v.value):o(v.value).then(d,g)}p((s=s.apply(i,e||[])).next())})}function hE(i,e){var t={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},s,o,c,l;return l={next:d(0),throw:d(1),return:d(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function d(p){return function(v){return g([p,v])}}function g(p){if(s)throw new TypeError("Generator is already executing.");for(;t;)try{if(s=1,o&&(c=p[0]&2?o.return:p[0]?o.throw||((c=o.return)&&c.call(o),0):o.next)&&!(c=c.call(o,p[1])).done)return c;switch(o=0,c&&(p=[p[0]&2,c.value]),p[0]){case 0:case 1:c=p;break;case 4:return t.label++,{value:p[1],done:!1};case 5:t.label++,o=p[1],p=[0];continue;case 7:p=t.ops.pop(),t.trys.pop();continue;default:if(c=t.trys,!(c=c.length>0&&c[c.length-1])&&(p[0]===6||p[0]===2)){t=0;continue}if(p[0]===3&&(!c||p[1]>c[0]&&p[1]<c[3])){t.label=p[1];break}if(p[0]===6&&t.label<c[1]){t.label=c[1],c=p;break}if(c&&t.label<c[2]){t.label=c[2],t.ops.push(p);break}c[2]&&t.ops.pop(),t.trys.pop();continue}p=e.call(i,t)}catch(v){p=[6,v],o=0}finally{s=c=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}}function lE(i,e,t,s){s===void 0&&(s=t),i[s]=e[t]}function fE(i,e){for(var t in i)t!=="default"&&!e.hasOwnProperty(t)&&(e[t]=i[t])}function mu(i){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&i[e],s=0;if(t)return t.call(i);if(i&&typeof i.length=="number")return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function mp(i,e){var t=typeof Symbol=="function"&&i[Symbol.iterator];if(!t)return i;var s=t.call(i),o,c=[],l;try{for(;(e===void 0||e-- >0)&&!(o=s.next()).done;)c.push(o.value)}catch(d){l={error:d}}finally{try{o&&!o.done&&(t=s.return)&&t.call(s)}finally{if(l)throw l.error}}return c}function dE(){for(var i=[],e=0;e<arguments.length;e++)i=i.concat(mp(arguments[e]));return i}function pE(){for(var i=0,e=0,t=arguments.length;e<t;e++)i+=arguments[e].length;for(var s=Array(i),o=0,e=0;e<t;e++)for(var c=arguments[e],l=0,d=c.length;l<d;l++,o++)s[o]=c[l];return s}function vs(i){return this instanceof vs?(this.v=i,this):new vs(i)}function gE(i,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=t.apply(i,e||[]),o,c=[];return o={},l("next"),l("throw"),l("return"),o[Symbol.asyncIterator]=function(){return this},o;function l(S){s[S]&&(o[S]=function(O){return new Promise(function(I,K){c.push([S,O,I,K])>1||d(S,O)})})}function d(S,O){try{g(s[S](O))}catch(I){b(c[0][3],I)}}function g(S){S.value instanceof vs?Promise.resolve(S.value.v).then(p,v):b(c[0][2],S)}function p(S){d("next",S)}function v(S){d("throw",S)}function b(S,O){S(O),c.shift(),c.length&&d(c[0][0],c[0][1])}}function yE(i){var e,t;return e={},s("next"),s("throw",function(o){throw o}),s("return"),e[Symbol.iterator]=function(){return this},e;function s(o,c){e[o]=i[o]?function(l){return(t=!t)?{value:vs(i[o](l)),done:o==="return"}:c?c(l):l}:c}}function vE(i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=i[Symbol.asyncIterator],t;return e?e.call(i):(i=typeof mu=="function"?mu(i):i[Symbol.iterator](),t={},s("next"),s("throw"),s("return"),t[Symbol.asyncIterator]=function(){return this},t);function s(c){t[c]=i[c]&&function(l){return new Promise(function(d,g){l=i[c](l),o(d,g,l.done,l.value)})}}function o(c,l,d,g){Promise.resolve(g).then(function(p){c({value:p,done:d})},l)}}function _E(i,e){return Object.defineProperty?Object.defineProperty(i,"raw",{value:e}):i.raw=e,i}function mE(i){if(i&&i.__esModule)return i;var e={};if(i!=null)for(var t in i)Object.hasOwnProperty.call(i,t)&&(e[t]=i[t]);return e.default=i,e}function bE(i){return i&&i.__esModule?i:{default:i}}function wE(i,e){if(!e.has(i))throw new TypeError("attempted to get private field on non-instance");return e.get(i)}function EE(i,e,t){if(!e.has(i))throw new TypeError("attempted to set private field on non-instance");return e.set(i,t),t}const DE=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return _u},__asyncDelegator:yE,__asyncGenerator:gE,__asyncValues:vE,__await:vs,__awaiter:uE,__classPrivateFieldGet:wE,__classPrivateFieldSet:EE,__createBinding:lE,__decorate:oE,__exportStar:fE,__extends:nE,__generator:hE,__importDefault:bE,__importStar:mE,__makeTemplateObject:_E,__metadata:cE,__param:aE,__read:mp,__rest:sE,__spread:dE,__spreadArrays:pE,__values:mu},Symbol.toStringTag,{value:"Module"})),fa=na(DE);var kc={},os={},wf;function SE(){if(wf)return os;wf=1,Object.defineProperty(os,"__esModule",{value:!0}),os.delay=void 0;function i(e){return new Promise(t=>{setTimeout(()=>{t(!0)},e)})}return os.delay=i,os}var Zi={},Wc={},Qi={},Ef;function IE(){return Ef||(Ef=1,Object.defineProperty(Qi,"__esModule",{value:!0}),Qi.ONE_THOUSAND=Qi.ONE_HUNDRED=void 0,Qi.ONE_HUNDRED=100,Qi.ONE_THOUSAND=1e3),Qi}var Gc={},Df;function xE(){return Df||(Df=1,function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.ONE_YEAR=i.FOUR_WEEKS=i.THREE_WEEKS=i.TWO_WEEKS=i.ONE_WEEK=i.THIRTY_DAYS=i.SEVEN_DAYS=i.FIVE_DAYS=i.THREE_DAYS=i.ONE_DAY=i.TWENTY_FOUR_HOURS=i.TWELVE_HOURS=i.SIX_HOURS=i.THREE_HOURS=i.ONE_HOUR=i.SIXTY_MINUTES=i.THIRTY_MINUTES=i.TEN_MINUTES=i.FIVE_MINUTES=i.ONE_MINUTE=i.SIXTY_SECONDS=i.THIRTY_SECONDS=i.TEN_SECONDS=i.FIVE_SECONDS=i.ONE_SECOND=void 0,i.ONE_SECOND=1,i.FIVE_SECONDS=5,i.TEN_SECONDS=10,i.THIRTY_SECONDS=30,i.SIXTY_SECONDS=60,i.ONE_MINUTE=i.SIXTY_SECONDS,i.FIVE_MINUTES=i.ONE_MINUTE*5,i.TEN_MINUTES=i.ONE_MINUTE*10,i.THIRTY_MINUTES=i.ONE_MINUTE*30,i.SIXTY_MINUTES=i.ONE_MINUTE*60,i.ONE_HOUR=i.SIXTY_MINUTES,i.THREE_HOURS=i.ONE_HOUR*3,i.SIX_HOURS=i.ONE_HOUR*6,i.TWELVE_HOURS=i.ONE_HOUR*12,i.TWENTY_FOUR_HOURS=i.ONE_HOUR*24,i.ONE_DAY=i.TWENTY_FOUR_HOURS,i.THREE_DAYS=i.ONE_DAY*3,i.FIVE_DAYS=i.ONE_DAY*5,i.SEVEN_DAYS=i.ONE_DAY*7,i.THIRTY_DAYS=i.ONE_DAY*30,i.ONE_WEEK=i.SEVEN_DAYS,i.TWO_WEEKS=i.ONE_WEEK*2,i.THREE_WEEKS=i.ONE_WEEK*3,i.FOUR_WEEKS=i.ONE_WEEK*4,i.ONE_YEAR=i.ONE_DAY*365}(Gc)),Gc}var Sf;function bp(){return Sf||(Sf=1,function(i){Object.defineProperty(i,"__esModule",{value:!0});const e=fa;e.__exportStar(IE(),i),e.__exportStar(xE(),i)}(Wc)),Wc}var If;function OE(){if(If)return Zi;If=1,Object.defineProperty(Zi,"__esModule",{value:!0}),Zi.fromMiliseconds=Zi.toMiliseconds=void 0;const i=bp();function e(s){return s*i.ONE_THOUSAND}Zi.toMiliseconds=e;function t(s){return Math.floor(s/i.ONE_THOUSAND)}return Zi.fromMiliseconds=t,Zi}var xf;function PE(){return xf||(xf=1,function(i){Object.defineProperty(i,"__esModule",{value:!0});const e=fa;e.__exportStar(SE(),i),e.__exportStar(OE(),i)}(kc)),kc}var Cn={},Of;function AE(){if(Of)return Cn;Of=1,Object.defineProperty(Cn,"__esModule",{value:!0}),Cn.Watch=void 0;class i{constructor(){this.timestamps=new Map}start(t){if(this.timestamps.has(t))throw new Error(`Watch already started for label: ${t}`);this.timestamps.set(t,{started:Date.now()})}stop(t){const s=this.get(t);if(typeof s.elapsed<"u")throw new Error(`Watch already stopped for label: ${t}`);const o=Date.now()-s.started;this.timestamps.set(t,{started:s.started,elapsed:o})}get(t){const s=this.timestamps.get(t);if(typeof s>"u")throw new Error(`No timestamp found for label: ${t}`);return s}elapsed(t){const s=this.get(t);return s.elapsed||Date.now()-s.started}}return Cn.Watch=i,Cn.default=i,Cn}var Yc={},as={},Pf;function CE(){if(Pf)return as;Pf=1,Object.defineProperty(as,"__esModule",{value:!0}),as.IWatch=void 0;class i{}return as.IWatch=i,as}var Af;function TE(){return Af||(Af=1,function(i){Object.defineProperty(i,"__esModule",{value:!0}),fa.__exportStar(CE(),i)}(Yc)),Yc}(function(i){Object.defineProperty(i,"__esModule",{value:!0});const e=fa;e.__exportStar(PE(),i),e.__exportStar(AE(),i),e.__exportStar(TE(),i),e.__exportStar(bp(),i)})(ve);var lt={};Object.defineProperty(lt,"__esModule",{value:!0});lt.getLocalStorage=lt.getLocalStorageOrThrow=lt.getCrypto=lt.getCryptoOrThrow=Ep=lt.getLocation=lt.getLocationOrThrow=ku=lt.getNavigator=lt.getNavigatorOrThrow=wp=lt.getDocument=lt.getDocumentOrThrow=lt.getFromWindowOrThrow=lt.getFromWindow=void 0;function nn(i){let e;return typeof window<"u"&&typeof window[i]<"u"&&(e=window[i]),e}lt.getFromWindow=nn;function Ln(i){const e=nn(i);if(!e)throw new Error(`${i} is not defined in Window`);return e}lt.getFromWindowOrThrow=Ln;function NE(){return Ln("document")}lt.getDocumentOrThrow=NE;function RE(){return nn("document")}var wp=lt.getDocument=RE;function $E(){return Ln("navigator")}lt.getNavigatorOrThrow=$E;function FE(){return nn("navigator")}var ku=lt.getNavigator=FE;function UE(){return Ln("location")}lt.getLocationOrThrow=UE;function jE(){return nn("location")}var Ep=lt.getLocation=jE;function LE(){return Ln("crypto")}lt.getCryptoOrThrow=LE;function ME(){return nn("crypto")}lt.getCrypto=ME;function BE(){return Ln("localStorage")}lt.getLocalStorageOrThrow=BE;function zE(){return nn("localStorage")}lt.getLocalStorage=zE;var Wu={};Object.defineProperty(Wu,"__esModule",{value:!0});var Dp=Wu.getWindowMetadata=void 0;const Cf=lt;function qE(){let i,e;try{i=Cf.getDocumentOrThrow(),e=Cf.getLocationOrThrow()}catch{return null}function t(){const b=i.getElementsByTagName("link"),S=[];for(let O=0;O<b.length;O++){const I=b[O],K=I.getAttribute("rel");if(K&&K.toLowerCase().indexOf("icon")>-1){const H=I.getAttribute("href");if(H)if(H.toLowerCase().indexOf("https:")===-1&&H.toLowerCase().indexOf("http:")===-1&&H.indexOf("//")!==0){let re=e.protocol+"//"+e.host;if(H.indexOf("/")===0)re+=H;else{const $=e.pathname.split("/");$.pop();const U=$.join("/");re+=U+"/"+H}S.push(re)}else if(H.indexOf("//")===0){const re=e.protocol+H;S.push(re)}else S.push(H)}}return S}function s(...b){const S=i.getElementsByTagName("meta");for(let O=0;O<S.length;O++){const I=S[O],K=["itemprop","property","name"].map(H=>I.getAttribute(H)).filter(H=>H?b.includes(H):!1);if(K.length&&K){const H=I.getAttribute("content");if(H)return H}}return""}function o(){let b=s("name","og:site_name","og:title","twitter:title");return b||(b=i.title),b}function c(){return s("description","og:description","twitter:description","keywords")}const l=o(),d=c(),g=e.origin,p=t();return{description:d,url:g,icons:p,name:l}}Dp=Wu.getWindowMetadata=qE;var _s={},HE=i=>encodeURIComponent(i).replace(/[!'()*]/g,e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`),Sp="%[a-f0-9]{2}",Tf=new RegExp("("+Sp+")|([^%]+?)","gi"),Nf=new RegExp("("+Sp+")+","gi");function bu(i,e){try{return[decodeURIComponent(i.join(""))]}catch{}if(i.length===1)return i;e=e||1;var t=i.slice(0,e),s=i.slice(e);return Array.prototype.concat.call([],bu(t),bu(s))}function KE(i){try{return decodeURIComponent(i)}catch{for(var e=i.match(Tf)||[],t=1;t<e.length;t++)i=bu(e,t).join(""),e=i.match(Tf)||[];return i}}function VE(i){for(var e={"%FE%FF":"��","%FF%FE":"��"},t=Nf.exec(i);t;){try{e[t[0]]=decodeURIComponent(t[0])}catch{var s=KE(t[0]);s!==t[0]&&(e[t[0]]=s)}t=Nf.exec(i)}e["%C2"]="�";for(var o=Object.keys(e),c=0;c<o.length;c++){var l=o[c];i=i.replace(new RegExp(l,"g"),e[l])}return i}var kE=function(i){if(typeof i!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof i+"`");try{return i=i.replace(/\+/g," "),decodeURIComponent(i)}catch{return VE(i)}},WE=(i,e)=>{if(!(typeof i=="string"&&typeof e=="string"))throw new TypeError("Expected the arguments to be of type `string`");if(e==="")return[i];const t=i.indexOf(e);return t===-1?[i]:[i.slice(0,t),i.slice(t+e.length)]},GE=function(i,e){for(var t={},s=Object.keys(i),o=Array.isArray(e),c=0;c<s.length;c++){var l=s[c],d=i[l];(o?e.indexOf(l)!==-1:e(l,d,i))&&(t[l]=d)}return t};(function(i){const e=HE,t=kE,s=WE,o=GE,c=$=>$==null,l=Symbol("encodeFragmentIdentifier");function d($){switch($.arrayFormat){case"index":return U=>(x,C)=>{const T=x.length;return C===void 0||$.skipNull&&C===null||$.skipEmptyString&&C===""?x:C===null?[...x,[v(U,$),"[",T,"]"].join("")]:[...x,[v(U,$),"[",v(T,$),"]=",v(C,$)].join("")]};case"bracket":return U=>(x,C)=>C===void 0||$.skipNull&&C===null||$.skipEmptyString&&C===""?x:C===null?[...x,[v(U,$),"[]"].join("")]:[...x,[v(U,$),"[]=",v(C,$)].join("")];case"colon-list-separator":return U=>(x,C)=>C===void 0||$.skipNull&&C===null||$.skipEmptyString&&C===""?x:C===null?[...x,[v(U,$),":list="].join("")]:[...x,[v(U,$),":list=",v(C,$)].join("")];case"comma":case"separator":case"bracket-separator":{const U=$.arrayFormat==="bracket-separator"?"[]=":"=";return x=>(C,T)=>T===void 0||$.skipNull&&T===null||$.skipEmptyString&&T===""?C:(T=T===null?"":T,C.length===0?[[v(x,$),U,v(T,$)].join("")]:[[C,v(T,$)].join($.arrayFormatSeparator)])}default:return U=>(x,C)=>C===void 0||$.skipNull&&C===null||$.skipEmptyString&&C===""?x:C===null?[...x,v(U,$)]:[...x,[v(U,$),"=",v(C,$)].join("")]}}function g($){let U;switch($.arrayFormat){case"index":return(x,C,T)=>{if(U=/\[(\d*)\]$/.exec(x),x=x.replace(/\[\d*\]$/,""),!U){T[x]=C;return}T[x]===void 0&&(T[x]={}),T[x][U[1]]=C};case"bracket":return(x,C,T)=>{if(U=/(\[\])$/.exec(x),x=x.replace(/\[\]$/,""),!U){T[x]=C;return}if(T[x]===void 0){T[x]=[C];return}T[x]=[].concat(T[x],C)};case"colon-list-separator":return(x,C,T)=>{if(U=/(:list)$/.exec(x),x=x.replace(/:list$/,""),!U){T[x]=C;return}if(T[x]===void 0){T[x]=[C];return}T[x]=[].concat(T[x],C)};case"comma":case"separator":return(x,C,T)=>{const h=typeof C=="string"&&C.includes($.arrayFormatSeparator),w=typeof C=="string"&&!h&&b(C,$).includes($.arrayFormatSeparator);C=w?b(C,$):C;const Q=h||w?C.split($.arrayFormatSeparator).map(ne=>b(ne,$)):C===null?C:b(C,$);T[x]=Q};case"bracket-separator":return(x,C,T)=>{const h=/(\[\])$/.test(x);if(x=x.replace(/\[\]$/,""),!h){T[x]=C&&b(C,$);return}const w=C===null?[]:C.split($.arrayFormatSeparator).map(Q=>b(Q,$));if(T[x]===void 0){T[x]=w;return}T[x]=[].concat(T[x],w)};default:return(x,C,T)=>{if(T[x]===void 0){T[x]=C;return}T[x]=[].concat(T[x],C)}}}function p($){if(typeof $!="string"||$.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function v($,U){return U.encode?U.strict?e($):encodeURIComponent($):$}function b($,U){return U.decode?t($):$}function S($){return Array.isArray($)?$.sort():typeof $=="object"?S(Object.keys($)).sort((U,x)=>Number(U)-Number(x)).map(U=>$[U]):$}function O($){const U=$.indexOf("#");return U!==-1&&($=$.slice(0,U)),$}function I($){let U="";const x=$.indexOf("#");return x!==-1&&(U=$.slice(x)),U}function K($){$=O($);const U=$.indexOf("?");return U===-1?"":$.slice(U+1)}function H($,U){return U.parseNumbers&&!Number.isNaN(Number($))&&typeof $=="string"&&$.trim()!==""?$=Number($):U.parseBooleans&&$!==null&&($.toLowerCase()==="true"||$.toLowerCase()==="false")&&($=$.toLowerCase()==="true"),$}function re($,U){U=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},U),p(U.arrayFormatSeparator);const x=g(U),C=Object.create(null);if(typeof $!="string"||($=$.trim().replace(/^[?#&]/,""),!$))return C;for(const T of $.split("&")){if(T==="")continue;let[h,w]=s(U.decode?T.replace(/\+/g," "):T,"=");w=w===void 0?null:["comma","separator","bracket-separator"].includes(U.arrayFormat)?w:b(w,U),x(b(h,U),w,C)}for(const T of Object.keys(C)){const h=C[T];if(typeof h=="object"&&h!==null)for(const w of Object.keys(h))h[w]=H(h[w],U);else C[T]=H(h,U)}return U.sort===!1?C:(U.sort===!0?Object.keys(C).sort():Object.keys(C).sort(U.sort)).reduce((T,h)=>{const w=C[h];return w&&typeof w=="object"&&!Array.isArray(w)?T[h]=S(w):T[h]=w,T},Object.create(null))}i.extract=K,i.parse=re,i.stringify=($,U)=>{if(!$)return"";U=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},U),p(U.arrayFormatSeparator);const x=w=>U.skipNull&&c($[w])||U.skipEmptyString&&$[w]==="",C=d(U),T={};for(const w of Object.keys($))x(w)||(T[w]=$[w]);const h=Object.keys(T);return U.sort!==!1&&h.sort(U.sort),h.map(w=>{const Q=$[w];return Q===void 0?"":Q===null?v(w,U):Array.isArray(Q)?Q.length===0&&U.arrayFormat==="bracket-separator"?v(w,U)+"[]":Q.reduce(C(w),[]).join("&"):v(w,U)+"="+v(Q,U)}).filter(w=>w.length>0).join("&")},i.parseUrl=($,U)=>{U=Object.assign({decode:!0},U);const[x,C]=s($,"#");return Object.assign({url:x.split("?")[0]||"",query:re(K($),U)},U&&U.parseFragmentIdentifier&&C?{fragmentIdentifier:b(C,U)}:{})},i.stringifyUrl=($,U)=>{U=Object.assign({encode:!0,strict:!0,[l]:!0},U);const x=O($.url).split("?")[0]||"",C=i.extract($.url),T=i.parse(C,{sort:!1}),h=Object.assign(T,$.query);let w=i.stringify(h,U);w&&(w=`?${w}`);let Q=I($.url);return $.fragmentIdentifier&&(Q=`#${U[l]?v($.fragmentIdentifier,U):$.fragmentIdentifier}`),`${x}${w}${Q}`},i.pick=($,U,x)=>{x=Object.assign({parseFragmentIdentifier:!0,[l]:!1},x);const{url:C,query:T,fragmentIdentifier:h}=i.parseUrl($,x);return i.stringifyUrl({url:C,query:o(T,U),fragmentIdentifier:h},x)},i.exclude=($,U,x)=>{const C=Array.isArray(U)?T=>!U.includes(T):(T,h)=>!U(T,h);return i.pick($,C,x)}})(_s);const YE={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe",batchFetchMessages:"waku_batchFetchMessages"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe",batchFetchMessages:"irn_batchFetchMessages"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe",batchFetchMessages:"iridium_batchFetchMessages"}};function JE(i,e=[]){const t=[];return Object.keys(i).forEach(s=>{if(e.length&&!e.includes(s))return;const o=i[s];t.push(...o.accounts)}),t}function Ip(i,e){return i.includes(":")?[i]:e.chains||[]}const xp="base10",cr="base16",wu="base64pad",Gu="utf8",Op=0,sn=1,XE=0,Rf=1,Eu=12,Yu=32;function ZE(){const i=Ku.generateKeyPair();return{privateKey:ur(i.secretKey,cr),publicKey:ur(i.publicKey,cr)}}function Du(){const i=jn.randomBytes(Yu);return ur(i,cr)}function QE(i,e){const t=Ku.sharedKey(_r(i,cr),_r(e,cr)),s=new zb(ha.SHA256,t).expand(Yu);return ur(s,cr)}function e3(i){const e=ha.hash(_r(i,cr));return ur(e,cr)}function Fn(i){const e=ha.hash(_r(i,Gu));return ur(e,cr)}function t3(i){return _r(`${i}`,xp)}function Is(i){return Number(ur(i,xp))}function r3(i){const e=t3(typeof i.type<"u"?i.type:Op);if(Is(e)===sn&&typeof i.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const t=typeof i.senderPublicKey<"u"?_r(i.senderPublicKey,cr):void 0,s=typeof i.iv<"u"?_r(i.iv,cr):jn.randomBytes(Eu),o=new qu.ChaCha20Poly1305(_r(i.symKey,cr)).seal(s,_r(i.message,Gu));return n3({type:e,sealed:o,iv:s,senderPublicKey:t})}function i3(i){const e=new qu.ChaCha20Poly1305(_r(i.symKey,cr)),{sealed:t,iv:s}=Xo(i.encoded),o=e.open(s,t);if(o===null)throw new Error("Failed to decrypt");return ur(o,Gu)}function n3(i){if(Is(i.type)===sn){if(typeof i.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return ur(yu([i.type,i.senderPublicKey,i.iv,i.sealed]),wu)}return ur(yu([i.type,i.iv,i.sealed]),wu)}function Xo(i){const e=_r(i,wu),t=e.slice(XE,Rf),s=Rf;if(Is(t)===sn){const d=s+Yu,g=d+Eu,p=e.slice(s,d),v=e.slice(d,g),b=e.slice(g);return{type:t,sealed:b,iv:v,senderPublicKey:p}}const o=s+Eu,c=e.slice(s,o),l=e.slice(o);return{type:t,sealed:l,iv:c}}function s3(i,e){const t=Xo(i);return Pp({type:Is(t.type),senderPublicKey:typeof t.senderPublicKey<"u"?ur(t.senderPublicKey,cr):void 0,receiverPublicKey:e==null?void 0:e.receiverPublicKey})}function Pp(i){const e=(i==null?void 0:i.type)||Op;if(e===sn){if(typeof(i==null?void 0:i.senderPublicKey)>"u")throw new Error("missing sender public key");if(typeof(i==null?void 0:i.receiverPublicKey)>"u")throw new Error("missing receiver public key")}return{type:e,senderPublicKey:i==null?void 0:i.senderPublicKey,receiverPublicKey:i==null?void 0:i.receiverPublicKey}}function $f(i){return i.type===sn&&typeof i.senderPublicKey=="string"&&typeof i.receiverPublicKey=="string"}var o3=Object.defineProperty,Ff=Object.getOwnPropertySymbols,a3=Object.prototype.hasOwnProperty,c3=Object.prototype.propertyIsEnumerable,Uf=(i,e,t)=>e in i?o3(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,jf=(i,e)=>{for(var t in e||(e={}))a3.call(e,t)&&Uf(i,t,e[t]);if(Ff)for(var t of Ff(e))c3.call(e,t)&&Uf(i,t,e[t]);return i};const u3="ReactNative",$i={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},h3="js";function Ju(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function Ap(){return!wp()&&!!ku()&&navigator.product===u3}function Xu(){return!Ju()&&!!ku()}function Zu(){return Ap()?$i.reactNative:Ju()?$i.node:Xu()?$i.browser:$i.unknown}function l3(i,e){let t=_s.parse(i);return t=jf(jf({},t),e),i=_s.stringify(t),i}function f3(){return Dp()||{name:"",description:"",url:"",icons:[""]}}function d3(){if(Zu()===$i.reactNative&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"){const{OS:t,Version:s}=global.Platform;return[t,s].join("-")}const i=Qw();if(i===null)return"unknown";const e=i.os?i.os.replace(" ","").toLowerCase():"unknown";return i.type==="browser"?[e,i.name,i.version].join("-"):[e,i.version].join("-")}function p3(){var i;const e=Zu();return e===$i.browser?[e,((i=Ep())==null?void 0:i.host)||"unknown"].join(":"):e}function g3(i,e,t){const s=d3(),o=p3();return[[i,e].join("-"),[h3,t].join("-"),s,o].join("/")}function y3({protocol:i,version:e,relayUrl:t,sdkVersion:s,auth:o,projectId:c,useOnCloseEvent:l}){const d=t.split("?"),g=g3(i,e,s),p={auth:o,ua:g,projectId:c,useOnCloseEvent:l||void 0},v=l3(d[1]||"",p);return d[0]+"?"+v}function tn(i,e){return i.filter(t=>e.includes(t)).length===i.length}function Cp(i){return Object.fromEntries(i.entries())}function Tp(i){return new Map(Object.entries(i))}function Rn(i=ve.FIVE_MINUTES,e){const t=ve.toMiliseconds(i||ve.FIVE_MINUTES);let s,o,c;return{resolve:l=>{c&&s&&(clearTimeout(c),s(l))},reject:l=>{c&&o&&(clearTimeout(c),o(l))},done:()=>new Promise((l,d)=>{c=setTimeout(()=>{d(new Error(e))},t),s=l,o=d})}}function Zo(i,e,t){return new Promise(async(s,o)=>{const c=setTimeout(()=>o(new Error(t)),e);try{const l=await i;s(l)}catch(l){o(l)}clearTimeout(c)})}function Np(i,e){if(typeof e=="string"&&e.startsWith(`${i}:`))return e;if(i.toLowerCase()==="topic"){if(typeof e!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${e}`}else if(i.toLowerCase()==="id"){if(typeof e!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${e}`}throw new Error(`Unknown expirer target type: ${i}`)}function v3(i){return Np("topic",i)}function _3(i){return Np("id",i)}function Rp(i){const[e,t]=i.split(":"),s={id:void 0,topic:void 0};if(e==="topic"&&typeof t=="string")s.topic=t;else if(e==="id"&&Number.isInteger(Number(t)))s.id=Number(t);else throw new Error(`Invalid target, expected id:number or topic:string, got ${e}:${t}`);return s}function Gr(i,e){return ve.fromMiliseconds((e||Date.now())+ve.toMiliseconds(i))}function Ri(i){return Date.now()>=ve.toMiliseconds(i)}function qt(i,e){return`${i}${e?`:${e}`:""}`}function Jc(i=[],e=[]){return[...new Set([...i,...e])]}async function m3({id:i,topic:e,wcDeepLink:t}){try{if(!t)return;const s=typeof t=="string"?JSON.parse(t):t;let o=s==null?void 0:s.href;if(typeof o!="string")return;o.endsWith("/")&&(o=o.slice(0,-1));const c=`${o}/wc?requestId=${i}&sessionTopic=${e}`,l=Zu();l===$i.browser?c.startsWith("https://")?window.open(c,"_blank","noreferrer noopener"):window.open(c,"_self","noreferrer noopener"):l===$i.reactNative&&typeof(global==null?void 0:global.Linking)<"u"&&await global.Linking.openURL(c)}catch(s){console.error(s)}}const b3="irn";function Su(i){return(i==null?void 0:i.relay)||{protocol:b3}}function Ko(i){const e=YE[i];if(typeof e>"u")throw new Error(`Relay Protocol not supported: ${i}`);return e}var w3=Object.defineProperty,Lf=Object.getOwnPropertySymbols,E3=Object.prototype.hasOwnProperty,D3=Object.prototype.propertyIsEnumerable,Mf=(i,e,t)=>e in i?w3(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,S3=(i,e)=>{for(var t in e||(e={}))E3.call(e,t)&&Mf(i,t,e[t]);if(Lf)for(var t of Lf(e))D3.call(e,t)&&Mf(i,t,e[t]);return i};function I3(i,e="-"){const t={},s="relay"+e;return Object.keys(i).forEach(o=>{if(o.startsWith(s)){const c=o.replace(s,""),l=i[o];t[c]=l}}),t}function x3(i){const e=i.indexOf(":"),t=i.indexOf("?")!==-1?i.indexOf("?"):void 0,s=i.substring(0,e),o=i.substring(e+1,t).split("@"),c=typeof t<"u"?i.substring(t):"",l=_s.parse(c);return{protocol:s,topic:O3(o[0]),version:parseInt(o[1],10),symKey:l.symKey,relay:I3(l)}}function O3(i){return i.startsWith("//")?i.substring(2):i}function P3(i,e="-"){const t="relay",s={};return Object.keys(i).forEach(o=>{const c=t+e+o;i[o]&&(s[c]=i[o])}),s}function A3(i){return`${i.protocol}:${i.topic}@${i.version}?`+_s.stringify(S3({symKey:i.symKey},P3(i.relay)))}function Mn(i){const e=[];return i.forEach(t=>{const[s,o]=t.split(":");e.push(`${s}:${o}`)}),e}function C3(i){const e=[];return Object.values(i).forEach(t=>{e.push(...Mn(t.accounts))}),e}function T3(i,e){const t=[];return Object.values(i).forEach(s=>{Mn(s.accounts).includes(e)&&t.push(...s.methods)}),t}function N3(i,e){const t=[];return Object.values(i).forEach(s=>{Mn(s.accounts).includes(e)&&t.push(...s.events)}),t}function R3(i,e){const t=ko(i,e);if(t)throw new Error(t.message);const s={};for(const[o,c]of Object.entries(i))s[o]={methods:c.methods,events:c.events,chains:c.accounts.map(l=>`${l.split(":")[0]}:${l.split(":")[1]}`)};return s}function Qu(i){return i.includes(":")}function Vo(i){return Qu(i)?i.split(":")[0]:i}const $3={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},F3={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function ce(i,e){const{message:t,code:s}=F3[i];return{message:e?`${t} ${e}`:t,code:s}}function Rt(i,e){const{message:t,code:s}=$3[i];return{message:e?`${t} ${e}`:t,code:s}}function oi(i,e){return Array.isArray(i)?typeof e<"u"&&i.length?i.every(e):!0:!1}function Un(i){return Object.getPrototypeOf(i)===Object.prototype&&Object.keys(i).length}function ar(i){return typeof i>"u"}function Gt(i,e){return e&&ar(i)?!0:typeof i=="string"&&!!i.trim().length}function eh(i,e){return e&&ar(i)?!0:typeof i=="number"&&!isNaN(i)}function U3(i,e){const{requiredNamespaces:t}=e,s=Object.keys(i.namespaces),o=Object.keys(t);let c=!0;return tn(o,s)?(s.forEach(l=>{const{accounts:d,methods:g,events:p}=i.namespaces[l],v=Mn(d),b=t[l];(!tn(Ip(l,b),v)||!tn(b.methods,g)||!tn(b.events,p))&&(c=!1)}),c):!1}function Qo(i){return Gt(i,!1)&&i.includes(":")?i.split(":").length===2:!1}function j3(i){if(Gt(i,!1)&&i.includes(":")){const e=i.split(":");if(e.length===3){const t=e[0]+":"+e[1];return!!e[2]&&Qo(t)}}return!1}function L3(i){if(Gt(i,!1))try{return typeof new URL(i)<"u"}catch{return!1}return!1}function M3(i){var e;return(e=i==null?void 0:i.proposer)==null?void 0:e.publicKey}function B3(i){return i==null?void 0:i.topic}function z3(i,e){let t=null;return Gt(i==null?void 0:i.publicKey,!1)||(t=ce("MISSING_OR_INVALID",`${e} controller public key should be a string`)),t}function Bf(i){let e=!0;return oi(i)?i.length&&(e=i.every(t=>Gt(t,!1))):e=!1,e}function q3(i,e,t){let s=null;return oi(e)&&e.length?e.forEach(o=>{s||Qo(o)||(s=Rt("UNSUPPORTED_CHAINS",`${t}, chain ${o} should be a string and conform to "namespace:chainId" format`))}):Qo(i)||(s=Rt("UNSUPPORTED_CHAINS",`${t}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),s}function H3(i,e,t){let s=null;return Object.entries(i).forEach(([o,c])=>{if(s)return;const l=q3(o,Ip(o,c),`${e} ${t}`);l&&(s=l)}),s}function K3(i,e){let t=null;return oi(i)?i.forEach(s=>{t||j3(s)||(t=Rt("UNSUPPORTED_ACCOUNTS",`${e}, account ${s} should be a string and conform to "namespace:chainId:address" format`))}):t=Rt("UNSUPPORTED_ACCOUNTS",`${e}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),t}function V3(i,e){let t=null;return Object.values(i).forEach(s=>{if(t)return;const o=K3(s==null?void 0:s.accounts,`${e} namespace`);o&&(t=o)}),t}function k3(i,e){let t=null;return Bf(i==null?void 0:i.methods)?Bf(i==null?void 0:i.events)||(t=Rt("UNSUPPORTED_EVENTS",`${e}, events should be an array of strings or empty array for no events`)):t=Rt("UNSUPPORTED_METHODS",`${e}, methods should be an array of strings or empty array for no methods`),t}function $p(i,e){let t=null;return Object.values(i).forEach(s=>{if(t)return;const o=k3(s,`${e}, namespace`);o&&(t=o)}),t}function W3(i,e,t){let s=null;if(i&&Un(i)){const o=$p(i,e);o&&(s=o);const c=H3(i,e,t);c&&(s=c)}else s=ce("MISSING_OR_INVALID",`${e}, ${t} should be an object with data`);return s}function ko(i,e){let t=null;if(i&&Un(i)){const s=$p(i,e);s&&(t=s);const o=V3(i,e);o&&(t=o)}else t=ce("MISSING_OR_INVALID",`${e}, namespaces should be an object with data`);return t}function Fp(i){return Gt(i.protocol,!0)}function G3(i,e){let t=!1;return e&&!i?t=!0:i&&oi(i)&&i.length&&i.forEach(s=>{t=Fp(s)}),t}function Y3(i){return typeof i=="number"}function vr(i){return typeof i<"u"&&typeof i!==null}function J3(i){return!(!i||typeof i!="object"||!i.code||!eh(i.code,!1)||!i.message||!Gt(i.message,!1))}function X3(i){return!(ar(i)||!Gt(i.method,!1))}function Z3(i){return!(ar(i)||ar(i.result)&&ar(i.error)||!eh(i.id,!1)||!Gt(i.jsonrpc,!1))}function Q3(i){return!(ar(i)||!Gt(i.name,!1))}function zf(i,e){return!(!Qo(e)||!C3(i).includes(e))}function e6(i,e,t){return Gt(t,!1)?T3(i,e).includes(t):!1}function t6(i,e,t){return Gt(t,!1)?N3(i,e).includes(t):!1}function qf(i,e,t){let s=null;const o=r6(i),c=i6(e),l=Object.keys(o),d=Object.keys(c),g=Hf(Object.keys(i)),p=Hf(Object.keys(e)),v=g.filter(b=>!p.includes(b));return v.length&&(s=ce("NON_CONFORMING_NAMESPACES",`${t} namespaces keys don't satisfy requiredNamespaces.
      Required: ${v.toString()}
      Received: ${Object.keys(e).toString()}`)),tn(l,d)||(s=ce("NON_CONFORMING_NAMESPACES",`${t} namespaces chains don't satisfy required namespaces.
      Required: ${l.toString()}
      Approved: ${d.toString()}`)),Object.keys(e).forEach(b=>{if(!b.includes(":")||s)return;const S=Mn(e[b].accounts);S.includes(b)||(s=ce("NON_CONFORMING_NAMESPACES",`${t} namespaces accounts don't satisfy namespace accounts for ${b}
        Required: ${b}
        Approved: ${S.toString()}`))}),l.forEach(b=>{s||(tn(o[b].methods,c[b].methods)?tn(o[b].events,c[b].events)||(s=ce("NON_CONFORMING_NAMESPACES",`${t} namespaces events don't satisfy namespace events for ${b}`)):s=ce("NON_CONFORMING_NAMESPACES",`${t} namespaces methods don't satisfy namespace methods for ${b}`))}),s}function r6(i){const e={};return Object.keys(i).forEach(t=>{var s;t.includes(":")?e[t]=i[t]:(s=i[t].chains)==null||s.forEach(o=>{e[o]={methods:i[t].methods,events:i[t].events}})}),e}function Hf(i){return[...new Set(i.map(e=>e.includes(":")?e.split(":")[0]:e))]}function i6(i){const e={};return Object.keys(i).forEach(t=>{if(t.includes(":"))e[t]=i[t];else{const s=Mn(i[t].accounts);s==null||s.forEach(o=>{e[o]={accounts:i[t].accounts.filter(c=>c.includes(`${o}:`)),methods:i[t].methods,events:i[t].events}})}}),e}function n6(i,e){return eh(i,!1)&&i<=e.max&&i>=e.min}const s6=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,o6=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,a6=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function c6(i,e){if(i==="__proto__"||i==="constructor"&&e&&typeof e=="object"&&"prototype"in e){u6(i);return}return e}function u6(i){console.warn(`[destr] Dropping "${i}" key to prevent prototype pollution.`)}function jo(i,e={}){if(typeof i!="string")return i;const t=i.trim();if(i[0]==='"'&&i.endsWith('"')&&!i.includes("\\"))return t.slice(1,-1);if(t.length<=9){const s=t.toLowerCase();if(s==="true")return!0;if(s==="false")return!1;if(s==="undefined")return;if(s==="null")return null;if(s==="nan")return Number.NaN;if(s==="infinity")return Number.POSITIVE_INFINITY;if(s==="-infinity")return Number.NEGATIVE_INFINITY}if(!a6.test(i)){if(e.strict)throw new SyntaxError("[destr] Invalid JSON");return i}try{if(s6.test(i)||o6.test(i)){if(e.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(i,c6)}return JSON.parse(i)}catch(s){if(e.strict)throw s;return i}}function h6(i){return!i||typeof i.then!="function"?Promise.resolve(i):i}function Wt(i,...e){try{return h6(i(...e))}catch(t){return Promise.reject(t)}}function l6(i){const e=typeof i;return i===null||e!=="object"&&e!=="function"}function f6(i){const e=Object.getPrototypeOf(i);return!e||e.isPrototypeOf(Object)}function Wo(i){if(l6(i))return String(i);if(f6(i)||Array.isArray(i))return JSON.stringify(i);if(typeof i.toJSON=="function")return Wo(i.toJSON());throw new Error("[unstorage] Cannot stringify value!")}function Up(){if(typeof Buffer>"u")throw new TypeError("[unstorage] Buffer is not supported!")}const Iu="base64:";function d6(i){if(typeof i=="string")return i;Up();const e=Buffer.from(i).toString("base64");return Iu+e}function p6(i){return typeof i!="string"||!i.startsWith(Iu)?i:(Up(),Buffer.from(i.slice(Iu.length),"base64"))}function yr(i){return i?i.split("?")[0].replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,""):""}function g6(...i){return yr(i.join(":"))}function Lo(i){return i=yr(i),i?i+":":""}const y6="memory",v6=()=>{const i=new Map;return{name:y6,getInstance:()=>i,hasItem(e){return i.has(e)},getItem(e){return i.get(e)??null},getItemRaw(e){return i.get(e)??null},setItem(e,t){i.set(e,t)},setItemRaw(e,t){i.set(e,t)},removeItem(e){i.delete(e)},getKeys(){return[...i.keys()]},clear(){i.clear()},dispose(){i.clear()}}};function _6(i={}){const e={mounts:{"":i.driver||v6()},mountpoints:[""],watching:!1,watchListeners:[],unwatch:{}},t=p=>{for(const v of e.mountpoints)if(p.startsWith(v))return{base:v,relativeKey:p.slice(v.length),driver:e.mounts[v]};return{base:"",relativeKey:p,driver:e.mounts[""]}},s=(p,v)=>e.mountpoints.filter(b=>b.startsWith(p)||v&&p.startsWith(b)).map(b=>({relativeBase:p.length>b.length?p.slice(b.length):void 0,mountpoint:b,driver:e.mounts[b]})),o=(p,v)=>{if(e.watching){v=yr(v);for(const b of e.watchListeners)b(p,v)}},c=async()=>{if(!e.watching){e.watching=!0;for(const p in e.mounts)e.unwatch[p]=await Kf(e.mounts[p],o,p)}},l=async()=>{if(e.watching){for(const p in e.unwatch)await e.unwatch[p]();e.unwatch={},e.watching=!1}},d=(p,v,b)=>{const S=new Map,O=I=>{let K=S.get(I.base);return K||(K={driver:I.driver,base:I.base,items:[]},S.set(I.base,K)),K};for(const I of p){const K=typeof I=="string",H=yr(K?I:I.key),re=K?void 0:I.value,$=K||!I.options?v:{...v,...I.options},U=t(H);O(U).items.push({key:H,value:re,relativeKey:U.relativeKey,options:$})}return Promise.all([...S.values()].map(I=>b(I))).then(I=>I.flat())},g={hasItem(p,v={}){p=yr(p);const{relativeKey:b,driver:S}=t(p);return Wt(S.hasItem,b,v)},getItem(p,v={}){p=yr(p);const{relativeKey:b,driver:S}=t(p);return Wt(S.getItem,b,v).then(O=>jo(O))},getItems(p,v){return d(p,v,b=>b.driver.getItems?Wt(b.driver.getItems,b.items.map(S=>({key:S.relativeKey,options:S.options})),v).then(S=>S.map(O=>({key:g6(b.base,O.key),value:jo(O.value)}))):Promise.all(b.items.map(S=>Wt(b.driver.getItem,S.relativeKey,S.options).then(O=>({key:S.key,value:jo(O)})))))},getItemRaw(p,v={}){p=yr(p);const{relativeKey:b,driver:S}=t(p);return S.getItemRaw?Wt(S.getItemRaw,b,v):Wt(S.getItem,b,v).then(O=>p6(O))},async setItem(p,v,b={}){if(v===void 0)return g.removeItem(p);p=yr(p);const{relativeKey:S,driver:O}=t(p);O.setItem&&(await Wt(O.setItem,S,Wo(v),b),O.watch||o("update",p))},async setItems(p,v){await d(p,v,async b=>{if(b.driver.setItems)return Wt(b.driver.setItems,b.items.map(S=>({key:S.relativeKey,value:Wo(S.value),options:S.options})),v);b.driver.setItem&&await Promise.all(b.items.map(S=>Wt(b.driver.setItem,S.relativeKey,Wo(S.value),S.options)))})},async setItemRaw(p,v,b={}){if(v===void 0)return g.removeItem(p,b);p=yr(p);const{relativeKey:S,driver:O}=t(p);if(O.setItemRaw)await Wt(O.setItemRaw,S,v,b);else if(O.setItem)await Wt(O.setItem,S,d6(v),b);else return;O.watch||o("update",p)},async removeItem(p,v={}){typeof v=="boolean"&&(v={removeMeta:v}),p=yr(p);const{relativeKey:b,driver:S}=t(p);S.removeItem&&(await Wt(S.removeItem,b,v),(v.removeMeta||v.removeMata)&&await Wt(S.removeItem,b+"$",v),S.watch||o("remove",p))},async getMeta(p,v={}){typeof v=="boolean"&&(v={nativeOnly:v}),p=yr(p);const{relativeKey:b,driver:S}=t(p),O=Object.create(null);if(S.getMeta&&Object.assign(O,await Wt(S.getMeta,b,v)),!v.nativeOnly){const I=await Wt(S.getItem,b+"$",v).then(K=>jo(K));I&&typeof I=="object"&&(typeof I.atime=="string"&&(I.atime=new Date(I.atime)),typeof I.mtime=="string"&&(I.mtime=new Date(I.mtime)),Object.assign(O,I))}return O},setMeta(p,v,b={}){return this.setItem(p+"$",v,b)},removeMeta(p,v={}){return this.removeItem(p+"$",v)},async getKeys(p,v={}){p=Lo(p);const b=s(p,!0);let S=[];const O=[];for(const I of b){const K=await Wt(I.driver.getKeys,I.relativeBase,v);for(const H of K){const re=I.mountpoint+yr(H);S.some($=>re.startsWith($))||O.push(re)}S=[I.mountpoint,...S.filter(H=>!H.startsWith(I.mountpoint))]}return p?O.filter(I=>I.startsWith(p)&&I[I.length-1]!=="$"):O.filter(I=>I[I.length-1]!=="$")},async clear(p,v={}){p=Lo(p),await Promise.all(s(p,!1).map(async b=>{if(b.driver.clear)return Wt(b.driver.clear,b.relativeBase,v);if(b.driver.removeItem){const S=await b.driver.getKeys(b.relativeBase||"",v);return Promise.all(S.map(O=>b.driver.removeItem(O,v)))}}))},async dispose(){await Promise.all(Object.values(e.mounts).map(p=>Vf(p)))},async watch(p){return await c(),e.watchListeners.push(p),async()=>{e.watchListeners=e.watchListeners.filter(v=>v!==p),e.watchListeners.length===0&&await l()}},async unwatch(){e.watchListeners=[],await l()},mount(p,v){if(p=Lo(p),p&&e.mounts[p])throw new Error(`already mounted at ${p}`);return p&&(e.mountpoints.push(p),e.mountpoints.sort((b,S)=>S.length-b.length)),e.mounts[p]=v,e.watching&&Promise.resolve(Kf(v,o,p)).then(b=>{e.unwatch[p]=b}).catch(console.error),g},async unmount(p,v=!0){p=Lo(p),!(!p||!e.mounts[p])&&(e.watching&&p in e.unwatch&&(e.unwatch[p](),delete e.unwatch[p]),v&&await Vf(e.mounts[p]),e.mountpoints=e.mountpoints.filter(b=>b!==p),delete e.mounts[p])},getMount(p=""){p=yr(p)+":";const v=t(p);return{driver:v.driver,base:v.base}},getMounts(p="",v={}){return p=yr(p),s(p,v.parents).map(S=>({driver:S.driver,base:S.mountpoint}))},keys:(p,v={})=>g.getKeys(p,v),get:(p,v={})=>g.getItem(p,v),set:(p,v,b={})=>g.setItem(p,v,b),has:(p,v={})=>g.hasItem(p,v),del:(p,v={})=>g.removeItem(p,v),remove:(p,v={})=>g.removeItem(p,v)};return g}function Kf(i,e,t){return i.watch?i.watch((s,o)=>e(s,t+o)):()=>{}}async function Vf(i){typeof i.dispose=="function"&&await Wt(i.dispose)}function on(i){return new Promise((e,t)=>{i.oncomplete=i.onsuccess=()=>e(i.result),i.onabort=i.onerror=()=>t(i.error)})}function jp(i,e){const t=indexedDB.open(i);t.onupgradeneeded=()=>t.result.createObjectStore(e);const s=on(t);return(o,c)=>s.then(l=>c(l.transaction(e,o).objectStore(e)))}let Xc;function xs(){return Xc||(Xc=jp("keyval-store","keyval")),Xc}function kf(i,e=xs()){return e("readonly",t=>on(t.get(i)))}function m6(i,e,t=xs()){return t("readwrite",s=>(s.put(e,i),on(s.transaction)))}function b6(i,e=xs()){return e("readwrite",t=>(t.delete(i),on(t.transaction)))}function w6(i=xs()){return i("readwrite",e=>(e.clear(),on(e.transaction)))}function E6(i,e){return i.openCursor().onsuccess=function(){this.result&&(e(this.result),this.result.continue())},on(i.transaction)}function D6(i=xs()){return i("readonly",e=>{if(e.getAllKeys)return on(e.getAllKeys());const t=[];return E6(e,s=>t.push(s.key)).then(()=>t)})}const S6=i=>JSON.stringify(i,(e,t)=>typeof t=="bigint"?t.toString()+"n":t),I6=i=>{const e=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,t=i.replace(e,'$1"$2n"$3');return JSON.parse(t,(s,o)=>typeof o=="string"&&o.match(/^\d+n$/)?BigInt(o.substring(0,o.length-1)):o)};function Os(i){if(typeof i!="string")throw new Error(`Cannot safe json parse value of type ${typeof i}`);try{return I6(i)}catch{return i}}function rn(i){return typeof i=="string"?i:S6(i)||""}const x6="idb-keyval";var O6=(i={})=>{const e=i.base&&i.base.length>0?`${i.base}:`:"",t=o=>e+o;let s;return i.dbName&&i.storeName&&(s=jp(i.dbName,i.storeName)),{name:x6,options:i,async hasItem(o){return!(typeof await kf(t(o),s)>"u")},async getItem(o){return await kf(t(o),s)??null},setItem(o,c){return m6(t(o),c,s)},removeItem(o){return b6(t(o),s)},getKeys(){return D6(s)},clear(){return w6(s)}}};const P6="WALLET_CONNECT_V2_INDEXED_DB",A6="keyvaluestorage";let C6=class{constructor(){this.indexedDb=_6({driver:O6({dbName:P6,storeName:A6})})}async getKeys(){return this.indexedDb.getKeys()}async getEntries(){return(await this.indexedDb.getItems(await this.indexedDb.getKeys())).map(e=>[e.key,e.value])}async getItem(e){const t=await this.indexedDb.getItem(e);if(t!==null)return t}async setItem(e,t){await this.indexedDb.setItem(e,rn(t))}async removeItem(e){await this.indexedDb.removeItem(e)}};var Zc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Go={exports:{}};(function(){let i;function e(){}i=e,i.prototype.getItem=function(t){return this.hasOwnProperty(t)?String(this[t]):null},i.prototype.setItem=function(t,s){this[t]=String(s)},i.prototype.removeItem=function(t){delete this[t]},i.prototype.clear=function(){const t=this;Object.keys(t).forEach(function(s){t[s]=void 0,delete t[s]})},i.prototype.key=function(t){return t=t||0,Object.keys(this)[t]},i.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof Zc<"u"&&Zc.localStorage?Go.exports=Zc.localStorage:typeof window<"u"&&window.localStorage?Go.exports=window.localStorage:Go.exports=new e})();function T6(i){var e;return[i[0],Os((e=i[1])!=null?e:"")]}let N6=class{constructor(){this.localStorage=Go.exports}async getKeys(){return Object.keys(this.localStorage)}async getEntries(){return Object.entries(this.localStorage).map(T6)}async getItem(e){const t=this.localStorage.getItem(e);if(t!==null)return Os(t)}async setItem(e,t){this.localStorage.setItem(e,rn(t))}async removeItem(e){this.localStorage.removeItem(e)}};const R6="wc_storage_version",Wf=1,$6=async(i,e,t)=>{const s=R6,o=await e.getItem(s);if(o&&o>=Wf){t(e);return}const c=await i.getKeys();if(!c.length){t(e);return}const l=[];for(;c.length;){const d=c.shift();if(!d)continue;const g=d.toLowerCase();if(g.includes("wc@")||g.includes("walletconnect")||g.includes("wc_")||g.includes("wallet_connect")){const p=await i.getItem(d);await e.setItem(d,p),l.push(d)}}await e.setItem(s,Wf),t(e),F6(i,l)},F6=async(i,e)=>{e.length&&e.forEach(async t=>{await i.removeItem(t)})};let U6=class{constructor(){this.initialized=!1,this.setInitialized=t=>{this.storage=t,this.initialized=!0};const e=new N6;this.storage=e;try{const t=new C6;$6(e,t,this.setInitialized)}catch{this.initialized=!0}}async getKeys(){return await this.initialize(),this.storage.getKeys()}async getEntries(){return await this.initialize(),this.storage.getEntries()}async getItem(e){return await this.initialize(),this.storage.getItem(e)}async setItem(e,t){return await this.initialize(),this.storage.setItem(e,t)}async removeItem(e){return await this.initialize(),this.storage.removeItem(e)}async initialize(){this.initialized||await new Promise(e=>{const t=setInterval(()=>{this.initialized&&(clearInterval(t),e())},20)})}};var Bn={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var xu=function(i,e){return xu=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)s.hasOwnProperty(o)&&(t[o]=s[o])},xu(i,e)};function j6(i,e){xu(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var Ou=function(){return Ou=Object.assign||function(e){for(var t,s=1,o=arguments.length;s<o;s++){t=arguments[s];for(var c in t)Object.prototype.hasOwnProperty.call(t,c)&&(e[c]=t[c])}return e},Ou.apply(this,arguments)};function L6(i,e){var t={};for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&e.indexOf(s)<0&&(t[s]=i[s]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,s=Object.getOwnPropertySymbols(i);o<s.length;o++)e.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(i,s[o])&&(t[s[o]]=i[s[o]]);return t}function M6(i,e,t,s){var o=arguments.length,c=o<3?e:s===null?s=Object.getOwnPropertyDescriptor(e,t):s,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(i,e,t,s);else for(var d=i.length-1;d>=0;d--)(l=i[d])&&(c=(o<3?l(c):o>3?l(e,t,c):l(e,t))||c);return o>3&&c&&Object.defineProperty(e,t,c),c}function B6(i,e){return function(t,s){e(t,s,i)}}function z6(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)}function q6(i,e,t,s){function o(c){return c instanceof t?c:new t(function(l){l(c)})}return new(t||(t=Promise))(function(c,l){function d(v){try{p(s.next(v))}catch(b){l(b)}}function g(v){try{p(s.throw(v))}catch(b){l(b)}}function p(v){v.done?c(v.value):o(v.value).then(d,g)}p((s=s.apply(i,e||[])).next())})}function H6(i,e){var t={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},s,o,c,l;return l={next:d(0),throw:d(1),return:d(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function d(p){return function(v){return g([p,v])}}function g(p){if(s)throw new TypeError("Generator is already executing.");for(;t;)try{if(s=1,o&&(c=p[0]&2?o.return:p[0]?o.throw||((c=o.return)&&c.call(o),0):o.next)&&!(c=c.call(o,p[1])).done)return c;switch(o=0,c&&(p=[p[0]&2,c.value]),p[0]){case 0:case 1:c=p;break;case 4:return t.label++,{value:p[1],done:!1};case 5:t.label++,o=p[1],p=[0];continue;case 7:p=t.ops.pop(),t.trys.pop();continue;default:if(c=t.trys,!(c=c.length>0&&c[c.length-1])&&(p[0]===6||p[0]===2)){t=0;continue}if(p[0]===3&&(!c||p[1]>c[0]&&p[1]<c[3])){t.label=p[1];break}if(p[0]===6&&t.label<c[1]){t.label=c[1],c=p;break}if(c&&t.label<c[2]){t.label=c[2],t.ops.push(p);break}c[2]&&t.ops.pop(),t.trys.pop();continue}p=e.call(i,t)}catch(v){p=[6,v],o=0}finally{s=c=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}}function K6(i,e,t,s){s===void 0&&(s=t),i[s]=e[t]}function V6(i,e){for(var t in i)t!=="default"&&!e.hasOwnProperty(t)&&(e[t]=i[t])}function Pu(i){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&i[e],s=0;if(t)return t.call(i);if(i&&typeof i.length=="number")return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Lp(i,e){var t=typeof Symbol=="function"&&i[Symbol.iterator];if(!t)return i;var s=t.call(i),o,c=[],l;try{for(;(e===void 0||e-- >0)&&!(o=s.next()).done;)c.push(o.value)}catch(d){l={error:d}}finally{try{o&&!o.done&&(t=s.return)&&t.call(s)}finally{if(l)throw l.error}}return c}function k6(){for(var i=[],e=0;e<arguments.length;e++)i=i.concat(Lp(arguments[e]));return i}function W6(){for(var i=0,e=0,t=arguments.length;e<t;e++)i+=arguments[e].length;for(var s=Array(i),o=0,e=0;e<t;e++)for(var c=arguments[e],l=0,d=c.length;l<d;l++,o++)s[o]=c[l];return s}function ms(i){return this instanceof ms?(this.v=i,this):new ms(i)}function G6(i,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=t.apply(i,e||[]),o,c=[];return o={},l("next"),l("throw"),l("return"),o[Symbol.asyncIterator]=function(){return this},o;function l(S){s[S]&&(o[S]=function(O){return new Promise(function(I,K){c.push([S,O,I,K])>1||d(S,O)})})}function d(S,O){try{g(s[S](O))}catch(I){b(c[0][3],I)}}function g(S){S.value instanceof ms?Promise.resolve(S.value.v).then(p,v):b(c[0][2],S)}function p(S){d("next",S)}function v(S){d("throw",S)}function b(S,O){S(O),c.shift(),c.length&&d(c[0][0],c[0][1])}}function Y6(i){var e,t;return e={},s("next"),s("throw",function(o){throw o}),s("return"),e[Symbol.iterator]=function(){return this},e;function s(o,c){e[o]=i[o]?function(l){return(t=!t)?{value:ms(i[o](l)),done:o==="return"}:c?c(l):l}:c}}function J6(i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=i[Symbol.asyncIterator],t;return e?e.call(i):(i=typeof Pu=="function"?Pu(i):i[Symbol.iterator](),t={},s("next"),s("throw"),s("return"),t[Symbol.asyncIterator]=function(){return this},t);function s(c){t[c]=i[c]&&function(l){return new Promise(function(d,g){l=i[c](l),o(d,g,l.done,l.value)})}}function o(c,l,d,g){Promise.resolve(g).then(function(p){c({value:p,done:d})},l)}}function X6(i,e){return Object.defineProperty?Object.defineProperty(i,"raw",{value:e}):i.raw=e,i}function Z6(i){if(i&&i.__esModule)return i;var e={};if(i!=null)for(var t in i)Object.hasOwnProperty.call(i,t)&&(e[t]=i[t]);return e.default=i,e}function Q6(i){return i&&i.__esModule?i:{default:i}}function e2(i,e){if(!e.has(i))throw new TypeError("attempted to get private field on non-instance");return e.get(i)}function t2(i,e,t){if(!e.has(i))throw new TypeError("attempted to set private field on non-instance");return e.set(i,t),t}const r2=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return Ou},__asyncDelegator:Y6,__asyncGenerator:G6,__asyncValues:J6,__await:ms,__awaiter:q6,__classPrivateFieldGet:e2,__classPrivateFieldSet:t2,__createBinding:K6,__decorate:M6,__exportStar:V6,__extends:j6,__generator:H6,__importDefault:Q6,__importStar:Z6,__makeTemplateObject:X6,__metadata:z6,__param:B6,__read:Lp,__rest:L6,__spread:k6,__spreadArrays:W6,__values:Pu},Symbol.toStringTag,{value:"Module"})),da=na(r2);var cs={},Qc={},us={};class an{}const i2=Object.freeze(Object.defineProperty({__proto__:null,IEvents:an},Symbol.toStringTag,{value:"Module"})),n2=na(i2);var Gf;function s2(){if(Gf)return us;Gf=1,Object.defineProperty(us,"__esModule",{value:!0}),us.IHeartBeat=void 0;const i=n2;class e extends i.IEvents{constructor(s){super()}}return us.IHeartBeat=e,us}var Yf;function Mp(){return Yf||(Yf=1,function(i){Object.defineProperty(i,"__esModule",{value:!0}),da.__exportStar(s2(),i)}(Qc)),Qc}var eu={},en={},Jf;function o2(){if(Jf)return en;Jf=1,Object.defineProperty(en,"__esModule",{value:!0}),en.HEARTBEAT_EVENTS=en.HEARTBEAT_INTERVAL=void 0;const i=ve;return en.HEARTBEAT_INTERVAL=i.FIVE_SECONDS,en.HEARTBEAT_EVENTS={pulse:"heartbeat_pulse"},en}var Xf;function Bp(){return Xf||(Xf=1,function(i){Object.defineProperty(i,"__esModule",{value:!0}),da.__exportStar(o2(),i)}(eu)),eu}var Zf;function a2(){if(Zf)return cs;Zf=1,Object.defineProperty(cs,"__esModule",{value:!0}),cs.HeartBeat=void 0;const i=da,e=mr,t=ve,s=Mp(),o=Bp();class c extends s.IHeartBeat{constructor(d){super(d),this.events=new e.EventEmitter,this.interval=o.HEARTBEAT_INTERVAL,this.interval=(d==null?void 0:d.interval)||o.HEARTBEAT_INTERVAL}static init(d){return i.__awaiter(this,void 0,void 0,function*(){const g=new c(d);return yield g.init(),g})}init(){return i.__awaiter(this,void 0,void 0,function*(){yield this.initialize()})}stop(){clearInterval(this.intervalRef)}on(d,g){this.events.on(d,g)}once(d,g){this.events.once(d,g)}off(d,g){this.events.off(d,g)}removeListener(d,g){this.events.removeListener(d,g)}initialize(){return i.__awaiter(this,void 0,void 0,function*(){this.intervalRef=setInterval(()=>this.pulse(),t.toMiliseconds(this.interval))})}pulse(){this.events.emit(o.HEARTBEAT_EVENTS.pulse)}}return cs.HeartBeat=c,cs}(function(i){Object.defineProperty(i,"__esModule",{value:!0});const e=da;e.__exportStar(a2(),i),e.__exportStar(Mp(),i),e.__exportStar(Bp(),i)})(Bn);function c2(i){try{return JSON.stringify(i)}catch{return'"[Circular]"'}}var u2=h2;function h2(i,e,t){var s=t&&t.stringify||c2,o=1;if(typeof i=="object"&&i!==null){var c=e.length+o;if(c===1)return i;var l=new Array(c);l[0]=s(i);for(var d=1;d<c;d++)l[d]=s(e[d]);return l.join(" ")}if(typeof i!="string")return i;var g=e.length;if(g===0)return i;for(var p="",v=1-o,b=-1,S=i&&i.length||0,O=0;O<S;){if(i.charCodeAt(O)===37&&O+1<S){switch(b=b>-1?b:0,i.charCodeAt(O+1)){case 100:case 102:if(v>=g||e[v]==null)break;b<O&&(p+=i.slice(b,O)),p+=Number(e[v]),b=O+2,O++;break;case 105:if(v>=g||e[v]==null)break;b<O&&(p+=i.slice(b,O)),p+=Math.floor(Number(e[v])),b=O+2,O++;break;case 79:case 111:case 106:if(v>=g||e[v]===void 0)break;b<O&&(p+=i.slice(b,O));var I=typeof e[v];if(I==="string"){p+="'"+e[v]+"'",b=O+2,O++;break}if(I==="function"){p+=e[v].name||"<anonymous>",b=O+2,O++;break}p+=s(e[v]),b=O+2,O++;break;case 115:if(v>=g)break;b<O&&(p+=i.slice(b,O)),p+=String(e[v]),b=O+2,O++;break;case 37:b<O&&(p+=i.slice(b,O)),p+="%",b=O+2,O++,v--;break}++v}++O}return b===-1?i:(b<S&&(p+=i.slice(b)),p)}const Qf=u2;var l2=si;const bs=w2().console||{},f2={mapHttpRequest:Mo,mapHttpResponse:Mo,wrapRequestSerializer:tu,wrapResponseSerializer:tu,wrapErrorSerializer:tu,req:Mo,res:Mo,err:v2};function d2(i,e){return Array.isArray(i)?i.filter(function(s){return s!=="!stdSerializers.err"}):i===!0?Object.keys(e):!1}function si(i){i=i||{},i.browser=i.browser||{};const e=i.browser.transmit;if(e&&typeof e.send!="function")throw Error("pino: transmit option must have a send function");const t=i.browser.write||bs;i.browser.write&&(i.browser.asObject=!0);const s=i.serializers||{},o=d2(i.browser.serialize,s);let c=i.browser.serialize;Array.isArray(i.browser.serialize)&&i.browser.serialize.indexOf("!stdSerializers.err")>-1&&(c=!1);const l=["error","fatal","warn","info","debug","trace"];typeof t=="function"&&(t.error=t.fatal=t.warn=t.info=t.debug=t.trace=t),i.enabled===!1&&(i.level="silent");const d=i.level||"info",g=Object.create(t);g.log||(g.log=ws),Object.defineProperty(g,"levelVal",{get:v}),Object.defineProperty(g,"level",{get:b,set:S});const p={transmit:e,serialize:o,asObject:i.browser.asObject,levels:l,timestamp:_2(i)};g.levels=si.levels,g.level=d,g.setMaxListeners=g.getMaxListeners=g.emit=g.addListener=g.on=g.prependListener=g.once=g.prependOnceListener=g.removeListener=g.removeAllListeners=g.listeners=g.listenerCount=g.eventNames=g.write=g.flush=ws,g.serializers=s,g._serialize=o,g._stdErrSerialize=c,g.child=O,e&&(g._logEvent=Au());function v(){return this.level==="silent"?1/0:this.levels.values[this.level]}function b(){return this._level}function S(I){if(I!=="silent"&&!this.levels.values[I])throw Error("unknown level "+I);this._level=I,Tn(p,g,"error","log"),Tn(p,g,"fatal","error"),Tn(p,g,"warn","error"),Tn(p,g,"info","log"),Tn(p,g,"debug","log"),Tn(p,g,"trace","log")}function O(I,K){if(!I)throw new Error("missing bindings for child Pino");K=K||{},o&&I.serializers&&(K.serializers=I.serializers);const H=K.serializers;if(o&&H){var re=Object.assign({},s,H),$=i.browser.serialize===!0?Object.keys(re):o;delete I.serializers,pa([I],$,re,this._stdErrSerialize)}function U(x){this._childLevel=(x._childLevel|0)+1,this.error=Nn(x,I,"error"),this.fatal=Nn(x,I,"fatal"),this.warn=Nn(x,I,"warn"),this.info=Nn(x,I,"info"),this.debug=Nn(x,I,"debug"),this.trace=Nn(x,I,"trace"),re&&(this.serializers=re,this._serialize=$),e&&(this._logEvent=Au([].concat(x._logEvent.bindings,I)))}return U.prototype=this,new U(this)}return g}si.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}};si.stdSerializers=f2;si.stdTimeFunctions=Object.assign({},{nullTime:zp,epochTime:qp,unixTime:m2,isoTime:b2});function Tn(i,e,t,s){const o=Object.getPrototypeOf(e);e[t]=e.levelVal>e.levels.values[t]?ws:o[t]?o[t]:bs[t]||bs[s]||ws,p2(i,e,t)}function p2(i,e,t){!i.transmit&&e[t]===ws||(e[t]=function(s){return function(){const c=i.timestamp(),l=new Array(arguments.length),d=Object.getPrototypeOf&&Object.getPrototypeOf(this)===bs?bs:this;for(var g=0;g<l.length;g++)l[g]=arguments[g];if(i.serialize&&!i.asObject&&pa(l,this._serialize,this.serializers,this._stdErrSerialize),i.asObject?s.call(d,g2(this,t,l,c)):s.apply(d,l),i.transmit){const p=i.transmit.level||e.level,v=si.levels.values[p],b=si.levels.values[t];if(b<v)return;y2(this,{ts:c,methodLevel:t,methodValue:b,transmitLevel:p,transmitValue:si.levels.values[i.transmit.level||e.level],send:i.transmit.send,val:e.levelVal},l)}}}(e[t]))}function g2(i,e,t,s){i._serialize&&pa(t,i._serialize,i.serializers,i._stdErrSerialize);const o=t.slice();let c=o[0];const l={};s&&(l.time=s),l.level=si.levels.values[e];let d=(i._childLevel|0)+1;if(d<1&&(d=1),c!==null&&typeof c=="object"){for(;d--&&typeof o[0]=="object";)Object.assign(l,o.shift());c=o.length?Qf(o.shift(),o):void 0}else typeof c=="string"&&(c=Qf(o.shift(),o));return c!==void 0&&(l.msg=c),l}function pa(i,e,t,s){for(const o in i)if(s&&i[o]instanceof Error)i[o]=si.stdSerializers.err(i[o]);else if(typeof i[o]=="object"&&!Array.isArray(i[o]))for(const c in i[o])e&&e.indexOf(c)>-1&&c in t&&(i[o][c]=t[c](i[o][c]))}function Nn(i,e,t){return function(){const s=new Array(1+arguments.length);s[0]=e;for(var o=1;o<s.length;o++)s[o]=arguments[o-1];return i[t].apply(this,s)}}function y2(i,e,t){const s=e.send,o=e.ts,c=e.methodLevel,l=e.methodValue,d=e.val,g=i._logEvent.bindings;pa(t,i._serialize||Object.keys(i.serializers),i.serializers,i._stdErrSerialize===void 0?!0:i._stdErrSerialize),i._logEvent.ts=o,i._logEvent.messages=t.filter(function(p){return g.indexOf(p)===-1}),i._logEvent.level.label=c,i._logEvent.level.value=l,s(c,i._logEvent,d),i._logEvent=Au(g)}function Au(i){return{ts:0,messages:[],bindings:i||[],level:{label:"",value:0}}}function v2(i){const e={type:i.constructor.name,msg:i.message,stack:i.stack};for(const t in i)e[t]===void 0&&(e[t]=i[t]);return e}function _2(i){return typeof i.timestamp=="function"?i.timestamp:i.timestamp===!1?zp:qp}function Mo(){return{}}function tu(i){return i}function ws(){}function zp(){return!1}function qp(){return Date.now()}function m2(){return Math.round(Date.now()/1e3)}function b2(){return new Date(Date.now()).toISOString()}function w2(){function i(e){return typeof e<"u"&&e}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return i(self)||i(window)||i(this)||{}}}const ga=ia(l2),E2={level:"info"},Ps="custom_context";var D2=Object.defineProperty,S2=Object.defineProperties,I2=Object.getOwnPropertyDescriptors,ed=Object.getOwnPropertySymbols,x2=Object.prototype.hasOwnProperty,O2=Object.prototype.propertyIsEnumerable,td=(i,e,t)=>e in i?D2(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,P2=(i,e)=>{for(var t in e||(e={}))x2.call(e,t)&&td(i,t,e[t]);if(ed)for(var t of ed(e))O2.call(e,t)&&td(i,t,e[t]);return i},A2=(i,e)=>S2(i,I2(e));function ya(i){return A2(P2({},i),{level:(i==null?void 0:i.level)||E2.level})}function C2(i,e=Ps){return i[e]||""}function T2(i,e,t=Ps){return i[t]=e,i}function br(i,e=Ps){let t="";return typeof i.bindings>"u"?t=C2(i,e):t=i.bindings().context||"",t}function N2(i,e,t=Ps){const s=br(i,t);return s.trim()?`${s}/${e}`:e}function Pr(i,e,t=Ps){const s=N2(i,e,t),o=i.child({context:s});return T2(o,s,t)}let R2=class extends an{constructor(e){super(),this.opts=e,this.protocol="wc",this.version=2}};class $2 extends an{constructor(e,t){super(),this.core=e,this.logger=t,this.records=new Map}}class F2{constructor(e,t){this.logger=e,this.core=t}}let U2=class extends an{constructor(e,t){super(),this.relayer=e,this.logger=t}},j2=class extends an{constructor(e){super()}},L2=class{constructor(e,t,s,o){this.core=e,this.logger=t,this.name=s}},M2=class extends an{constructor(e,t){super(),this.relayer=e,this.logger=t}},B2=class extends an{constructor(e,t){super(),this.core=e,this.logger=t}},z2=class{constructor(e,t){this.projectId=e,this.logger=t}},q2=class{constructor(e){this.opts=e,this.protocol="wc",this.version=2}},H2=class{constructor(e){this.client=e}};var th={},Hp={};(function(i){Object.defineProperty(i,"__esModule",{value:!0});var e=Ue,t=Or;i.DIGEST_LENGTH=64,i.BLOCK_SIZE=128;var s=function(){function d(){this.digestLength=i.DIGEST_LENGTH,this.blockSize=i.BLOCK_SIZE,this._stateHi=new Int32Array(8),this._stateLo=new Int32Array(8),this._tempHi=new Int32Array(16),this._tempLo=new Int32Array(16),this._buffer=new Uint8Array(256),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return d.prototype._initState=function(){this._stateHi[0]=1779033703,this._stateHi[1]=3144134277,this._stateHi[2]=1013904242,this._stateHi[3]=2773480762,this._stateHi[4]=1359893119,this._stateHi[5]=2600822924,this._stateHi[6]=528734635,this._stateHi[7]=1541459225,this._stateLo[0]=4089235720,this._stateLo[1]=2227873595,this._stateLo[2]=4271175723,this._stateLo[3]=1595750129,this._stateLo[4]=2917565137,this._stateLo[5]=725511199,this._stateLo[6]=4215389547,this._stateLo[7]=327033209},d.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},d.prototype.clean=function(){t.wipe(this._buffer),t.wipe(this._tempHi),t.wipe(this._tempLo),this.reset()},d.prototype.update=function(g,p){if(p===void 0&&(p=g.length),this._finished)throw new Error("SHA512: can't update because hash was finished.");var v=0;if(this._bytesHashed+=p,this._bufferLength>0){for(;this._bufferLength<i.BLOCK_SIZE&&p>0;)this._buffer[this._bufferLength++]=g[v++],p--;this._bufferLength===this.blockSize&&(c(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,this.blockSize),this._bufferLength=0)}for(p>=this.blockSize&&(v=c(this._tempHi,this._tempLo,this._stateHi,this._stateLo,g,v,p),p%=this.blockSize);p>0;)this._buffer[this._bufferLength++]=g[v++],p--;return this},d.prototype.finish=function(g){if(!this._finished){var p=this._bytesHashed,v=this._bufferLength,b=p/536870912|0,S=p<<3,O=p%128<112?128:256;this._buffer[v]=128;for(var I=v+1;I<O-8;I++)this._buffer[I]=0;e.writeUint32BE(b,this._buffer,O-8),e.writeUint32BE(S,this._buffer,O-4),c(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,O),this._finished=!0}for(var I=0;I<this.digestLength/8;I++)e.writeUint32BE(this._stateHi[I],g,I*8),e.writeUint32BE(this._stateLo[I],g,I*8+4);return this},d.prototype.digest=function(){var g=new Uint8Array(this.digestLength);return this.finish(g),g},d.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{stateHi:new Int32Array(this._stateHi),stateLo:new Int32Array(this._stateLo),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},d.prototype.restoreState=function(g){return this._stateHi.set(g.stateHi),this._stateLo.set(g.stateLo),this._bufferLength=g.bufferLength,g.buffer&&this._buffer.set(g.buffer),this._bytesHashed=g.bytesHashed,this._finished=!1,this},d.prototype.cleanSavedState=function(g){t.wipe(g.stateHi),t.wipe(g.stateLo),g.buffer&&t.wipe(g.buffer),g.bufferLength=0,g.bytesHashed=0},d}();i.SHA512=s;var o=new Int32Array([1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591]);function c(d,g,p,v,b,S,O){for(var I=p[0],K=p[1],H=p[2],re=p[3],$=p[4],U=p[5],x=p[6],C=p[7],T=v[0],h=v[1],w=v[2],Q=v[3],ne=v[4],ue=v[5],ge=v[6],ye=v[7],D,N,Z,J,V,k,ee,ie;O>=128;){for(var De=0;De<16;De++){var oe=8*De+S;d[De]=e.readUint32BE(b,oe),g[De]=e.readUint32BE(b,oe+4)}for(var De=0;De<80;De++){var Se=I,le=K,Ce=H,z=re,B=$,F=U,f=x,A=C,se=T,he=h,Ee=w,qe=Q,Ve=ne,je=ue,pt=ge,gt=ye;if(D=C,N=ye,V=N&65535,k=N>>>16,ee=D&65535,ie=D>>>16,D=($>>>14|ne<<32-14)^($>>>18|ne<<32-18)^(ne>>>41-32|$<<32-(41-32)),N=(ne>>>14|$<<32-14)^(ne>>>18|$<<32-18)^($>>>41-32|ne<<32-(41-32)),V+=N&65535,k+=N>>>16,ee+=D&65535,ie+=D>>>16,D=$&U^~$&x,N=ne&ue^~ne&ge,V+=N&65535,k+=N>>>16,ee+=D&65535,ie+=D>>>16,D=o[De*2],N=o[De*2+1],V+=N&65535,k+=N>>>16,ee+=D&65535,ie+=D>>>16,D=d[De%16],N=g[De%16],V+=N&65535,k+=N>>>16,ee+=D&65535,ie+=D>>>16,k+=V>>>16,ee+=k>>>16,ie+=ee>>>16,Z=ee&65535|ie<<16,J=V&65535|k<<16,D=Z,N=J,V=N&65535,k=N>>>16,ee=D&65535,ie=D>>>16,D=(I>>>28|T<<32-28)^(T>>>34-32|I<<32-(34-32))^(T>>>39-32|I<<32-(39-32)),N=(T>>>28|I<<32-28)^(I>>>34-32|T<<32-(34-32))^(I>>>39-32|T<<32-(39-32)),V+=N&65535,k+=N>>>16,ee+=D&65535,ie+=D>>>16,D=I&K^I&H^K&H,N=T&h^T&w^h&w,V+=N&65535,k+=N>>>16,ee+=D&65535,ie+=D>>>16,k+=V>>>16,ee+=k>>>16,ie+=ee>>>16,A=ee&65535|ie<<16,gt=V&65535|k<<16,D=z,N=qe,V=N&65535,k=N>>>16,ee=D&65535,ie=D>>>16,D=Z,N=J,V+=N&65535,k+=N>>>16,ee+=D&65535,ie+=D>>>16,k+=V>>>16,ee+=k>>>16,ie+=ee>>>16,z=ee&65535|ie<<16,qe=V&65535|k<<16,K=Se,H=le,re=Ce,$=z,U=B,x=F,C=f,I=A,h=se,w=he,Q=Ee,ne=qe,ue=Ve,ge=je,ye=pt,T=gt,De%16===15)for(var oe=0;oe<16;oe++)D=d[oe],N=g[oe],V=N&65535,k=N>>>16,ee=D&65535,ie=D>>>16,D=d[(oe+9)%16],N=g[(oe+9)%16],V+=N&65535,k+=N>>>16,ee+=D&65535,ie+=D>>>16,Z=d[(oe+1)%16],J=g[(oe+1)%16],D=(Z>>>1|J<<32-1)^(Z>>>8|J<<32-8)^Z>>>7,N=(J>>>1|Z<<32-1)^(J>>>8|Z<<32-8)^(J>>>7|Z<<32-7),V+=N&65535,k+=N>>>16,ee+=D&65535,ie+=D>>>16,Z=d[(oe+14)%16],J=g[(oe+14)%16],D=(Z>>>19|J<<32-19)^(J>>>61-32|Z<<32-(61-32))^Z>>>6,N=(J>>>19|Z<<32-19)^(Z>>>61-32|J<<32-(61-32))^(J>>>6|Z<<32-6),V+=N&65535,k+=N>>>16,ee+=D&65535,ie+=D>>>16,k+=V>>>16,ee+=k>>>16,ie+=ee>>>16,d[oe]=ee&65535|ie<<16,g[oe]=V&65535|k<<16}D=I,N=T,V=N&65535,k=N>>>16,ee=D&65535,ie=D>>>16,D=p[0],N=v[0],V+=N&65535,k+=N>>>16,ee+=D&65535,ie+=D>>>16,k+=V>>>16,ee+=k>>>16,ie+=ee>>>16,p[0]=I=ee&65535|ie<<16,v[0]=T=V&65535|k<<16,D=K,N=h,V=N&65535,k=N>>>16,ee=D&65535,ie=D>>>16,D=p[1],N=v[1],V+=N&65535,k+=N>>>16,ee+=D&65535,ie+=D>>>16,k+=V>>>16,ee+=k>>>16,ie+=ee>>>16,p[1]=K=ee&65535|ie<<16,v[1]=h=V&65535|k<<16,D=H,N=w,V=N&65535,k=N>>>16,ee=D&65535,ie=D>>>16,D=p[2],N=v[2],V+=N&65535,k+=N>>>16,ee+=D&65535,ie+=D>>>16,k+=V>>>16,ee+=k>>>16,ie+=ee>>>16,p[2]=H=ee&65535|ie<<16,v[2]=w=V&65535|k<<16,D=re,N=Q,V=N&65535,k=N>>>16,ee=D&65535,ie=D>>>16,D=p[3],N=v[3],V+=N&65535,k+=N>>>16,ee+=D&65535,ie+=D>>>16,k+=V>>>16,ee+=k>>>16,ie+=ee>>>16,p[3]=re=ee&65535|ie<<16,v[3]=Q=V&65535|k<<16,D=$,N=ne,V=N&65535,k=N>>>16,ee=D&65535,ie=D>>>16,D=p[4],N=v[4],V+=N&65535,k+=N>>>16,ee+=D&65535,ie+=D>>>16,k+=V>>>16,ee+=k>>>16,ie+=ee>>>16,p[4]=$=ee&65535|ie<<16,v[4]=ne=V&65535|k<<16,D=U,N=ue,V=N&65535,k=N>>>16,ee=D&65535,ie=D>>>16,D=p[5],N=v[5],V+=N&65535,k+=N>>>16,ee+=D&65535,ie+=D>>>16,k+=V>>>16,ee+=k>>>16,ie+=ee>>>16,p[5]=U=ee&65535|ie<<16,v[5]=ue=V&65535|k<<16,D=x,N=ge,V=N&65535,k=N>>>16,ee=D&65535,ie=D>>>16,D=p[6],N=v[6],V+=N&65535,k+=N>>>16,ee+=D&65535,ie+=D>>>16,k+=V>>>16,ee+=k>>>16,ie+=ee>>>16,p[6]=x=ee&65535|ie<<16,v[6]=ge=V&65535|k<<16,D=C,N=ye,V=N&65535,k=N>>>16,ee=D&65535,ie=D>>>16,D=p[7],N=v[7],V+=N&65535,k+=N>>>16,ee+=D&65535,ie+=D>>>16,k+=V>>>16,ee+=k>>>16,ie+=ee>>>16,p[7]=C=ee&65535|ie<<16,v[7]=ye=V&65535|k<<16,S+=128,O-=128}return S}function l(d){var g=new s;g.update(d);var p=g.digest();return g.clean(),p}i.hash=l})(Hp);(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.convertSecretKeyToX25519=i.convertPublicKeyToX25519=i.verify=i.sign=i.extractPublicKeyFromSecretKey=i.generateKeyPair=i.generateKeyPairFromSeed=i.SEED_LENGTH=i.SECRET_KEY_LENGTH=i.PUBLIC_KEY_LENGTH=i.SIGNATURE_LENGTH=void 0;const e=jn,t=Hp,s=Or;i.SIGNATURE_LENGTH=64,i.PUBLIC_KEY_LENGTH=32,i.SECRET_KEY_LENGTH=64,i.SEED_LENGTH=32;function o(z){const B=new Float64Array(16);if(z)for(let F=0;F<z.length;F++)B[F]=z[F];return B}const c=new Uint8Array(32);c[0]=9;const l=o(),d=o([1]),g=o([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),p=o([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),v=o([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),b=o([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),S=o([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function O(z,B){for(let F=0;F<16;F++)z[F]=B[F]|0}function I(z){let B=1;for(let F=0;F<16;F++){let f=z[F]+B+65535;B=Math.floor(f/65536),z[F]=f-B*65536}z[0]+=B-1+37*(B-1)}function K(z,B,F){const f=~(F-1);for(let A=0;A<16;A++){const se=f&(z[A]^B[A]);z[A]^=se,B[A]^=se}}function H(z,B){const F=o(),f=o();for(let A=0;A<16;A++)f[A]=B[A];I(f),I(f),I(f);for(let A=0;A<2;A++){F[0]=f[0]-65517;for(let he=1;he<15;he++)F[he]=f[he]-65535-(F[he-1]>>16&1),F[he-1]&=65535;F[15]=f[15]-32767-(F[14]>>16&1);const se=F[15]>>16&1;F[14]&=65535,K(f,F,1-se)}for(let A=0;A<16;A++)z[2*A]=f[A]&255,z[2*A+1]=f[A]>>8}function re(z,B){let F=0;for(let f=0;f<32;f++)F|=z[f]^B[f];return(1&F-1>>>8)-1}function $(z,B){const F=new Uint8Array(32),f=new Uint8Array(32);return H(F,z),H(f,B),re(F,f)}function U(z){const B=new Uint8Array(32);return H(B,z),B[0]&1}function x(z,B){for(let F=0;F<16;F++)z[F]=B[2*F]+(B[2*F+1]<<8);z[15]&=32767}function C(z,B,F){for(let f=0;f<16;f++)z[f]=B[f]+F[f]}function T(z,B,F){for(let f=0;f<16;f++)z[f]=B[f]-F[f]}function h(z,B,F){let f,A,se=0,he=0,Ee=0,qe=0,Ve=0,je=0,pt=0,gt=0,Me=0,Ie=0,Re=0,$e=0,Be=0,Oe=0,Fe=0,we=0,Pe=0,He=0,xe=0,ke=0,Ge=0,Qe=0,et=0,Je=0,tr=0,hr=0,Jr=0,rr=0,ai=0,Ei=0,Li=0,wt=F[0],yt=F[1],Et=F[2],Dt=F[3],mt=F[4],vt=F[5],Ft=F[6],Ut=F[7],St=F[8],jt=F[9],It=F[10],At=F[11],xt=F[12],ht=F[13],Lt=F[14],Mt=F[15];f=B[0],se+=f*wt,he+=f*yt,Ee+=f*Et,qe+=f*Dt,Ve+=f*mt,je+=f*vt,pt+=f*Ft,gt+=f*Ut,Me+=f*St,Ie+=f*jt,Re+=f*It,$e+=f*At,Be+=f*xt,Oe+=f*ht,Fe+=f*Lt,we+=f*Mt,f=B[1],he+=f*wt,Ee+=f*yt,qe+=f*Et,Ve+=f*Dt,je+=f*mt,pt+=f*vt,gt+=f*Ft,Me+=f*Ut,Ie+=f*St,Re+=f*jt,$e+=f*It,Be+=f*At,Oe+=f*xt,Fe+=f*ht,we+=f*Lt,Pe+=f*Mt,f=B[2],Ee+=f*wt,qe+=f*yt,Ve+=f*Et,je+=f*Dt,pt+=f*mt,gt+=f*vt,Me+=f*Ft,Ie+=f*Ut,Re+=f*St,$e+=f*jt,Be+=f*It,Oe+=f*At,Fe+=f*xt,we+=f*ht,Pe+=f*Lt,He+=f*Mt,f=B[3],qe+=f*wt,Ve+=f*yt,je+=f*Et,pt+=f*Dt,gt+=f*mt,Me+=f*vt,Ie+=f*Ft,Re+=f*Ut,$e+=f*St,Be+=f*jt,Oe+=f*It,Fe+=f*At,we+=f*xt,Pe+=f*ht,He+=f*Lt,xe+=f*Mt,f=B[4],Ve+=f*wt,je+=f*yt,pt+=f*Et,gt+=f*Dt,Me+=f*mt,Ie+=f*vt,Re+=f*Ft,$e+=f*Ut,Be+=f*St,Oe+=f*jt,Fe+=f*It,we+=f*At,Pe+=f*xt,He+=f*ht,xe+=f*Lt,ke+=f*Mt,f=B[5],je+=f*wt,pt+=f*yt,gt+=f*Et,Me+=f*Dt,Ie+=f*mt,Re+=f*vt,$e+=f*Ft,Be+=f*Ut,Oe+=f*St,Fe+=f*jt,we+=f*It,Pe+=f*At,He+=f*xt,xe+=f*ht,ke+=f*Lt,Ge+=f*Mt,f=B[6],pt+=f*wt,gt+=f*yt,Me+=f*Et,Ie+=f*Dt,Re+=f*mt,$e+=f*vt,Be+=f*Ft,Oe+=f*Ut,Fe+=f*St,we+=f*jt,Pe+=f*It,He+=f*At,xe+=f*xt,ke+=f*ht,Ge+=f*Lt,Qe+=f*Mt,f=B[7],gt+=f*wt,Me+=f*yt,Ie+=f*Et,Re+=f*Dt,$e+=f*mt,Be+=f*vt,Oe+=f*Ft,Fe+=f*Ut,we+=f*St,Pe+=f*jt,He+=f*It,xe+=f*At,ke+=f*xt,Ge+=f*ht,Qe+=f*Lt,et+=f*Mt,f=B[8],Me+=f*wt,Ie+=f*yt,Re+=f*Et,$e+=f*Dt,Be+=f*mt,Oe+=f*vt,Fe+=f*Ft,we+=f*Ut,Pe+=f*St,He+=f*jt,xe+=f*It,ke+=f*At,Ge+=f*xt,Qe+=f*ht,et+=f*Lt,Je+=f*Mt,f=B[9],Ie+=f*wt,Re+=f*yt,$e+=f*Et,Be+=f*Dt,Oe+=f*mt,Fe+=f*vt,we+=f*Ft,Pe+=f*Ut,He+=f*St,xe+=f*jt,ke+=f*It,Ge+=f*At,Qe+=f*xt,et+=f*ht,Je+=f*Lt,tr+=f*Mt,f=B[10],Re+=f*wt,$e+=f*yt,Be+=f*Et,Oe+=f*Dt,Fe+=f*mt,we+=f*vt,Pe+=f*Ft,He+=f*Ut,xe+=f*St,ke+=f*jt,Ge+=f*It,Qe+=f*At,et+=f*xt,Je+=f*ht,tr+=f*Lt,hr+=f*Mt,f=B[11],$e+=f*wt,Be+=f*yt,Oe+=f*Et,Fe+=f*Dt,we+=f*mt,Pe+=f*vt,He+=f*Ft,xe+=f*Ut,ke+=f*St,Ge+=f*jt,Qe+=f*It,et+=f*At,Je+=f*xt,tr+=f*ht,hr+=f*Lt,Jr+=f*Mt,f=B[12],Be+=f*wt,Oe+=f*yt,Fe+=f*Et,we+=f*Dt,Pe+=f*mt,He+=f*vt,xe+=f*Ft,ke+=f*Ut,Ge+=f*St,Qe+=f*jt,et+=f*It,Je+=f*At,tr+=f*xt,hr+=f*ht,Jr+=f*Lt,rr+=f*Mt,f=B[13],Oe+=f*wt,Fe+=f*yt,we+=f*Et,Pe+=f*Dt,He+=f*mt,xe+=f*vt,ke+=f*Ft,Ge+=f*Ut,Qe+=f*St,et+=f*jt,Je+=f*It,tr+=f*At,hr+=f*xt,Jr+=f*ht,rr+=f*Lt,ai+=f*Mt,f=B[14],Fe+=f*wt,we+=f*yt,Pe+=f*Et,He+=f*Dt,xe+=f*mt,ke+=f*vt,Ge+=f*Ft,Qe+=f*Ut,et+=f*St,Je+=f*jt,tr+=f*It,hr+=f*At,Jr+=f*xt,rr+=f*ht,ai+=f*Lt,Ei+=f*Mt,f=B[15],we+=f*wt,Pe+=f*yt,He+=f*Et,xe+=f*Dt,ke+=f*mt,Ge+=f*vt,Qe+=f*Ft,et+=f*Ut,Je+=f*St,tr+=f*jt,hr+=f*It,Jr+=f*At,rr+=f*xt,ai+=f*ht,Ei+=f*Lt,Li+=f*Mt,se+=38*Pe,he+=38*He,Ee+=38*xe,qe+=38*ke,Ve+=38*Ge,je+=38*Qe,pt+=38*et,gt+=38*Je,Me+=38*tr,Ie+=38*hr,Re+=38*Jr,$e+=38*rr,Be+=38*ai,Oe+=38*Ei,Fe+=38*Li,A=1,f=se+A+65535,A=Math.floor(f/65536),se=f-A*65536,f=he+A+65535,A=Math.floor(f/65536),he=f-A*65536,f=Ee+A+65535,A=Math.floor(f/65536),Ee=f-A*65536,f=qe+A+65535,A=Math.floor(f/65536),qe=f-A*65536,f=Ve+A+65535,A=Math.floor(f/65536),Ve=f-A*65536,f=je+A+65535,A=Math.floor(f/65536),je=f-A*65536,f=pt+A+65535,A=Math.floor(f/65536),pt=f-A*65536,f=gt+A+65535,A=Math.floor(f/65536),gt=f-A*65536,f=Me+A+65535,A=Math.floor(f/65536),Me=f-A*65536,f=Ie+A+65535,A=Math.floor(f/65536),Ie=f-A*65536,f=Re+A+65535,A=Math.floor(f/65536),Re=f-A*65536,f=$e+A+65535,A=Math.floor(f/65536),$e=f-A*65536,f=Be+A+65535,A=Math.floor(f/65536),Be=f-A*65536,f=Oe+A+65535,A=Math.floor(f/65536),Oe=f-A*65536,f=Fe+A+65535,A=Math.floor(f/65536),Fe=f-A*65536,f=we+A+65535,A=Math.floor(f/65536),we=f-A*65536,se+=A-1+37*(A-1),A=1,f=se+A+65535,A=Math.floor(f/65536),se=f-A*65536,f=he+A+65535,A=Math.floor(f/65536),he=f-A*65536,f=Ee+A+65535,A=Math.floor(f/65536),Ee=f-A*65536,f=qe+A+65535,A=Math.floor(f/65536),qe=f-A*65536,f=Ve+A+65535,A=Math.floor(f/65536),Ve=f-A*65536,f=je+A+65535,A=Math.floor(f/65536),je=f-A*65536,f=pt+A+65535,A=Math.floor(f/65536),pt=f-A*65536,f=gt+A+65535,A=Math.floor(f/65536),gt=f-A*65536,f=Me+A+65535,A=Math.floor(f/65536),Me=f-A*65536,f=Ie+A+65535,A=Math.floor(f/65536),Ie=f-A*65536,f=Re+A+65535,A=Math.floor(f/65536),Re=f-A*65536,f=$e+A+65535,A=Math.floor(f/65536),$e=f-A*65536,f=Be+A+65535,A=Math.floor(f/65536),Be=f-A*65536,f=Oe+A+65535,A=Math.floor(f/65536),Oe=f-A*65536,f=Fe+A+65535,A=Math.floor(f/65536),Fe=f-A*65536,f=we+A+65535,A=Math.floor(f/65536),we=f-A*65536,se+=A-1+37*(A-1),z[0]=se,z[1]=he,z[2]=Ee,z[3]=qe,z[4]=Ve,z[5]=je,z[6]=pt,z[7]=gt,z[8]=Me,z[9]=Ie,z[10]=Re,z[11]=$e,z[12]=Be,z[13]=Oe,z[14]=Fe,z[15]=we}function w(z,B){h(z,B,B)}function Q(z,B){const F=o();let f;for(f=0;f<16;f++)F[f]=B[f];for(f=253;f>=0;f--)w(F,F),f!==2&&f!==4&&h(F,F,B);for(f=0;f<16;f++)z[f]=F[f]}function ne(z,B){const F=o();let f;for(f=0;f<16;f++)F[f]=B[f];for(f=250;f>=0;f--)w(F,F),f!==1&&h(F,F,B);for(f=0;f<16;f++)z[f]=F[f]}function ue(z,B){const F=o(),f=o(),A=o(),se=o(),he=o(),Ee=o(),qe=o(),Ve=o(),je=o();T(F,z[1],z[0]),T(je,B[1],B[0]),h(F,F,je),C(f,z[0],z[1]),C(je,B[0],B[1]),h(f,f,je),h(A,z[3],B[3]),h(A,A,p),h(se,z[2],B[2]),C(se,se,se),T(he,f,F),T(Ee,se,A),C(qe,se,A),C(Ve,f,F),h(z[0],he,Ee),h(z[1],Ve,qe),h(z[2],qe,Ee),h(z[3],he,Ve)}function ge(z,B,F){for(let f=0;f<4;f++)K(z[f],B[f],F)}function ye(z,B){const F=o(),f=o(),A=o();Q(A,B[2]),h(F,B[0],A),h(f,B[1],A),H(z,f),z[31]^=U(F)<<7}function D(z,B,F){O(z[0],l),O(z[1],d),O(z[2],d),O(z[3],l);for(let f=255;f>=0;--f){const A=F[f/8|0]>>(f&7)&1;ge(z,B,A),ue(B,z),ue(z,z),ge(z,B,A)}}function N(z,B){const F=[o(),o(),o(),o()];O(F[0],v),O(F[1],b),O(F[2],d),h(F[3],v,b),D(z,F,B)}function Z(z){if(z.length!==i.SEED_LENGTH)throw new Error(`ed25519: seed must be ${i.SEED_LENGTH} bytes`);const B=(0,t.hash)(z);B[0]&=248,B[31]&=127,B[31]|=64;const F=new Uint8Array(32),f=[o(),o(),o(),o()];N(f,B),ye(F,f);const A=new Uint8Array(64);return A.set(z),A.set(F,32),{publicKey:F,secretKey:A}}i.generateKeyPairFromSeed=Z;function J(z){const B=(0,e.randomBytes)(32,z),F=Z(B);return(0,s.wipe)(B),F}i.generateKeyPair=J;function V(z){if(z.length!==i.SECRET_KEY_LENGTH)throw new Error(`ed25519: secret key must be ${i.SECRET_KEY_LENGTH} bytes`);return new Uint8Array(z.subarray(32))}i.extractPublicKeyFromSecretKey=V;const k=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function ee(z,B){let F,f,A,se;for(f=63;f>=32;--f){for(F=0,A=f-32,se=f-12;A<se;++A)B[A]+=F-16*B[f]*k[A-(f-32)],F=Math.floor((B[A]+128)/256),B[A]-=F*256;B[A]+=F,B[f]=0}for(F=0,A=0;A<32;A++)B[A]+=F-(B[31]>>4)*k[A],F=B[A]>>8,B[A]&=255;for(A=0;A<32;A++)B[A]-=F*k[A];for(f=0;f<32;f++)B[f+1]+=B[f]>>8,z[f]=B[f]&255}function ie(z){const B=new Float64Array(64);for(let F=0;F<64;F++)B[F]=z[F];for(let F=0;F<64;F++)z[F]=0;ee(z,B)}function De(z,B){const F=new Float64Array(64),f=[o(),o(),o(),o()],A=(0,t.hash)(z.subarray(0,32));A[0]&=248,A[31]&=127,A[31]|=64;const se=new Uint8Array(64);se.set(A.subarray(32),32);const he=new t.SHA512;he.update(se.subarray(32)),he.update(B);const Ee=he.digest();he.clean(),ie(Ee),N(f,Ee),ye(se,f),he.reset(),he.update(se.subarray(0,32)),he.update(z.subarray(32)),he.update(B);const qe=he.digest();ie(qe);for(let Ve=0;Ve<32;Ve++)F[Ve]=Ee[Ve];for(let Ve=0;Ve<32;Ve++)for(let je=0;je<32;je++)F[Ve+je]+=qe[Ve]*A[je];return ee(se.subarray(32),F),se}i.sign=De;function oe(z,B){const F=o(),f=o(),A=o(),se=o(),he=o(),Ee=o(),qe=o();return O(z[2],d),x(z[1],B),w(A,z[1]),h(se,A,g),T(A,A,z[2]),C(se,z[2],se),w(he,se),w(Ee,he),h(qe,Ee,he),h(F,qe,A),h(F,F,se),ne(F,F),h(F,F,A),h(F,F,se),h(F,F,se),h(z[0],F,se),w(f,z[0]),h(f,f,se),$(f,A)&&h(z[0],z[0],S),w(f,z[0]),h(f,f,se),$(f,A)?-1:(U(z[0])===B[31]>>7&&T(z[0],l,z[0]),h(z[3],z[0],z[1]),0)}function Se(z,B,F){const f=new Uint8Array(32),A=[o(),o(),o(),o()],se=[o(),o(),o(),o()];if(F.length!==i.SIGNATURE_LENGTH)throw new Error(`ed25519: signature must be ${i.SIGNATURE_LENGTH} bytes`);if(oe(se,z))return!1;const he=new t.SHA512;he.update(F.subarray(0,32)),he.update(z),he.update(B);const Ee=he.digest();return ie(Ee),D(A,se,Ee),N(se,F.subarray(32)),ue(A,se),ye(f,A),!re(F,f)}i.verify=Se;function le(z){let B=[o(),o(),o(),o()];if(oe(B,z))throw new Error("Ed25519: invalid public key");let F=o(),f=o(),A=B[1];C(F,d,A),T(f,d,A),Q(f,f),h(F,F,f);let se=new Uint8Array(32);return H(se,F),se}i.convertPublicKeyToX25519=le;function Ce(z){const B=(0,t.hash)(z.subarray(0,32));B[0]&=248,B[31]&=127,B[31]|=64;const F=new Uint8Array(B.subarray(0,32));return(0,s.wipe)(B),F}i.convertSecretKeyToX25519=Ce})(th);const K2="EdDSA",V2="JWT",Kp=".",Vp="base64url",k2="utf8",W2="utf8",G2=":",Y2="did",J2="key",rd="base58btc",X2="z",Z2="K36",Q2=32;function ea(i){return ur(_r(rn(i),k2),Vp)}function kp(i){const e=_r(Z2,rd),t=X2+ur(yu([e,i]),rd);return[Y2,J2,t].join(G2)}function eD(i){return ur(i,Vp)}function tD(i){return _r([ea(i.header),ea(i.payload)].join(Kp),W2)}function rD(i){return[ea(i.header),ea(i.payload),eD(i.signature)].join(Kp)}function id(i=jn.randomBytes(Q2)){return th.generateKeyPairFromSeed(i)}async function iD(i,e,t,s,o=ve.fromMiliseconds(Date.now())){const c={alg:K2,typ:V2},l=kp(s.publicKey),d=o+t,g={iss:l,sub:i,aud:e,iat:o,exp:d},p=tD({header:c,payload:g}),v=th.sign(s.secretKey,p);return rD({header:c,payload:g,signature:v})}const nD="PARSE_ERROR",sD="INVALID_REQUEST",oD="METHOD_NOT_FOUND",aD="INVALID_PARAMS",Wp="INTERNAL_ERROR",rh="SERVER_ERROR",cD=[-32700,-32600,-32601,-32602,-32603],ys={[nD]:{code:-32700,message:"Parse error"},[sD]:{code:-32600,message:"Invalid Request"},[oD]:{code:-32601,message:"Method not found"},[aD]:{code:-32602,message:"Invalid params"},[Wp]:{code:-32603,message:"Internal error"},[rh]:{code:-32e3,message:"Server error"}},Gp=rh;function uD(i){return cD.includes(i)}function nd(i){return Object.keys(ys).includes(i)?ys[i]:ys[Gp]}function hD(i){const e=Object.values(ys).find(t=>t.code===i);return e||ys[Gp]}function Yp(i,e,t){return i.message.includes("getaddrinfo ENOTFOUND")||i.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${t} RPC url at ${e}`):i}var Jp={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Cu=function(i,e){return Cu=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)s.hasOwnProperty(o)&&(t[o]=s[o])},Cu(i,e)};function lD(i,e){Cu(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var Tu=function(){return Tu=Object.assign||function(e){for(var t,s=1,o=arguments.length;s<o;s++){t=arguments[s];for(var c in t)Object.prototype.hasOwnProperty.call(t,c)&&(e[c]=t[c])}return e},Tu.apply(this,arguments)};function fD(i,e){var t={};for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&e.indexOf(s)<0&&(t[s]=i[s]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,s=Object.getOwnPropertySymbols(i);o<s.length;o++)e.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(i,s[o])&&(t[s[o]]=i[s[o]]);return t}function dD(i,e,t,s){var o=arguments.length,c=o<3?e:s===null?s=Object.getOwnPropertyDescriptor(e,t):s,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(i,e,t,s);else for(var d=i.length-1;d>=0;d--)(l=i[d])&&(c=(o<3?l(c):o>3?l(e,t,c):l(e,t))||c);return o>3&&c&&Object.defineProperty(e,t,c),c}function pD(i,e){return function(t,s){e(t,s,i)}}function gD(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)}function yD(i,e,t,s){function o(c){return c instanceof t?c:new t(function(l){l(c)})}return new(t||(t=Promise))(function(c,l){function d(v){try{p(s.next(v))}catch(b){l(b)}}function g(v){try{p(s.throw(v))}catch(b){l(b)}}function p(v){v.done?c(v.value):o(v.value).then(d,g)}p((s=s.apply(i,e||[])).next())})}function vD(i,e){var t={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},s,o,c,l;return l={next:d(0),throw:d(1),return:d(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function d(p){return function(v){return g([p,v])}}function g(p){if(s)throw new TypeError("Generator is already executing.");for(;t;)try{if(s=1,o&&(c=p[0]&2?o.return:p[0]?o.throw||((c=o.return)&&c.call(o),0):o.next)&&!(c=c.call(o,p[1])).done)return c;switch(o=0,c&&(p=[p[0]&2,c.value]),p[0]){case 0:case 1:c=p;break;case 4:return t.label++,{value:p[1],done:!1};case 5:t.label++,o=p[1],p=[0];continue;case 7:p=t.ops.pop(),t.trys.pop();continue;default:if(c=t.trys,!(c=c.length>0&&c[c.length-1])&&(p[0]===6||p[0]===2)){t=0;continue}if(p[0]===3&&(!c||p[1]>c[0]&&p[1]<c[3])){t.label=p[1];break}if(p[0]===6&&t.label<c[1]){t.label=c[1],c=p;break}if(c&&t.label<c[2]){t.label=c[2],t.ops.push(p);break}c[2]&&t.ops.pop(),t.trys.pop();continue}p=e.call(i,t)}catch(v){p=[6,v],o=0}finally{s=c=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}}function _D(i,e,t,s){s===void 0&&(s=t),i[s]=e[t]}function mD(i,e){for(var t in i)t!=="default"&&!e.hasOwnProperty(t)&&(e[t]=i[t])}function Nu(i){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&i[e],s=0;if(t)return t.call(i);if(i&&typeof i.length=="number")return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Xp(i,e){var t=typeof Symbol=="function"&&i[Symbol.iterator];if(!t)return i;var s=t.call(i),o,c=[],l;try{for(;(e===void 0||e-- >0)&&!(o=s.next()).done;)c.push(o.value)}catch(d){l={error:d}}finally{try{o&&!o.done&&(t=s.return)&&t.call(s)}finally{if(l)throw l.error}}return c}function bD(){for(var i=[],e=0;e<arguments.length;e++)i=i.concat(Xp(arguments[e]));return i}function wD(){for(var i=0,e=0,t=arguments.length;e<t;e++)i+=arguments[e].length;for(var s=Array(i),o=0,e=0;e<t;e++)for(var c=arguments[e],l=0,d=c.length;l<d;l++,o++)s[o]=c[l];return s}function Es(i){return this instanceof Es?(this.v=i,this):new Es(i)}function ED(i,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=t.apply(i,e||[]),o,c=[];return o={},l("next"),l("throw"),l("return"),o[Symbol.asyncIterator]=function(){return this},o;function l(S){s[S]&&(o[S]=function(O){return new Promise(function(I,K){c.push([S,O,I,K])>1||d(S,O)})})}function d(S,O){try{g(s[S](O))}catch(I){b(c[0][3],I)}}function g(S){S.value instanceof Es?Promise.resolve(S.value.v).then(p,v):b(c[0][2],S)}function p(S){d("next",S)}function v(S){d("throw",S)}function b(S,O){S(O),c.shift(),c.length&&d(c[0][0],c[0][1])}}function DD(i){var e,t;return e={},s("next"),s("throw",function(o){throw o}),s("return"),e[Symbol.iterator]=function(){return this},e;function s(o,c){e[o]=i[o]?function(l){return(t=!t)?{value:Es(i[o](l)),done:o==="return"}:c?c(l):l}:c}}function SD(i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=i[Symbol.asyncIterator],t;return e?e.call(i):(i=typeof Nu=="function"?Nu(i):i[Symbol.iterator](),t={},s("next"),s("throw"),s("return"),t[Symbol.asyncIterator]=function(){return this},t);function s(c){t[c]=i[c]&&function(l){return new Promise(function(d,g){l=i[c](l),o(d,g,l.done,l.value)})}}function o(c,l,d,g){Promise.resolve(g).then(function(p){c({value:p,done:d})},l)}}function ID(i,e){return Object.defineProperty?Object.defineProperty(i,"raw",{value:e}):i.raw=e,i}function xD(i){if(i&&i.__esModule)return i;var e={};if(i!=null)for(var t in i)Object.hasOwnProperty.call(i,t)&&(e[t]=i[t]);return e.default=i,e}function OD(i){return i&&i.__esModule?i:{default:i}}function PD(i,e){if(!e.has(i))throw new TypeError("attempted to get private field on non-instance");return e.get(i)}function AD(i,e,t){if(!e.has(i))throw new TypeError("attempted to set private field on non-instance");return e.set(i,t),t}const CD=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return Tu},__asyncDelegator:DD,__asyncGenerator:ED,__asyncValues:SD,__await:Es,__awaiter:yD,__classPrivateFieldGet:PD,__classPrivateFieldSet:AD,__createBinding:_D,__decorate:dD,__exportStar:mD,__extends:lD,__generator:vD,__importDefault:OD,__importStar:xD,__makeTemplateObject:ID,__metadata:gD,__param:pD,__read:Xp,__rest:fD,__spread:bD,__spreadArrays:wD,__values:Nu},Symbol.toStringTag,{value:"Module"})),TD=na(CD);var mi={},sd;function ND(){if(sd)return mi;sd=1,Object.defineProperty(mi,"__esModule",{value:!0}),mi.isBrowserCryptoAvailable=mi.getSubtleCrypto=mi.getBrowerCrypto=void 0;function i(){return(Yr===null||Yr===void 0?void 0:Yr.crypto)||(Yr===null||Yr===void 0?void 0:Yr.msCrypto)||{}}mi.getBrowerCrypto=i;function e(){const s=i();return s.subtle||s.webkitSubtle}mi.getSubtleCrypto=e;function t(){return!!i()&&!!e()}return mi.isBrowserCryptoAvailable=t,mi}var bi={},od;function RD(){if(od)return bi;od=1,Object.defineProperty(bi,"__esModule",{value:!0}),bi.isBrowser=bi.isNode=bi.isReactNative=void 0;function i(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}bi.isReactNative=i;function e(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}bi.isNode=e;function t(){return!i()&&!e()}return bi.isBrowser=t,bi}(function(i){Object.defineProperty(i,"__esModule",{value:!0});const e=TD;e.__exportStar(ND(),i),e.__exportStar(RD(),i)})(Jp);function Zp(i=3){const e=Date.now()*Math.pow(10,i),t=Math.floor(Math.random()*Math.pow(10,i));return e+t}function va(i=6){return BigInt(Zp(i))}function As(i,e,t){return{id:t||Zp(),jsonrpc:"2.0",method:i,params:e}}function ih(i,e){return{id:i,jsonrpc:"2.0",result:e}}function _a(i,e,t){return{id:i,jsonrpc:"2.0",error:$D(e,t)}}function $D(i,e){return typeof i>"u"?nd(Wp):(typeof i=="string"&&(i=Object.assign(Object.assign({},nd(rh)),{message:i})),typeof e<"u"&&(i.data=e),uD(i.code)&&(i=hD(i.code)),i)}class FD{}class UD extends FD{constructor(){super()}}class Qp extends UD{constructor(e){super()}}const jD="^https?:",LD="^wss?:";function MD(i){const e=i.match(new RegExp(/^\w+:/,"gi"));if(!(!e||!e.length))return e[0]}function eg(i,e){const t=MD(i);return typeof t>"u"?!1:new RegExp(e).test(t)}function ad(i){return eg(i,jD)}function cd(i){return eg(i,LD)}function BD(i){return new RegExp("wss?://localhost(:d{2,5})?").test(i)}function tg(i){return typeof i=="object"&&"id"in i&&"jsonrpc"in i&&i.jsonrpc==="2.0"}function nh(i){return tg(i)&&"method"in i}function Cs(i){return tg(i)&&(wi(i)||Br(i))}function wi(i){return"result"in i}function Br(i){return"error"in i}let zD=class extends Qp{constructor(e){super(e),this.events=new mr.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}async connect(e=this.connection){await this.open(e)}async disconnect(){await this.close()}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async request(e,t){return this.requestStrict(As(e.method,e.params||[],e.id||va().toString()),t)}async requestStrict(e,t){return new Promise(async(s,o)=>{if(!this.connection.connected)try{await this.open()}catch(c){o(c)}this.events.on(`${e.id}`,c=>{Br(c)?o(c.error):s(c.result)});try{await this.connection.send(e,t)}catch(c){o(c)}})}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),Cs(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&e.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}async open(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),typeof e=="string"&&(await this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",e=>this.onPayload(e)),this.connection.on("close",e=>this.onClose(e)),this.connection.on("error",e=>this.events.emit("error",e)),this.connection.on("register_error",e=>this.onClose()),this.hasRegisteredEventListeners=!0)}};const qD=()=>typeof global<"u"&&typeof global.WebSocket<"u"?global.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:require("ws"),HD=()=>typeof window<"u",ud=i=>i.split("?")[0],hd=10,KD=qD();class VD{constructor(e){if(this.url=e,this.events=new mr.EventEmitter,this.registering=!1,!cd(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);this.url=e}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async open(e=this.url){await this.register(e)}async close(){return new Promise((e,t)=>{if(typeof this.socket>"u"){t(new Error("Connection already closed"));return}this.socket.onclose=s=>{this.onClose(s),e()},this.socket.close()})}async send(e,t){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(rn(e))}catch(s){this.onError(e.id,s)}}register(e=this.url){if(!cd(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);if(this.registering){const t=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=t||this.events.listenerCount("open")>=t)&&this.events.setMaxListeners(t+1),new Promise((s,o)=>{this.events.once("register_error",c=>{this.resetMaxListeners(),o(c)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return o(new Error("WebSocket connection is missing or invalid"));s(this.socket)})})}return this.url=e,this.registering=!0,new Promise((t,s)=>{const o=Jp.isReactNative()?void 0:{rejectUnauthorized:!BD(e)},c=new KD(e,[],o);HD()?c.onerror=l=>{const d=l;s(this.emitError(d.error))}:c.on("error",l=>{s(this.emitError(l))}),c.onopen=()=>{this.onOpen(c),t(c)}})}onOpen(e){e.onmessage=t=>this.onPayload(t),e.onclose=t=>this.onClose(t),this.socket=e,this.registering=!1,this.events.emit("open")}onClose(e){this.socket=void 0,this.registering=!1,this.events.emit("close",e)}onPayload(e){if(typeof e.data>"u")return;const t=typeof e.data=="string"?Os(e.data):e.data;this.events.emit("payload",t)}onError(e,t){const s=this.parseError(t),o=s.message||s.toString(),c=_a(e,o);this.events.emit("payload",c)}parseError(e,t=this.url){return Yp(e,ud(t),"WS")}resetMaxListeners(){this.events.getMaxListeners()>hd&&this.events.setMaxListeners(hd)}emitError(e){const t=this.parseError(new Error((e==null?void 0:e.message)||`WebSocket connection failed for host: ${ud(this.url)}`));return this.events.emit("register_error",t),t}}var ta={exports:{}};ta.exports;(function(i,e){var t=200,s="__lodash_hash_undefined__",o=1,c=2,l=9007199254740991,d="[object Arguments]",g="[object Array]",p="[object AsyncFunction]",v="[object Boolean]",b="[object Date]",S="[object Error]",O="[object Function]",I="[object GeneratorFunction]",K="[object Map]",H="[object Number]",re="[object Null]",$="[object Object]",U="[object Promise]",x="[object Proxy]",C="[object RegExp]",T="[object Set]",h="[object String]",w="[object Symbol]",Q="[object Undefined]",ne="[object WeakMap]",ue="[object ArrayBuffer]",ge="[object DataView]",ye="[object Float32Array]",D="[object Float64Array]",N="[object Int8Array]",Z="[object Int16Array]",J="[object Int32Array]",V="[object Uint8Array]",k="[object Uint8ClampedArray]",ee="[object Uint16Array]",ie="[object Uint32Array]",De=/[\\^$.*+?()[\]{}|]/g,oe=/^\[object .+?Constructor\]$/,Se=/^(?:0|[1-9]\d*)$/,le={};le[ye]=le[D]=le[N]=le[Z]=le[J]=le[V]=le[k]=le[ee]=le[ie]=!0,le[d]=le[g]=le[ue]=le[v]=le[ge]=le[b]=le[S]=le[O]=le[K]=le[H]=le[$]=le[C]=le[T]=le[h]=le[ne]=!1;var Ce=typeof Yr=="object"&&Yr&&Yr.Object===Object&&Yr,z=typeof self=="object"&&self&&self.Object===Object&&self,B=Ce||z||Function("return this")(),F=e&&!e.nodeType&&e,f=F&&!0&&i&&!i.nodeType&&i,A=f&&f.exports===F,se=A&&Ce.process,he=function(){try{return se&&se.binding&&se.binding("util")}catch{}}(),Ee=he&&he.isTypedArray;function qe(E,j){for(var X=-1,fe=E==null?0:E.length,at=0,Te=[];++X<fe;){var ft=E[X];j(ft,X,E)&&(Te[at++]=ft)}return Te}function Ve(E,j){for(var X=-1,fe=j.length,at=E.length;++X<fe;)E[at+X]=j[X];return E}function je(E,j){for(var X=-1,fe=E==null?0:E.length;++X<fe;)if(j(E[X],X,E))return!0;return!1}function pt(E,j){for(var X=-1,fe=Array(E);++X<E;)fe[X]=j(X);return fe}function gt(E){return function(j){return E(j)}}function Me(E,j){return E.has(j)}function Ie(E,j){return E==null?void 0:E[j]}function Re(E){var j=-1,X=Array(E.size);return E.forEach(function(fe,at){X[++j]=[at,fe]}),X}function $e(E,j){return function(X){return E(j(X))}}function Be(E){var j=-1,X=Array(E.size);return E.forEach(function(fe){X[++j]=fe}),X}var Oe=Array.prototype,Fe=Function.prototype,we=Object.prototype,Pe=B["__core-js_shared__"],He=Fe.toString,xe=we.hasOwnProperty,ke=function(){var E=/[^.]+$/.exec(Pe&&Pe.keys&&Pe.keys.IE_PROTO||"");return E?"Symbol(src)_1."+E:""}(),Ge=we.toString,Qe=RegExp("^"+He.call(xe).replace(De,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),et=A?B.Buffer:void 0,Je=B.Symbol,tr=B.Uint8Array,hr=we.propertyIsEnumerable,Jr=Oe.splice,rr=Je?Je.toStringTag:void 0,ai=Object.getOwnPropertySymbols,Ei=et?et.isBuffer:void 0,Li=$e(Object.keys,Object),wt=wr(B,"DataView"),yt=wr(B,"Map"),Et=wr(B,"Promise"),Dt=wr(B,"Set"),mt=wr(B,"WeakMap"),vt=wr(Object,"create"),Ft=ui(wt),Ut=ui(yt),St=ui(Et),jt=ui(Dt),It=ui(mt),At=Je?Je.prototype:void 0,xt=At?At.valueOf:void 0;function ht(E){var j=-1,X=E==null?0:E.length;for(this.clear();++j<X;){var fe=E[j];this.set(fe[0],fe[1])}}function Lt(){this.__data__=vt?vt(null):{},this.size=0}function Mt(E){var j=this.has(E)&&delete this.__data__[E];return this.size-=j?1:0,j}function wa(E){var j=this.__data__;if(vt){var X=j[E];return X===s?void 0:X}return xe.call(j,E)?j[E]:void 0}function Ea(E){var j=this.__data__;return vt?j[E]!==void 0:xe.call(j,E)}function Da(E,j){var X=this.__data__;return this.size+=this.has(E)?0:1,X[E]=vt&&j===void 0?s:j,this}ht.prototype.clear=Lt,ht.prototype.delete=Mt,ht.prototype.get=wa,ht.prototype.has=Ea,ht.prototype.set=Da;function Ar(E){var j=-1,X=E==null?0:E.length;for(this.clear();++j<X;){var fe=E[j];this.set(fe[0],fe[1])}}function Sa(){this.__data__=[],this.size=0}function Ia(E){var j=this.__data__,X=Mi(j,E);if(X<0)return!1;var fe=j.length-1;return X==fe?j.pop():Jr.call(j,X,1),--this.size,!0}function xa(E){var j=this.__data__,X=Mi(j,E);return X<0?void 0:j[X][1]}function Oa(E){return Mi(this.__data__,E)>-1}function Pa(E,j){var X=this.__data__,fe=Mi(X,E);return fe<0?(++this.size,X.push([E,j])):X[fe][1]=j,this}Ar.prototype.clear=Sa,Ar.prototype.delete=Ia,Ar.prototype.get=xa,Ar.prototype.has=Oa,Ar.prototype.set=Pa;function ci(E){var j=-1,X=E==null?0:E.length;for(this.clear();++j<X;){var fe=E[j];this.set(fe[0],fe[1])}}function hn(){this.size=0,this.__data__={hash:new ht,map:new(yt||Ar),string:new ht}}function Aa(E){var j=Di(this,E).delete(E);return this.size-=j?1:0,j}function ln(E){return Di(this,E).get(E)}function Ca(E){return Di(this,E).has(E)}function Ta(E,j){var X=Di(this,E),fe=X.size;return X.set(E,j),this.size+=X.size==fe?0:1,this}ci.prototype.clear=hn,ci.prototype.delete=Aa,ci.prototype.get=ln,ci.prototype.has=Ca,ci.prototype.set=Ta;function fn(E){var j=-1,X=E==null?0:E.length;for(this.__data__=new ci;++j<X;)this.add(E[j])}function Ns(E){return this.__data__.set(E,s),this}function Rs(E){return this.__data__.has(E)}fn.prototype.add=fn.prototype.push=Ns,fn.prototype.has=Rs;function qr(E){var j=this.__data__=new Ar(E);this.size=j.size}function Na(){this.__data__=new Ar,this.size=0}function Ra(E){var j=this.__data__,X=j.delete(E);return this.size=j.size,X}function $a(E){return this.__data__.get(E)}function Fa(E){return this.__data__.has(E)}function $s(E,j){var X=this.__data__;if(X instanceof Ar){var fe=X.__data__;if(!yt||fe.length<t-1)return fe.push([E,j]),this.size=++X.size,this;X=this.__data__=new ci(fe)}return X.set(E,j),this.size=X.size,this}qr.prototype.clear=Na,qr.prototype.delete=Ra,qr.prototype.get=$a,qr.prototype.has=Fa,qr.prototype.set=$s;function Fs(E,j){var X=gn(E),fe=!X&&Ws(E),at=!X&&!fe&&Hn(E),Te=!X&&!fe&&!at&&Js(E),ft=X||fe||at||Te,Bt=ft?pt(E.length,String):[],Xe=Bt.length;for(var ct in E)(j||xe.call(E,ct))&&!(ft&&(ct=="length"||at&&(ct=="offset"||ct=="parent")||Te&&(ct=="buffer"||ct=="byteLength"||ct=="byteOffset")||qs(ct,Xe)))&&Bt.push(ct);return Bt}function Mi(E,j){for(var X=E.length;X--;)if(ks(E[X][0],j))return X;return-1}function zn(E,j,X){var fe=j(E);return gn(E)?fe:Ve(fe,X(E))}function Bi(E){return E==null?E===void 0?Q:re:rr&&rr in Object(E)?Bs(E):La(E)}function qn(E){return qi(E)&&Bi(E)==d}function zi(E,j,X,fe,at){return E===j?!0:E==null||j==null||!qi(E)&&!qi(j)?E!==E&&j!==j:Us(E,j,X,fe,zi,at)}function Us(E,j,X,fe,at,Te){var ft=gn(E),Bt=gn(j),Xe=ft?g:Xr(E),ct=Bt?g:Xr(j);Xe=Xe==d?$:Xe,ct=ct==d?$:ct;var Ct=Xe==$,lr=ct==$,zt=Xe==ct;if(zt&&Hn(E)){if(!Hn(j))return!1;ft=!0,Ct=!1}if(zt&&!Ct)return Te||(Te=new qr),ft||Js(E)?dn(E,j,X,fe,at,Te):ja(E,j,Xe,X,fe,at,Te);if(!(X&o)){var dt=Ct&&xe.call(E,"__wrapped__"),ir=lr&&xe.call(j,"__wrapped__");if(dt||ir){var Hr=dt?E.value():E,Cr=ir?j.value():j;return Te||(Te=new qr),at(Hr,Cr,X,fe,Te)}}return zt?(Te||(Te=new qr),Ms(E,j,X,fe,at,Te)):!1}function Ua(E){if(!Ys(E)||Ks(E))return!1;var j=yn(E)?Qe:oe;return j.test(ui(E))}function js(E){return qi(E)&&Gs(E.length)&&!!le[Bi(E)]}function Ls(E){if(!Vs(E))return Li(E);var j=[];for(var X in Object(E))xe.call(E,X)&&X!="constructor"&&j.push(X);return j}function dn(E,j,X,fe,at,Te){var ft=X&o,Bt=E.length,Xe=j.length;if(Bt!=Xe&&!(ft&&Xe>Bt))return!1;var ct=Te.get(E);if(ct&&Te.get(j))return ct==j;var Ct=-1,lr=!0,zt=X&c?new fn:void 0;for(Te.set(E,j),Te.set(j,E);++Ct<Bt;){var dt=E[Ct],ir=j[Ct];if(fe)var Hr=ft?fe(ir,dt,Ct,j,E,Te):fe(dt,ir,Ct,E,j,Te);if(Hr!==void 0){if(Hr)continue;lr=!1;break}if(zt){if(!je(j,function(Cr,Zr){if(!Me(zt,Zr)&&(dt===Cr||at(dt,Cr,X,fe,Te)))return zt.push(Zr)})){lr=!1;break}}else if(!(dt===ir||at(dt,ir,X,fe,Te))){lr=!1;break}}return Te.delete(E),Te.delete(j),lr}function ja(E,j,X,fe,at,Te,ft){switch(X){case ge:if(E.byteLength!=j.byteLength||E.byteOffset!=j.byteOffset)return!1;E=E.buffer,j=j.buffer;case ue:return!(E.byteLength!=j.byteLength||!Te(new tr(E),new tr(j)));case v:case b:case H:return ks(+E,+j);case S:return E.name==j.name&&E.message==j.message;case C:case h:return E==j+"";case K:var Bt=Re;case T:var Xe=fe&o;if(Bt||(Bt=Be),E.size!=j.size&&!Xe)return!1;var ct=ft.get(E);if(ct)return ct==j;fe|=c,ft.set(E,j);var Ct=dn(Bt(E),Bt(j),fe,at,Te,ft);return ft.delete(E),Ct;case w:if(xt)return xt.call(E)==xt.call(j)}return!1}function Ms(E,j,X,fe,at,Te){var ft=X&o,Bt=pn(E),Xe=Bt.length,ct=pn(j),Ct=ct.length;if(Xe!=Ct&&!ft)return!1;for(var lr=Xe;lr--;){var zt=Bt[lr];if(!(ft?zt in j:xe.call(j,zt)))return!1}var dt=Te.get(E);if(dt&&Te.get(j))return dt==j;var ir=!0;Te.set(E,j),Te.set(j,E);for(var Hr=ft;++lr<Xe;){zt=Bt[lr];var Cr=E[zt],Zr=j[zt];if(fe)var Kn=ft?fe(Zr,Cr,zt,j,E,Te):fe(Cr,Zr,zt,E,j,Te);if(!(Kn===void 0?Cr===Zr||at(Cr,Zr,X,fe,Te):Kn)){ir=!1;break}Hr||(Hr=zt=="constructor")}if(ir&&!Hr){var Hi=E.constructor,Vt=j.constructor;Hi!=Vt&&"constructor"in E&&"constructor"in j&&!(typeof Hi=="function"&&Hi instanceof Hi&&typeof Vt=="function"&&Vt instanceof Vt)&&(ir=!1)}return Te.delete(E),Te.delete(j),ir}function pn(E){return zn(E,za,zs)}function Di(E,j){var X=E.__data__;return Hs(j)?X[typeof j=="string"?"string":"hash"]:X.map}function wr(E,j){var X=Ie(E,j);return Ua(X)?X:void 0}function Bs(E){var j=xe.call(E,rr),X=E[rr];try{E[rr]=void 0;var fe=!0}catch{}var at=Ge.call(E);return fe&&(j?E[rr]=X:delete E[rr]),at}var zs=ai?function(E){return E==null?[]:(E=Object(E),qe(ai(E),function(j){return hr.call(E,j)}))}:ot,Xr=Bi;(wt&&Xr(new wt(new ArrayBuffer(1)))!=ge||yt&&Xr(new yt)!=K||Et&&Xr(Et.resolve())!=U||Dt&&Xr(new Dt)!=T||mt&&Xr(new mt)!=ne)&&(Xr=function(E){var j=Bi(E),X=j==$?E.constructor:void 0,fe=X?ui(X):"";if(fe)switch(fe){case Ft:return ge;case Ut:return K;case St:return U;case jt:return T;case It:return ne}return j});function qs(E,j){return j=j??l,!!j&&(typeof E=="number"||Se.test(E))&&E>-1&&E%1==0&&E<j}function Hs(E){var j=typeof E;return j=="string"||j=="number"||j=="symbol"||j=="boolean"?E!=="__proto__":E===null}function Ks(E){return!!ke&&ke in E}function Vs(E){var j=E&&E.constructor,X=typeof j=="function"&&j.prototype||we;return E===X}function La(E){return Ge.call(E)}function ui(E){if(E!=null){try{return He.call(E)}catch{}try{return E+""}catch{}}return""}function ks(E,j){return E===j||E!==E&&j!==j}var Ws=qn(function(){return arguments}())?qn:function(E){return qi(E)&&xe.call(E,"callee")&&!hr.call(E,"callee")},gn=Array.isArray;function Ma(E){return E!=null&&Gs(E.length)&&!yn(E)}var Hn=Ei||nt;function Ba(E,j){return zi(E,j)}function yn(E){if(!Ys(E))return!1;var j=Bi(E);return j==O||j==I||j==p||j==x}function Gs(E){return typeof E=="number"&&E>-1&&E%1==0&&E<=l}function Ys(E){var j=typeof E;return E!=null&&(j=="object"||j=="function")}function qi(E){return E!=null&&typeof E=="object"}var Js=Ee?gt(Ee):js;function za(E){return Ma(E)?Fs(E):Ls(E)}function ot(){return[]}function nt(){return!1}i.exports=Ba})(ta,ta.exports);var kD=ta.exports;const WD=ia(kD);function GD(i,e){if(i.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),s=0;s<t.length;s++)t[s]=255;for(var o=0;o<i.length;o++){var c=i.charAt(o),l=c.charCodeAt(0);if(t[l]!==255)throw new TypeError(c+" is ambiguous");t[l]=o}var d=i.length,g=i.charAt(0),p=Math.log(d)/Math.log(256),v=Math.log(256)/Math.log(d);function b(I){if(I instanceof Uint8Array||(ArrayBuffer.isView(I)?I=new Uint8Array(I.buffer,I.byteOffset,I.byteLength):Array.isArray(I)&&(I=Uint8Array.from(I))),!(I instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(I.length===0)return"";for(var K=0,H=0,re=0,$=I.length;re!==$&&I[re]===0;)re++,K++;for(var U=($-re)*v+1>>>0,x=new Uint8Array(U);re!==$;){for(var C=I[re],T=0,h=U-1;(C!==0||T<H)&&h!==-1;h--,T++)C+=256*x[h]>>>0,x[h]=C%d>>>0,C=C/d>>>0;if(C!==0)throw new Error("Non-zero carry");H=T,re++}for(var w=U-H;w!==U&&x[w]===0;)w++;for(var Q=g.repeat(K);w<U;++w)Q+=i.charAt(x[w]);return Q}function S(I){if(typeof I!="string")throw new TypeError("Expected String");if(I.length===0)return new Uint8Array;var K=0;if(I[K]!==" "){for(var H=0,re=0;I[K]===g;)H++,K++;for(var $=(I.length-K)*p+1>>>0,U=new Uint8Array($);I[K];){var x=t[I.charCodeAt(K)];if(x===255)return;for(var C=0,T=$-1;(x!==0||C<re)&&T!==-1;T--,C++)x+=d*U[T]>>>0,U[T]=x%256>>>0,x=x/256>>>0;if(x!==0)throw new Error("Non-zero carry");re=C,K++}if(I[K]!==" "){for(var h=$-re;h!==$&&U[h]===0;)h++;for(var w=new Uint8Array(H+($-h)),Q=H;h!==$;)w[Q++]=U[h++];return w}}}function O(I){var K=S(I);if(K)return K;throw new Error(`Non-${e} character`)}return{encode:b,decodeUnsafe:S,decode:O}}var YD=GD,JD=YD;const rg=i=>{if(i instanceof Uint8Array&&i.constructor.name==="Uint8Array")return i;if(i instanceof ArrayBuffer)return new Uint8Array(i);if(ArrayBuffer.isView(i))return new Uint8Array(i.buffer,i.byteOffset,i.byteLength);throw new Error("Unknown type, must be binary type")},XD=i=>new TextEncoder().encode(i),ZD=i=>new TextDecoder().decode(i);class QD{constructor(e,t,s){this.name=e,this.prefix=t,this.baseEncode=s}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class eS{constructor(e,t,s){if(this.name=e,this.prefix=t,t.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=s}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return ig(this,e)}}class tS{constructor(e){this.decoders=e}or(e){return ig(this,e)}decode(e){const t=e[0],s=this.decoders[t];if(s)return s.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const ig=(i,e)=>new tS({...i.decoders||{[i.prefix]:i},...e.decoders||{[e.prefix]:e}});class rS{constructor(e,t,s,o){this.name=e,this.prefix=t,this.baseEncode=s,this.baseDecode=o,this.encoder=new QD(e,t,s),this.decoder=new eS(e,t,o)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const ma=({name:i,prefix:e,encode:t,decode:s})=>new rS(i,e,t,s),Ts=({prefix:i,name:e,alphabet:t})=>{const{encode:s,decode:o}=JD(t,e);return ma({prefix:i,name:e,encode:s,decode:c=>rg(o(c))})},iS=(i,e,t,s)=>{const o={};for(let v=0;v<e.length;++v)o[e[v]]=v;let c=i.length;for(;i[c-1]==="=";)--c;const l=new Uint8Array(c*t/8|0);let d=0,g=0,p=0;for(let v=0;v<c;++v){const b=o[i[v]];if(b===void 0)throw new SyntaxError(`Non-${s} character`);g=g<<t|b,d+=t,d>=8&&(d-=8,l[p++]=255&g>>d)}if(d>=t||255&g<<8-d)throw new SyntaxError("Unexpected end of data");return l},nS=(i,e,t)=>{const s=e[e.length-1]==="=",o=(1<<t)-1;let c="",l=0,d=0;for(let g=0;g<i.length;++g)for(d=d<<8|i[g],l+=8;l>t;)l-=t,c+=e[o&d>>l];if(l&&(c+=e[o&d<<t-l]),s)for(;c.length*t&7;)c+="=";return c},Xt=({name:i,prefix:e,bitsPerChar:t,alphabet:s})=>ma({prefix:e,name:i,encode(o){return nS(o,s,t)},decode(o){return iS(o,s,t,i)}}),sS=ma({prefix:"\0",name:"identity",encode:i=>ZD(i),decode:i=>XD(i)});var oS=Object.freeze({__proto__:null,identity:sS});const aS=Xt({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var cS=Object.freeze({__proto__:null,base2:aS});const uS=Xt({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var hS=Object.freeze({__proto__:null,base8:uS});const lS=Ts({prefix:"9",name:"base10",alphabet:"0123456789"});var fS=Object.freeze({__proto__:null,base10:lS});const dS=Xt({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),pS=Xt({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var gS=Object.freeze({__proto__:null,base16:dS,base16upper:pS});const yS=Xt({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),vS=Xt({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),_S=Xt({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),mS=Xt({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),bS=Xt({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),wS=Xt({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),ES=Xt({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),DS=Xt({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),SS=Xt({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var IS=Object.freeze({__proto__:null,base32:yS,base32upper:vS,base32pad:_S,base32padupper:mS,base32hex:bS,base32hexupper:wS,base32hexpad:ES,base32hexpadupper:DS,base32z:SS});const xS=Ts({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),OS=Ts({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var PS=Object.freeze({__proto__:null,base36:xS,base36upper:OS});const AS=Ts({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),CS=Ts({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var TS=Object.freeze({__proto__:null,base58btc:AS,base58flickr:CS});const NS=Xt({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),RS=Xt({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),$S=Xt({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),FS=Xt({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var US=Object.freeze({__proto__:null,base64:NS,base64pad:RS,base64url:$S,base64urlpad:FS});const ng=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),jS=ng.reduce((i,e,t)=>(i[t]=e,i),[]),LS=ng.reduce((i,e,t)=>(i[e.codePointAt(0)]=t,i),[]);function MS(i){return i.reduce((e,t)=>(e+=jS[t],e),"")}function BS(i){const e=[];for(const t of i){const s=LS[t.codePointAt(0)];if(s===void 0)throw new Error(`Non-base256emoji character: ${t}`);e.push(s)}return new Uint8Array(e)}const zS=ma({prefix:"🚀",name:"base256emoji",encode:MS,decode:BS});var qS=Object.freeze({__proto__:null,base256emoji:zS}),HS=sg,ld=128,KS=127,VS=~KS,kS=Math.pow(2,31);function sg(i,e,t){e=e||[],t=t||0;for(var s=t;i>=kS;)e[t++]=i&255|ld,i/=128;for(;i&VS;)e[t++]=i&255|ld,i>>>=7;return e[t]=i|0,sg.bytes=t-s+1,e}var WS=Ru,GS=128,fd=127;function Ru(i,s){var t=0,s=s||0,o=0,c=s,l,d=i.length;do{if(c>=d)throw Ru.bytes=0,new RangeError("Could not decode varint");l=i[c++],t+=o<28?(l&fd)<<o:(l&fd)*Math.pow(2,o),o+=7}while(l>=GS);return Ru.bytes=c-s,t}var YS=Math.pow(2,7),JS=Math.pow(2,14),XS=Math.pow(2,21),ZS=Math.pow(2,28),QS=Math.pow(2,35),e5=Math.pow(2,42),t5=Math.pow(2,49),r5=Math.pow(2,56),i5=Math.pow(2,63),n5=function(i){return i<YS?1:i<JS?2:i<XS?3:i<ZS?4:i<QS?5:i<e5?6:i<t5?7:i<r5?8:i<i5?9:10},s5={encode:HS,decode:WS,encodingLength:n5},og=s5;const dd=(i,e,t=0)=>(og.encode(i,e,t),e),pd=i=>og.encodingLength(i),$u=(i,e)=>{const t=e.byteLength,s=pd(i),o=s+pd(t),c=new Uint8Array(o+t);return dd(i,c,0),dd(t,c,s),c.set(e,o),new o5(i,t,e,c)};class o5{constructor(e,t,s,o){this.code=e,this.size=t,this.digest=s,this.bytes=o}}const ag=({name:i,code:e,encode:t})=>new a5(i,e,t);class a5{constructor(e,t,s){this.name=e,this.code=t,this.encode=s}digest(e){if(e instanceof Uint8Array){const t=this.encode(e);return t instanceof Uint8Array?$u(this.code,t):t.then(s=>$u(this.code,s))}else throw Error("Unknown type, must be binary type")}}const cg=i=>async e=>new Uint8Array(await crypto.subtle.digest(i,e)),c5=ag({name:"sha2-256",code:18,encode:cg("SHA-256")}),u5=ag({name:"sha2-512",code:19,encode:cg("SHA-512")});var h5=Object.freeze({__proto__:null,sha256:c5,sha512:u5});const ug=0,l5="identity",hg=rg,f5=i=>$u(ug,hg(i)),d5={code:ug,name:l5,encode:hg,digest:f5};var p5=Object.freeze({__proto__:null,identity:d5});new TextEncoder,new TextDecoder;const gd={...oS,...cS,...hS,...fS,...gS,...IS,...PS,...TS,...US,...qS};({...h5,...p5});function lg(i){return globalThis.Buffer!=null?new Uint8Array(i.buffer,i.byteOffset,i.byteLength):i}function g5(i=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?lg(globalThis.Buffer.allocUnsafe(i)):new Uint8Array(i)}function fg(i,e,t,s){return{name:i,prefix:e,encoder:{name:i,prefix:e,encode:t},decoder:{decode:s}}}const yd=fg("utf8","u",i=>"u"+new TextDecoder("utf8").decode(i),i=>new TextEncoder().encode(i.substring(1))),ru=fg("ascii","a",i=>{let e="a";for(let t=0;t<i.length;t++)e+=String.fromCharCode(i[t]);return e},i=>{i=i.substring(1);const e=g5(i.length);for(let t=0;t<i.length;t++)e[t]=i.charCodeAt(t);return e}),y5={utf8:yd,"utf-8":yd,hex:gd.base16,latin1:ru,ascii:ru,binary:ru,...gd};function v5(i,e="utf8"){const t=y5[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?lg(globalThis.Buffer.from(i,"utf-8")):t.decoder.decode(`${t.prefix}${i}`)}const dg="wc",_5=2,sh="core",Fi=`${dg}@2:${sh}:`,m5={name:sh,logger:"error"},b5={database:":memory:"},w5="crypto",vd="client_ed25519_seed",E5=ve.ONE_DAY,D5="keychain",S5="0.3",I5="messages",x5="0.3",O5=ve.SIX_HOURS,P5="publisher",pg="irn",A5="error",gg="wss://relay.walletconnect.com",_d="wss://relay.walletconnect.org",C5="relayer",Pt={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},T5="_subscription",hs={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},N5=ve.ONE_SECOND/2,R5="2.9.0",$5=1e4,F5="0.3",U5="WALLETCONNECT_CLIENT_ID",ni={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},j5="subscription",L5="0.3",M5=ve.FIVE_SECONDS*1e3,B5="pairing",z5="0.3",ls={wc_pairingDelete:{req:{ttl:ve.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:ve.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:ve.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:ve.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:ve.ONE_DAY,prompt:!1,tag:0},res:{ttl:ve.ONE_DAY,prompt:!1,tag:0}}},ii={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},q5="history",H5="0.3",K5="expirer",Mr={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},V5="0.3",iu="verify-api",md="https://verify.walletconnect.com";class k5{constructor(e,t){this.core=e,this.logger=t,this.keychain=new Map,this.name=D5,this.version=S5,this.initialized=!1,this.storagePrefix=Fi,this.init=async()=>{if(!this.initialized){const s=await this.getKeyChain();typeof s<"u"&&(this.keychain=s),this.initialized=!0}},this.has=s=>(this.isInitialized(),this.keychain.has(s)),this.set=async(s,o)=>{this.isInitialized(),this.keychain.set(s,o),await this.persist()},this.get=s=>{this.isInitialized();const o=this.keychain.get(s);if(typeof o>"u"){const{message:c}=ce("NO_MATCHING_KEY",`${this.name}: ${s}`);throw new Error(c)}return o},this.del=async s=>{this.isInitialized(),this.keychain.delete(s),await this.persist()},this.core=e,this.logger=Pr(t,this.name)}get context(){return br(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,Cp(e))}async getKeyChain(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?Tp(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:e}=ce("NOT_INITIALIZED",this.name);throw new Error(e)}}}class W5{constructor(e,t,s){this.core=e,this.logger=t,this.name=w5,this.initialized=!1,this.init=async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)},this.hasKeys=o=>(this.isInitialized(),this.keychain.has(o)),this.getClientId=async()=>{this.isInitialized();const o=await this.getClientSeed(),c=id(o);return kp(c.publicKey)},this.generateKeyPair=()=>{this.isInitialized();const o=ZE();return this.setPrivateKey(o.publicKey,o.privateKey)},this.signJWT=async o=>{this.isInitialized();const c=await this.getClientSeed(),l=id(c),d=Du();return await iD(d,o,E5,l)},this.generateSharedKey=(o,c,l)=>{this.isInitialized();const d=this.getPrivateKey(o),g=QE(d,c);return this.setSymKey(g,l)},this.setSymKey=async(o,c)=>{this.isInitialized();const l=c||e3(o);return await this.keychain.set(l,o),l},this.deleteKeyPair=async o=>{this.isInitialized(),await this.keychain.del(o)},this.deleteSymKey=async o=>{this.isInitialized(),await this.keychain.del(o)},this.encode=async(o,c,l)=>{this.isInitialized();const d=Pp(l),g=rn(c);if($f(d)){const S=d.senderPublicKey,O=d.receiverPublicKey;o=await this.generateSharedKey(S,O)}const p=this.getSymKey(o),{type:v,senderPublicKey:b}=d;return r3({type:v,symKey:p,message:g,senderPublicKey:b})},this.decode=async(o,c,l)=>{this.isInitialized();const d=s3(c,l);if($f(d)){const v=d.receiverPublicKey,b=d.senderPublicKey;o=await this.generateSharedKey(v,b)}const g=this.getSymKey(o),p=i3({symKey:g,encoded:c});return Os(p)},this.getPayloadType=o=>{const c=Xo(o);return Is(c.type)},this.getPayloadSenderPublicKey=o=>{const c=Xo(o);return c.senderPublicKey?ur(c.senderPublicKey,cr):void 0},this.core=e,this.logger=Pr(t,this.name),this.keychain=s||new k5(this.core,this.logger)}get context(){return br(this.logger)}async setPrivateKey(e,t){return await this.keychain.set(e,t),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(vd)}catch{e=Du(),await this.keychain.set(vd,e)}return v5(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){const{message:e}=ce("NOT_INITIALIZED",this.name);throw new Error(e)}}}class G5 extends F2{constructor(e,t){super(e,t),this.logger=e,this.core=t,this.messages=new Map,this.name=I5,this.version=x5,this.initialized=!1,this.storagePrefix=Fi,this.init=async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const s=await this.getRelayerMessages();typeof s<"u"&&(this.messages=s),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(s){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(s)}finally{this.initialized=!0}}},this.set=async(s,o)=>{this.isInitialized();const c=Fn(o);let l=this.messages.get(s);return typeof l>"u"&&(l={}),typeof l[c]<"u"||(l[c]=o,this.messages.set(s,l),await this.persist()),c},this.get=s=>{this.isInitialized();let o=this.messages.get(s);return typeof o>"u"&&(o={}),o},this.has=(s,o)=>{this.isInitialized();const c=this.get(s),l=Fn(o);return typeof c[l]<"u"},this.del=async s=>{this.isInitialized(),this.messages.delete(s),await this.persist()},this.logger=Pr(e,this.name),this.core=t}get context(){return br(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,Cp(e))}async getRelayerMessages(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?Tp(e):void 0}async persist(){await this.setRelayerMessages(this.messages)}isInitialized(){if(!this.initialized){const{message:e}=ce("NOT_INITIALIZED",this.name);throw new Error(e)}}}class Y5 extends U2{constructor(e,t){super(e,t),this.relayer=e,this.logger=t,this.events=new mr.EventEmitter,this.name=P5,this.queue=new Map,this.publishTimeout=ve.toMiliseconds(ve.TEN_SECONDS),this.queueTimeout=ve.toMiliseconds(ve.FIVE_SECONDS),this.needsTransportRestart=!1,this.publish=async(s,o,c)=>{this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:s,message:o,opts:c}});try{const l=(c==null?void 0:c.ttl)||O5,d=Su(c),g=(c==null?void 0:c.prompt)||!1,p=(c==null?void 0:c.tag)||0,v=(c==null?void 0:c.id)||va().toString(),b={topic:s,message:o,opts:{ttl:l,relay:d,prompt:g,tag:p,id:v}},S=setTimeout(()=>this.queue.set(v,b),this.queueTimeout);try{await await Zo(this.rpcPublish(s,o,l,d,g,p,v),this.publishTimeout),clearTimeout(S),this.relayer.events.emit(Pt.publish,b)}catch{this.logger.debug("Publishing Payload stalled"),this.needsTransportRestart=!0;return}this.logger.debug("Successfully Published Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:s,message:o,opts:c}})}catch(l){throw this.logger.debug("Failed to Publish Payload"),this.logger.error(l),l}},this.on=(s,o)=>{this.events.on(s,o)},this.once=(s,o)=>{this.events.once(s,o)},this.off=(s,o)=>{this.events.off(s,o)},this.removeListener=(s,o)=>{this.events.removeListener(s,o)},this.relayer=e,this.logger=Pr(t,this.name),this.registerEventListeners()}get context(){return br(this.logger)}rpcPublish(e,t,s,o,c,l,d){var g,p,v,b;const S={method:Ko(o.protocol).publish,params:{topic:e,message:t,ttl:s,prompt:c,tag:l},id:d};return ar((g=S.params)==null?void 0:g.prompt)&&((p=S.params)==null||delete p.prompt),ar((v=S.params)==null?void 0:v.tag)&&((b=S.params)==null||delete b.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:S}),this.relayer.request(S)}onPublish(e){this.queue.delete(e)}checkQueue(){this.queue.forEach(async e=>{const{topic:t,message:s,opts:o}=e;await this.publish(t,s,o)})}registerEventListeners(){this.relayer.core.heartbeat.on(Bn.HEARTBEAT_EVENTS.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(Pt.connection_stalled);return}this.checkQueue()}),this.relayer.on(Pt.message_ack,e=>{this.onPublish(e.id.toString())})}}class J5{constructor(){this.map=new Map,this.set=(e,t)=>{const s=this.get(e);this.exists(e,t)||this.map.set(e,[...s,t])},this.get=e=>this.map.get(e)||[],this.exists=(e,t)=>this.get(e).includes(t),this.delete=(e,t)=>{if(typeof t>"u"){this.map.delete(e);return}if(!this.map.has(e))return;const s=this.get(e);if(!this.exists(e,t))return;const o=s.filter(c=>c!==t);if(!o.length){this.map.delete(e);return}this.map.set(e,o)},this.clear=()=>{this.map.clear()}}get topics(){return Array.from(this.map.keys())}}var X5=Object.defineProperty,Z5=Object.defineProperties,Q5=Object.getOwnPropertyDescriptors,bd=Object.getOwnPropertySymbols,eI=Object.prototype.hasOwnProperty,tI=Object.prototype.propertyIsEnumerable,wd=(i,e,t)=>e in i?X5(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,fs=(i,e)=>{for(var t in e||(e={}))eI.call(e,t)&&wd(i,t,e[t]);if(bd)for(var t of bd(e))tI.call(e,t)&&wd(i,t,e[t]);return i},nu=(i,e)=>Z5(i,Q5(e));class rI extends M2{constructor(e,t){super(e,t),this.relayer=e,this.logger=t,this.subscriptions=new Map,this.topicMap=new J5,this.events=new mr.EventEmitter,this.name=j5,this.version=L5,this.pending=new Map,this.cached=[],this.initialized=!1,this.pendingSubscriptionWatchLabel="pending_sub_watch_label",this.pollingInterval=20,this.storagePrefix=Fi,this.subscribeTimeout=1e4,this.restartInProgress=!1,this.batchSubscribeTopicsLimit=500,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restart(),this.registerEventListeners(),this.onEnable(),this.clientId=await this.relayer.core.crypto.getClientId())},this.subscribe=async(s,o)=>{await this.restartToComplete(),this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:s,opts:o}});try{const c=Su(o),l={topic:s,relay:c};this.pending.set(s,l);const d=await this.rpcSubscribe(s,c);return this.onSubscribe(d,l),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:s,opts:o}}),d}catch(c){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(c),c}},this.unsubscribe=async(s,o)=>{await this.restartToComplete(),this.isInitialized(),typeof(o==null?void 0:o.id)<"u"?await this.unsubscribeById(s,o.id,o):await this.unsubscribeByTopic(s,o)},this.isSubscribed=async s=>this.topics.includes(s)?!0:await new Promise((o,c)=>{const l=new ve.Watch;l.start(this.pendingSubscriptionWatchLabel);const d=setInterval(()=>{!this.pending.has(s)&&this.topics.includes(s)&&(clearInterval(d),l.stop(this.pendingSubscriptionWatchLabel),o(!0)),l.elapsed(this.pendingSubscriptionWatchLabel)>=M5&&(clearInterval(d),l.stop(this.pendingSubscriptionWatchLabel),c(new Error("Subscription resolution timeout")))},this.pollingInterval)}).catch(()=>!1),this.on=(s,o)=>{this.events.on(s,o)},this.once=(s,o)=>{this.events.once(s,o)},this.off=(s,o)=>{this.events.off(s,o)},this.removeListener=(s,o)=>{this.events.removeListener(s,o)},this.restart=async()=>{this.restartInProgress=!0,await this.restore(),await this.reset(),this.restartInProgress=!1},this.relayer=e,this.logger=Pr(t,this.name),this.clientId=""}get context(){return br(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}hasSubscription(e,t){let s=!1;try{s=this.getSubscription(e).topic===t}catch{}return s}onEnable(){this.cached=[],this.initialized=!0}onDisable(){this.cached=this.values,this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,t){const s=this.topicMap.get(e);await Promise.all(s.map(async o=>await this.unsubscribeById(e,o,t)))}async unsubscribeById(e,t,s){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:t,opts:s}});try{const o=Su(s);await this.rpcUnsubscribe(e,t,o);const c=Rt("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,t,c),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:t,opts:s}})}catch(o){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(o),o}}async rpcSubscribe(e,t){const s={method:Ko(t.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:s});try{await await Zo(this.relayer.request(s),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(Pt.connection_stalled)}return Fn(e+this.clientId)}async rpcBatchSubscribe(e){if(!e.length)return;const t=e[0].relay,s={method:Ko(t.protocol).batchSubscribe,params:{topics:e.map(o=>o.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:s});try{return await await Zo(this.relayer.request(s),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Payload stalled"),this.relayer.events.emit(Pt.connection_stalled)}}rpcUnsubscribe(e,t,s){const o={method:Ko(s.protocol).unsubscribe,params:{topic:e,id:t}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:o}),this.relayer.request(o)}onSubscribe(e,t){this.setSubscription(e,nu(fs({},t),{id:e})),this.pending.delete(t.topic)}onBatchSubscribe(e){e.length&&e.forEach(t=>{this.setSubscription(t.id,fs({},t)),this.pending.delete(t.topic)})}async onUnsubscribe(e,t,s){this.events.removeAllListeners(t),this.hasSubscription(t,e)&&this.deleteSubscription(t,s),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,t){this.subscriptions.has(e)||(this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:t}),this.addSubscription(e,t))}addSubscription(e,t){this.subscriptions.set(e,fs({},t)),this.topicMap.set(t.topic,e),this.events.emit(ni.created,t)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});const t=this.subscriptions.get(e);if(!t){const{message:s}=ce("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(s)}return t}deleteSubscription(e,t){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:t});const s=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(s.topic,e),this.events.emit(ni.deleted,nu(fs({},s),{reason:t}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(ni.sync)}async reset(){if(this.cached.length){const e=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let t=0;t<e;t++){const s=this.cached.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(s)}}this.events.emit(ni.resubscribed)}async restore(){try{const e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size){const{message:t}=ce("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(t)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){if(!e.length)return;const t=await this.rpcBatchSubscribe(e);oi(t)&&this.onBatchSubscribe(t.map((s,o)=>nu(fs({},e[o]),{id:s})))}async onConnect(){this.restartInProgress||(await this.restart(),this.onEnable())}onDisconnect(){this.onDisable()}async checkPending(){if(this.relayer.transportExplicitlyClosed)return;const e=[];this.pending.forEach(t=>{e.push(t)}),await this.batchSubscribe(e)}registerEventListeners(){this.relayer.core.heartbeat.on(Bn.HEARTBEAT_EVENTS.pulse,async()=>{await this.checkPending()}),this.relayer.on(Pt.connect,async()=>{await this.onConnect()}),this.relayer.on(Pt.disconnect,()=>{this.onDisconnect()}),this.events.on(ni.created,async e=>{const t=ni.created;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),await this.persist()}),this.events.on(ni.deleted,async e=>{const t=ni.deleted;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),await this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=ce("NOT_INITIALIZED",this.name);throw new Error(e)}}async restartToComplete(){this.restartInProgress&&await new Promise(e=>{const t=setInterval(()=>{this.restartInProgress||(clearInterval(t),e())},this.pollingInterval)})}}var iI=Object.defineProperty,Ed=Object.getOwnPropertySymbols,nI=Object.prototype.hasOwnProperty,sI=Object.prototype.propertyIsEnumerable,Dd=(i,e,t)=>e in i?iI(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,oI=(i,e)=>{for(var t in e||(e={}))nI.call(e,t)&&Dd(i,t,e[t]);if(Ed)for(var t of Ed(e))sI.call(e,t)&&Dd(i,t,e[t]);return i};class aI extends j2{constructor(e){super(e),this.protocol="wc",this.version=2,this.events=new mr.EventEmitter,this.name=C5,this.transportExplicitlyClosed=!1,this.initialized=!1,this.reconnecting=!1,this.connectionStatusPollingInterval=20,this.staleConnectionErrors=["socket hang up","socket stalled"],this.request=async t=>{this.logger.debug("Publishing Request Payload");try{return await this.toEstablishConnection(),await this.provider.request(t)}catch(s){throw this.logger.debug("Failed to Publish Request"),this.logger.error(s),s}},this.core=e.core,this.logger=typeof e.logger<"u"&&typeof e.logger!="string"?Pr(e.logger,this.name):ga(ya({level:e.logger||A5})),this.messages=new G5(this.logger,e.core),this.subscriber=new rI(this,this.logger),this.publisher=new Y5(this,this.logger),this.relayUrl=(e==null?void 0:e.relayUrl)||gg,this.projectId=e.projectId,this.provider={}}async init(){this.logger.trace("Initialized"),await this.createProvider(),await Promise.all([this.messages.init(),this.subscriber.init()]);try{await this.transportOpen()}catch{this.logger.warn(`Connection via ${this.relayUrl} failed, attempting to connect via failover domain ${_d}...`),await this.restartTransport(_d)}this.registerEventListeners(),this.initialized=!0,setTimeout(async()=>{this.subscriber.topics.length===0&&(this.logger.info("No topics subscribed to after init, closing transport"),await this.transportClose(),this.transportExplicitlyClosed=!1)},$5)}get context(){return br(this.logger)}get connected(){return this.provider.connection.connected}get connecting(){return this.provider.connection.connecting}async publish(e,t,s){this.isInitialized(),await this.publisher.publish(e,t,s),await this.recordMessageEvent({topic:e,message:t,publishedAt:Date.now()})}async subscribe(e,t){var s;this.isInitialized();let o=((s=this.subscriber.topicMap.get(e))==null?void 0:s[0])||"";return o||(await Promise.all([new Promise(c=>{this.subscriber.once(ni.created,l=>{l.topic===e&&c()})}),new Promise(async c=>{o=await this.subscriber.subscribe(e,t),c()})]),o)}async unsubscribe(e,t){this.isInitialized(),await this.subscriber.unsubscribe(e,t)}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async transportClose(){this.transportExplicitlyClosed=!0,this.connected&&(await this.provider.disconnect(),this.events.emit(Pt.transport_closed))}async transportOpen(e){if(this.transportExplicitlyClosed=!1,!this.reconnecting){this.relayUrl=e||this.relayUrl,this.reconnecting=!0;try{await Promise.all([new Promise(t=>{this.initialized||t(),this.subscriber.once(ni.resubscribed,()=>{t()})}),await Promise.race([new Promise(async(t,s)=>{await Zo(this.provider.connect(),5e3,`Socket stalled when trying to connect to ${this.relayUrl}`).catch(o=>s(o)).then(()=>t()).finally(()=>this.removeListener(Pt.transport_closed,this.rejectTransportOpen))}),new Promise(t=>this.once(Pt.transport_closed,this.rejectTransportOpen))])])}catch(t){this.logger.error(t);const s=t;if(!this.isConnectionStalled(s.message))throw t;this.events.emit(Pt.transport_closed)}finally{this.reconnecting=!1}}}async restartTransport(e){this.transportExplicitlyClosed||this.reconnecting||(this.relayUrl=e||this.relayUrl,this.connected&&await Promise.all([new Promise(t=>{this.provider.once(hs.disconnect,()=>{t()})}),this.transportClose()]),await this.createProvider(),await this.transportOpen())}isConnectionStalled(e){return this.staleConnectionErrors.some(t=>e.includes(t))}rejectTransportOpen(){throw new Error("Attempt to connect to relay via `transportOpen` has stalled. Retrying...")}async createProvider(){const e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new zD(new VD(y3({sdkVersion:R5,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0}))),this.registerProviderListeners()}async recordMessageEvent(e){const{topic:t,message:s}=e;await this.messages.set(t,s)}async shouldIgnoreMessageEvent(e){const{topic:t,message:s}=e;return await this.subscriber.isSubscribed(t)?this.messages.has(t,s):!0}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),nh(e)){if(!e.method.endsWith(T5))return;const t=e.params,{topic:s,message:o,publishedAt:c}=t.data,l={topic:s,message:o,publishedAt:c};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(oI({type:"event",event:t.id},l)),this.events.emit(t.id,l),await this.acknowledgePayload(e),await this.onMessageEvent(l)}else Cs(e)&&this.events.emit(Pt.message_ack,e)}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(this.events.emit(Pt.message,e),await this.recordMessageEvent(e))}async acknowledgePayload(e){const t=ih(e.id,!0);await this.provider.connection.send(t)}registerProviderListeners(){this.provider.on(hs.payload,e=>this.onProviderPayload(e)),this.provider.on(hs.connect,()=>{this.events.emit(Pt.connect)}),this.provider.on(hs.disconnect,()=>{this.onProviderDisconnect()}),this.provider.on(hs.error,e=>{this.logger.error(e),this.events.emit(Pt.error,e)})}registerEventListeners(){this.events.on(Pt.connection_stalled,async()=>{await this.restartTransport()})}onProviderDisconnect(){this.events.emit(Pt.disconnect),this.attemptToReconnect()}attemptToReconnect(){this.transportExplicitlyClosed||setTimeout(async()=>{await this.restartTransport()},ve.toMiliseconds(N5))}isInitialized(){if(!this.initialized){const{message:e}=ce("NOT_INITIALIZED",this.name);throw new Error(e)}}async toEstablishConnection(){if(!this.connected){if(this.connecting)return await new Promise(e=>{const t=setInterval(()=>{this.connected&&(clearInterval(t),e())},this.connectionStatusPollingInterval)});await this.restartTransport()}}}var cI=Object.defineProperty,Sd=Object.getOwnPropertySymbols,uI=Object.prototype.hasOwnProperty,hI=Object.prototype.propertyIsEnumerable,Id=(i,e,t)=>e in i?cI(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,xd=(i,e)=>{for(var t in e||(e={}))uI.call(e,t)&&Id(i,t,e[t]);if(Sd)for(var t of Sd(e))hI.call(e,t)&&Id(i,t,e[t]);return i};class ba extends L2{constructor(e,t,s,o=Fi,c=void 0){super(e,t,s,o),this.core=e,this.logger=t,this.name=s,this.map=new Map,this.version=F5,this.cached=[],this.initialized=!1,this.storagePrefix=Fi,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(l=>{this.getKey&&l!==null&&!ar(l)?this.map.set(this.getKey(l),l):M3(l)?this.map.set(l.id,l):B3(l)&&this.map.set(l.topic,l)}),this.cached=[],this.initialized=!0)},this.set=async(l,d)=>{this.isInitialized(),this.map.has(l)?await this.update(l,d):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:l,value:d}),this.map.set(l,d),await this.persist())},this.get=l=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:l}),this.getData(l)),this.getAll=l=>(this.isInitialized(),l?this.values.filter(d=>Object.keys(l).every(g=>WD(d[g],l[g]))):this.values),this.update=async(l,d)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:l,update:d});const g=xd(xd({},this.getData(l)),d);this.map.set(l,g),await this.persist()},this.delete=async(l,d)=>{this.isInitialized(),this.map.has(l)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:l,reason:d}),this.map.delete(l),await this.persist())},this.logger=Pr(t,this.name),this.storagePrefix=o,this.getKey=c}get context(){return br(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){const t=this.map.get(e);if(!t){const{message:s}=ce("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(s),new Error(s)}return t}async persist(){await this.setDataStore(this.values)}async restore(){try{const e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){const{message:t}=ce("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),new Error(t)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){const{message:e}=ce("NOT_INITIALIZED",this.name);throw new Error(e)}}}class lI{constructor(e,t){this.core=e,this.logger=t,this.name=B5,this.version=z5,this.events=new zu,this.initialized=!1,this.storagePrefix=Fi,this.ignoredPayloadTypes=[sn],this.registeredMethods=[],this.init=async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))},this.register=({methods:s})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...s])]},this.create=async()=>{this.isInitialized();const s=Du(),o=await this.core.crypto.setSymKey(s),c=Gr(ve.FIVE_MINUTES),l={protocol:pg},d={topic:o,expiry:c,relay:l,active:!1},g=A3({protocol:this.core.protocol,version:this.core.version,topic:o,symKey:s,relay:l});return await this.pairings.set(o,d),await this.core.relayer.subscribe(o),this.core.expirer.set(o,c),{topic:o,uri:g}},this.pair=async s=>{this.isInitialized(),this.isValidPair(s);const{topic:o,symKey:c,relay:l}=x3(s.uri);if(this.pairings.keys.includes(o))throw new Error(`Pairing already exists: ${o}`);if(this.core.crypto.hasKeys(o))throw new Error(`Keychain already exists: ${o}`);const d=Gr(ve.FIVE_MINUTES),g={topic:o,relay:l,expiry:d,active:!1};return await this.pairings.set(o,g),await this.core.crypto.setSymKey(c,o),await this.core.relayer.subscribe(o,{relay:l}),this.core.expirer.set(o,d),s.activatePairing&&await this.activate({topic:o}),g},this.activate=async({topic:s})=>{this.isInitialized();const o=Gr(ve.THIRTY_DAYS);await this.pairings.update(s,{active:!0,expiry:o}),this.core.expirer.set(s,o)},this.ping=async s=>{this.isInitialized(),await this.isValidPing(s);const{topic:o}=s;if(this.pairings.keys.includes(o)){const c=await this.sendRequest(o,"wc_pairingPing",{}),{done:l,resolve:d,reject:g}=Rn();this.events.once(qt("pairing_ping",c),({error:p})=>{p?g(p):d()}),await l()}},this.updateExpiry=async({topic:s,expiry:o})=>{this.isInitialized(),await this.pairings.update(s,{expiry:o})},this.updateMetadata=async({topic:s,metadata:o})=>{this.isInitialized(),await this.pairings.update(s,{peerMetadata:o})},this.getPairings=()=>(this.isInitialized(),this.pairings.values),this.disconnect=async s=>{this.isInitialized(),await this.isValidDisconnect(s);const{topic:o}=s;this.pairings.keys.includes(o)&&(await this.sendRequest(o,"wc_pairingDelete",Rt("USER_DISCONNECTED")),await this.deletePairing(o))},this.sendRequest=async(s,o,c)=>{const l=As(o,c),d=await this.core.crypto.encode(s,l),g=ls[o].req;return this.core.history.set(s,l),this.core.relayer.publish(s,d,g),l.id},this.sendResult=async(s,o,c)=>{const l=ih(s,c),d=await this.core.crypto.encode(o,l),g=await this.core.history.get(o,s),p=ls[g.request.method].res;await this.core.relayer.publish(o,d,p),await this.core.history.resolve(l)},this.sendError=async(s,o,c)=>{const l=_a(s,c),d=await this.core.crypto.encode(o,l),g=await this.core.history.get(o,s),p=ls[g.request.method]?ls[g.request.method].res:ls.unregistered_method.res;await this.core.relayer.publish(o,d,p),await this.core.history.resolve(l)},this.deletePairing=async(s,o)=>{await this.core.relayer.unsubscribe(s),await Promise.all([this.pairings.delete(s,Rt("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(s),o?Promise.resolve():this.core.expirer.del(s)])},this.cleanup=async()=>{const s=this.pairings.getAll().filter(o=>Ri(o.expiry));await Promise.all(s.map(o=>this.deletePairing(o.topic)))},this.onRelayEventRequest=s=>{const{topic:o,payload:c}=s,l=c.method;if(this.pairings.keys.includes(o))switch(l){case"wc_pairingPing":return this.onPairingPingRequest(o,c);case"wc_pairingDelete":return this.onPairingDeleteRequest(o,c);default:return this.onUnknownRpcMethodRequest(o,c)}},this.onRelayEventResponse=async s=>{const{topic:o,payload:c}=s,l=(await this.core.history.get(o,c.id)).request.method;if(this.pairings.keys.includes(o))switch(l){case"wc_pairingPing":return this.onPairingPingResponse(o,c);default:return this.onUnknownRpcMethodResponse(l)}},this.onPairingPingRequest=async(s,o)=>{const{id:c}=o;try{this.isValidPing({topic:s}),await this.sendResult(c,s,!0),this.events.emit("pairing_ping",{id:c,topic:s})}catch(l){await this.sendError(c,s,l),this.logger.error(l)}},this.onPairingPingResponse=(s,o)=>{const{id:c}=o;setTimeout(()=>{wi(o)?this.events.emit(qt("pairing_ping",c),{}):Br(o)&&this.events.emit(qt("pairing_ping",c),{error:o.error})},500)},this.onPairingDeleteRequest=async(s,o)=>{const{id:c}=o;try{this.isValidDisconnect({topic:s}),await this.deletePairing(s),this.events.emit("pairing_delete",{id:c,topic:s})}catch(l){await this.sendError(c,s,l),this.logger.error(l)}},this.onUnknownRpcMethodRequest=async(s,o)=>{const{id:c,method:l}=o;try{if(this.registeredMethods.includes(l))return;const d=Rt("WC_METHOD_UNSUPPORTED",l);await this.sendError(c,s,d),this.logger.error(d)}catch(d){await this.sendError(c,s,d),this.logger.error(d)}},this.onUnknownRpcMethodResponse=s=>{this.registeredMethods.includes(s)||this.logger.error(Rt("WC_METHOD_UNSUPPORTED",s))},this.isValidPair=s=>{if(!vr(s)){const{message:o}=ce("MISSING_OR_INVALID",`pair() params: ${s}`);throw new Error(o)}if(!L3(s.uri)){const{message:o}=ce("MISSING_OR_INVALID",`pair() uri: ${s.uri}`);throw new Error(o)}},this.isValidPing=async s=>{if(!vr(s)){const{message:c}=ce("MISSING_OR_INVALID",`ping() params: ${s}`);throw new Error(c)}const{topic:o}=s;await this.isValidPairingTopic(o)},this.isValidDisconnect=async s=>{if(!vr(s)){const{message:c}=ce("MISSING_OR_INVALID",`disconnect() params: ${s}`);throw new Error(c)}const{topic:o}=s;await this.isValidPairingTopic(o)},this.isValidPairingTopic=async s=>{if(!Gt(s,!1)){const{message:o}=ce("MISSING_OR_INVALID",`pairing topic should be a string: ${s}`);throw new Error(o)}if(!this.pairings.keys.includes(s)){const{message:o}=ce("NO_MATCHING_KEY",`pairing topic doesn't exist: ${s}`);throw new Error(o)}if(Ri(this.pairings.get(s).expiry)){await this.deletePairing(s);const{message:o}=ce("EXPIRED",`pairing topic: ${s}`);throw new Error(o)}},this.core=e,this.logger=Pr(t,this.name),this.pairings=new ba(this.core,this.logger,this.name,this.storagePrefix)}get context(){return br(this.logger)}isInitialized(){if(!this.initialized){const{message:e}=ce("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.core.relayer.on(Pt.message,async e=>{const{topic:t,message:s}=e;if(this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(s)))return;const o=await this.core.crypto.decode(t,s);nh(o)?(this.core.history.set(t,o),this.onRelayEventRequest({topic:t,payload:o})):Cs(o)&&(await this.core.history.resolve(o),await this.onRelayEventResponse({topic:t,payload:o}),this.core.history.delete(t,o.id))})}registerExpirerEvents(){this.core.expirer.on(Mr.expired,async e=>{const{topic:t}=Rp(e.target);t&&this.pairings.keys.includes(t)&&(await this.deletePairing(t,!0),this.events.emit("pairing_expire",{topic:t}))})}}class fI extends $2{constructor(e,t){super(e,t),this.core=e,this.logger=t,this.records=new Map,this.events=new mr.EventEmitter,this.name=q5,this.version=H5,this.cached=[],this.initialized=!1,this.storagePrefix=Fi,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(s=>this.records.set(s.id,s)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.set=(s,o,c)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:s,request:o,chainId:c}),this.records.has(o.id))return;const l={id:o.id,topic:s,request:{method:o.method,params:o.params||null},chainId:c,expiry:Gr(ve.THIRTY_DAYS)};this.records.set(l.id,l),this.events.emit(ii.created,l)},this.resolve=async s=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:s}),!this.records.has(s.id))return;const o=await this.getRecord(s.id);typeof o.response>"u"&&(o.response=Br(s)?{error:s.error}:{result:s.result},this.records.set(o.id,o),this.events.emit(ii.updated,o))},this.get=async(s,o)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:s,id:o}),await this.getRecord(o)),this.delete=(s,o)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:o}),this.values.forEach(c=>{if(c.topic===s){if(typeof o<"u"&&c.id!==o)return;this.records.delete(c.id),this.events.emit(ii.deleted,c)}})},this.exists=async(s,o)=>(this.isInitialized(),this.records.has(o)?(await this.getRecord(o)).topic===s:!1),this.on=(s,o)=>{this.events.on(s,o)},this.once=(s,o)=>{this.events.once(s,o)},this.off=(s,o)=>{this.events.off(s,o)},this.removeListener=(s,o)=>{this.events.removeListener(s,o)},this.logger=Pr(t,this.name)}get context(){return br(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const e=[];return this.values.forEach(t=>{if(typeof t.response<"u")return;const s={topic:t.topic,request:As(t.request.method,t.request.params,t.id),chainId:t.chainId};return e.push(s)}),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();const t=this.records.get(e);if(!t){const{message:s}=ce("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(s)}return t}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(ii.sync)}async restore(){try{const e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){const{message:t}=ce("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),new Error(t)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(ii.created,e=>{const t=ii.created;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e}),this.persist()}),this.events.on(ii.updated,e=>{const t=ii.updated;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e}),this.persist()}),this.events.on(ii.deleted,e=>{const t=ii.deleted;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e}),this.persist()}),this.core.heartbeat.on(Bn.HEARTBEAT_EVENTS.pulse,()=>{this.cleanup()})}cleanup(){try{this.records.forEach(e=>{ve.toMiliseconds(e.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${e.id}`),this.delete(e.topic,e.id))})}catch(e){this.logger.warn(e)}}isInitialized(){if(!this.initialized){const{message:e}=ce("NOT_INITIALIZED",this.name);throw new Error(e)}}}class dI extends B2{constructor(e,t){super(e,t),this.core=e,this.logger=t,this.expirations=new Map,this.events=new mr.EventEmitter,this.name=K5,this.version=V5,this.cached=[],this.initialized=!1,this.storagePrefix=Fi,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(s=>this.expirations.set(s.target,s)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.has=s=>{try{const o=this.formatTarget(s);return typeof this.getExpiration(o)<"u"}catch{return!1}},this.set=(s,o)=>{this.isInitialized();const c=this.formatTarget(s),l={target:c,expiry:o};this.expirations.set(c,l),this.checkExpiry(c,l),this.events.emit(Mr.created,{target:c,expiration:l})},this.get=s=>{this.isInitialized();const o=this.formatTarget(s);return this.getExpiration(o)},this.del=s=>{if(this.isInitialized(),this.has(s)){const o=this.formatTarget(s),c=this.getExpiration(o);this.expirations.delete(o),this.events.emit(Mr.deleted,{target:o,expiration:c})}},this.on=(s,o)=>{this.events.on(s,o)},this.once=(s,o)=>{this.events.once(s,o)},this.off=(s,o)=>{this.events.off(s,o)},this.removeListener=(s,o)=>{this.events.removeListener(s,o)},this.logger=Pr(t,this.name)}get context(){return br(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if(typeof e=="string")return v3(e);if(typeof e=="number")return _3(e);const{message:t}=ce("UNKNOWN_TYPE",`Target type: ${typeof e}`);throw new Error(t)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(Mr.sync)}async restore(){try{const e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){const{message:t}=ce("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),new Error(t)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){const t=this.expirations.get(e);if(!t){const{message:s}=ce("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(s),new Error(s)}return t}checkExpiry(e,t){const{expiry:s}=t;ve.toMiliseconds(s)-Date.now()<=0&&this.expire(e,t)}expire(e,t){this.expirations.delete(e),this.events.emit(Mr.expired,{target:e,expiration:t})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((e,t)=>this.checkExpiry(t,e))}registerEventListeners(){this.core.heartbeat.on(Bn.HEARTBEAT_EVENTS.pulse,()=>this.checkExpirations()),this.events.on(Mr.created,e=>{const t=Mr.created;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()}),this.events.on(Mr.expired,e=>{const t=Mr.expired;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()}),this.events.on(Mr.deleted,e=>{const t=Mr.deleted;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=ce("NOT_INITIALIZED",this.name);throw new Error(e)}}}class pI extends z2{constructor(e,t){super(e,t),this.projectId=e,this.logger=t,this.name=iu,this.initialized=!1,this.init=async s=>{Ap()||!Xu()||(this.verifyUrl=(s==null?void 0:s.verifyUrl)||md,await this.createIframe())},this.register=async s=>{var o;if(this.initialized||await this.init(),!!this.iframe)try{(o=this.iframe.contentWindow)==null||o.postMessage(s.attestationId,this.verifyUrl),this.logger.info(`postMessage sent: ${s.attestationId} ${this.verifyUrl}`)}catch{}},this.resolve=async s=>{var o;if(this.isDevEnv)return"";this.logger.info(`resolving attestation: ${s.attestationId}`);const c=this.startAbortTimer(ve.FIVE_SECONDS),l=await fetch(`${this.verifyUrl}/attestation/${s.attestationId}`,{signal:this.abortController.signal});return clearTimeout(c),l.status===200?(o=await l.json())==null?void 0:o.origin:""},this.createIframe=async()=>{try{await Promise.race([new Promise((s,o)=>{if(document.getElementById(iu))return s();const c=document.createElement("iframe");c.setAttribute("id",iu),c.setAttribute("src",`${this.verifyUrl}/${this.projectId}`),c.style.display="none",c.addEventListener("load",()=>{this.initialized=!0,s()}),c.addEventListener("error",l=>{o(l)}),document.body.append(c),this.iframe=c}),new Promise(s=>{setTimeout(()=>s("iframe load timeout"),ve.toMiliseconds(ve.ONE_SECOND/2))})])}catch(s){this.logger.error(`Verify iframe failed to load: ${this.verifyUrl}`),this.logger.error(s)}},this.logger=Pr(t,this.name),this.verifyUrl=md,this.abortController=new AbortController,this.isDevEnv=Ju()&&{}.IS_VITEST}get context(){return br(this.logger)}startAbortTimer(e){return setTimeout(()=>this.abortController.abort(),ve.toMiliseconds(e))}}var gI=Object.defineProperty,Od=Object.getOwnPropertySymbols,yI=Object.prototype.hasOwnProperty,vI=Object.prototype.propertyIsEnumerable,Pd=(i,e,t)=>e in i?gI(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,Ad=(i,e)=>{for(var t in e||(e={}))yI.call(e,t)&&Pd(i,t,e[t]);if(Od)for(var t of Od(e))vI.call(e,t)&&Pd(i,t,e[t]);return i};class oh extends R2{constructor(e){super(e),this.protocol=dg,this.version=_5,this.name=sh,this.events=new mr.EventEmitter,this.initialized=!1,this.on=(s,o)=>this.events.on(s,o),this.once=(s,o)=>this.events.once(s,o),this.off=(s,o)=>this.events.off(s,o),this.removeListener=(s,o)=>this.events.removeListener(s,o),this.projectId=e==null?void 0:e.projectId,this.relayUrl=(e==null?void 0:e.relayUrl)||gg;const t=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:ga(ya({level:(e==null?void 0:e.logger)||m5.logger}));this.logger=Pr(t,this.name),this.heartbeat=new Bn.HeartBeat,this.crypto=new W5(this,this.logger,e==null?void 0:e.keychain),this.history=new fI(this,this.logger),this.expirer=new dI(this,this.logger),this.storage=e!=null&&e.storage?e.storage:new U6(Ad(Ad({},b5),e==null?void 0:e.storageOptions)),this.relayer=new aI({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new lI(this,this.logger),this.verify=new pI(this.projectId||"",this.logger)}static async init(e){const t=new oh(e);await t.initialize();const s=await t.crypto.getClientId();return await t.storage.setItem(U5,s),t}get context(){return br(this.logger)}async start(){this.initialized||await this.initialize()}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,e),this.logger.error(e.message),e}}}const _I=oh,yg="wc",vg=2,_g="client",ah=`${yg}@${vg}:${_g}:`,su={name:_g,logger:"error",controller:!1,relayUrl:"wss://relay.walletconnect.com"},mI="WALLETCONNECT_DEEPLINK_CHOICE",bI="proposal",mg="Proposal expired",wI="session",Bo=ve.SEVEN_DAYS,EI="engine",ds={wc_sessionPropose:{req:{ttl:ve.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:ve.FIVE_MINUTES,prompt:!1,tag:1101}},wc_sessionSettle:{req:{ttl:ve.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:ve.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:ve.ONE_DAY,prompt:!1,tag:1104},res:{ttl:ve.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:ve.ONE_DAY,prompt:!1,tag:1106},res:{ttl:ve.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:ve.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:ve.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:ve.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:ve.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:ve.ONE_DAY,prompt:!1,tag:1112},res:{ttl:ve.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:ve.THIRTY_SECONDS,prompt:!1,tag:1114},res:{ttl:ve.THIRTY_SECONDS,prompt:!1,tag:1115}}},ou={min:ve.FIVE_MINUTES,max:ve.SEVEN_DAYS},DI="request",SI=["wc_sessionPropose","wc_sessionRequest","wc_authRequest"];var II=Object.defineProperty,xI=Object.defineProperties,OI=Object.getOwnPropertyDescriptors,Cd=Object.getOwnPropertySymbols,PI=Object.prototype.hasOwnProperty,AI=Object.prototype.propertyIsEnumerable,Td=(i,e,t)=>e in i?II(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,Lr=(i,e)=>{for(var t in e||(e={}))PI.call(e,t)&&Td(i,t,e[t]);if(Cd)for(var t of Cd(e))AI.call(e,t)&&Td(i,t,e[t]);return i},au=(i,e)=>xI(i,OI(e));class CI extends H2{constructor(e){super(e),this.name=EI,this.events=new zu,this.initialized=!1,this.ignoredPayloadTypes=[sn],this.init=async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.client.core.pairing.register({methods:Object.keys(ds)}),this.initialized=!0)},this.connect=async t=>{this.isInitialized();const s=au(Lr({},t),{requiredNamespaces:t.requiredNamespaces||{},optionalNamespaces:t.optionalNamespaces||{}});await this.isValidConnect(s);const{pairingTopic:o,requiredNamespaces:c,optionalNamespaces:l,sessionProperties:d,relays:g}=s;let p=o,v,b=!1;if(p&&(b=this.client.core.pairing.pairings.get(p).active),!p||!b){const{topic:U,uri:x}=await this.client.core.pairing.create();p=U,v=x}const S=await this.client.core.crypto.generateKeyPair(),O=Lr({requiredNamespaces:c,optionalNamespaces:l,relays:g??[{protocol:pg}],proposer:{publicKey:S,metadata:this.client.metadata}},d&&{sessionProperties:d}),{reject:I,resolve:K,done:H}=Rn(ve.FIVE_MINUTES,mg);if(this.events.once(qt("session_connect"),async({error:U,session:x})=>{if(U)I(U);else if(x){x.self.publicKey=S;const C=au(Lr({},x),{requiredNamespaces:x.requiredNamespaces,optionalNamespaces:x.optionalNamespaces});await this.client.session.set(x.topic,C),await this.setExpiry(x.topic,x.expiry),p&&await this.client.core.pairing.updateMetadata({topic:p,metadata:x.peer.metadata}),K(C)}}),!p){const{message:U}=ce("NO_MATCHING_KEY",`connect() pairing topic: ${p}`);throw new Error(U)}const re=await this.sendRequest(p,"wc_sessionPropose",O),$=Gr(ve.FIVE_MINUTES);return await this.setProposal(re,Lr({id:re,expiry:$},O)),{uri:v,approval:H}},this.pair=async t=>(this.isInitialized(),await this.client.core.pairing.pair(t)),this.approve=async t=>{this.isInitialized(),await this.isValidApprove(t);const{id:s,relayProtocol:o,namespaces:c,sessionProperties:l}=t,d=this.client.proposal.get(s);let{pairingTopic:g,proposer:p,requiredNamespaces:v,optionalNamespaces:b}=d;g=g||"",Un(v)||(v=R3(c,"approve()"));const S=await this.client.core.crypto.generateKeyPair(),O=p.publicKey,I=await this.client.core.crypto.generateSharedKey(S,O);g&&s&&(await this.client.core.pairing.updateMetadata({topic:g,metadata:p.metadata}),await this.sendResult(s,g,{relay:{protocol:o??"irn"},responderPublicKey:S}),await this.client.proposal.delete(s,Rt("USER_DISCONNECTED")),await this.client.core.pairing.activate({topic:g}));const K=Lr({relay:{protocol:o??"irn"},namespaces:c,requiredNamespaces:v,optionalNamespaces:b,pairingTopic:g,controller:{publicKey:S,metadata:this.client.metadata},expiry:Gr(Bo)},l&&{sessionProperties:l});await this.client.core.relayer.subscribe(I),await this.sendRequest(I,"wc_sessionSettle",K);const H=au(Lr({},K),{topic:I,pairingTopic:g,acknowledged:!1,self:K.controller,peer:{publicKey:p.publicKey,metadata:p.metadata},controller:S});return await this.client.session.set(I,H),await this.setExpiry(I,Gr(Bo)),{topic:I,acknowledged:()=>new Promise(re=>setTimeout(()=>re(this.client.session.get(I)),500))}},this.reject=async t=>{this.isInitialized(),await this.isValidReject(t);const{id:s,reason:o}=t,{pairingTopic:c}=this.client.proposal.get(s);c&&(await this.sendError(s,c,o),await this.client.proposal.delete(s,Rt("USER_DISCONNECTED")))},this.update=async t=>{this.isInitialized(),await this.isValidUpdate(t);const{topic:s,namespaces:o}=t,c=await this.sendRequest(s,"wc_sessionUpdate",{namespaces:o}),{done:l,resolve:d,reject:g}=Rn();return this.events.once(qt("session_update",c),({error:p})=>{p?g(p):d()}),await this.client.session.update(s,{namespaces:o}),{acknowledged:l}},this.extend=async t=>{this.isInitialized(),await this.isValidExtend(t);const{topic:s}=t,o=await this.sendRequest(s,"wc_sessionExtend",{}),{done:c,resolve:l,reject:d}=Rn();return this.events.once(qt("session_extend",o),({error:g})=>{g?d(g):l()}),await this.setExpiry(s,Gr(Bo)),{acknowledged:c}},this.request=async t=>{this.isInitialized(),await this.isValidRequest(t);const{chainId:s,request:o,topic:c,expiry:l}=t,d=await this.sendRequest(c,"wc_sessionRequest",{request:o,chainId:s},l),{done:g,resolve:p,reject:v}=Rn(l);this.events.once(qt("session_request",d),({error:S,result:O})=>{S?v(S):p(O)}),this.client.events.emit("session_request_sent",{topic:c,request:o,chainId:s,id:d});const b=await this.client.core.storage.getItem(mI);return m3({id:d,topic:c,wcDeepLink:b}),await g()},this.respond=async t=>{this.isInitialized(),await this.isValidRespond(t);const{topic:s,response:o}=t,{id:c}=o;wi(o)?await this.sendResult(c,s,o.result):Br(o)&&await this.sendError(c,s,o.error),this.deletePendingSessionRequest(t.response.id,{message:"fulfilled",code:0})},this.ping=async t=>{this.isInitialized(),await this.isValidPing(t);const{topic:s}=t;if(this.client.session.keys.includes(s)){const o=await this.sendRequest(s,"wc_sessionPing",{}),{done:c,resolve:l,reject:d}=Rn();this.events.once(qt("session_ping",o),({error:g})=>{g?d(g):l()}),await c()}else this.client.core.pairing.pairings.keys.includes(s)&&await this.client.core.pairing.ping({topic:s})},this.emit=async t=>{this.isInitialized(),await this.isValidEmit(t);const{topic:s,event:o,chainId:c}=t;await this.sendRequest(s,"wc_sessionEvent",{event:o,chainId:c})},this.disconnect=async t=>{this.isInitialized(),await this.isValidDisconnect(t);const{topic:s}=t;if(this.client.session.keys.includes(s)){const o=va().toString();let c;const l=d=>{(d==null?void 0:d.id.toString())===o&&(this.client.core.relayer.events.removeListener(Pt.message_ack,l),c())};await Promise.all([new Promise(d=>{c=d,this.client.core.relayer.on(Pt.message_ack,l)}),this.sendRequest(s,"wc_sessionDelete",Rt("USER_DISCONNECTED"),void 0,o)]),await this.deleteSession(s)}else await this.client.core.pairing.disconnect({topic:s})},this.find=t=>(this.isInitialized(),this.client.session.getAll().filter(s=>U3(s,t))),this.getPendingSessionRequests=()=>(this.isInitialized(),this.client.pendingRequest.getAll()),this.cleanupDuplicatePairings=async t=>{if(t.pairingTopic)try{const s=this.client.core.pairing.pairings.get(t.pairingTopic),o=this.client.core.pairing.pairings.getAll().filter(c=>{var l,d;return((l=c.peerMetadata)==null?void 0:l.url)&&((d=c.peerMetadata)==null?void 0:d.url)===t.peer.metadata.url&&c.topic&&c.topic!==s.topic});if(o.length===0)return;this.client.logger.info(`Cleaning up ${o.length} duplicate pairing(s)`),await Promise.all(o.map(c=>this.client.core.pairing.disconnect({topic:c.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(s){this.client.logger.error(s)}},this.deleteSession=async(t,s)=>{const{self:o}=this.client.session.get(t);await this.client.core.relayer.unsubscribe(t),this.client.session.delete(t,Rt("USER_DISCONNECTED")),this.client.core.crypto.keychain.has(o.publicKey)&&await this.client.core.crypto.deleteKeyPair(o.publicKey),this.client.core.crypto.keychain.has(t)&&await this.client.core.crypto.deleteSymKey(t),s||this.client.core.expirer.del(t)},this.deleteProposal=async(t,s)=>{await Promise.all([this.client.proposal.delete(t,Rt("USER_DISCONNECTED")),s?Promise.resolve():this.client.core.expirer.del(t)])},this.deletePendingSessionRequest=async(t,s,o=!1)=>{await Promise.all([this.client.pendingRequest.delete(t,s),o?Promise.resolve():this.client.core.expirer.del(t)])},this.setExpiry=async(t,s)=>{this.client.session.keys.includes(t)&&await this.client.session.update(t,{expiry:s}),this.client.core.expirer.set(t,s)},this.setProposal=async(t,s)=>{await this.client.proposal.set(t,s),this.client.core.expirer.set(t,s.expiry)},this.setPendingSessionRequest=async t=>{const s=ds.wc_sessionRequest.req.ttl,{id:o,topic:c,params:l}=t;await this.client.pendingRequest.set(o,{id:o,topic:c,params:l}),s&&this.client.core.expirer.set(o,Gr(s))},this.sendRequest=async(t,s,o,c,l)=>{const d=As(s,o);if(Xu()&&SI.includes(s)){const v=Fn(JSON.stringify(d));await this.client.core.verify.register({attestationId:v})}const g=await this.client.core.crypto.encode(t,d),p=ds[s].req;return c&&(p.ttl=c),l&&(p.id=l),this.client.core.history.set(t,d),this.client.core.relayer.publish(t,g,p),d.id},this.sendResult=async(t,s,o)=>{const c=ih(t,o),l=await this.client.core.crypto.encode(s,c),d=await this.client.core.history.get(s,t),g=ds[d.request.method].res;this.client.core.relayer.publish(s,l,g),await this.client.core.history.resolve(c)},this.sendError=async(t,s,o)=>{const c=_a(t,o),l=await this.client.core.crypto.encode(s,c),d=await this.client.core.history.get(s,t),g=ds[d.request.method].res;this.client.core.relayer.publish(s,l,g),await this.client.core.history.resolve(c)},this.cleanup=async()=>{const t=[],s=[];this.client.session.getAll().forEach(o=>{Ri(o.expiry)&&t.push(o.topic)}),this.client.proposal.getAll().forEach(o=>{Ri(o.expiry)&&s.push(o.id)}),await Promise.all([...t.map(o=>this.deleteSession(o)),...s.map(o=>this.deleteProposal(o))])},this.onRelayEventRequest=t=>{const{topic:s,payload:o}=t,c=o.method;switch(c){case"wc_sessionPropose":return this.onSessionProposeRequest(s,o);case"wc_sessionSettle":return this.onSessionSettleRequest(s,o);case"wc_sessionUpdate":return this.onSessionUpdateRequest(s,o);case"wc_sessionExtend":return this.onSessionExtendRequest(s,o);case"wc_sessionPing":return this.onSessionPingRequest(s,o);case"wc_sessionDelete":return this.onSessionDeleteRequest(s,o);case"wc_sessionRequest":return this.onSessionRequest(s,o);case"wc_sessionEvent":return this.onSessionEventRequest(s,o);default:return this.client.logger.info(`Unsupported request method ${c}`)}},this.onRelayEventResponse=async t=>{const{topic:s,payload:o}=t,c=(await this.client.core.history.get(s,o.id)).request.method;switch(c){case"wc_sessionPropose":return this.onSessionProposeResponse(s,o);case"wc_sessionSettle":return this.onSessionSettleResponse(s,o);case"wc_sessionUpdate":return this.onSessionUpdateResponse(s,o);case"wc_sessionExtend":return this.onSessionExtendResponse(s,o);case"wc_sessionPing":return this.onSessionPingResponse(s,o);case"wc_sessionRequest":return this.onSessionRequestResponse(s,o);default:return this.client.logger.info(`Unsupported response method ${c}`)}},this.onRelayEventUnknownPayload=t=>{const{topic:s}=t,{message:o}=ce("MISSING_OR_INVALID",`Decoded payload on topic ${s} is not identifiable as a JSON-RPC request or a response.`);throw new Error(o)},this.onSessionProposeRequest=async(t,s)=>{const{params:o,id:c}=s;try{this.isValidConnect(Lr({},s.params));const l=Gr(ve.FIVE_MINUTES),d=Lr({id:c,pairingTopic:t,expiry:l},o);await this.setProposal(c,d);const g=Fn(JSON.stringify(s)),p=await this.getVerifyContext(g,d.proposer.metadata);this.client.events.emit("session_proposal",{id:c,params:d,verifyContext:p})}catch(l){await this.sendError(c,t,l),this.client.logger.error(l)}},this.onSessionProposeResponse=async(t,s)=>{const{id:o}=s;if(wi(s)){const{result:c}=s;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:c});const l=this.client.proposal.get(o);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:l});const d=l.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:d});const g=c.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:g});const p=await this.client.core.crypto.generateSharedKey(d,g);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",sessionTopic:p});const v=await this.client.core.relayer.subscribe(p);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:v}),await this.client.core.pairing.activate({topic:t})}else Br(s)&&(await this.client.proposal.delete(o,Rt("USER_DISCONNECTED")),this.events.emit(qt("session_connect"),{error:s.error}))},this.onSessionSettleRequest=async(t,s)=>{const{id:o,params:c}=s;try{this.isValidSessionSettleRequest(c);const{relay:l,controller:d,expiry:g,namespaces:p,requiredNamespaces:v,optionalNamespaces:b,sessionProperties:S,pairingTopic:O}=s.params,I=Lr({topic:t,relay:l,expiry:g,namespaces:p,acknowledged:!0,pairingTopic:O,requiredNamespaces:v,optionalNamespaces:b,controller:d.publicKey,self:{publicKey:"",metadata:this.client.metadata},peer:{publicKey:d.publicKey,metadata:d.metadata}},S&&{sessionProperties:S});await this.sendResult(s.id,t,!0),this.events.emit(qt("session_connect"),{session:I}),this.cleanupDuplicatePairings(I)}catch(l){await this.sendError(o,t,l),this.client.logger.error(l)}},this.onSessionSettleResponse=async(t,s)=>{const{id:o}=s;wi(s)?(await this.client.session.update(t,{acknowledged:!0}),this.events.emit(qt("session_approve",o),{})):Br(s)&&(await this.client.session.delete(t,Rt("USER_DISCONNECTED")),this.events.emit(qt("session_approve",o),{error:s.error}))},this.onSessionUpdateRequest=async(t,s)=>{const{params:o,id:c}=s;try{this.isValidUpdate(Lr({topic:t},o)),await this.client.session.update(t,{namespaces:o.namespaces}),await this.sendResult(c,t,!0),this.client.events.emit("session_update",{id:c,topic:t,params:o})}catch(l){await this.sendError(c,t,l),this.client.logger.error(l)}},this.onSessionUpdateResponse=(t,s)=>{const{id:o}=s;wi(s)?this.events.emit(qt("session_update",o),{}):Br(s)&&this.events.emit(qt("session_update",o),{error:s.error})},this.onSessionExtendRequest=async(t,s)=>{const{id:o}=s;try{this.isValidExtend({topic:t}),await this.setExpiry(t,Gr(Bo)),await this.sendResult(o,t,!0),this.client.events.emit("session_extend",{id:o,topic:t})}catch(c){await this.sendError(o,t,c),this.client.logger.error(c)}},this.onSessionExtendResponse=(t,s)=>{const{id:o}=s;wi(s)?this.events.emit(qt("session_extend",o),{}):Br(s)&&this.events.emit(qt("session_extend",o),{error:s.error})},this.onSessionPingRequest=async(t,s)=>{const{id:o}=s;try{this.isValidPing({topic:t}),await this.sendResult(o,t,!0),this.client.events.emit("session_ping",{id:o,topic:t})}catch(c){await this.sendError(o,t,c),this.client.logger.error(c)}},this.onSessionPingResponse=(t,s)=>{const{id:o}=s;setTimeout(()=>{wi(s)?this.events.emit(qt("session_ping",o),{}):Br(s)&&this.events.emit(qt("session_ping",o),{error:s.error})},500)},this.onSessionDeleteRequest=async(t,s)=>{const{id:o}=s;try{this.isValidDisconnect({topic:t,reason:s.params}),await Promise.all([new Promise(c=>{this.client.core.relayer.once(Pt.publish,async()=>{c(await this.deleteSession(t))})}),this.sendResult(o,t,!0)]),this.client.events.emit("session_delete",{id:o,topic:t})}catch(c){this.client.logger.error(c)}},this.onSessionRequest=async(t,s)=>{const{id:o,params:c}=s;try{this.isValidRequest(Lr({topic:t},c)),await this.setPendingSessionRequest({id:o,topic:t,params:c});const l=Fn(JSON.stringify(s)),d=this.client.session.get(t),g=await this.getVerifyContext(l,d.peer.metadata);this.client.events.emit("session_request",{id:o,topic:t,params:c,verifyContext:g})}catch(l){await this.sendError(o,t,l),this.client.logger.error(l)}},this.onSessionRequestResponse=(t,s)=>{const{id:o}=s;wi(s)?this.events.emit(qt("session_request",o),{result:s.result}):Br(s)&&this.events.emit(qt("session_request",o),{error:s.error})},this.onSessionEventRequest=async(t,s)=>{const{id:o,params:c}=s;try{this.isValidEmit(Lr({topic:t},c)),this.client.events.emit("session_event",{id:o,topic:t,params:c})}catch(l){await this.sendError(o,t,l),this.client.logger.error(l)}},this.isValidConnect=async t=>{if(!vr(t)){const{message:g}=ce("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(t)}`);throw new Error(g)}const{pairingTopic:s,requiredNamespaces:o,optionalNamespaces:c,sessionProperties:l,relays:d}=t;if(ar(s)||await this.isValidPairingTopic(s),!G3(d,!0)){const{message:g}=ce("MISSING_OR_INVALID",`connect() relays: ${d}`);throw new Error(g)}!ar(o)&&Un(o)!==0&&this.validateNamespaces(o,"requiredNamespaces"),!ar(c)&&Un(c)!==0&&this.validateNamespaces(c,"optionalNamespaces"),ar(l)||this.validateSessionProps(l,"sessionProperties")},this.validateNamespaces=(t,s)=>{const o=W3(t,"connect()",s);if(o)throw new Error(o.message)},this.isValidApprove=async t=>{if(!vr(t))throw new Error(ce("MISSING_OR_INVALID",`approve() params: ${t}`).message);const{id:s,namespaces:o,relayProtocol:c,sessionProperties:l}=t;await this.isValidProposalId(s);const d=this.client.proposal.get(s),g=ko(o,"approve()");if(g)throw new Error(g.message);const p=qf(d.requiredNamespaces,o,"approve()");if(p)throw new Error(p.message);if(!Gt(c,!0)){const{message:v}=ce("MISSING_OR_INVALID",`approve() relayProtocol: ${c}`);throw new Error(v)}ar(l)||this.validateSessionProps(l,"sessionProperties")},this.isValidReject=async t=>{if(!vr(t)){const{message:c}=ce("MISSING_OR_INVALID",`reject() params: ${t}`);throw new Error(c)}const{id:s,reason:o}=t;if(await this.isValidProposalId(s),!J3(o)){const{message:c}=ce("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(o)}`);throw new Error(c)}},this.isValidSessionSettleRequest=t=>{if(!vr(t)){const{message:p}=ce("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${t}`);throw new Error(p)}const{relay:s,controller:o,namespaces:c,expiry:l}=t;if(!Fp(s)){const{message:p}=ce("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(p)}const d=z3(o,"onSessionSettleRequest()");if(d)throw new Error(d.message);const g=ko(c,"onSessionSettleRequest()");if(g)throw new Error(g.message);if(Ri(l)){const{message:p}=ce("EXPIRED","onSessionSettleRequest()");throw new Error(p)}},this.isValidUpdate=async t=>{if(!vr(t)){const{message:g}=ce("MISSING_OR_INVALID",`update() params: ${t}`);throw new Error(g)}const{topic:s,namespaces:o}=t;await this.isValidSessionTopic(s);const c=this.client.session.get(s),l=ko(o,"update()");if(l)throw new Error(l.message);const d=qf(c.requiredNamespaces,o,"update()");if(d)throw new Error(d.message)},this.isValidExtend=async t=>{if(!vr(t)){const{message:o}=ce("MISSING_OR_INVALID",`extend() params: ${t}`);throw new Error(o)}const{topic:s}=t;await this.isValidSessionTopic(s)},this.isValidRequest=async t=>{if(!vr(t)){const{message:g}=ce("MISSING_OR_INVALID",`request() params: ${t}`);throw new Error(g)}const{topic:s,request:o,chainId:c,expiry:l}=t;await this.isValidSessionTopic(s);const{namespaces:d}=this.client.session.get(s);if(!zf(d,c)){const{message:g}=ce("MISSING_OR_INVALID",`request() chainId: ${c}`);throw new Error(g)}if(!X3(o)){const{message:g}=ce("MISSING_OR_INVALID",`request() ${JSON.stringify(o)}`);throw new Error(g)}if(!e6(d,c,o.method)){const{message:g}=ce("MISSING_OR_INVALID",`request() method: ${o.method}`);throw new Error(g)}if(l&&!n6(l,ou)){const{message:g}=ce("MISSING_OR_INVALID",`request() expiry: ${l}. Expiry must be a number (in seconds) between ${ou.min} and ${ou.max}`);throw new Error(g)}},this.isValidRespond=async t=>{if(!vr(t)){const{message:c}=ce("MISSING_OR_INVALID",`respond() params: ${t}`);throw new Error(c)}const{topic:s,response:o}=t;if(await this.isValidSessionTopic(s),!Z3(o)){const{message:c}=ce("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(o)}`);throw new Error(c)}},this.isValidPing=async t=>{if(!vr(t)){const{message:o}=ce("MISSING_OR_INVALID",`ping() params: ${t}`);throw new Error(o)}const{topic:s}=t;await this.isValidSessionOrPairingTopic(s)},this.isValidEmit=async t=>{if(!vr(t)){const{message:d}=ce("MISSING_OR_INVALID",`emit() params: ${t}`);throw new Error(d)}const{topic:s,event:o,chainId:c}=t;await this.isValidSessionTopic(s);const{namespaces:l}=this.client.session.get(s);if(!zf(l,c)){const{message:d}=ce("MISSING_OR_INVALID",`emit() chainId: ${c}`);throw new Error(d)}if(!Q3(o)){const{message:d}=ce("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(o)}`);throw new Error(d)}if(!t6(l,c,o.name)){const{message:d}=ce("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(o)}`);throw new Error(d)}},this.isValidDisconnect=async t=>{if(!vr(t)){const{message:o}=ce("MISSING_OR_INVALID",`disconnect() params: ${t}`);throw new Error(o)}const{topic:s}=t;await this.isValidSessionOrPairingTopic(s)},this.getVerifyContext=async(t,s)=>{const o={verified:{verifyUrl:s.verifyUrl||"",validation:"UNKNOWN",origin:s.url||""}};try{const c=await this.client.core.verify.resolve({attestationId:t,verifyUrl:s.verifyUrl});c&&(o.verified.origin=c,o.verified.validation=c===s.url?"VALID":"INVALID")}catch(c){this.client.logger.error(c)}return this.client.logger.info(`Verify context: ${JSON.stringify(o)}`),o},this.validateSessionProps=(t,s)=>{Object.values(t).forEach(o=>{if(!Gt(o,!1)){const{message:c}=ce("MISSING_OR_INVALID",`${s} must be in Record<string, string> format. Received: ${JSON.stringify(o)}`);throw new Error(c)}})}}isInitialized(){if(!this.initialized){const{message:e}=ce("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.client.core.relayer.on(Pt.message,async e=>{const{topic:t,message:s}=e;if(this.ignoredPayloadTypes.includes(this.client.core.crypto.getPayloadType(s)))return;const o=await this.client.core.crypto.decode(t,s);nh(o)?(this.client.core.history.set(t,o),this.onRelayEventRequest({topic:t,payload:o})):Cs(o)?(await this.client.core.history.resolve(o),await this.onRelayEventResponse({topic:t,payload:o}),this.client.core.history.delete(t,o.id)):this.onRelayEventUnknownPayload({topic:t,payload:o})})}registerExpirerEvents(){this.client.core.expirer.on(Mr.expired,async e=>{const{topic:t,id:s}=Rp(e.target);if(s&&this.client.pendingRequest.keys.includes(s))return await this.deletePendingSessionRequest(s,ce("EXPIRED"),!0);t?this.client.session.keys.includes(t)&&(await this.deleteSession(t,!0),this.client.events.emit("session_expire",{topic:t})):s&&(await this.deleteProposal(s,!0),this.client.events.emit("proposal_expire",{id:s}))})}isValidPairingTopic(e){if(!Gt(e,!1)){const{message:t}=ce("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(t)}if(!this.client.core.pairing.pairings.keys.includes(e)){const{message:t}=ce("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(t)}if(Ri(this.client.core.pairing.pairings.get(e).expiry)){const{message:t}=ce("EXPIRED",`pairing topic: ${e}`);throw new Error(t)}}async isValidSessionTopic(e){if(!Gt(e,!1)){const{message:t}=ce("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw new Error(t)}if(!this.client.session.keys.includes(e)){const{message:t}=ce("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw new Error(t)}if(Ri(this.client.session.get(e).expiry)){await this.deleteSession(e);const{message:t}=ce("EXPIRED",`session topic: ${e}`);throw new Error(t)}}async isValidSessionOrPairingTopic(e){if(this.client.session.keys.includes(e))await this.isValidSessionTopic(e);else if(this.client.core.pairing.pairings.keys.includes(e))this.isValidPairingTopic(e);else if(Gt(e,!1)){const{message:t}=ce("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw new Error(t)}else{const{message:t}=ce("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw new Error(t)}}async isValidProposalId(e){if(!Y3(e)){const{message:t}=ce("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw new Error(t)}if(!this.client.proposal.keys.includes(e)){const{message:t}=ce("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw new Error(t)}if(Ri(this.client.proposal.get(e).expiry)){await this.deleteProposal(e);const{message:t}=ce("EXPIRED",`proposal id: ${e}`);throw new Error(t)}}}class TI extends ba{constructor(e,t){super(e,t,bI,ah),this.core=e,this.logger=t}}class NI extends ba{constructor(e,t){super(e,t,wI,ah),this.core=e,this.logger=t}}class RI extends ba{constructor(e,t){super(e,t,DI,ah,s=>s.id),this.core=e,this.logger=t}}let $I=class bg extends q2{constructor(e){super(e),this.protocol=yg,this.version=vg,this.name=su.name,this.events=new mr.EventEmitter,this.on=(s,o)=>this.events.on(s,o),this.once=(s,o)=>this.events.once(s,o),this.off=(s,o)=>this.events.off(s,o),this.removeListener=(s,o)=>this.events.removeListener(s,o),this.removeAllListeners=s=>this.events.removeAllListeners(s),this.connect=async s=>{try{return await this.engine.connect(s)}catch(o){throw this.logger.error(o.message),o}},this.pair=async s=>{try{return await this.engine.pair(s)}catch(o){throw this.logger.error(o.message),o}},this.approve=async s=>{try{return await this.engine.approve(s)}catch(o){throw this.logger.error(o.message),o}},this.reject=async s=>{try{return await this.engine.reject(s)}catch(o){throw this.logger.error(o.message),o}},this.update=async s=>{try{return await this.engine.update(s)}catch(o){throw this.logger.error(o.message),o}},this.extend=async s=>{try{return await this.engine.extend(s)}catch(o){throw this.logger.error(o.message),o}},this.request=async s=>{try{return await this.engine.request(s)}catch(o){throw this.logger.error(o.message),o}},this.respond=async s=>{try{return await this.engine.respond(s)}catch(o){throw this.logger.error(o.message),o}},this.ping=async s=>{try{return await this.engine.ping(s)}catch(o){throw this.logger.error(o.message),o}},this.emit=async s=>{try{return await this.engine.emit(s)}catch(o){throw this.logger.error(o.message),o}},this.disconnect=async s=>{try{return await this.engine.disconnect(s)}catch(o){throw this.logger.error(o.message),o}},this.find=s=>{try{return this.engine.find(s)}catch(o){throw this.logger.error(o.message),o}},this.getPendingSessionRequests=()=>{try{return this.engine.getPendingSessionRequests()}catch(s){throw this.logger.error(s.message),s}},this.name=(e==null?void 0:e.name)||su.name,this.metadata=(e==null?void 0:e.metadata)||f3();const t=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:ga(ya({level:(e==null?void 0:e.logger)||su.logger}));this.core=(e==null?void 0:e.core)||new _I(e),this.logger=Pr(t,this.name),this.session=new NI(this.core,this.logger),this.proposal=new TI(this.core,this.logger),this.pendingRequest=new RI(this.core,this.logger),this.engine=new CI(this)}static async init(e){const t=new bg(e);return await t.initialize(),t}get context(){return br(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.engine.init(),this.core.verify.init({verifyUrl:this.metadata.verifyUrl}),this.logger.info("SignClient Initialization Success")}catch(e){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(e.message),e}}};var Fu={exports:{}};(function(i,e){var t=typeof self<"u"?self:Yr,s=function(){function c(){this.fetch=!1,this.DOMException=t.DOMException}return c.prototype=t,new c}();(function(c){(function(l){var d={searchParams:"URLSearchParams"in c,iterable:"Symbol"in c&&"iterator"in Symbol,blob:"FileReader"in c&&"Blob"in c&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in c,arrayBuffer:"ArrayBuffer"in c};function g(D){return D&&DataView.prototype.isPrototypeOf(D)}if(d.arrayBuffer)var p=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],v=ArrayBuffer.isView||function(D){return D&&p.indexOf(Object.prototype.toString.call(D))>-1};function b(D){if(typeof D!="string"&&(D=String(D)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(D))throw new TypeError("Invalid character in header field name");return D.toLowerCase()}function S(D){return typeof D!="string"&&(D=String(D)),D}function O(D){var N={next:function(){var Z=D.shift();return{done:Z===void 0,value:Z}}};return d.iterable&&(N[Symbol.iterator]=function(){return N}),N}function I(D){this.map={},D instanceof I?D.forEach(function(N,Z){this.append(Z,N)},this):Array.isArray(D)?D.forEach(function(N){this.append(N[0],N[1])},this):D&&Object.getOwnPropertyNames(D).forEach(function(N){this.append(N,D[N])},this)}I.prototype.append=function(D,N){D=b(D),N=S(N);var Z=this.map[D];this.map[D]=Z?Z+", "+N:N},I.prototype.delete=function(D){delete this.map[b(D)]},I.prototype.get=function(D){return D=b(D),this.has(D)?this.map[D]:null},I.prototype.has=function(D){return this.map.hasOwnProperty(b(D))},I.prototype.set=function(D,N){this.map[b(D)]=S(N)},I.prototype.forEach=function(D,N){for(var Z in this.map)this.map.hasOwnProperty(Z)&&D.call(N,this.map[Z],Z,this)},I.prototype.keys=function(){var D=[];return this.forEach(function(N,Z){D.push(Z)}),O(D)},I.prototype.values=function(){var D=[];return this.forEach(function(N){D.push(N)}),O(D)},I.prototype.entries=function(){var D=[];return this.forEach(function(N,Z){D.push([Z,N])}),O(D)},d.iterable&&(I.prototype[Symbol.iterator]=I.prototype.entries);function K(D){if(D.bodyUsed)return Promise.reject(new TypeError("Already read"));D.bodyUsed=!0}function H(D){return new Promise(function(N,Z){D.onload=function(){N(D.result)},D.onerror=function(){Z(D.error)}})}function re(D){var N=new FileReader,Z=H(N);return N.readAsArrayBuffer(D),Z}function $(D){var N=new FileReader,Z=H(N);return N.readAsText(D),Z}function U(D){for(var N=new Uint8Array(D),Z=new Array(N.length),J=0;J<N.length;J++)Z[J]=String.fromCharCode(N[J]);return Z.join("")}function x(D){if(D.slice)return D.slice(0);var N=new Uint8Array(D.byteLength);return N.set(new Uint8Array(D)),N.buffer}function C(){return this.bodyUsed=!1,this._initBody=function(D){this._bodyInit=D,D?typeof D=="string"?this._bodyText=D:d.blob&&Blob.prototype.isPrototypeOf(D)?this._bodyBlob=D:d.formData&&FormData.prototype.isPrototypeOf(D)?this._bodyFormData=D:d.searchParams&&URLSearchParams.prototype.isPrototypeOf(D)?this._bodyText=D.toString():d.arrayBuffer&&d.blob&&g(D)?(this._bodyArrayBuffer=x(D.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):d.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(D)||v(D))?this._bodyArrayBuffer=x(D):this._bodyText=D=Object.prototype.toString.call(D):this._bodyText="",this.headers.get("content-type")||(typeof D=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):d.searchParams&&URLSearchParams.prototype.isPrototypeOf(D)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},d.blob&&(this.blob=function(){var D=K(this);if(D)return D;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?K(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(re)}),this.text=function(){var D=K(this);if(D)return D;if(this._bodyBlob)return $(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(U(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},d.formData&&(this.formData=function(){return this.text().then(Q)}),this.json=function(){return this.text().then(JSON.parse)},this}var T=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function h(D){var N=D.toUpperCase();return T.indexOf(N)>-1?N:D}function w(D,N){N=N||{};var Z=N.body;if(D instanceof w){if(D.bodyUsed)throw new TypeError("Already read");this.url=D.url,this.credentials=D.credentials,N.headers||(this.headers=new I(D.headers)),this.method=D.method,this.mode=D.mode,this.signal=D.signal,!Z&&D._bodyInit!=null&&(Z=D._bodyInit,D.bodyUsed=!0)}else this.url=String(D);if(this.credentials=N.credentials||this.credentials||"same-origin",(N.headers||!this.headers)&&(this.headers=new I(N.headers)),this.method=h(N.method||this.method||"GET"),this.mode=N.mode||this.mode||null,this.signal=N.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&Z)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(Z)}w.prototype.clone=function(){return new w(this,{body:this._bodyInit})};function Q(D){var N=new FormData;return D.trim().split("&").forEach(function(Z){if(Z){var J=Z.split("="),V=J.shift().replace(/\+/g," "),k=J.join("=").replace(/\+/g," ");N.append(decodeURIComponent(V),decodeURIComponent(k))}}),N}function ne(D){var N=new I,Z=D.replace(/\r?\n[\t ]+/g," ");return Z.split(/\r?\n/).forEach(function(J){var V=J.split(":"),k=V.shift().trim();if(k){var ee=V.join(":").trim();N.append(k,ee)}}),N}C.call(w.prototype);function ue(D,N){N||(N={}),this.type="default",this.status=N.status===void 0?200:N.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in N?N.statusText:"OK",this.headers=new I(N.headers),this.url=N.url||"",this._initBody(D)}C.call(ue.prototype),ue.prototype.clone=function(){return new ue(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new I(this.headers),url:this.url})},ue.error=function(){var D=new ue(null,{status:0,statusText:""});return D.type="error",D};var ge=[301,302,303,307,308];ue.redirect=function(D,N){if(ge.indexOf(N)===-1)throw new RangeError("Invalid status code");return new ue(null,{status:N,headers:{location:D}})},l.DOMException=c.DOMException;try{new l.DOMException}catch{l.DOMException=function(N,Z){this.message=N,this.name=Z;var J=Error(N);this.stack=J.stack},l.DOMException.prototype=Object.create(Error.prototype),l.DOMException.prototype.constructor=l.DOMException}function ye(D,N){return new Promise(function(Z,J){var V=new w(D,N);if(V.signal&&V.signal.aborted)return J(new l.DOMException("Aborted","AbortError"));var k=new XMLHttpRequest;function ee(){k.abort()}k.onload=function(){var ie={status:k.status,statusText:k.statusText,headers:ne(k.getAllResponseHeaders()||"")};ie.url="responseURL"in k?k.responseURL:ie.headers.get("X-Request-URL");var De="response"in k?k.response:k.responseText;Z(new ue(De,ie))},k.onerror=function(){J(new TypeError("Network request failed"))},k.ontimeout=function(){J(new TypeError("Network request failed"))},k.onabort=function(){J(new l.DOMException("Aborted","AbortError"))},k.open(V.method,V.url,!0),V.credentials==="include"?k.withCredentials=!0:V.credentials==="omit"&&(k.withCredentials=!1),"responseType"in k&&d.blob&&(k.responseType="blob"),V.headers.forEach(function(ie,De){k.setRequestHeader(De,ie)}),V.signal&&(V.signal.addEventListener("abort",ee),k.onreadystatechange=function(){k.readyState===4&&V.signal.removeEventListener("abort",ee)}),k.send(typeof V._bodyInit>"u"?null:V._bodyInit)})}return ye.polyfill=!0,c.fetch||(c.fetch=ye,c.Headers=I,c.Request=w,c.Response=ue),l.Headers=I,l.Request=w,l.Response=ue,l.fetch=ye,Object.defineProperty(l,"__esModule",{value:!0}),l})({})})(s),s.fetch.ponyfill=!0,delete s.fetch.polyfill;var o=s;e=o.fetch,e.default=o.fetch,e.fetch=o.fetch,e.Headers=o.Headers,e.Request=o.Request,e.Response=o.Response,i.exports=e})(Fu,Fu.exports);var FI=Fu.exports;const Nd=ia(FI);var UI=Object.defineProperty,jI=Object.defineProperties,LI=Object.getOwnPropertyDescriptors,Rd=Object.getOwnPropertySymbols,MI=Object.prototype.hasOwnProperty,BI=Object.prototype.propertyIsEnumerable,$d=(i,e,t)=>e in i?UI(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,Fd=(i,e)=>{for(var t in e||(e={}))MI.call(e,t)&&$d(i,t,e[t]);if(Rd)for(var t of Rd(e))BI.call(e,t)&&$d(i,t,e[t]);return i},Ud=(i,e)=>jI(i,LI(e));const zI={Accept:"application/json","Content-Type":"application/json"},qI="POST",jd={headers:zI,method:qI},Ld=10;let cn=class{constructor(e,t=!1){if(this.url=e,this.disableProviderPing=t,this.events=new mr.EventEmitter,this.isAvailable=!1,this.registering=!1,!ad(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);this.url=e,this.disableProviderPing=t}get connected(){return this.isAvailable}get connecting(){return this.registering}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async open(e=this.url){await this.register(e)}async close(){if(!this.isAvailable)throw new Error("Connection already closed");this.onClose()}async send(e){this.isAvailable||await this.register();try{const t=rn(e),s=await(await Nd(this.url,Ud(Fd({},jd),{body:t}))).json();this.onPayload({data:s})}catch(t){this.onError(e.id,t)}}async register(e=this.url){if(!ad(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);if(this.registering){const t=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=t||this.events.listenerCount("open")>=t)&&this.events.setMaxListeners(t+1),new Promise((s,o)=>{this.events.once("register_error",c=>{this.resetMaxListeners(),o(c)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.isAvailable>"u")return o(new Error("HTTP connection is missing or invalid"));s()})})}this.url=e,this.registering=!0;try{if(!this.disableProviderPing){const t=rn({id:1,jsonrpc:"2.0",method:"test",params:[]});await Nd(e,Ud(Fd({},jd),{body:t}))}this.onOpen()}catch(t){const s=this.parseError(t);throw this.events.emit("register_error",s),this.onClose(),s}}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(e){if(typeof e.data>"u")return;const t=typeof e.data=="string"?Os(e.data):e.data;this.events.emit("payload",t)}onError(e,t){const s=this.parseError(t),o=s.message||s.toString(),c=_a(e,o);this.events.emit("payload",c)}parseError(e,t=this.url){return Yp(e,t,"HTTP")}resetMaxListeners(){this.events.getMaxListeners()>Ld&&this.events.setMaxListeners(Ld)}};class un extends Qp{constructor(e){super(e),this.events=new mr.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}async connect(e=this.connection){await this.open(e)}async disconnect(){await this.close()}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async request(e,t){return this.requestStrict(As(e.method,e.params||[],e.id||va().toString()),t)}async requestStrict(e,t){return new Promise(async(s,o)=>{if(!this.connection.connected)try{await this.open()}catch(c){o(c)}this.events.on(`${e.id}`,c=>{Br(c)?o(c.error):s(c.result)});try{await this.connection.send(e,t)}catch(c){o(c)}})}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),Cs(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&e.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}async open(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),typeof e=="string"&&(await this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",e=>this.onPayload(e)),this.connection.on("close",e=>this.onClose(e)),this.connection.on("error",e=>this.events.emit("error",e)),this.connection.on("register_error",e=>this.onClose()),this.hasRegisteredEventListeners=!0)}}const Md="error",HI="wss://relay.walletconnect.com",KI="wc",VI="universal_provider",Bd=`${KI}@2:${VI}:`,kI="https://rpc.walletconnect.com/v1",ji={DEFAULT_CHAIN_CHANGED:"default_chain_changed"};var ps=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Uu={exports:{}};/**
* @license
* Lodash <https://lodash.com/>
* Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
* Released under MIT license <https://lodash.com/license>
* Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
* Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
*/(function(i,e){(function(){var t,s="4.17.21",o=200,c="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",l="Expected a function",d="Invalid `variable` option passed into `_.template`",g="__lodash_hash_undefined__",p=500,v="__lodash_placeholder__",b=1,S=2,O=4,I=1,K=2,H=1,re=2,$=4,U=8,x=16,C=32,T=64,h=128,w=256,Q=512,ne=30,ue="...",ge=800,ye=16,D=1,N=2,Z=3,J=1/0,V=9007199254740991,k=17976931348623157e292,ee=0/0,ie=4294967295,De=ie-1,oe=ie>>>1,Se=[["ary",h],["bind",H],["bindKey",re],["curry",U],["curryRight",x],["flip",Q],["partial",C],["partialRight",T],["rearg",w]],le="[object Arguments]",Ce="[object Array]",z="[object AsyncFunction]",B="[object Boolean]",F="[object Date]",f="[object DOMException]",A="[object Error]",se="[object Function]",he="[object GeneratorFunction]",Ee="[object Map]",qe="[object Number]",Ve="[object Null]",je="[object Object]",pt="[object Promise]",gt="[object Proxy]",Me="[object RegExp]",Ie="[object Set]",Re="[object String]",$e="[object Symbol]",Be="[object Undefined]",Oe="[object WeakMap]",Fe="[object WeakSet]",we="[object ArrayBuffer]",Pe="[object DataView]",He="[object Float32Array]",xe="[object Float64Array]",ke="[object Int8Array]",Ge="[object Int16Array]",Qe="[object Int32Array]",et="[object Uint8Array]",Je="[object Uint8ClampedArray]",tr="[object Uint16Array]",hr="[object Uint32Array]",Jr=/\b__p \+= '';/g,rr=/\b(__p \+=) '' \+/g,ai=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Ei=/&(?:amp|lt|gt|quot|#39);/g,Li=/[&<>"']/g,wt=RegExp(Ei.source),yt=RegExp(Li.source),Et=/<%-([\s\S]+?)%>/g,Dt=/<%([\s\S]+?)%>/g,mt=/<%=([\s\S]+?)%>/g,vt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ft=/^\w*$/,Ut=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,St=/[\\^$.*+?()[\]{}|]/g,jt=RegExp(St.source),It=/^\s+/,At=/\s/,xt=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ht=/\{\n\/\* \[wrapped with (.+)\] \*/,Lt=/,? & /,Mt=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,wa=/[()=,{}\[\]\/\s]/,Ea=/\\(\\)?/g,Da=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Ar=/\w*$/,Sa=/^[-+]0x[0-9a-f]+$/i,Ia=/^0b[01]+$/i,xa=/^\[object .+?Constructor\]$/,Oa=/^0o[0-7]+$/i,Pa=/^(?:0|[1-9]\d*)$/,ci=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,hn=/($^)/,Aa=/['\n\r\u2028\u2029\\]/g,ln="\\ud800-\\udfff",Ca="\\u0300-\\u036f",Ta="\\ufe20-\\ufe2f",fn="\\u20d0-\\u20ff",Ns=Ca+Ta+fn,Rs="\\u2700-\\u27bf",qr="a-z\\xdf-\\xf6\\xf8-\\xff",Na="\\xac\\xb1\\xd7\\xf7",Ra="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",$a="\\u2000-\\u206f",Fa=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",$s="A-Z\\xc0-\\xd6\\xd8-\\xde",Fs="\\ufe0e\\ufe0f",Mi=Na+Ra+$a+Fa,zn="['’]",Bi="["+ln+"]",qn="["+Mi+"]",zi="["+Ns+"]",Us="\\d+",Ua="["+Rs+"]",js="["+qr+"]",Ls="[^"+ln+Mi+Us+Rs+qr+$s+"]",dn="\\ud83c[\\udffb-\\udfff]",ja="(?:"+zi+"|"+dn+")",Ms="[^"+ln+"]",pn="(?:\\ud83c[\\udde6-\\uddff]){2}",Di="[\\ud800-\\udbff][\\udc00-\\udfff]",wr="["+$s+"]",Bs="\\u200d",zs="(?:"+js+"|"+Ls+")",Xr="(?:"+wr+"|"+Ls+")",qs="(?:"+zn+"(?:d|ll|m|re|s|t|ve))?",Hs="(?:"+zn+"(?:D|LL|M|RE|S|T|VE))?",Ks=ja+"?",Vs="["+Fs+"]?",La="(?:"+Bs+"(?:"+[Ms,pn,Di].join("|")+")"+Vs+Ks+")*",ui="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",ks="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Ws=Vs+Ks+La,gn="(?:"+[Ua,pn,Di].join("|")+")"+Ws,Ma="(?:"+[Ms+zi+"?",zi,pn,Di,Bi].join("|")+")",Hn=RegExp(zn,"g"),Ba=RegExp(zi,"g"),yn=RegExp(dn+"(?="+dn+")|"+Ma+Ws,"g"),Gs=RegExp([wr+"?"+js+"+"+qs+"(?="+[qn,wr,"$"].join("|")+")",Xr+"+"+Hs+"(?="+[qn,wr+zs,"$"].join("|")+")",wr+"?"+zs+"+"+qs,wr+"+"+Hs,ks,ui,Us,gn].join("|"),"g"),Ys=RegExp("["+Bs+ln+Ns+Fs+"]"),qi=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Js=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],za=-1,ot={};ot[He]=ot[xe]=ot[ke]=ot[Ge]=ot[Qe]=ot[et]=ot[Je]=ot[tr]=ot[hr]=!0,ot[le]=ot[Ce]=ot[we]=ot[B]=ot[Pe]=ot[F]=ot[A]=ot[se]=ot[Ee]=ot[qe]=ot[je]=ot[Me]=ot[Ie]=ot[Re]=ot[Oe]=!1;var nt={};nt[le]=nt[Ce]=nt[we]=nt[Pe]=nt[B]=nt[F]=nt[He]=nt[xe]=nt[ke]=nt[Ge]=nt[Qe]=nt[Ee]=nt[qe]=nt[je]=nt[Me]=nt[Ie]=nt[Re]=nt[$e]=nt[et]=nt[Je]=nt[tr]=nt[hr]=!0,nt[A]=nt[se]=nt[Oe]=!1;var E={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},j={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},X={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},fe={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},at=parseFloat,Te=parseInt,ft=typeof ps=="object"&&ps&&ps.Object===Object&&ps,Bt=typeof self=="object"&&self&&self.Object===Object&&self,Xe=ft||Bt||Function("return this")(),ct=e&&!e.nodeType&&e,Ct=ct&&!0&&i&&!i.nodeType&&i,lr=Ct&&Ct.exports===ct,zt=lr&&ft.process,dt=function(){try{var L=Ct&&Ct.require&&Ct.require("util").types;return L||zt&&zt.binding&&zt.binding("util")}catch{}}(),ir=dt&&dt.isArrayBuffer,Hr=dt&&dt.isDate,Cr=dt&&dt.isMap,Zr=dt&&dt.isRegExp,Kn=dt&&dt.isSet,Hi=dt&&dt.isTypedArray;function Vt(L,W,q){switch(q.length){case 0:return L.call(W);case 1:return L.call(W,q[0]);case 2:return L.call(W,q[0],q[1]);case 3:return L.call(W,q[0],q[1],q[2])}return L.apply(W,q)}function Dg(L,W,q,de){for(var Ae=-1,tt=L==null?0:L.length;++Ae<tt;){var Ht=L[Ae];W(de,Ht,q(Ht),L)}return de}function Tr(L,W){for(var q=-1,de=L==null?0:L.length;++q<de&&W(L[q],q,L)!==!1;);return L}function Sg(L,W){for(var q=L==null?0:L.length;q--&&W(L[q],q,L)!==!1;);return L}function hh(L,W){for(var q=-1,de=L==null?0:L.length;++q<de;)if(!W(L[q],q,L))return!1;return!0}function Si(L,W){for(var q=-1,de=L==null?0:L.length,Ae=0,tt=[];++q<de;){var Ht=L[q];W(Ht,q,L)&&(tt[Ae++]=Ht)}return tt}function Xs(L,W){var q=L==null?0:L.length;return!!q&&vn(L,W,0)>-1}function qa(L,W,q){for(var de=-1,Ae=L==null?0:L.length;++de<Ae;)if(q(W,L[de]))return!0;return!1}function _t(L,W){for(var q=-1,de=L==null?0:L.length,Ae=Array(de);++q<de;)Ae[q]=W(L[q],q,L);return Ae}function Ii(L,W){for(var q=-1,de=W.length,Ae=L.length;++q<de;)L[Ae+q]=W[q];return L}function Ha(L,W,q,de){var Ae=-1,tt=L==null?0:L.length;for(de&&tt&&(q=L[++Ae]);++Ae<tt;)q=W(q,L[Ae],Ae,L);return q}function Ig(L,W,q,de){var Ae=L==null?0:L.length;for(de&&Ae&&(q=L[--Ae]);Ae--;)q=W(q,L[Ae],Ae,L);return q}function Ka(L,W){for(var q=-1,de=L==null?0:L.length;++q<de;)if(W(L[q],q,L))return!0;return!1}var xg=Va("length");function Og(L){return L.split("")}function Pg(L){return L.match(Mt)||[]}function lh(L,W,q){var de;return q(L,function(Ae,tt,Ht){if(W(Ae,tt,Ht))return de=tt,!1}),de}function Zs(L,W,q,de){for(var Ae=L.length,tt=q+(de?1:-1);de?tt--:++tt<Ae;)if(W(L[tt],tt,L))return tt;return-1}function vn(L,W,q){return W===W?Bg(L,W,q):Zs(L,fh,q)}function Ag(L,W,q,de){for(var Ae=q-1,tt=L.length;++Ae<tt;)if(de(L[Ae],W))return Ae;return-1}function fh(L){return L!==L}function dh(L,W){var q=L==null?0:L.length;return q?Wa(L,W)/q:ee}function Va(L){return function(W){return W==null?t:W[L]}}function ka(L){return function(W){return L==null?t:L[W]}}function ph(L,W,q,de,Ae){return Ae(L,function(tt,Ht,ut){q=de?(de=!1,tt):W(q,tt,Ht,ut)}),q}function Cg(L,W){var q=L.length;for(L.sort(W);q--;)L[q]=L[q].value;return L}function Wa(L,W){for(var q,de=-1,Ae=L.length;++de<Ae;){var tt=W(L[de]);tt!==t&&(q=q===t?tt:q+tt)}return q}function Ga(L,W){for(var q=-1,de=Array(L);++q<L;)de[q]=W(q);return de}function Tg(L,W){return _t(W,function(q){return[q,L[q]]})}function gh(L){return L&&L.slice(0,mh(L)+1).replace(It,"")}function Er(L){return function(W){return L(W)}}function Ya(L,W){return _t(W,function(q){return L[q]})}function Vn(L,W){return L.has(W)}function yh(L,W){for(var q=-1,de=L.length;++q<de&&vn(W,L[q],0)>-1;);return q}function vh(L,W){for(var q=L.length;q--&&vn(W,L[q],0)>-1;);return q}function Ng(L,W){for(var q=L.length,de=0;q--;)L[q]===W&&++de;return de}var Rg=ka(E),$g=ka(j);function Fg(L){return"\\"+fe[L]}function Ug(L,W){return L==null?t:L[W]}function _n(L){return Ys.test(L)}function jg(L){return qi.test(L)}function Lg(L){for(var W,q=[];!(W=L.next()).done;)q.push(W.value);return q}function Ja(L){var W=-1,q=Array(L.size);return L.forEach(function(de,Ae){q[++W]=[Ae,de]}),q}function _h(L,W){return function(q){return L(W(q))}}function xi(L,W){for(var q=-1,de=L.length,Ae=0,tt=[];++q<de;){var Ht=L[q];(Ht===W||Ht===v)&&(L[q]=v,tt[Ae++]=q)}return tt}function Qs(L){var W=-1,q=Array(L.size);return L.forEach(function(de){q[++W]=de}),q}function Mg(L){var W=-1,q=Array(L.size);return L.forEach(function(de){q[++W]=[de,de]}),q}function Bg(L,W,q){for(var de=q-1,Ae=L.length;++de<Ae;)if(L[de]===W)return de;return-1}function zg(L,W,q){for(var de=q+1;de--;)if(L[de]===W)return de;return de}function mn(L){return _n(L)?Hg(L):xg(L)}function Kr(L){return _n(L)?Kg(L):Og(L)}function mh(L){for(var W=L.length;W--&&At.test(L.charAt(W)););return W}var qg=ka(X);function Hg(L){for(var W=yn.lastIndex=0;yn.test(L);)++W;return W}function Kg(L){return L.match(yn)||[]}function Vg(L){return L.match(Gs)||[]}var kg=function L(W){W=W==null?Xe:bn.defaults(Xe.Object(),W,bn.pick(Xe,Js));var q=W.Array,de=W.Date,Ae=W.Error,tt=W.Function,Ht=W.Math,ut=W.Object,Xa=W.RegExp,Wg=W.String,Nr=W.TypeError,eo=q.prototype,Gg=tt.prototype,wn=ut.prototype,to=W["__core-js_shared__"],ro=Gg.toString,it=wn.hasOwnProperty,Yg=0,bh=function(){var r=/[^.]+$/.exec(to&&to.keys&&to.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}(),io=wn.toString,Jg=ro.call(ut),Xg=Xe._,Zg=Xa("^"+ro.call(it).replace(St,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),no=lr?W.Buffer:t,Oi=W.Symbol,so=W.Uint8Array,wh=no?no.allocUnsafe:t,oo=_h(ut.getPrototypeOf,ut),Eh=ut.create,Dh=wn.propertyIsEnumerable,ao=eo.splice,Sh=Oi?Oi.isConcatSpreadable:t,kn=Oi?Oi.iterator:t,Ki=Oi?Oi.toStringTag:t,co=function(){try{var r=Yi(ut,"defineProperty");return r({},"",{}),r}catch{}}(),Qg=W.clearTimeout!==Xe.clearTimeout&&W.clearTimeout,e0=de&&de.now!==Xe.Date.now&&de.now,t0=W.setTimeout!==Xe.setTimeout&&W.setTimeout,uo=Ht.ceil,ho=Ht.floor,Za=ut.getOwnPropertySymbols,r0=no?no.isBuffer:t,Ih=W.isFinite,i0=eo.join,n0=_h(ut.keys,ut),Kt=Ht.max,Zt=Ht.min,s0=de.now,o0=W.parseInt,xh=Ht.random,a0=eo.reverse,Qa=Yi(W,"DataView"),Wn=Yi(W,"Map"),ec=Yi(W,"Promise"),En=Yi(W,"Set"),Gn=Yi(W,"WeakMap"),Yn=Yi(ut,"create"),lo=Gn&&new Gn,Dn={},c0=Ji(Qa),u0=Ji(Wn),h0=Ji(ec),l0=Ji(En),f0=Ji(Gn),fo=Oi?Oi.prototype:t,Jn=fo?fo.valueOf:t,Oh=fo?fo.toString:t;function _(r){if(Ot(r)&&!Ne(r)&&!(r instanceof Ye)){if(r instanceof Rr)return r;if(it.call(r,"__wrapped__"))return Pl(r)}return new Rr(r)}var Sn=function(){function r(){}return function(n){if(!bt(n))return{};if(Eh)return Eh(n);r.prototype=n;var a=new r;return r.prototype=t,a}}();function po(){}function Rr(r,n){this.__wrapped__=r,this.__actions__=[],this.__chain__=!!n,this.__index__=0,this.__values__=t}_.templateSettings={escape:Et,evaluate:Dt,interpolate:mt,variable:"",imports:{_}},_.prototype=po.prototype,_.prototype.constructor=_,Rr.prototype=Sn(po.prototype),Rr.prototype.constructor=Rr;function Ye(r){this.__wrapped__=r,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=ie,this.__views__=[]}function d0(){var r=new Ye(this.__wrapped__);return r.__actions__=fr(this.__actions__),r.__dir__=this.__dir__,r.__filtered__=this.__filtered__,r.__iteratees__=fr(this.__iteratees__),r.__takeCount__=this.__takeCount__,r.__views__=fr(this.__views__),r}function p0(){if(this.__filtered__){var r=new Ye(this);r.__dir__=-1,r.__filtered__=!0}else r=this.clone(),r.__dir__*=-1;return r}function g0(){var r=this.__wrapped__.value(),n=this.__dir__,a=Ne(r),u=n<0,y=a?r.length:0,m=Oy(0,y,this.__views__),P=m.start,R=m.end,M=R-P,G=u?R:P-1,Y=this.__iteratees__,te=Y.length,ae=0,pe=Zt(M,this.__takeCount__);if(!a||!u&&y==M&&pe==M)return Xh(r,this.__actions__);var me=[];e:for(;M--&&ae<pe;){G+=n;for(var ze=-1,be=r[G];++ze<te;){var We=Y[ze],Ze=We.iteratee,Ir=We.type,or=Ze(be);if(Ir==N)be=or;else if(!or){if(Ir==D)continue e;break e}}me[ae++]=be}return me}Ye.prototype=Sn(po.prototype),Ye.prototype.constructor=Ye;function Vi(r){var n=-1,a=r==null?0:r.length;for(this.clear();++n<a;){var u=r[n];this.set(u[0],u[1])}}function y0(){this.__data__=Yn?Yn(null):{},this.size=0}function v0(r){var n=this.has(r)&&delete this.__data__[r];return this.size-=n?1:0,n}function _0(r){var n=this.__data__;if(Yn){var a=n[r];return a===g?t:a}return it.call(n,r)?n[r]:t}function m0(r){var n=this.__data__;return Yn?n[r]!==t:it.call(n,r)}function b0(r,n){var a=this.__data__;return this.size+=this.has(r)?0:1,a[r]=Yn&&n===t?g:n,this}Vi.prototype.clear=y0,Vi.prototype.delete=v0,Vi.prototype.get=_0,Vi.prototype.has=m0,Vi.prototype.set=b0;function hi(r){var n=-1,a=r==null?0:r.length;for(this.clear();++n<a;){var u=r[n];this.set(u[0],u[1])}}function w0(){this.__data__=[],this.size=0}function E0(r){var n=this.__data__,a=go(n,r);if(a<0)return!1;var u=n.length-1;return a==u?n.pop():ao.call(n,a,1),--this.size,!0}function D0(r){var n=this.__data__,a=go(n,r);return a<0?t:n[a][1]}function S0(r){return go(this.__data__,r)>-1}function I0(r,n){var a=this.__data__,u=go(a,r);return u<0?(++this.size,a.push([r,n])):a[u][1]=n,this}hi.prototype.clear=w0,hi.prototype.delete=E0,hi.prototype.get=D0,hi.prototype.has=S0,hi.prototype.set=I0;function li(r){var n=-1,a=r==null?0:r.length;for(this.clear();++n<a;){var u=r[n];this.set(u[0],u[1])}}function x0(){this.size=0,this.__data__={hash:new Vi,map:new(Wn||hi),string:new Vi}}function O0(r){var n=Oo(this,r).delete(r);return this.size-=n?1:0,n}function P0(r){return Oo(this,r).get(r)}function A0(r){return Oo(this,r).has(r)}function C0(r,n){var a=Oo(this,r),u=a.size;return a.set(r,n),this.size+=a.size==u?0:1,this}li.prototype.clear=x0,li.prototype.delete=O0,li.prototype.get=P0,li.prototype.has=A0,li.prototype.set=C0;function ki(r){var n=-1,a=r==null?0:r.length;for(this.__data__=new li;++n<a;)this.add(r[n])}function T0(r){return this.__data__.set(r,g),this}function N0(r){return this.__data__.has(r)}ki.prototype.add=ki.prototype.push=T0,ki.prototype.has=N0;function Vr(r){var n=this.__data__=new hi(r);this.size=n.size}function R0(){this.__data__=new hi,this.size=0}function $0(r){var n=this.__data__,a=n.delete(r);return this.size=n.size,a}function F0(r){return this.__data__.get(r)}function U0(r){return this.__data__.has(r)}function j0(r,n){var a=this.__data__;if(a instanceof hi){var u=a.__data__;if(!Wn||u.length<o-1)return u.push([r,n]),this.size=++a.size,this;a=this.__data__=new li(u)}return a.set(r,n),this.size=a.size,this}Vr.prototype.clear=R0,Vr.prototype.delete=$0,Vr.prototype.get=F0,Vr.prototype.has=U0,Vr.prototype.set=j0;function Ph(r,n){var a=Ne(r),u=!a&&Xi(r),y=!a&&!u&&Ni(r),m=!a&&!u&&!y&&Pn(r),P=a||u||y||m,R=P?Ga(r.length,Wg):[],M=R.length;for(var G in r)(n||it.call(r,G))&&!(P&&(G=="length"||y&&(G=="offset"||G=="parent")||m&&(G=="buffer"||G=="byteLength"||G=="byteOffset")||gi(G,M)))&&R.push(G);return R}function Ah(r){var n=r.length;return n?r[lc(0,n-1)]:t}function L0(r,n){return Po(fr(r),Wi(n,0,r.length))}function M0(r){return Po(fr(r))}function tc(r,n,a){(a!==t&&!kr(r[n],a)||a===t&&!(n in r))&&fi(r,n,a)}function Xn(r,n,a){var u=r[n];(!(it.call(r,n)&&kr(u,a))||a===t&&!(n in r))&&fi(r,n,a)}function go(r,n){for(var a=r.length;a--;)if(kr(r[a][0],n))return a;return-1}function B0(r,n,a,u){return Pi(r,function(y,m,P){n(u,y,a(y),P)}),u}function Ch(r,n){return r&&ei(n,kt(n),r)}function z0(r,n){return r&&ei(n,pr(n),r)}function fi(r,n,a){n=="__proto__"&&co?co(r,n,{configurable:!0,enumerable:!0,value:a,writable:!0}):r[n]=a}function rc(r,n){for(var a=-1,u=n.length,y=q(u),m=r==null;++a<u;)y[a]=m?t:Uc(r,n[a]);return y}function Wi(r,n,a){return r===r&&(a!==t&&(r=r<=a?r:a),n!==t&&(r=r>=n?r:n)),r}function $r(r,n,a,u,y,m){var P,R=n&b,M=n&S,G=n&O;if(a&&(P=y?a(r,u,y,m):a(r)),P!==t)return P;if(!bt(r))return r;var Y=Ne(r);if(Y){if(P=Ay(r),!R)return fr(r,P)}else{var te=Qt(r),ae=te==se||te==he;if(Ni(r))return el(r,R);if(te==je||te==le||ae&&!y){if(P=M||ae?{}:ml(r),!R)return M?_y(r,z0(P,r)):vy(r,Ch(P,r))}else{if(!nt[te])return y?r:{};P=Cy(r,te,R)}}m||(m=new Vr);var pe=m.get(r);if(pe)return pe;m.set(r,P),Gl(r)?r.forEach(function(be){P.add($r(be,n,a,be,r,m))}):kl(r)&&r.forEach(function(be,We){P.set(We,$r(be,n,a,We,r,m))});var me=G?M?Ec:wc:M?pr:kt,ze=Y?t:me(r);return Tr(ze||r,function(be,We){ze&&(We=be,be=r[We]),Xn(P,We,$r(be,n,a,We,r,m))}),P}function q0(r){var n=kt(r);return function(a){return Th(a,r,n)}}function Th(r,n,a){var u=a.length;if(r==null)return!u;for(r=ut(r);u--;){var y=a[u],m=n[y],P=r[y];if(P===t&&!(y in r)||!m(P))return!1}return!0}function Nh(r,n,a){if(typeof r!="function")throw new Nr(l);return ns(function(){r.apply(t,a)},n)}function Zn(r,n,a,u){var y=-1,m=Xs,P=!0,R=r.length,M=[],G=n.length;if(!R)return M;a&&(n=_t(n,Er(a))),u?(m=qa,P=!1):n.length>=o&&(m=Vn,P=!1,n=new ki(n));e:for(;++y<R;){var Y=r[y],te=a==null?Y:a(Y);if(Y=u||Y!==0?Y:0,P&&te===te){for(var ae=G;ae--;)if(n[ae]===te)continue e;M.push(Y)}else m(n,te,u)||M.push(Y)}return M}var Pi=sl(Qr),Rh=sl(nc,!0);function H0(r,n){var a=!0;return Pi(r,function(u,y,m){return a=!!n(u,y,m),a}),a}function yo(r,n,a){for(var u=-1,y=r.length;++u<y;){var m=r[u],P=n(m);if(P!=null&&(R===t?P===P&&!Sr(P):a(P,R)))var R=P,M=m}return M}function K0(r,n,a,u){var y=r.length;for(a=Le(a),a<0&&(a=-a>y?0:y+a),u=u===t||u>y?y:Le(u),u<0&&(u+=y),u=a>u?0:Jl(u);a<u;)r[a++]=n;return r}function $h(r,n){var a=[];return Pi(r,function(u,y,m){n(u,y,m)&&a.push(u)}),a}function Yt(r,n,a,u,y){var m=-1,P=r.length;for(a||(a=Ny),y||(y=[]);++m<P;){var R=r[m];n>0&&a(R)?n>1?Yt(R,n-1,a,u,y):Ii(y,R):u||(y[y.length]=R)}return y}var ic=ol(),Fh=ol(!0);function Qr(r,n){return r&&ic(r,n,kt)}function nc(r,n){return r&&Fh(r,n,kt)}function vo(r,n){return Si(n,function(a){return yi(r[a])})}function Gi(r,n){n=Ci(n,r);for(var a=0,u=n.length;r!=null&&a<u;)r=r[ti(n[a++])];return a&&a==u?r:t}function Uh(r,n,a){var u=n(r);return Ne(r)?u:Ii(u,a(r))}function nr(r){return r==null?r===t?Be:Ve:Ki&&Ki in ut(r)?xy(r):My(r)}function sc(r,n){return r>n}function V0(r,n){return r!=null&&it.call(r,n)}function k0(r,n){return r!=null&&n in ut(r)}function W0(r,n,a){return r>=Zt(n,a)&&r<Kt(n,a)}function oc(r,n,a){for(var u=a?qa:Xs,y=r[0].length,m=r.length,P=m,R=q(m),M=1/0,G=[];P--;){var Y=r[P];P&&n&&(Y=_t(Y,Er(n))),M=Zt(Y.length,M),R[P]=!a&&(n||y>=120&&Y.length>=120)?new ki(P&&Y):t}Y=r[0];var te=-1,ae=R[0];e:for(;++te<y&&G.length<M;){var pe=Y[te],me=n?n(pe):pe;if(pe=a||pe!==0?pe:0,!(ae?Vn(ae,me):u(G,me,a))){for(P=m;--P;){var ze=R[P];if(!(ze?Vn(ze,me):u(r[P],me,a)))continue e}ae&&ae.push(me),G.push(pe)}}return G}function G0(r,n,a,u){return Qr(r,function(y,m,P){n(u,a(y),m,P)}),u}function Qn(r,n,a){n=Ci(n,r),r=Dl(r,n);var u=r==null?r:r[ti(Ur(n))];return u==null?t:Vt(u,r,a)}function jh(r){return Ot(r)&&nr(r)==le}function Y0(r){return Ot(r)&&nr(r)==we}function J0(r){return Ot(r)&&nr(r)==F}function es(r,n,a,u,y){return r===n?!0:r==null||n==null||!Ot(r)&&!Ot(n)?r!==r&&n!==n:X0(r,n,a,u,es,y)}function X0(r,n,a,u,y,m){var P=Ne(r),R=Ne(n),M=P?Ce:Qt(r),G=R?Ce:Qt(n);M=M==le?je:M,G=G==le?je:G;var Y=M==je,te=G==je,ae=M==G;if(ae&&Ni(r)){if(!Ni(n))return!1;P=!0,Y=!1}if(ae&&!Y)return m||(m=new Vr),P||Pn(r)?yl(r,n,a,u,y,m):Sy(r,n,M,a,u,y,m);if(!(a&I)){var pe=Y&&it.call(r,"__wrapped__"),me=te&&it.call(n,"__wrapped__");if(pe||me){var ze=pe?r.value():r,be=me?n.value():n;return m||(m=new Vr),y(ze,be,a,u,m)}}return ae?(m||(m=new Vr),Iy(r,n,a,u,y,m)):!1}function Z0(r){return Ot(r)&&Qt(r)==Ee}function ac(r,n,a,u){var y=a.length,m=y,P=!u;if(r==null)return!m;for(r=ut(r);y--;){var R=a[y];if(P&&R[2]?R[1]!==r[R[0]]:!(R[0]in r))return!1}for(;++y<m;){R=a[y];var M=R[0],G=r[M],Y=R[1];if(P&&R[2]){if(G===t&&!(M in r))return!1}else{var te=new Vr;if(u)var ae=u(G,Y,M,r,n,te);if(!(ae===t?es(Y,G,I|K,u,te):ae))return!1}}return!0}function Lh(r){if(!bt(r)||$y(r))return!1;var n=yi(r)?Zg:xa;return n.test(Ji(r))}function Q0(r){return Ot(r)&&nr(r)==Me}function ey(r){return Ot(r)&&Qt(r)==Ie}function ty(r){return Ot(r)&&$o(r.length)&&!!ot[nr(r)]}function Mh(r){return typeof r=="function"?r:r==null?gr:typeof r=="object"?Ne(r)?qh(r[0],r[1]):zh(r):cf(r)}function cc(r){if(!is(r))return n0(r);var n=[];for(var a in ut(r))it.call(r,a)&&a!="constructor"&&n.push(a);return n}function ry(r){if(!bt(r))return Ly(r);var n=is(r),a=[];for(var u in r)u=="constructor"&&(n||!it.call(r,u))||a.push(u);return a}function uc(r,n){return r<n}function Bh(r,n){var a=-1,u=dr(r)?q(r.length):[];return Pi(r,function(y,m,P){u[++a]=n(y,m,P)}),u}function zh(r){var n=Sc(r);return n.length==1&&n[0][2]?wl(n[0][0],n[0][1]):function(a){return a===r||ac(a,r,n)}}function qh(r,n){return xc(r)&&bl(n)?wl(ti(r),n):function(a){var u=Uc(a,r);return u===t&&u===n?jc(a,r):es(n,u,I|K)}}function _o(r,n,a,u,y){r!==n&&ic(n,function(m,P){if(y||(y=new Vr),bt(m))iy(r,n,P,a,_o,u,y);else{var R=u?u(Pc(r,P),m,P+"",r,n,y):t;R===t&&(R=m),tc(r,P,R)}},pr)}function iy(r,n,a,u,y,m,P){var R=Pc(r,a),M=Pc(n,a),G=P.get(M);if(G){tc(r,a,G);return}var Y=m?m(R,M,a+"",r,n,P):t,te=Y===t;if(te){var ae=Ne(M),pe=!ae&&Ni(M),me=!ae&&!pe&&Pn(M);Y=M,ae||pe||me?Ne(R)?Y=R:Tt(R)?Y=fr(R):pe?(te=!1,Y=el(M,!0)):me?(te=!1,Y=tl(M,!0)):Y=[]:ss(M)||Xi(M)?(Y=R,Xi(R)?Y=Xl(R):(!bt(R)||yi(R))&&(Y=ml(M))):te=!1}te&&(P.set(M,Y),y(Y,M,u,m,P),P.delete(M)),tc(r,a,Y)}function Hh(r,n){var a=r.length;if(a)return n+=n<0?a:0,gi(n,a)?r[n]:t}function Kh(r,n,a){n.length?n=_t(n,function(m){return Ne(m)?function(P){return Gi(P,m.length===1?m[0]:m)}:m}):n=[gr];var u=-1;n=_t(n,Er(_e()));var y=Bh(r,function(m,P,R){var M=_t(n,function(G){return G(m)});return{criteria:M,index:++u,value:m}});return Cg(y,function(m,P){return yy(m,P,a)})}function ny(r,n){return Vh(r,n,function(a,u){return jc(r,u)})}function Vh(r,n,a){for(var u=-1,y=n.length,m={};++u<y;){var P=n[u],R=Gi(r,P);a(R,P)&&ts(m,Ci(P,r),R)}return m}function sy(r){return function(n){return Gi(n,r)}}function hc(r,n,a,u){var y=u?Ag:vn,m=-1,P=n.length,R=r;for(r===n&&(n=fr(n)),a&&(R=_t(r,Er(a)));++m<P;)for(var M=0,G=n[m],Y=a?a(G):G;(M=y(R,Y,M,u))>-1;)R!==r&&ao.call(R,M,1),ao.call(r,M,1);return r}function kh(r,n){for(var a=r?n.length:0,u=a-1;a--;){var y=n[a];if(a==u||y!==m){var m=y;gi(y)?ao.call(r,y,1):pc(r,y)}}return r}function lc(r,n){return r+ho(xh()*(n-r+1))}function oy(r,n,a,u){for(var y=-1,m=Kt(uo((n-r)/(a||1)),0),P=q(m);m--;)P[u?m:++y]=r,r+=a;return P}function fc(r,n){var a="";if(!r||n<1||n>V)return a;do n%2&&(a+=r),n=ho(n/2),n&&(r+=r);while(n);return a}function Ke(r,n){return Ac(El(r,n,gr),r+"")}function ay(r){return Ah(An(r))}function cy(r,n){var a=An(r);return Po(a,Wi(n,0,a.length))}function ts(r,n,a,u){if(!bt(r))return r;n=Ci(n,r);for(var y=-1,m=n.length,P=m-1,R=r;R!=null&&++y<m;){var M=ti(n[y]),G=a;if(M==="__proto__"||M==="constructor"||M==="prototype")return r;if(y!=P){var Y=R[M];G=u?u(Y,M,R):t,G===t&&(G=bt(Y)?Y:gi(n[y+1])?[]:{})}Xn(R,M,G),R=R[M]}return r}var Wh=lo?function(r,n){return lo.set(r,n),r}:gr,uy=co?function(r,n){return co(r,"toString",{configurable:!0,enumerable:!1,value:Mc(n),writable:!0})}:gr;function hy(r){return Po(An(r))}function Fr(r,n,a){var u=-1,y=r.length;n<0&&(n=-n>y?0:y+n),a=a>y?y:a,a<0&&(a+=y),y=n>a?0:a-n>>>0,n>>>=0;for(var m=q(y);++u<y;)m[u]=r[u+n];return m}function ly(r,n){var a;return Pi(r,function(u,y,m){return a=n(u,y,m),!a}),!!a}function mo(r,n,a){var u=0,y=r==null?u:r.length;if(typeof n=="number"&&n===n&&y<=oe){for(;u<y;){var m=u+y>>>1,P=r[m];P!==null&&!Sr(P)&&(a?P<=n:P<n)?u=m+1:y=m}return y}return dc(r,n,gr,a)}function dc(r,n,a,u){var y=0,m=r==null?0:r.length;if(m===0)return 0;n=a(n);for(var P=n!==n,R=n===null,M=Sr(n),G=n===t;y<m;){var Y=ho((y+m)/2),te=a(r[Y]),ae=te!==t,pe=te===null,me=te===te,ze=Sr(te);if(P)var be=u||me;else G?be=me&&(u||ae):R?be=me&&ae&&(u||!pe):M?be=me&&ae&&!pe&&(u||!ze):pe||ze?be=!1:be=u?te<=n:te<n;be?y=Y+1:m=Y}return Zt(m,De)}function Gh(r,n){for(var a=-1,u=r.length,y=0,m=[];++a<u;){var P=r[a],R=n?n(P):P;if(!a||!kr(R,M)){var M=R;m[y++]=P===0?0:P}}return m}function Yh(r){return typeof r=="number"?r:Sr(r)?ee:+r}function Dr(r){if(typeof r=="string")return r;if(Ne(r))return _t(r,Dr)+"";if(Sr(r))return Oh?Oh.call(r):"";var n=r+"";return n=="0"&&1/r==-J?"-0":n}function Ai(r,n,a){var u=-1,y=Xs,m=r.length,P=!0,R=[],M=R;if(a)P=!1,y=qa;else if(m>=o){var G=n?null:Ey(r);if(G)return Qs(G);P=!1,y=Vn,M=new ki}else M=n?[]:R;e:for(;++u<m;){var Y=r[u],te=n?n(Y):Y;if(Y=a||Y!==0?Y:0,P&&te===te){for(var ae=M.length;ae--;)if(M[ae]===te)continue e;n&&M.push(te),R.push(Y)}else y(M,te,a)||(M!==R&&M.push(te),R.push(Y))}return R}function pc(r,n){return n=Ci(n,r),r=Dl(r,n),r==null||delete r[ti(Ur(n))]}function Jh(r,n,a,u){return ts(r,n,a(Gi(r,n)),u)}function bo(r,n,a,u){for(var y=r.length,m=u?y:-1;(u?m--:++m<y)&&n(r[m],m,r););return a?Fr(r,u?0:m,u?m+1:y):Fr(r,u?m+1:0,u?y:m)}function Xh(r,n){var a=r;return a instanceof Ye&&(a=a.value()),Ha(n,function(u,y){return y.func.apply(y.thisArg,Ii([u],y.args))},a)}function gc(r,n,a){var u=r.length;if(u<2)return u?Ai(r[0]):[];for(var y=-1,m=q(u);++y<u;)for(var P=r[y],R=-1;++R<u;)R!=y&&(m[y]=Zn(m[y]||P,r[R],n,a));return Ai(Yt(m,1),n,a)}function Zh(r,n,a){for(var u=-1,y=r.length,m=n.length,P={};++u<y;){var R=u<m?n[u]:t;a(P,r[u],R)}return P}function yc(r){return Tt(r)?r:[]}function vc(r){return typeof r=="function"?r:gr}function Ci(r,n){return Ne(r)?r:xc(r,n)?[r]:Ol(rt(r))}var fy=Ke;function Ti(r,n,a){var u=r.length;return a=a===t?u:a,!n&&a>=u?r:Fr(r,n,a)}var Qh=Qg||function(r){return Xe.clearTimeout(r)};function el(r,n){if(n)return r.slice();var a=r.length,u=wh?wh(a):new r.constructor(a);return r.copy(u),u}function _c(r){var n=new r.constructor(r.byteLength);return new so(n).set(new so(r)),n}function dy(r,n){var a=n?_c(r.buffer):r.buffer;return new r.constructor(a,r.byteOffset,r.byteLength)}function py(r){var n=new r.constructor(r.source,Ar.exec(r));return n.lastIndex=r.lastIndex,n}function gy(r){return Jn?ut(Jn.call(r)):{}}function tl(r,n){var a=n?_c(r.buffer):r.buffer;return new r.constructor(a,r.byteOffset,r.length)}function rl(r,n){if(r!==n){var a=r!==t,u=r===null,y=r===r,m=Sr(r),P=n!==t,R=n===null,M=n===n,G=Sr(n);if(!R&&!G&&!m&&r>n||m&&P&&M&&!R&&!G||u&&P&&M||!a&&M||!y)return 1;if(!u&&!m&&!G&&r<n||G&&a&&y&&!u&&!m||R&&a&&y||!P&&y||!M)return-1}return 0}function yy(r,n,a){for(var u=-1,y=r.criteria,m=n.criteria,P=y.length,R=a.length;++u<P;){var M=rl(y[u],m[u]);if(M){if(u>=R)return M;var G=a[u];return M*(G=="desc"?-1:1)}}return r.index-n.index}function il(r,n,a,u){for(var y=-1,m=r.length,P=a.length,R=-1,M=n.length,G=Kt(m-P,0),Y=q(M+G),te=!u;++R<M;)Y[R]=n[R];for(;++y<P;)(te||y<m)&&(Y[a[y]]=r[y]);for(;G--;)Y[R++]=r[y++];return Y}function nl(r,n,a,u){for(var y=-1,m=r.length,P=-1,R=a.length,M=-1,G=n.length,Y=Kt(m-R,0),te=q(Y+G),ae=!u;++y<Y;)te[y]=r[y];for(var pe=y;++M<G;)te[pe+M]=n[M];for(;++P<R;)(ae||y<m)&&(te[pe+a[P]]=r[y++]);return te}function fr(r,n){var a=-1,u=r.length;for(n||(n=q(u));++a<u;)n[a]=r[a];return n}function ei(r,n,a,u){var y=!a;a||(a={});for(var m=-1,P=n.length;++m<P;){var R=n[m],M=u?u(a[R],r[R],R,a,r):t;M===t&&(M=r[R]),y?fi(a,R,M):Xn(a,R,M)}return a}function vy(r,n){return ei(r,Ic(r),n)}function _y(r,n){return ei(r,vl(r),n)}function wo(r,n){return function(a,u){var y=Ne(a)?Dg:B0,m=n?n():{};return y(a,r,_e(u,2),m)}}function In(r){return Ke(function(n,a){var u=-1,y=a.length,m=y>1?a[y-1]:t,P=y>2?a[2]:t;for(m=r.length>3&&typeof m=="function"?(y--,m):t,P&&sr(a[0],a[1],P)&&(m=y<3?t:m,y=1),n=ut(n);++u<y;){var R=a[u];R&&r(n,R,u,m)}return n})}function sl(r,n){return function(a,u){if(a==null)return a;if(!dr(a))return r(a,u);for(var y=a.length,m=n?y:-1,P=ut(a);(n?m--:++m<y)&&u(P[m],m,P)!==!1;);return a}}function ol(r){return function(n,a,u){for(var y=-1,m=ut(n),P=u(n),R=P.length;R--;){var M=P[r?R:++y];if(a(m[M],M,m)===!1)break}return n}}function my(r,n,a){var u=n&H,y=rs(r);function m(){var P=this&&this!==Xe&&this instanceof m?y:r;return P.apply(u?a:this,arguments)}return m}function al(r){return function(n){n=rt(n);var a=_n(n)?Kr(n):t,u=a?a[0]:n.charAt(0),y=a?Ti(a,1).join(""):n.slice(1);return u[r]()+y}}function xn(r){return function(n){return Ha(of(sf(n).replace(Hn,"")),r,"")}}function rs(r){return function(){var n=arguments;switch(n.length){case 0:return new r;case 1:return new r(n[0]);case 2:return new r(n[0],n[1]);case 3:return new r(n[0],n[1],n[2]);case 4:return new r(n[0],n[1],n[2],n[3]);case 5:return new r(n[0],n[1],n[2],n[3],n[4]);case 6:return new r(n[0],n[1],n[2],n[3],n[4],n[5]);case 7:return new r(n[0],n[1],n[2],n[3],n[4],n[5],n[6])}var a=Sn(r.prototype),u=r.apply(a,n);return bt(u)?u:a}}function by(r,n,a){var u=rs(r);function y(){for(var m=arguments.length,P=q(m),R=m,M=On(y);R--;)P[R]=arguments[R];var G=m<3&&P[0]!==M&&P[m-1]!==M?[]:xi(P,M);if(m-=G.length,m<a)return fl(r,n,Eo,y.placeholder,t,P,G,t,t,a-m);var Y=this&&this!==Xe&&this instanceof y?u:r;return Vt(Y,this,P)}return y}function cl(r){return function(n,a,u){var y=ut(n);if(!dr(n)){var m=_e(a,3);n=kt(n),a=function(R){return m(y[R],R,y)}}var P=r(n,a,u);return P>-1?y[m?n[P]:P]:t}}function ul(r){return pi(function(n){var a=n.length,u=a,y=Rr.prototype.thru;for(r&&n.reverse();u--;){var m=n[u];if(typeof m!="function")throw new Nr(l);if(y&&!P&&xo(m)=="wrapper")var P=new Rr([],!0)}for(u=P?u:a;++u<a;){m=n[u];var R=xo(m),M=R=="wrapper"?Dc(m):t;M&&Oc(M[0])&&M[1]==(h|U|C|w)&&!M[4].length&&M[9]==1?P=P[xo(M[0])].apply(P,M[3]):P=m.length==1&&Oc(m)?P[R]():P.thru(m)}return function(){var G=arguments,Y=G[0];if(P&&G.length==1&&Ne(Y))return P.plant(Y).value();for(var te=0,ae=a?n[te].apply(this,G):Y;++te<a;)ae=n[te].call(this,ae);return ae}})}function Eo(r,n,a,u,y,m,P,R,M,G){var Y=n&h,te=n&H,ae=n&re,pe=n&(U|x),me=n&Q,ze=ae?t:rs(r);function be(){for(var We=arguments.length,Ze=q(We),Ir=We;Ir--;)Ze[Ir]=arguments[Ir];if(pe)var or=On(be),xr=Ng(Ze,or);if(u&&(Ze=il(Ze,u,y,pe)),m&&(Ze=nl(Ze,m,P,pe)),We-=xr,pe&&We<G){var Nt=xi(Ze,or);return fl(r,n,Eo,be.placeholder,a,Ze,Nt,R,M,G-We)}var Wr=te?a:this,_i=ae?Wr[r]:r;return We=Ze.length,R?Ze=By(Ze,R):me&&We>1&&Ze.reverse(),Y&&M<We&&(Ze.length=M),this&&this!==Xe&&this instanceof be&&(_i=ze||rs(_i)),_i.apply(Wr,Ze)}return be}function hl(r,n){return function(a,u){return G0(a,r,n(u),{})}}function Do(r,n){return function(a,u){var y;if(a===t&&u===t)return n;if(a!==t&&(y=a),u!==t){if(y===t)return u;typeof a=="string"||typeof u=="string"?(a=Dr(a),u=Dr(u)):(a=Yh(a),u=Yh(u)),y=r(a,u)}return y}}function mc(r){return pi(function(n){return n=_t(n,Er(_e())),Ke(function(a){var u=this;return r(n,function(y){return Vt(y,u,a)})})})}function So(r,n){n=n===t?" ":Dr(n);var a=n.length;if(a<2)return a?fc(n,r):n;var u=fc(n,uo(r/mn(n)));return _n(n)?Ti(Kr(u),0,r).join(""):u.slice(0,r)}function wy(r,n,a,u){var y=n&H,m=rs(r);function P(){for(var R=-1,M=arguments.length,G=-1,Y=u.length,te=q(Y+M),ae=this&&this!==Xe&&this instanceof P?m:r;++G<Y;)te[G]=u[G];for(;M--;)te[G++]=arguments[++R];return Vt(ae,y?a:this,te)}return P}function ll(r){return function(n,a,u){return u&&typeof u!="number"&&sr(n,a,u)&&(a=u=t),n=vi(n),a===t?(a=n,n=0):a=vi(a),u=u===t?n<a?1:-1:vi(u),oy(n,a,u,r)}}function Io(r){return function(n,a){return typeof n=="string"&&typeof a=="string"||(n=jr(n),a=jr(a)),r(n,a)}}function fl(r,n,a,u,y,m,P,R,M,G){var Y=n&U,te=Y?P:t,ae=Y?t:P,pe=Y?m:t,me=Y?t:m;n|=Y?C:T,n&=~(Y?T:C),n&$||(n&=~(H|re));var ze=[r,n,y,pe,te,me,ae,R,M,G],be=a.apply(t,ze);return Oc(r)&&Sl(be,ze),be.placeholder=u,Il(be,r,n)}function bc(r){var n=Ht[r];return function(a,u){if(a=jr(a),u=u==null?0:Zt(Le(u),292),u&&Ih(a)){var y=(rt(a)+"e").split("e"),m=n(y[0]+"e"+(+y[1]+u));return y=(rt(m)+"e").split("e"),+(y[0]+"e"+(+y[1]-u))}return n(a)}}var Ey=En&&1/Qs(new En([,-0]))[1]==J?function(r){return new En(r)}:qc;function dl(r){return function(n){var a=Qt(n);return a==Ee?Ja(n):a==Ie?Mg(n):Tg(n,r(n))}}function di(r,n,a,u,y,m,P,R){var M=n&re;if(!M&&typeof r!="function")throw new Nr(l);var G=u?u.length:0;if(G||(n&=~(C|T),u=y=t),P=P===t?P:Kt(Le(P),0),R=R===t?R:Le(R),G-=y?y.length:0,n&T){var Y=u,te=y;u=y=t}var ae=M?t:Dc(r),pe=[r,n,a,u,y,Y,te,m,P,R];if(ae&&jy(pe,ae),r=pe[0],n=pe[1],a=pe[2],u=pe[3],y=pe[4],R=pe[9]=pe[9]===t?M?0:r.length:Kt(pe[9]-G,0),!R&&n&(U|x)&&(n&=~(U|x)),!n||n==H)var me=my(r,n,a);else n==U||n==x?me=by(r,n,R):(n==C||n==(H|C))&&!y.length?me=wy(r,n,a,u):me=Eo.apply(t,pe);var ze=ae?Wh:Sl;return Il(ze(me,pe),r,n)}function pl(r,n,a,u){return r===t||kr(r,wn[a])&&!it.call(u,a)?n:r}function gl(r,n,a,u,y,m){return bt(r)&&bt(n)&&(m.set(n,r),_o(r,n,t,gl,m),m.delete(n)),r}function Dy(r){return ss(r)?t:r}function yl(r,n,a,u,y,m){var P=a&I,R=r.length,M=n.length;if(R!=M&&!(P&&M>R))return!1;var G=m.get(r),Y=m.get(n);if(G&&Y)return G==n&&Y==r;var te=-1,ae=!0,pe=a&K?new ki:t;for(m.set(r,n),m.set(n,r);++te<R;){var me=r[te],ze=n[te];if(u)var be=P?u(ze,me,te,n,r,m):u(me,ze,te,r,n,m);if(be!==t){if(be)continue;ae=!1;break}if(pe){if(!Ka(n,function(We,Ze){if(!Vn(pe,Ze)&&(me===We||y(me,We,a,u,m)))return pe.push(Ze)})){ae=!1;break}}else if(!(me===ze||y(me,ze,a,u,m))){ae=!1;break}}return m.delete(r),m.delete(n),ae}function Sy(r,n,a,u,y,m,P){switch(a){case Pe:if(r.byteLength!=n.byteLength||r.byteOffset!=n.byteOffset)return!1;r=r.buffer,n=n.buffer;case we:return!(r.byteLength!=n.byteLength||!m(new so(r),new so(n)));case B:case F:case qe:return kr(+r,+n);case A:return r.name==n.name&&r.message==n.message;case Me:case Re:return r==n+"";case Ee:var R=Ja;case Ie:var M=u&I;if(R||(R=Qs),r.size!=n.size&&!M)return!1;var G=P.get(r);if(G)return G==n;u|=K,P.set(r,n);var Y=yl(R(r),R(n),u,y,m,P);return P.delete(r),Y;case $e:if(Jn)return Jn.call(r)==Jn.call(n)}return!1}function Iy(r,n,a,u,y,m){var P=a&I,R=wc(r),M=R.length,G=wc(n),Y=G.length;if(M!=Y&&!P)return!1;for(var te=M;te--;){var ae=R[te];if(!(P?ae in n:it.call(n,ae)))return!1}var pe=m.get(r),me=m.get(n);if(pe&&me)return pe==n&&me==r;var ze=!0;m.set(r,n),m.set(n,r);for(var be=P;++te<M;){ae=R[te];var We=r[ae],Ze=n[ae];if(u)var Ir=P?u(Ze,We,ae,n,r,m):u(We,Ze,ae,r,n,m);if(!(Ir===t?We===Ze||y(We,Ze,a,u,m):Ir)){ze=!1;break}be||(be=ae=="constructor")}if(ze&&!be){var or=r.constructor,xr=n.constructor;or!=xr&&"constructor"in r&&"constructor"in n&&!(typeof or=="function"&&or instanceof or&&typeof xr=="function"&&xr instanceof xr)&&(ze=!1)}return m.delete(r),m.delete(n),ze}function pi(r){return Ac(El(r,t,Tl),r+"")}function wc(r){return Uh(r,kt,Ic)}function Ec(r){return Uh(r,pr,vl)}var Dc=lo?function(r){return lo.get(r)}:qc;function xo(r){for(var n=r.name+"",a=Dn[n],u=it.call(Dn,n)?a.length:0;u--;){var y=a[u],m=y.func;if(m==null||m==r)return y.name}return n}function On(r){var n=it.call(_,"placeholder")?_:r;return n.placeholder}function _e(){var r=_.iteratee||Bc;return r=r===Bc?Mh:r,arguments.length?r(arguments[0],arguments[1]):r}function Oo(r,n){var a=r.__data__;return Ry(n)?a[typeof n=="string"?"string":"hash"]:a.map}function Sc(r){for(var n=kt(r),a=n.length;a--;){var u=n[a],y=r[u];n[a]=[u,y,bl(y)]}return n}function Yi(r,n){var a=Ug(r,n);return Lh(a)?a:t}function xy(r){var n=it.call(r,Ki),a=r[Ki];try{r[Ki]=t;var u=!0}catch{}var y=io.call(r);return u&&(n?r[Ki]=a:delete r[Ki]),y}var Ic=Za?function(r){return r==null?[]:(r=ut(r),Si(Za(r),function(n){return Dh.call(r,n)}))}:Hc,vl=Za?function(r){for(var n=[];r;)Ii(n,Ic(r)),r=oo(r);return n}:Hc,Qt=nr;(Qa&&Qt(new Qa(new ArrayBuffer(1)))!=Pe||Wn&&Qt(new Wn)!=Ee||ec&&Qt(ec.resolve())!=pt||En&&Qt(new En)!=Ie||Gn&&Qt(new Gn)!=Oe)&&(Qt=function(r){var n=nr(r),a=n==je?r.constructor:t,u=a?Ji(a):"";if(u)switch(u){case c0:return Pe;case u0:return Ee;case h0:return pt;case l0:return Ie;case f0:return Oe}return n});function Oy(r,n,a){for(var u=-1,y=a.length;++u<y;){var m=a[u],P=m.size;switch(m.type){case"drop":r+=P;break;case"dropRight":n-=P;break;case"take":n=Zt(n,r+P);break;case"takeRight":r=Kt(r,n-P);break}}return{start:r,end:n}}function Py(r){var n=r.match(ht);return n?n[1].split(Lt):[]}function _l(r,n,a){n=Ci(n,r);for(var u=-1,y=n.length,m=!1;++u<y;){var P=ti(n[u]);if(!(m=r!=null&&a(r,P)))break;r=r[P]}return m||++u!=y?m:(y=r==null?0:r.length,!!y&&$o(y)&&gi(P,y)&&(Ne(r)||Xi(r)))}function Ay(r){var n=r.length,a=new r.constructor(n);return n&&typeof r[0]=="string"&&it.call(r,"index")&&(a.index=r.index,a.input=r.input),a}function ml(r){return typeof r.constructor=="function"&&!is(r)?Sn(oo(r)):{}}function Cy(r,n,a){var u=r.constructor;switch(n){case we:return _c(r);case B:case F:return new u(+r);case Pe:return dy(r,a);case He:case xe:case ke:case Ge:case Qe:case et:case Je:case tr:case hr:return tl(r,a);case Ee:return new u;case qe:case Re:return new u(r);case Me:return py(r);case Ie:return new u;case $e:return gy(r)}}function Ty(r,n){var a=n.length;if(!a)return r;var u=a-1;return n[u]=(a>1?"& ":"")+n[u],n=n.join(a>2?", ":" "),r.replace(xt,`{
/* [wrapped with `+n+`] */
`)}function Ny(r){return Ne(r)||Xi(r)||!!(Sh&&r&&r[Sh])}function gi(r,n){var a=typeof r;return n=n??V,!!n&&(a=="number"||a!="symbol"&&Pa.test(r))&&r>-1&&r%1==0&&r<n}function sr(r,n,a){if(!bt(a))return!1;var u=typeof n;return(u=="number"?dr(a)&&gi(n,a.length):u=="string"&&n in a)?kr(a[n],r):!1}function xc(r,n){if(Ne(r))return!1;var a=typeof r;return a=="number"||a=="symbol"||a=="boolean"||r==null||Sr(r)?!0:Ft.test(r)||!vt.test(r)||n!=null&&r in ut(n)}function Ry(r){var n=typeof r;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?r!=="__proto__":r===null}function Oc(r){var n=xo(r),a=_[n];if(typeof a!="function"||!(n in Ye.prototype))return!1;if(r===a)return!0;var u=Dc(a);return!!u&&r===u[0]}function $y(r){return!!bh&&bh in r}var Fy=to?yi:Kc;function is(r){var n=r&&r.constructor,a=typeof n=="function"&&n.prototype||wn;return r===a}function bl(r){return r===r&&!bt(r)}function wl(r,n){return function(a){return a==null?!1:a[r]===n&&(n!==t||r in ut(a))}}function Uy(r){var n=No(r,function(u){return a.size===p&&a.clear(),u}),a=n.cache;return n}function jy(r,n){var a=r[1],u=n[1],y=a|u,m=y<(H|re|h),P=u==h&&a==U||u==h&&a==w&&r[7].length<=n[8]||u==(h|w)&&n[7].length<=n[8]&&a==U;if(!(m||P))return r;u&H&&(r[2]=n[2],y|=a&H?0:$);var R=n[3];if(R){var M=r[3];r[3]=M?il(M,R,n[4]):R,r[4]=M?xi(r[3],v):n[4]}return R=n[5],R&&(M=r[5],r[5]=M?nl(M,R,n[6]):R,r[6]=M?xi(r[5],v):n[6]),R=n[7],R&&(r[7]=R),u&h&&(r[8]=r[8]==null?n[8]:Zt(r[8],n[8])),r[9]==null&&(r[9]=n[9]),r[0]=n[0],r[1]=y,r}function Ly(r){var n=[];if(r!=null)for(var a in ut(r))n.push(a);return n}function My(r){return io.call(r)}function El(r,n,a){return n=Kt(n===t?r.length-1:n,0),function(){for(var u=arguments,y=-1,m=Kt(u.length-n,0),P=q(m);++y<m;)P[y]=u[n+y];y=-1;for(var R=q(n+1);++y<n;)R[y]=u[y];return R[n]=a(P),Vt(r,this,R)}}function Dl(r,n){return n.length<2?r:Gi(r,Fr(n,0,-1))}function By(r,n){for(var a=r.length,u=Zt(n.length,a),y=fr(r);u--;){var m=n[u];r[u]=gi(m,a)?y[m]:t}return r}function Pc(r,n){if(!(n==="constructor"&&typeof r[n]=="function")&&n!="__proto__")return r[n]}var Sl=xl(Wh),ns=t0||function(r,n){return Xe.setTimeout(r,n)},Ac=xl(uy);function Il(r,n,a){var u=n+"";return Ac(r,Ty(u,zy(Py(u),a)))}function xl(r){var n=0,a=0;return function(){var u=s0(),y=ye-(u-a);if(a=u,y>0){if(++n>=ge)return arguments[0]}else n=0;return r.apply(t,arguments)}}function Po(r,n){var a=-1,u=r.length,y=u-1;for(n=n===t?u:n;++a<n;){var m=lc(a,y),P=r[m];r[m]=r[a],r[a]=P}return r.length=n,r}var Ol=Uy(function(r){var n=[];return r.charCodeAt(0)===46&&n.push(""),r.replace(Ut,function(a,u,y,m){n.push(y?m.replace(Ea,"$1"):u||a)}),n});function ti(r){if(typeof r=="string"||Sr(r))return r;var n=r+"";return n=="0"&&1/r==-J?"-0":n}function Ji(r){if(r!=null){try{return ro.call(r)}catch{}try{return r+""}catch{}}return""}function zy(r,n){return Tr(Se,function(a){var u="_."+a[0];n&a[1]&&!Xs(r,u)&&r.push(u)}),r.sort()}function Pl(r){if(r instanceof Ye)return r.clone();var n=new Rr(r.__wrapped__,r.__chain__);return n.__actions__=fr(r.__actions__),n.__index__=r.__index__,n.__values__=r.__values__,n}function qy(r,n,a){(a?sr(r,n,a):n===t)?n=1:n=Kt(Le(n),0);var u=r==null?0:r.length;if(!u||n<1)return[];for(var y=0,m=0,P=q(uo(u/n));y<u;)P[m++]=Fr(r,y,y+=n);return P}function Hy(r){for(var n=-1,a=r==null?0:r.length,u=0,y=[];++n<a;){var m=r[n];m&&(y[u++]=m)}return y}function Ky(){var r=arguments.length;if(!r)return[];for(var n=q(r-1),a=arguments[0],u=r;u--;)n[u-1]=arguments[u];return Ii(Ne(a)?fr(a):[a],Yt(n,1))}var Vy=Ke(function(r,n){return Tt(r)?Zn(r,Yt(n,1,Tt,!0)):[]}),ky=Ke(function(r,n){var a=Ur(n);return Tt(a)&&(a=t),Tt(r)?Zn(r,Yt(n,1,Tt,!0),_e(a,2)):[]}),Wy=Ke(function(r,n){var a=Ur(n);return Tt(a)&&(a=t),Tt(r)?Zn(r,Yt(n,1,Tt,!0),t,a):[]});function Gy(r,n,a){var u=r==null?0:r.length;return u?(n=a||n===t?1:Le(n),Fr(r,n<0?0:n,u)):[]}function Yy(r,n,a){var u=r==null?0:r.length;return u?(n=a||n===t?1:Le(n),n=u-n,Fr(r,0,n<0?0:n)):[]}function Jy(r,n){return r&&r.length?bo(r,_e(n,3),!0,!0):[]}function Xy(r,n){return r&&r.length?bo(r,_e(n,3),!0):[]}function Zy(r,n,a,u){var y=r==null?0:r.length;return y?(a&&typeof a!="number"&&sr(r,n,a)&&(a=0,u=y),K0(r,n,a,u)):[]}function Al(r,n,a){var u=r==null?0:r.length;if(!u)return-1;var y=a==null?0:Le(a);return y<0&&(y=Kt(u+y,0)),Zs(r,_e(n,3),y)}function Cl(r,n,a){var u=r==null?0:r.length;if(!u)return-1;var y=u-1;return a!==t&&(y=Le(a),y=a<0?Kt(u+y,0):Zt(y,u-1)),Zs(r,_e(n,3),y,!0)}function Tl(r){var n=r==null?0:r.length;return n?Yt(r,1):[]}function Qy(r){var n=r==null?0:r.length;return n?Yt(r,J):[]}function ev(r,n){var a=r==null?0:r.length;return a?(n=n===t?1:Le(n),Yt(r,n)):[]}function tv(r){for(var n=-1,a=r==null?0:r.length,u={};++n<a;){var y=r[n];u[y[0]]=y[1]}return u}function Nl(r){return r&&r.length?r[0]:t}function rv(r,n,a){var u=r==null?0:r.length;if(!u)return-1;var y=a==null?0:Le(a);return y<0&&(y=Kt(u+y,0)),vn(r,n,y)}function iv(r){var n=r==null?0:r.length;return n?Fr(r,0,-1):[]}var nv=Ke(function(r){var n=_t(r,yc);return n.length&&n[0]===r[0]?oc(n):[]}),sv=Ke(function(r){var n=Ur(r),a=_t(r,yc);return n===Ur(a)?n=t:a.pop(),a.length&&a[0]===r[0]?oc(a,_e(n,2)):[]}),ov=Ke(function(r){var n=Ur(r),a=_t(r,yc);return n=typeof n=="function"?n:t,n&&a.pop(),a.length&&a[0]===r[0]?oc(a,t,n):[]});function av(r,n){return r==null?"":i0.call(r,n)}function Ur(r){var n=r==null?0:r.length;return n?r[n-1]:t}function cv(r,n,a){var u=r==null?0:r.length;if(!u)return-1;var y=u;return a!==t&&(y=Le(a),y=y<0?Kt(u+y,0):Zt(y,u-1)),n===n?zg(r,n,y):Zs(r,fh,y,!0)}function uv(r,n){return r&&r.length?Hh(r,Le(n)):t}var hv=Ke(Rl);function Rl(r,n){return r&&r.length&&n&&n.length?hc(r,n):r}function lv(r,n,a){return r&&r.length&&n&&n.length?hc(r,n,_e(a,2)):r}function fv(r,n,a){return r&&r.length&&n&&n.length?hc(r,n,t,a):r}var dv=pi(function(r,n){var a=r==null?0:r.length,u=rc(r,n);return kh(r,_t(n,function(y){return gi(y,a)?+y:y}).sort(rl)),u});function pv(r,n){var a=[];if(!(r&&r.length))return a;var u=-1,y=[],m=r.length;for(n=_e(n,3);++u<m;){var P=r[u];n(P,u,r)&&(a.push(P),y.push(u))}return kh(r,y),a}function Cc(r){return r==null?r:a0.call(r)}function gv(r,n,a){var u=r==null?0:r.length;return u?(a&&typeof a!="number"&&sr(r,n,a)?(n=0,a=u):(n=n==null?0:Le(n),a=a===t?u:Le(a)),Fr(r,n,a)):[]}function yv(r,n){return mo(r,n)}function vv(r,n,a){return dc(r,n,_e(a,2))}function _v(r,n){var a=r==null?0:r.length;if(a){var u=mo(r,n);if(u<a&&kr(r[u],n))return u}return-1}function mv(r,n){return mo(r,n,!0)}function bv(r,n,a){return dc(r,n,_e(a,2),!0)}function wv(r,n){var a=r==null?0:r.length;if(a){var u=mo(r,n,!0)-1;if(kr(r[u],n))return u}return-1}function Ev(r){return r&&r.length?Gh(r):[]}function Dv(r,n){return r&&r.length?Gh(r,_e(n,2)):[]}function Sv(r){var n=r==null?0:r.length;return n?Fr(r,1,n):[]}function Iv(r,n,a){return r&&r.length?(n=a||n===t?1:Le(n),Fr(r,0,n<0?0:n)):[]}function xv(r,n,a){var u=r==null?0:r.length;return u?(n=a||n===t?1:Le(n),n=u-n,Fr(r,n<0?0:n,u)):[]}function Ov(r,n){return r&&r.length?bo(r,_e(n,3),!1,!0):[]}function Pv(r,n){return r&&r.length?bo(r,_e(n,3)):[]}var Av=Ke(function(r){return Ai(Yt(r,1,Tt,!0))}),Cv=Ke(function(r){var n=Ur(r);return Tt(n)&&(n=t),Ai(Yt(r,1,Tt,!0),_e(n,2))}),Tv=Ke(function(r){var n=Ur(r);return n=typeof n=="function"?n:t,Ai(Yt(r,1,Tt,!0),t,n)});function Nv(r){return r&&r.length?Ai(r):[]}function Rv(r,n){return r&&r.length?Ai(r,_e(n,2)):[]}function $v(r,n){return n=typeof n=="function"?n:t,r&&r.length?Ai(r,t,n):[]}function Tc(r){if(!(r&&r.length))return[];var n=0;return r=Si(r,function(a){if(Tt(a))return n=Kt(a.length,n),!0}),Ga(n,function(a){return _t(r,Va(a))})}function $l(r,n){if(!(r&&r.length))return[];var a=Tc(r);return n==null?a:_t(a,function(u){return Vt(n,t,u)})}var Fv=Ke(function(r,n){return Tt(r)?Zn(r,n):[]}),Uv=Ke(function(r){return gc(Si(r,Tt))}),jv=Ke(function(r){var n=Ur(r);return Tt(n)&&(n=t),gc(Si(r,Tt),_e(n,2))}),Lv=Ke(function(r){var n=Ur(r);return n=typeof n=="function"?n:t,gc(Si(r,Tt),t,n)}),Mv=Ke(Tc);function Bv(r,n){return Zh(r||[],n||[],Xn)}function zv(r,n){return Zh(r||[],n||[],ts)}var qv=Ke(function(r){var n=r.length,a=n>1?r[n-1]:t;return a=typeof a=="function"?(r.pop(),a):t,$l(r,a)});function Fl(r){var n=_(r);return n.__chain__=!0,n}function Hv(r,n){return n(r),r}function Ao(r,n){return n(r)}var Kv=pi(function(r){var n=r.length,a=n?r[0]:0,u=this.__wrapped__,y=function(m){return rc(m,r)};return n>1||this.__actions__.length||!(u instanceof Ye)||!gi(a)?this.thru(y):(u=u.slice(a,+a+(n?1:0)),u.__actions__.push({func:Ao,args:[y],thisArg:t}),new Rr(u,this.__chain__).thru(function(m){return n&&!m.length&&m.push(t),m}))});function Vv(){return Fl(this)}function kv(){return new Rr(this.value(),this.__chain__)}function Wv(){this.__values__===t&&(this.__values__=Yl(this.value()));var r=this.__index__>=this.__values__.length,n=r?t:this.__values__[this.__index__++];return{done:r,value:n}}function Gv(){return this}function Yv(r){for(var n,a=this;a instanceof po;){var u=Pl(a);u.__index__=0,u.__values__=t,n?y.__wrapped__=u:n=u;var y=u;a=a.__wrapped__}return y.__wrapped__=r,n}function Jv(){var r=this.__wrapped__;if(r instanceof Ye){var n=r;return this.__actions__.length&&(n=new Ye(this)),n=n.reverse(),n.__actions__.push({func:Ao,args:[Cc],thisArg:t}),new Rr(n,this.__chain__)}return this.thru(Cc)}function Xv(){return Xh(this.__wrapped__,this.__actions__)}var Zv=wo(function(r,n,a){it.call(r,a)?++r[a]:fi(r,a,1)});function Qv(r,n,a){var u=Ne(r)?hh:H0;return a&&sr(r,n,a)&&(n=t),u(r,_e(n,3))}function e1(r,n){var a=Ne(r)?Si:$h;return a(r,_e(n,3))}var t1=cl(Al),r1=cl(Cl);function i1(r,n){return Yt(Co(r,n),1)}function n1(r,n){return Yt(Co(r,n),J)}function s1(r,n,a){return a=a===t?1:Le(a),Yt(Co(r,n),a)}function Ul(r,n){var a=Ne(r)?Tr:Pi;return a(r,_e(n,3))}function jl(r,n){var a=Ne(r)?Sg:Rh;return a(r,_e(n,3))}var o1=wo(function(r,n,a){it.call(r,a)?r[a].push(n):fi(r,a,[n])});function a1(r,n,a,u){r=dr(r)?r:An(r),a=a&&!u?Le(a):0;var y=r.length;return a<0&&(a=Kt(y+a,0)),Fo(r)?a<=y&&r.indexOf(n,a)>-1:!!y&&vn(r,n,a)>-1}var c1=Ke(function(r,n,a){var u=-1,y=typeof n=="function",m=dr(r)?q(r.length):[];return Pi(r,function(P){m[++u]=y?Vt(n,P,a):Qn(P,n,a)}),m}),u1=wo(function(r,n,a){fi(r,a,n)});function Co(r,n){var a=Ne(r)?_t:Bh;return a(r,_e(n,3))}function h1(r,n,a,u){return r==null?[]:(Ne(n)||(n=n==null?[]:[n]),a=u?t:a,Ne(a)||(a=a==null?[]:[a]),Kh(r,n,a))}var l1=wo(function(r,n,a){r[a?0:1].push(n)},function(){return[[],[]]});function f1(r,n,a){var u=Ne(r)?Ha:ph,y=arguments.length<3;return u(r,_e(n,4),a,y,Pi)}function d1(r,n,a){var u=Ne(r)?Ig:ph,y=arguments.length<3;return u(r,_e(n,4),a,y,Rh)}function p1(r,n){var a=Ne(r)?Si:$h;return a(r,Ro(_e(n,3)))}function g1(r){var n=Ne(r)?Ah:ay;return n(r)}function y1(r,n,a){(a?sr(r,n,a):n===t)?n=1:n=Le(n);var u=Ne(r)?L0:cy;return u(r,n)}function v1(r){var n=Ne(r)?M0:hy;return n(r)}function _1(r){if(r==null)return 0;if(dr(r))return Fo(r)?mn(r):r.length;var n=Qt(r);return n==Ee||n==Ie?r.size:cc(r).length}function m1(r,n,a){var u=Ne(r)?Ka:ly;return a&&sr(r,n,a)&&(n=t),u(r,_e(n,3))}var b1=Ke(function(r,n){if(r==null)return[];var a=n.length;return a>1&&sr(r,n[0],n[1])?n=[]:a>2&&sr(n[0],n[1],n[2])&&(n=[n[0]]),Kh(r,Yt(n,1),[])}),To=e0||function(){return Xe.Date.now()};function w1(r,n){if(typeof n!="function")throw new Nr(l);return r=Le(r),function(){if(--r<1)return n.apply(this,arguments)}}function Ll(r,n,a){return n=a?t:n,n=r&&n==null?r.length:n,di(r,h,t,t,t,t,n)}function Ml(r,n){var a;if(typeof n!="function")throw new Nr(l);return r=Le(r),function(){return--r>0&&(a=n.apply(this,arguments)),r<=1&&(n=t),a}}var Nc=Ke(function(r,n,a){var u=H;if(a.length){var y=xi(a,On(Nc));u|=C}return di(r,u,n,a,y)}),Bl=Ke(function(r,n,a){var u=H|re;if(a.length){var y=xi(a,On(Bl));u|=C}return di(n,u,r,a,y)});function zl(r,n,a){n=a?t:n;var u=di(r,U,t,t,t,t,t,n);return u.placeholder=zl.placeholder,u}function ql(r,n,a){n=a?t:n;var u=di(r,x,t,t,t,t,t,n);return u.placeholder=ql.placeholder,u}function Hl(r,n,a){var u,y,m,P,R,M,G=0,Y=!1,te=!1,ae=!0;if(typeof r!="function")throw new Nr(l);n=jr(n)||0,bt(a)&&(Y=!!a.leading,te="maxWait"in a,m=te?Kt(jr(a.maxWait)||0,n):m,ae="trailing"in a?!!a.trailing:ae);function pe(Nt){var Wr=u,_i=y;return u=y=t,G=Nt,P=r.apply(_i,Wr),P}function me(Nt){return G=Nt,R=ns(We,n),Y?pe(Nt):P}function ze(Nt){var Wr=Nt-M,_i=Nt-G,uf=n-Wr;return te?Zt(uf,m-_i):uf}function be(Nt){var Wr=Nt-M,_i=Nt-G;return M===t||Wr>=n||Wr<0||te&&_i>=m}function We(){var Nt=To();if(be(Nt))return Ze(Nt);R=ns(We,ze(Nt))}function Ze(Nt){return R=t,ae&&u?pe(Nt):(u=y=t,P)}function Ir(){R!==t&&Qh(R),G=0,u=M=y=R=t}function or(){return R===t?P:Ze(To())}function xr(){var Nt=To(),Wr=be(Nt);if(u=arguments,y=this,M=Nt,Wr){if(R===t)return me(M);if(te)return Qh(R),R=ns(We,n),pe(M)}return R===t&&(R=ns(We,n)),P}return xr.cancel=Ir,xr.flush=or,xr}var E1=Ke(function(r,n){return Nh(r,1,n)}),D1=Ke(function(r,n,a){return Nh(r,jr(n)||0,a)});function S1(r){return di(r,Q)}function No(r,n){if(typeof r!="function"||n!=null&&typeof n!="function")throw new Nr(l);var a=function(){var u=arguments,y=n?n.apply(this,u):u[0],m=a.cache;if(m.has(y))return m.get(y);var P=r.apply(this,u);return a.cache=m.set(y,P)||m,P};return a.cache=new(No.Cache||li),a}No.Cache=li;function Ro(r){if(typeof r!="function")throw new Nr(l);return function(){var n=arguments;switch(n.length){case 0:return!r.call(this);case 1:return!r.call(this,n[0]);case 2:return!r.call(this,n[0],n[1]);case 3:return!r.call(this,n[0],n[1],n[2])}return!r.apply(this,n)}}function I1(r){return Ml(2,r)}var x1=fy(function(r,n){n=n.length==1&&Ne(n[0])?_t(n[0],Er(_e())):_t(Yt(n,1),Er(_e()));var a=n.length;return Ke(function(u){for(var y=-1,m=Zt(u.length,a);++y<m;)u[y]=n[y].call(this,u[y]);return Vt(r,this,u)})}),Rc=Ke(function(r,n){var a=xi(n,On(Rc));return di(r,C,t,n,a)}),Kl=Ke(function(r,n){var a=xi(n,On(Kl));return di(r,T,t,n,a)}),O1=pi(function(r,n){return di(r,w,t,t,t,n)});function P1(r,n){if(typeof r!="function")throw new Nr(l);return n=n===t?n:Le(n),Ke(r,n)}function A1(r,n){if(typeof r!="function")throw new Nr(l);return n=n==null?0:Kt(Le(n),0),Ke(function(a){var u=a[n],y=Ti(a,0,n);return u&&Ii(y,u),Vt(r,this,y)})}function C1(r,n,a){var u=!0,y=!0;if(typeof r!="function")throw new Nr(l);return bt(a)&&(u="leading"in a?!!a.leading:u,y="trailing"in a?!!a.trailing:y),Hl(r,n,{leading:u,maxWait:n,trailing:y})}function T1(r){return Ll(r,1)}function N1(r,n){return Rc(vc(n),r)}function R1(){if(!arguments.length)return[];var r=arguments[0];return Ne(r)?r:[r]}function $1(r){return $r(r,O)}function F1(r,n){return n=typeof n=="function"?n:t,$r(r,O,n)}function U1(r){return $r(r,b|O)}function j1(r,n){return n=typeof n=="function"?n:t,$r(r,b|O,n)}function L1(r,n){return n==null||Th(r,n,kt(n))}function kr(r,n){return r===n||r!==r&&n!==n}var M1=Io(sc),B1=Io(function(r,n){return r>=n}),Xi=jh(function(){return arguments}())?jh:function(r){return Ot(r)&&it.call(r,"callee")&&!Dh.call(r,"callee")},Ne=q.isArray,z1=ir?Er(ir):Y0;function dr(r){return r!=null&&$o(r.length)&&!yi(r)}function Tt(r){return Ot(r)&&dr(r)}function q1(r){return r===!0||r===!1||Ot(r)&&nr(r)==B}var Ni=r0||Kc,H1=Hr?Er(Hr):J0;function K1(r){return Ot(r)&&r.nodeType===1&&!ss(r)}function V1(r){if(r==null)return!0;if(dr(r)&&(Ne(r)||typeof r=="string"||typeof r.splice=="function"||Ni(r)||Pn(r)||Xi(r)))return!r.length;var n=Qt(r);if(n==Ee||n==Ie)return!r.size;if(is(r))return!cc(r).length;for(var a in r)if(it.call(r,a))return!1;return!0}function k1(r,n){return es(r,n)}function W1(r,n,a){a=typeof a=="function"?a:t;var u=a?a(r,n):t;return u===t?es(r,n,t,a):!!u}function $c(r){if(!Ot(r))return!1;var n=nr(r);return n==A||n==f||typeof r.message=="string"&&typeof r.name=="string"&&!ss(r)}function G1(r){return typeof r=="number"&&Ih(r)}function yi(r){if(!bt(r))return!1;var n=nr(r);return n==se||n==he||n==z||n==gt}function Vl(r){return typeof r=="number"&&r==Le(r)}function $o(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=V}function bt(r){var n=typeof r;return r!=null&&(n=="object"||n=="function")}function Ot(r){return r!=null&&typeof r=="object"}var kl=Cr?Er(Cr):Z0;function Y1(r,n){return r===n||ac(r,n,Sc(n))}function J1(r,n,a){return a=typeof a=="function"?a:t,ac(r,n,Sc(n),a)}function X1(r){return Wl(r)&&r!=+r}function Z1(r){if(Fy(r))throw new Ae(c);return Lh(r)}function Q1(r){return r===null}function e_(r){return r==null}function Wl(r){return typeof r=="number"||Ot(r)&&nr(r)==qe}function ss(r){if(!Ot(r)||nr(r)!=je)return!1;var n=oo(r);if(n===null)return!0;var a=it.call(n,"constructor")&&n.constructor;return typeof a=="function"&&a instanceof a&&ro.call(a)==Jg}var Fc=Zr?Er(Zr):Q0;function t_(r){return Vl(r)&&r>=-V&&r<=V}var Gl=Kn?Er(Kn):ey;function Fo(r){return typeof r=="string"||!Ne(r)&&Ot(r)&&nr(r)==Re}function Sr(r){return typeof r=="symbol"||Ot(r)&&nr(r)==$e}var Pn=Hi?Er(Hi):ty;function r_(r){return r===t}function i_(r){return Ot(r)&&Qt(r)==Oe}function n_(r){return Ot(r)&&nr(r)==Fe}var s_=Io(uc),o_=Io(function(r,n){return r<=n});function Yl(r){if(!r)return[];if(dr(r))return Fo(r)?Kr(r):fr(r);if(kn&&r[kn])return Lg(r[kn]());var n=Qt(r),a=n==Ee?Ja:n==Ie?Qs:An;return a(r)}function vi(r){if(!r)return r===0?r:0;if(r=jr(r),r===J||r===-J){var n=r<0?-1:1;return n*k}return r===r?r:0}function Le(r){var n=vi(r),a=n%1;return n===n?a?n-a:n:0}function Jl(r){return r?Wi(Le(r),0,ie):0}function jr(r){if(typeof r=="number")return r;if(Sr(r))return ee;if(bt(r)){var n=typeof r.valueOf=="function"?r.valueOf():r;r=bt(n)?n+"":n}if(typeof r!="string")return r===0?r:+r;r=gh(r);var a=Ia.test(r);return a||Oa.test(r)?Te(r.slice(2),a?2:8):Sa.test(r)?ee:+r}function Xl(r){return ei(r,pr(r))}function a_(r){return r?Wi(Le(r),-V,V):r===0?r:0}function rt(r){return r==null?"":Dr(r)}var c_=In(function(r,n){if(is(n)||dr(n)){ei(n,kt(n),r);return}for(var a in n)it.call(n,a)&&Xn(r,a,n[a])}),Zl=In(function(r,n){ei(n,pr(n),r)}),Uo=In(function(r,n,a,u){ei(n,pr(n),r,u)}),u_=In(function(r,n,a,u){ei(n,kt(n),r,u)}),h_=pi(rc);function l_(r,n){var a=Sn(r);return n==null?a:Ch(a,n)}var f_=Ke(function(r,n){r=ut(r);var a=-1,u=n.length,y=u>2?n[2]:t;for(y&&sr(n[0],n[1],y)&&(u=1);++a<u;)for(var m=n[a],P=pr(m),R=-1,M=P.length;++R<M;){var G=P[R],Y=r[G];(Y===t||kr(Y,wn[G])&&!it.call(r,G))&&(r[G]=m[G])}return r}),d_=Ke(function(r){return r.push(t,gl),Vt(Ql,t,r)});function p_(r,n){return lh(r,_e(n,3),Qr)}function g_(r,n){return lh(r,_e(n,3),nc)}function y_(r,n){return r==null?r:ic(r,_e(n,3),pr)}function v_(r,n){return r==null?r:Fh(r,_e(n,3),pr)}function __(r,n){return r&&Qr(r,_e(n,3))}function m_(r,n){return r&&nc(r,_e(n,3))}function b_(r){return r==null?[]:vo(r,kt(r))}function w_(r){return r==null?[]:vo(r,pr(r))}function Uc(r,n,a){var u=r==null?t:Gi(r,n);return u===t?a:u}function E_(r,n){return r!=null&&_l(r,n,V0)}function jc(r,n){return r!=null&&_l(r,n,k0)}var D_=hl(function(r,n,a){n!=null&&typeof n.toString!="function"&&(n=io.call(n)),r[n]=a},Mc(gr)),S_=hl(function(r,n,a){n!=null&&typeof n.toString!="function"&&(n=io.call(n)),it.call(r,n)?r[n].push(a):r[n]=[a]},_e),I_=Ke(Qn);function kt(r){return dr(r)?Ph(r):cc(r)}function pr(r){return dr(r)?Ph(r,!0):ry(r)}function x_(r,n){var a={};return n=_e(n,3),Qr(r,function(u,y,m){fi(a,n(u,y,m),u)}),a}function O_(r,n){var a={};return n=_e(n,3),Qr(r,function(u,y,m){fi(a,y,n(u,y,m))}),a}var P_=In(function(r,n,a){_o(r,n,a)}),Ql=In(function(r,n,a,u){_o(r,n,a,u)}),A_=pi(function(r,n){var a={};if(r==null)return a;var u=!1;n=_t(n,function(m){return m=Ci(m,r),u||(u=m.length>1),m}),ei(r,Ec(r),a),u&&(a=$r(a,b|S|O,Dy));for(var y=n.length;y--;)pc(a,n[y]);return a});function C_(r,n){return ef(r,Ro(_e(n)))}var T_=pi(function(r,n){return r==null?{}:ny(r,n)});function ef(r,n){if(r==null)return{};var a=_t(Ec(r),function(u){return[u]});return n=_e(n),Vh(r,a,function(u,y){return n(u,y[0])})}function N_(r,n,a){n=Ci(n,r);var u=-1,y=n.length;for(y||(y=1,r=t);++u<y;){var m=r==null?t:r[ti(n[u])];m===t&&(u=y,m=a),r=yi(m)?m.call(r):m}return r}function R_(r,n,a){return r==null?r:ts(r,n,a)}function $_(r,n,a,u){return u=typeof u=="function"?u:t,r==null?r:ts(r,n,a,u)}var tf=dl(kt),rf=dl(pr);function F_(r,n,a){var u=Ne(r),y=u||Ni(r)||Pn(r);if(n=_e(n,4),a==null){var m=r&&r.constructor;y?a=u?new m:[]:bt(r)?a=yi(m)?Sn(oo(r)):{}:a={}}return(y?Tr:Qr)(r,function(P,R,M){return n(a,P,R,M)}),a}function U_(r,n){return r==null?!0:pc(r,n)}function j_(r,n,a){return r==null?r:Jh(r,n,vc(a))}function L_(r,n,a,u){return u=typeof u=="function"?u:t,r==null?r:Jh(r,n,vc(a),u)}function An(r){return r==null?[]:Ya(r,kt(r))}function M_(r){return r==null?[]:Ya(r,pr(r))}function B_(r,n,a){return a===t&&(a=n,n=t),a!==t&&(a=jr(a),a=a===a?a:0),n!==t&&(n=jr(n),n=n===n?n:0),Wi(jr(r),n,a)}function z_(r,n,a){return n=vi(n),a===t?(a=n,n=0):a=vi(a),r=jr(r),W0(r,n,a)}function q_(r,n,a){if(a&&typeof a!="boolean"&&sr(r,n,a)&&(n=a=t),a===t&&(typeof n=="boolean"?(a=n,n=t):typeof r=="boolean"&&(a=r,r=t)),r===t&&n===t?(r=0,n=1):(r=vi(r),n===t?(n=r,r=0):n=vi(n)),r>n){var u=r;r=n,n=u}if(a||r%1||n%1){var y=xh();return Zt(r+y*(n-r+at("1e-"+((y+"").length-1))),n)}return lc(r,n)}var H_=xn(function(r,n,a){return n=n.toLowerCase(),r+(a?nf(n):n)});function nf(r){return Lc(rt(r).toLowerCase())}function sf(r){return r=rt(r),r&&r.replace(ci,Rg).replace(Ba,"")}function K_(r,n,a){r=rt(r),n=Dr(n);var u=r.length;a=a===t?u:Wi(Le(a),0,u);var y=a;return a-=n.length,a>=0&&r.slice(a,y)==n}function V_(r){return r=rt(r),r&&yt.test(r)?r.replace(Li,$g):r}function k_(r){return r=rt(r),r&&jt.test(r)?r.replace(St,"\\$&"):r}var W_=xn(function(r,n,a){return r+(a?"-":"")+n.toLowerCase()}),G_=xn(function(r,n,a){return r+(a?" ":"")+n.toLowerCase()}),Y_=al("toLowerCase");function J_(r,n,a){r=rt(r),n=Le(n);var u=n?mn(r):0;if(!n||u>=n)return r;var y=(n-u)/2;return So(ho(y),a)+r+So(uo(y),a)}function X_(r,n,a){r=rt(r),n=Le(n);var u=n?mn(r):0;return n&&u<n?r+So(n-u,a):r}function Z_(r,n,a){r=rt(r),n=Le(n);var u=n?mn(r):0;return n&&u<n?So(n-u,a)+r:r}function Q_(r,n,a){return a||n==null?n=0:n&&(n=+n),o0(rt(r).replace(It,""),n||0)}function em(r,n,a){return(a?sr(r,n,a):n===t)?n=1:n=Le(n),fc(rt(r),n)}function tm(){var r=arguments,n=rt(r[0]);return r.length<3?n:n.replace(r[1],r[2])}var rm=xn(function(r,n,a){return r+(a?"_":"")+n.toLowerCase()});function im(r,n,a){return a&&typeof a!="number"&&sr(r,n,a)&&(n=a=t),a=a===t?ie:a>>>0,a?(r=rt(r),r&&(typeof n=="string"||n!=null&&!Fc(n))&&(n=Dr(n),!n&&_n(r))?Ti(Kr(r),0,a):r.split(n,a)):[]}var nm=xn(function(r,n,a){return r+(a?" ":"")+Lc(n)});function sm(r,n,a){return r=rt(r),a=a==null?0:Wi(Le(a),0,r.length),n=Dr(n),r.slice(a,a+n.length)==n}function om(r,n,a){var u=_.templateSettings;a&&sr(r,n,a)&&(n=t),r=rt(r),n=Uo({},n,u,pl);var y=Uo({},n.imports,u.imports,pl),m=kt(y),P=Ya(y,m),R,M,G=0,Y=n.interpolate||hn,te="__p += '",ae=Xa((n.escape||hn).source+"|"+Y.source+"|"+(Y===mt?Da:hn).source+"|"+(n.evaluate||hn).source+"|$","g"),pe="//# sourceURL="+(it.call(n,"sourceURL")?(n.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++za+"]")+`
`;r.replace(ae,function(be,We,Ze,Ir,or,xr){return Ze||(Ze=Ir),te+=r.slice(G,xr).replace(Aa,Fg),We&&(R=!0,te+=`' +
__e(`+We+`) +
'`),or&&(M=!0,te+=`';
`+or+`;
__p += '`),Ze&&(te+=`' +
((__t = (`+Ze+`)) == null ? '' : __t) +
'`),G=xr+be.length,be}),te+=`';
`;var me=it.call(n,"variable")&&n.variable;if(!me)te=`with (obj) {
`+te+`
}
`;else if(wa.test(me))throw new Ae(d);te=(M?te.replace(Jr,""):te).replace(rr,"$1").replace(ai,"$1;"),te="function("+(me||"obj")+`) {
`+(me?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(R?", __e = _.escape":"")+(M?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+te+`return __p
}`;var ze=af(function(){return tt(m,pe+"return "+te).apply(t,P)});if(ze.source=te,$c(ze))throw ze;return ze}function am(r){return rt(r).toLowerCase()}function cm(r){return rt(r).toUpperCase()}function um(r,n,a){if(r=rt(r),r&&(a||n===t))return gh(r);if(!r||!(n=Dr(n)))return r;var u=Kr(r),y=Kr(n),m=yh(u,y),P=vh(u,y)+1;return Ti(u,m,P).join("")}function hm(r,n,a){if(r=rt(r),r&&(a||n===t))return r.slice(0,mh(r)+1);if(!r||!(n=Dr(n)))return r;var u=Kr(r),y=vh(u,Kr(n))+1;return Ti(u,0,y).join("")}function lm(r,n,a){if(r=rt(r),r&&(a||n===t))return r.replace(It,"");if(!r||!(n=Dr(n)))return r;var u=Kr(r),y=yh(u,Kr(n));return Ti(u,y).join("")}function fm(r,n){var a=ne,u=ue;if(bt(n)){var y="separator"in n?n.separator:y;a="length"in n?Le(n.length):a,u="omission"in n?Dr(n.omission):u}r=rt(r);var m=r.length;if(_n(r)){var P=Kr(r);m=P.length}if(a>=m)return r;var R=a-mn(u);if(R<1)return u;var M=P?Ti(P,0,R).join(""):r.slice(0,R);if(y===t)return M+u;if(P&&(R+=M.length-R),Fc(y)){if(r.slice(R).search(y)){var G,Y=M;for(y.global||(y=Xa(y.source,rt(Ar.exec(y))+"g")),y.lastIndex=0;G=y.exec(Y);)var te=G.index;M=M.slice(0,te===t?R:te)}}else if(r.indexOf(Dr(y),R)!=R){var ae=M.lastIndexOf(y);ae>-1&&(M=M.slice(0,ae))}return M+u}function dm(r){return r=rt(r),r&&wt.test(r)?r.replace(Ei,qg):r}var pm=xn(function(r,n,a){return r+(a?" ":"")+n.toUpperCase()}),Lc=al("toUpperCase");function of(r,n,a){return r=rt(r),n=a?t:n,n===t?jg(r)?Vg(r):Pg(r):r.match(n)||[]}var af=Ke(function(r,n){try{return Vt(r,t,n)}catch(a){return $c(a)?a:new Ae(a)}}),gm=pi(function(r,n){return Tr(n,function(a){a=ti(a),fi(r,a,Nc(r[a],r))}),r});function ym(r){var n=r==null?0:r.length,a=_e();return r=n?_t(r,function(u){if(typeof u[1]!="function")throw new Nr(l);return[a(u[0]),u[1]]}):[],Ke(function(u){for(var y=-1;++y<n;){var m=r[y];if(Vt(m[0],this,u))return Vt(m[1],this,u)}})}function vm(r){return q0($r(r,b))}function Mc(r){return function(){return r}}function _m(r,n){return r==null||r!==r?n:r}var mm=ul(),bm=ul(!0);function gr(r){return r}function Bc(r){return Mh(typeof r=="function"?r:$r(r,b))}function wm(r){return zh($r(r,b))}function Em(r,n){return qh(r,$r(n,b))}var Dm=Ke(function(r,n){return function(a){return Qn(a,r,n)}}),Sm=Ke(function(r,n){return function(a){return Qn(r,a,n)}});function zc(r,n,a){var u=kt(n),y=vo(n,u);a==null&&!(bt(n)&&(y.length||!u.length))&&(a=n,n=r,r=this,y=vo(n,kt(n)));var m=!(bt(a)&&"chain"in a)||!!a.chain,P=yi(r);return Tr(y,function(R){var M=n[R];r[R]=M,P&&(r.prototype[R]=function(){var G=this.__chain__;if(m||G){var Y=r(this.__wrapped__),te=Y.__actions__=fr(this.__actions__);return te.push({func:M,args:arguments,thisArg:r}),Y.__chain__=G,Y}return M.apply(r,Ii([this.value()],arguments))})}),r}function Im(){return Xe._===this&&(Xe._=Xg),this}function qc(){}function xm(r){return r=Le(r),Ke(function(n){return Hh(n,r)})}var Om=mc(_t),Pm=mc(hh),Am=mc(Ka);function cf(r){return xc(r)?Va(ti(r)):sy(r)}function Cm(r){return function(n){return r==null?t:Gi(r,n)}}var Tm=ll(),Nm=ll(!0);function Hc(){return[]}function Kc(){return!1}function Rm(){return{}}function $m(){return""}function Fm(){return!0}function Um(r,n){if(r=Le(r),r<1||r>V)return[];var a=ie,u=Zt(r,ie);n=_e(n),r-=ie;for(var y=Ga(u,n);++a<r;)n(a);return y}function jm(r){return Ne(r)?_t(r,ti):Sr(r)?[r]:fr(Ol(rt(r)))}function Lm(r){var n=++Yg;return rt(r)+n}var Mm=Do(function(r,n){return r+n},0),Bm=bc("ceil"),zm=Do(function(r,n){return r/n},1),qm=bc("floor");function Hm(r){return r&&r.length?yo(r,gr,sc):t}function Km(r,n){return r&&r.length?yo(r,_e(n,2),sc):t}function Vm(r){return dh(r,gr)}function km(r,n){return dh(r,_e(n,2))}function Wm(r){return r&&r.length?yo(r,gr,uc):t}function Gm(r,n){return r&&r.length?yo(r,_e(n,2),uc):t}var Ym=Do(function(r,n){return r*n},1),Jm=bc("round"),Xm=Do(function(r,n){return r-n},0);function Zm(r){return r&&r.length?Wa(r,gr):0}function Qm(r,n){return r&&r.length?Wa(r,_e(n,2)):0}return _.after=w1,_.ary=Ll,_.assign=c_,_.assignIn=Zl,_.assignInWith=Uo,_.assignWith=u_,_.at=h_,_.before=Ml,_.bind=Nc,_.bindAll=gm,_.bindKey=Bl,_.castArray=R1,_.chain=Fl,_.chunk=qy,_.compact=Hy,_.concat=Ky,_.cond=ym,_.conforms=vm,_.constant=Mc,_.countBy=Zv,_.create=l_,_.curry=zl,_.curryRight=ql,_.debounce=Hl,_.defaults=f_,_.defaultsDeep=d_,_.defer=E1,_.delay=D1,_.difference=Vy,_.differenceBy=ky,_.differenceWith=Wy,_.drop=Gy,_.dropRight=Yy,_.dropRightWhile=Jy,_.dropWhile=Xy,_.fill=Zy,_.filter=e1,_.flatMap=i1,_.flatMapDeep=n1,_.flatMapDepth=s1,_.flatten=Tl,_.flattenDeep=Qy,_.flattenDepth=ev,_.flip=S1,_.flow=mm,_.flowRight=bm,_.fromPairs=tv,_.functions=b_,_.functionsIn=w_,_.groupBy=o1,_.initial=iv,_.intersection=nv,_.intersectionBy=sv,_.intersectionWith=ov,_.invert=D_,_.invertBy=S_,_.invokeMap=c1,_.iteratee=Bc,_.keyBy=u1,_.keys=kt,_.keysIn=pr,_.map=Co,_.mapKeys=x_,_.mapValues=O_,_.matches=wm,_.matchesProperty=Em,_.memoize=No,_.merge=P_,_.mergeWith=Ql,_.method=Dm,_.methodOf=Sm,_.mixin=zc,_.negate=Ro,_.nthArg=xm,_.omit=A_,_.omitBy=C_,_.once=I1,_.orderBy=h1,_.over=Om,_.overArgs=x1,_.overEvery=Pm,_.overSome=Am,_.partial=Rc,_.partialRight=Kl,_.partition=l1,_.pick=T_,_.pickBy=ef,_.property=cf,_.propertyOf=Cm,_.pull=hv,_.pullAll=Rl,_.pullAllBy=lv,_.pullAllWith=fv,_.pullAt=dv,_.range=Tm,_.rangeRight=Nm,_.rearg=O1,_.reject=p1,_.remove=pv,_.rest=P1,_.reverse=Cc,_.sampleSize=y1,_.set=R_,_.setWith=$_,_.shuffle=v1,_.slice=gv,_.sortBy=b1,_.sortedUniq=Ev,_.sortedUniqBy=Dv,_.split=im,_.spread=A1,_.tail=Sv,_.take=Iv,_.takeRight=xv,_.takeRightWhile=Ov,_.takeWhile=Pv,_.tap=Hv,_.throttle=C1,_.thru=Ao,_.toArray=Yl,_.toPairs=tf,_.toPairsIn=rf,_.toPath=jm,_.toPlainObject=Xl,_.transform=F_,_.unary=T1,_.union=Av,_.unionBy=Cv,_.unionWith=Tv,_.uniq=Nv,_.uniqBy=Rv,_.uniqWith=$v,_.unset=U_,_.unzip=Tc,_.unzipWith=$l,_.update=j_,_.updateWith=L_,_.values=An,_.valuesIn=M_,_.without=Fv,_.words=of,_.wrap=N1,_.xor=Uv,_.xorBy=jv,_.xorWith=Lv,_.zip=Mv,_.zipObject=Bv,_.zipObjectDeep=zv,_.zipWith=qv,_.entries=tf,_.entriesIn=rf,_.extend=Zl,_.extendWith=Uo,zc(_,_),_.add=Mm,_.attempt=af,_.camelCase=H_,_.capitalize=nf,_.ceil=Bm,_.clamp=B_,_.clone=$1,_.cloneDeep=U1,_.cloneDeepWith=j1,_.cloneWith=F1,_.conformsTo=L1,_.deburr=sf,_.defaultTo=_m,_.divide=zm,_.endsWith=K_,_.eq=kr,_.escape=V_,_.escapeRegExp=k_,_.every=Qv,_.find=t1,_.findIndex=Al,_.findKey=p_,_.findLast=r1,_.findLastIndex=Cl,_.findLastKey=g_,_.floor=qm,_.forEach=Ul,_.forEachRight=jl,_.forIn=y_,_.forInRight=v_,_.forOwn=__,_.forOwnRight=m_,_.get=Uc,_.gt=M1,_.gte=B1,_.has=E_,_.hasIn=jc,_.head=Nl,_.identity=gr,_.includes=a1,_.indexOf=rv,_.inRange=z_,_.invoke=I_,_.isArguments=Xi,_.isArray=Ne,_.isArrayBuffer=z1,_.isArrayLike=dr,_.isArrayLikeObject=Tt,_.isBoolean=q1,_.isBuffer=Ni,_.isDate=H1,_.isElement=K1,_.isEmpty=V1,_.isEqual=k1,_.isEqualWith=W1,_.isError=$c,_.isFinite=G1,_.isFunction=yi,_.isInteger=Vl,_.isLength=$o,_.isMap=kl,_.isMatch=Y1,_.isMatchWith=J1,_.isNaN=X1,_.isNative=Z1,_.isNil=e_,_.isNull=Q1,_.isNumber=Wl,_.isObject=bt,_.isObjectLike=Ot,_.isPlainObject=ss,_.isRegExp=Fc,_.isSafeInteger=t_,_.isSet=Gl,_.isString=Fo,_.isSymbol=Sr,_.isTypedArray=Pn,_.isUndefined=r_,_.isWeakMap=i_,_.isWeakSet=n_,_.join=av,_.kebabCase=W_,_.last=Ur,_.lastIndexOf=cv,_.lowerCase=G_,_.lowerFirst=Y_,_.lt=s_,_.lte=o_,_.max=Hm,_.maxBy=Km,_.mean=Vm,_.meanBy=km,_.min=Wm,_.minBy=Gm,_.stubArray=Hc,_.stubFalse=Kc,_.stubObject=Rm,_.stubString=$m,_.stubTrue=Fm,_.multiply=Ym,_.nth=uv,_.noConflict=Im,_.noop=qc,_.now=To,_.pad=J_,_.padEnd=X_,_.padStart=Z_,_.parseInt=Q_,_.random=q_,_.reduce=f1,_.reduceRight=d1,_.repeat=em,_.replace=tm,_.result=N_,_.round=Jm,_.runInContext=L,_.sample=g1,_.size=_1,_.snakeCase=rm,_.some=m1,_.sortedIndex=yv,_.sortedIndexBy=vv,_.sortedIndexOf=_v,_.sortedLastIndex=mv,_.sortedLastIndexBy=bv,_.sortedLastIndexOf=wv,_.startCase=nm,_.startsWith=sm,_.subtract=Xm,_.sum=Zm,_.sumBy=Qm,_.template=om,_.times=Um,_.toFinite=vi,_.toInteger=Le,_.toLength=Jl,_.toLower=am,_.toNumber=jr,_.toSafeInteger=a_,_.toString=rt,_.toUpper=cm,_.trim=um,_.trimEnd=hm,_.trimStart=lm,_.truncate=fm,_.unescape=dm,_.uniqueId=Lm,_.upperCase=pm,_.upperFirst=Lc,_.each=Ul,_.eachRight=jl,_.first=Nl,zc(_,function(){var r={};return Qr(_,function(n,a){it.call(_.prototype,a)||(r[a]=n)}),r}(),{chain:!1}),_.VERSION=s,Tr(["bind","bindKey","curry","curryRight","partial","partialRight"],function(r){_[r].placeholder=_}),Tr(["drop","take"],function(r,n){Ye.prototype[r]=function(a){a=a===t?1:Kt(Le(a),0);var u=this.__filtered__&&!n?new Ye(this):this.clone();return u.__filtered__?u.__takeCount__=Zt(a,u.__takeCount__):u.__views__.push({size:Zt(a,ie),type:r+(u.__dir__<0?"Right":"")}),u},Ye.prototype[r+"Right"]=function(a){return this.reverse()[r](a).reverse()}}),Tr(["filter","map","takeWhile"],function(r,n){var a=n+1,u=a==D||a==Z;Ye.prototype[r]=function(y){var m=this.clone();return m.__iteratees__.push({iteratee:_e(y,3),type:a}),m.__filtered__=m.__filtered__||u,m}}),Tr(["head","last"],function(r,n){var a="take"+(n?"Right":"");Ye.prototype[r]=function(){return this[a](1).value()[0]}}),Tr(["initial","tail"],function(r,n){var a="drop"+(n?"":"Right");Ye.prototype[r]=function(){return this.__filtered__?new Ye(this):this[a](1)}}),Ye.prototype.compact=function(){return this.filter(gr)},Ye.prototype.find=function(r){return this.filter(r).head()},Ye.prototype.findLast=function(r){return this.reverse().find(r)},Ye.prototype.invokeMap=Ke(function(r,n){return typeof r=="function"?new Ye(this):this.map(function(a){return Qn(a,r,n)})}),Ye.prototype.reject=function(r){return this.filter(Ro(_e(r)))},Ye.prototype.slice=function(r,n){r=Le(r);var a=this;return a.__filtered__&&(r>0||n<0)?new Ye(a):(r<0?a=a.takeRight(-r):r&&(a=a.drop(r)),n!==t&&(n=Le(n),a=n<0?a.dropRight(-n):a.take(n-r)),a)},Ye.prototype.takeRightWhile=function(r){return this.reverse().takeWhile(r).reverse()},Ye.prototype.toArray=function(){return this.take(ie)},Qr(Ye.prototype,function(r,n){var a=/^(?:filter|find|map|reject)|While$/.test(n),u=/^(?:head|last)$/.test(n),y=_[u?"take"+(n=="last"?"Right":""):n],m=u||/^find/.test(n);y&&(_.prototype[n]=function(){var P=this.__wrapped__,R=u?[1]:arguments,M=P instanceof Ye,G=R[0],Y=M||Ne(P),te=function(We){var Ze=y.apply(_,Ii([We],R));return u&&ae?Ze[0]:Ze};Y&&a&&typeof G=="function"&&G.length!=1&&(M=Y=!1);var ae=this.__chain__,pe=!!this.__actions__.length,me=m&&!ae,ze=M&&!pe;if(!m&&Y){P=ze?P:new Ye(this);var be=r.apply(P,R);return be.__actions__.push({func:Ao,args:[te],thisArg:t}),new Rr(be,ae)}return me&&ze?r.apply(this,R):(be=this.thru(te),me?u?be.value()[0]:be.value():be)})}),Tr(["pop","push","shift","sort","splice","unshift"],function(r){var n=eo[r],a=/^(?:push|sort|unshift)$/.test(r)?"tap":"thru",u=/^(?:pop|shift)$/.test(r);_.prototype[r]=function(){var y=arguments;if(u&&!this.__chain__){var m=this.value();return n.apply(Ne(m)?m:[],y)}return this[a](function(P){return n.apply(Ne(P)?P:[],y)})}}),Qr(Ye.prototype,function(r,n){var a=_[n];if(a){var u=a.name+"";it.call(Dn,u)||(Dn[u]=[]),Dn[u].push({name:n,func:a})}}),Dn[Eo(t,re).name]=[{name:"wrapper",func:t}],Ye.prototype.clone=d0,Ye.prototype.reverse=p0,Ye.prototype.value=g0,_.prototype.at=Kv,_.prototype.chain=Vv,_.prototype.commit=kv,_.prototype.next=Wv,_.prototype.plant=Yv,_.prototype.reverse=Jv,_.prototype.toJSON=_.prototype.valueOf=_.prototype.value=Xv,_.prototype.first=_.prototype.head,kn&&(_.prototype[kn]=Gv),_},bn=kg();Ct?((Ct.exports=bn)._=bn,ct._=bn):Xe._=bn}).call(ps)})(Uu,Uu.exports);var WI=Object.defineProperty,GI=Object.defineProperties,YI=Object.getOwnPropertyDescriptors,zd=Object.getOwnPropertySymbols,JI=Object.prototype.hasOwnProperty,XI=Object.prototype.propertyIsEnumerable,qd=(i,e,t)=>e in i?WI(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,zo=(i,e)=>{for(var t in e||(e={}))JI.call(e,t)&&qd(i,t,e[t]);if(zd)for(var t of zd(e))XI.call(e,t)&&qd(i,t,e[t]);return i},ZI=(i,e)=>GI(i,YI(e));function zr(i,e,t){let s;const o=ju(i);return e.rpcMap&&(s=e.rpcMap[o]),s||(s=`${kI}?chainId=eip155:${o}&projectId=${t}`),s}function ju(i){return i.includes("eip155")?Number(i.split(":")[1]):Number(i)}function wg(i){return i.map(e=>`${e.split(":")[0]}:${e.split(":")[1]}`)}function QI(i,e){const t=Object.keys(e.namespaces).filter(o=>o.includes(i));if(!t.length)return[];const s=[];return t.forEach(o=>{const c=e.namespaces[o].accounts;s.push(...c)}),s}function ex(i={},e={}){const t=Hd(i),s=Hd(e);return Uu.exports.merge(t,s)}function Hd(i){var e,t,s,o;const c={};if(!Un(i))return c;for(const[l,d]of Object.entries(i)){const g=Qu(l)?[l]:d.chains,p=d.methods||[],v=d.events||[],b=d.rpcMap||{},S=Vo(l);c[S]=ZI(zo(zo({},c[S]),d),{chains:Jc(g,(e=c[S])==null?void 0:e.chains),methods:Jc(p,(t=c[S])==null?void 0:t.methods),events:Jc(v,(s=c[S])==null?void 0:s.events),rpcMap:zo(zo({},b),(o=c[S])==null?void 0:o.rpcMap)})}return c}function tx(i){return i.includes(":")?i.split(":")[2]:i}function rx(i){const e={};for(const[t,s]of Object.entries(i)){const o=s.methods||[],c=s.events||[],l=s.accounts||[],d=Qu(t)?[t]:s.chains?s.chains:wg(s.accounts);e[t]={chains:d,methods:o,events:c,accounts:l}}return e}const Eg={},$t=i=>Eg[i],cu=(i,e)=>{Eg[i]=e};class ix{constructor(e){this.name="polkadot",this.namespace=e.namespace,this.events=$t("events"),this.client=$t("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(this.chainId=e,!this.httpProviders[e]){const s=t||zr(`${this.name}:${e}`,this.namespace);if(!s)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,s)}this.events.emit(ji.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var s;e[t]=this.createHttpProvider(t,(s=this.namespace.rpcMap)==null?void 0:s[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const s=this.createHttpProvider(e,t);s&&(this.httpProviders[e]=s)}createHttpProvider(e,t){const s=t||zr(e,this.namespace);return typeof s>"u"?void 0:new un(new cn(s,$t("disableProviderPing")))}}class nx{constructor(e){this.name="eip155",this.namespace=e.namespace,this.events=$t("events"),this.client=$t("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}async request(e){switch(e.request.method){case"eth_requestAccounts":return this.getAccounts();case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return await this.handleSwitchChain(e);case"eth_chainId":return parseInt(this.getDefaultChain())}return this.namespace.methods.includes(e.request.method)?await this.client.request(e):this.getHttpProvider().request(e.request)}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}setDefaultChain(e,t){const s=ju(e);if(!this.httpProviders[s]){const o=t||zr(`${this.name}:${s}`,this.namespace,this.client.core.projectId);if(!o)throw new Error(`No RPC url provided for chainId: ${s}`);this.setHttpProvider(s,o)}this.chainId=s,this.events.emit(ji.DEFAULT_CHAIN_CHANGED,`${this.name}:${s}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}createHttpProvider(e,t){const s=t||zr(`${this.name}:${e}`,this.namespace,this.client.core.projectId);return typeof s>"u"?void 0:new un(new cn(s,$t("disableProviderPing")))}setHttpProvider(e,t){const s=this.createHttpProvider(e,t);s&&(this.httpProviders[e]=s)}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var s;const o=ju(t);e[o]=this.createHttpProvider(o,(s=this.namespace.rpcMap)==null?void 0:s[t])}),e}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}getHttpProvider(){const e=this.chainId,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}async handleSwitchChain(e){var t,s;let o=e.request.params?(t=e.request.params[0])==null?void 0:t.chainId:"0x0";o=o.startsWith("0x")?o:`0x${o}`;const c=parseInt(o,16);if(this.isChainApproved(c))this.setDefaultChain(`${c}`);else if(this.namespace.methods.includes("wallet_switchEthereumChain"))await this.client.request({topic:e.topic,request:{method:e.request.method,params:[{chainId:o}]},chainId:(s=this.namespace.chains)==null?void 0:s[0]}),this.setDefaultChain(`${c}`);else throw new Error(`Failed to switch to chain 'eip155:${c}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);return null}isChainApproved(e){return this.namespace.chains.includes(`${this.name}:${e}`)}}class sx{constructor(e){this.name="solana",this.namespace=e.namespace,this.events=$t("events"),this.client=$t("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(!this.httpProviders[e]){const s=t||zr(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!s)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,s)}this.chainId=e,this.events.emit(ji.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var s;e[t]=this.createHttpProvider(t,(s=this.namespace.rpcMap)==null?void 0:s[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const s=this.createHttpProvider(e,t);s&&(this.httpProviders[e]=s)}createHttpProvider(e,t){const s=t||zr(e,this.namespace,this.client.core.projectId);return typeof s>"u"?void 0:new un(new cn(s,$t("disableProviderPing")))}}class ox{constructor(e){this.name="cosmos",this.namespace=e.namespace,this.events=$t("events"),this.client=$t("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(this.chainId=e,!this.httpProviders[e]){const s=t||zr(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!s)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,s)}this.events.emit(ji.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var s;e[t]=this.createHttpProvider(t,(s=this.namespace.rpcMap)==null?void 0:s[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const s=this.createHttpProvider(e,t);s&&(this.httpProviders[e]=s)}createHttpProvider(e,t){const s=t||zr(e,this.namespace,this.client.core.projectId);return typeof s>"u"?void 0:new un(new cn(s,$t("disableProviderPing")))}}class ax{constructor(e){this.name="cip34",this.namespace=e.namespace,this.events=$t("events"),this.client=$t("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(this.chainId=e,!this.httpProviders[e]){const s=t||this.getCardanoRPCUrl(e);if(!s)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,s)}this.events.emit(ji.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{const s=this.getCardanoRPCUrl(t);e[t]=this.createHttpProvider(t,s)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}getCardanoRPCUrl(e){const t=this.namespace.rpcMap;if(t)return t[e]}setHttpProvider(e,t){const s=this.createHttpProvider(e,t);s&&(this.httpProviders[e]=s)}createHttpProvider(e,t){const s=t||this.getCardanoRPCUrl(e);return typeof s>"u"?void 0:new un(new cn(s,$t("disableProviderPing")))}}class cx{constructor(e){this.name="elrond",this.namespace=e.namespace,this.events=$t("events"),this.client=$t("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(!this.httpProviders[e]){const s=t||zr(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!s)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,s)}this.chainId=e,this.events.emit(ji.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var s;e[t]=this.createHttpProvider(t,(s=this.namespace.rpcMap)==null?void 0:s[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const s=this.createHttpProvider(e,t);s&&(this.httpProviders[e]=s)}createHttpProvider(e,t){const s=t||zr(e,this.namespace,this.client.core.projectId);return typeof s>"u"?void 0:new un(new cn(s,$t("disableProviderPing")))}}class ux{constructor(e){this.name="multiversx",this.namespace=e.namespace,this.events=$t("events"),this.client=$t("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(!this.httpProviders[e]){const s=t||zr(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!s)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,s)}this.chainId=e,this.events.emit(ji.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var s;e[t]=this.createHttpProvider(t,(s=this.namespace.rpcMap)==null?void 0:s[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const s=this.createHttpProvider(e,t);s&&(this.httpProviders[e]=s)}createHttpProvider(e,t){const s=t||zr(e,this.namespace,this.client.core.projectId);return typeof s>"u"?void 0:new un(new cn(s,$t("disableProviderPing")))}}var hx=Object.defineProperty,lx=Object.defineProperties,fx=Object.getOwnPropertyDescriptors,Kd=Object.getOwnPropertySymbols,dx=Object.prototype.hasOwnProperty,px=Object.prototype.propertyIsEnumerable,Vd=(i,e,t)=>e in i?hx(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,qo=(i,e)=>{for(var t in e||(e={}))dx.call(e,t)&&Vd(i,t,e[t]);if(Kd)for(var t of Kd(e))px.call(e,t)&&Vd(i,t,e[t]);return i},uu=(i,e)=>lx(i,fx(e));class ch{constructor(e){this.events=new zu,this.rpcProviders={},this.shouldAbortPairingAttempt=!1,this.maxPairingAttempts=10,this.disableProviderPing=!1,this.providerOpts=e,this.logger=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:ga(ya({level:(e==null?void 0:e.logger)||Md})),this.disableProviderPing=(e==null?void 0:e.disableProviderPing)||!1}static async init(e){const t=new ch(e);return await t.initialize(),t}async request(e,t){const[s,o]=this.validateChain(t);if(!this.session)throw new Error("Please call connect() before request()");return await this.getProvider(s).request({request:qo({},e),chainId:`${s}:${o}`,topic:this.session.topic})}sendAsync(e,t,s){this.request(e,s).then(o=>t(null,o)).catch(o=>t(o,void 0))}async enable(){if(!this.client)throw new Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties}),await this.requestAccounts()}async disconnect(){var e;if(!this.session)throw new Error("Please call connect() before enable()");await this.client.disconnect({topic:(e=this.session)==null?void 0:e.topic,reason:Rt("USER_DISCONNECTED")}),await this.cleanup()}async connect(e){if(!this.client)throw new Error("Sign Client not initialized");if(this.setNamespaces(e),await this.cleanupPendingPairings(),!e.skipPairing)return await this.pair(e.pairingTopic)}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}removeListener(e,t){this.events.removeListener(e,t)}off(e,t){this.events.off(e,t)}get isWalletConnect(){return!0}async pair(e){this.shouldAbortPairingAttempt=!1;let t=0;do{if(this.shouldAbortPairingAttempt)throw new Error("Pairing aborted");if(t>=this.maxPairingAttempts)throw new Error("Max auto pairing attempts reached");const{uri:s,approval:o}=await this.client.connect({pairingTopic:e,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties});s&&(this.uri=s,this.events.emit("display_uri",s)),await o().then(c=>{this.session=c,this.namespaces||(this.namespaces=rx(c.namespaces),this.persist("namespaces",this.namespaces))}).catch(c=>{if(c.message!==mg)throw c;t++})}while(!this.session);return this.onConnect(),this.session}setDefaultChain(e,t){try{if(!this.session)return;const[s,o]=this.validateChain(e);this.getProvider(s).setDefaultChain(o,t)}catch(s){if(!/Please call connect/.test(s.message))throw s}}async cleanupPendingPairings(e={}){this.logger.info("Cleaning up inactive pairings...");const t=this.client.pairing.getAll();if(oi(t)){for(const s of t)e.deletePairings?this.client.core.expirer.set(s.topic,0):await this.client.core.relayer.subscriber.unsubscribe(s.topic);this.logger.info(`Inactive pairings cleared: ${t.length}`)}}abortPairingAttempt(){this.shouldAbortPairingAttempt=!0}async checkStorage(){if(this.namespaces=await this.getFromStore("namespaces"),this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.client.session.length){const e=this.client.session.keys.length-1;this.session=this.client.session.get(this.client.session.keys[e]),this.createProviders()}}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){this.client=this.providerOpts.client||await $I.init({logger:this.providerOpts.logger||Md,relayUrl:this.providerOpts.relayUrl||HI,projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,name:this.providerOpts.name}),this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");if(!this.session)throw new Error("Session not initialized. Please call connect() before enable()");const e=[...new Set(Object.keys(this.session.namespaces).map(t=>Vo(t)))];cu("client",this.client),cu("events",this.events),cu("disableProviderPing",this.disableProviderPing),e.forEach(t=>{if(!this.session)return;const s=QI(t,this.session),o=wg(s),c=ex(this.namespaces,this.optionalNamespaces),l=uu(qo({},c[t]),{accounts:s,chains:o});switch(t){case"eip155":this.rpcProviders[t]=new nx({namespace:l});break;case"solana":this.rpcProviders[t]=new sx({namespace:l});break;case"cosmos":this.rpcProviders[t]=new ox({namespace:l});break;case"polkadot":this.rpcProviders[t]=new ix({namespace:l});break;case"cip34":this.rpcProviders[t]=new ax({namespace:l});break;case"elrond":this.rpcProviders[t]=new cx({namespace:l});break;case"multiversx":this.rpcProviders[t]=new ux({namespace:l});break}})}registerEventListeners(){if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",e=>{this.events.emit("session_ping",e)}),this.client.on("session_event",e=>{const{params:t}=e,{event:s}=t;if(s.name==="accountsChanged"){const o=s.data;o&&oi(o)&&this.events.emit("accountsChanged",o.map(tx))}else s.name==="chainChanged"?this.onChainChanged(t.chainId):this.events.emit(s.name,s.data);this.events.emit("session_event",e)}),this.client.on("session_update",({topic:e,params:t})=>{var s;const{namespaces:o}=t,c=(s=this.client)==null?void 0:s.session.get(e);this.session=uu(qo({},c),{namespaces:o}),this.onSessionUpdate(),this.events.emit("session_update",{topic:e,params:t})}),this.client.on("session_delete",async e=>{await this.cleanup(),this.events.emit("session_delete",e),this.events.emit("disconnect",uu(qo({},Rt("USER_DISCONNECTED")),{data:e.topic}))}),this.on(ji.DEFAULT_CHAIN_CHANGED,e=>{this.onChainChanged(e,!0)})}getProvider(e){if(!this.rpcProviders[e])throw new Error(`Provider not found: ${e}`);return this.rpcProviders[e]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(e=>{var t;this.getProvider(e).updateNamespace((t=this.session)==null?void 0:t.namespaces[e])})}setNamespaces(e){const{namespaces:t,optionalNamespaces:s,sessionProperties:o}=e;t&&Object.keys(t).length&&(this.namespaces=t),s&&Object.keys(s).length&&(this.optionalNamespaces=s),this.sessionProperties=o,this.persist("namespaces",t),this.persist("optionalNamespaces",s)}validateChain(e){const[t,s]=(e==null?void 0:e.split(":"))||["",""];if(!this.namespaces||!Object.keys(this.namespaces).length)return[t,s];if(t&&!Object.keys(this.namespaces||{}).map(l=>Vo(l)).includes(t))throw new Error(`Namespace '${t}' is not configured. Please call connect() first with namespace config.`);if(t&&s)return[t,s];const o=Vo(Object.keys(this.namespaces)[0]),c=this.rpcProviders[o].getDefaultChain();return[o,c]}async requestAccounts(){const[e]=this.validateChain();return await this.getProvider(e).requestAccounts()}onChainChanged(e,t=!1){var s;if(!this.namespaces)return;const[o,c]=this.validateChain(e);t||this.getProvider(o).setDefaultChain(c),((s=this.namespaces[o])!=null?s:this.namespaces[`${o}:${c}`]).defaultChain=c,this.persist("namespaces",this.namespaces),this.events.emit("chainChanged",c)}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.session=void 0,this.namespaces=void 0,this.optionalNamespaces=void 0,this.sessionProperties=void 0,this.persist("namespaces",void 0),this.persist("optionalNamespaces",void 0),this.persist("sessionProperties",void 0),await this.cleanupPendingPairings({deletePairings:!0})}persist(e,t){this.client.core.storage.setItem(`${Bd}/${e}`,t)}async getFromStore(e){return await this.client.core.storage.getItem(`${Bd}/${e}`)}}const gx=ch,yx="wc",vx="ethereum_provider",_x=`${yx}@2:${vx}:`,mx="https://rpc.walletconnect.com/v1/",Lu=["eth_sendTransaction","personal_sign"],bx=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode"],Mu=["chainChanged","accountsChanged"],wx=["message","disconnect","connect"];var Ex=Object.defineProperty,Dx=Object.defineProperties,Sx=Object.getOwnPropertyDescriptors,kd=Object.getOwnPropertySymbols,Ix=Object.prototype.hasOwnProperty,xx=Object.prototype.propertyIsEnumerable,Wd=(i,e,t)=>e in i?Ex(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,gs=(i,e)=>{for(var t in e||(e={}))Ix.call(e,t)&&Wd(i,t,e[t]);if(kd)for(var t of kd(e))xx.call(e,t)&&Wd(i,t,e[t]);return i},Gd=(i,e)=>Dx(i,Sx(e));function ra(i){return Number(i[0].split(":")[1])}function hu(i){return`0x${i.toString(16)}`}function Ox(i){const{chains:e,optionalChains:t,methods:s,optionalMethods:o,events:c,optionalEvents:l,rpcMap:d}=i;if(!oi(e))throw new Error("Invalid chains");const g={chains:e,methods:s||Lu,events:c||Mu,rpcMap:gs({},e.length?{[ra(e)]:d[ra(e)]}:{})},p=c==null?void 0:c.filter(O=>!Mu.includes(O)),v=s==null?void 0:s.filter(O=>!Lu.includes(O));if(!t&&!l&&!o&&!(p!=null&&p.length)&&!(v!=null&&v.length))return{required:e.length?g:void 0};const b=(p==null?void 0:p.length)&&(v==null?void 0:v.length)||!t,S={chains:[...new Set(b?g.chains.concat(t||[]):t)],methods:[...new Set(g.methods.concat(o!=null&&o.length?o:bx))],events:[...new Set(g.events.concat(l||wx))],rpcMap:d};return{required:e.length?g:void 0,optional:t.length?S:void 0}}class uh{constructor(){this.events=new mr.EventEmitter,this.namespace="eip155",this.accounts=[],this.chainId=1,this.STORAGE_KEY=_x,this.on=(e,t)=>(this.events.on(e,t),this),this.once=(e,t)=>(this.events.once(e,t),this),this.removeListener=(e,t)=>(this.events.removeListener(e,t),this),this.off=(e,t)=>(this.events.off(e,t),this),this.parseAccount=e=>this.isCompatibleChainId(e)?this.parseAccountId(e).address:e,this.signer={},this.rpc={}}static async init(e){const t=new uh;return await t.initialize(e),t}async request(e){return await this.signer.request(e,this.formatChainId(this.chainId))}sendAsync(e,t){this.signer.sendAsync(e,t,this.formatChainId(this.chainId))}get connected(){return this.signer.client?this.signer.client.core.relayer.connected:!1}get connecting(){return this.signer.client?this.signer.client.core.relayer.connecting:!1}async enable(){return this.session||await this.connect(),await this.request({method:"eth_requestAccounts"})}async connect(e){if(!this.signer.client)throw new Error("Provider not initialized. Call init() first");this.loadConnectOpts(e);const{required:t,optional:s}=Ox(this.rpc);try{const o=await new Promise(async(l,d)=>{var g;this.rpc.showQrModal&&((g=this.modal)==null||g.subscribeModal(p=>{!p.open&&!this.signer.session&&(this.signer.abortPairingAttempt(),d(new Error("Connection request reset. Please try again.")))})),await this.signer.connect(Gd(gs({namespaces:gs({},t&&{[this.namespace]:t})},s&&{optionalNamespaces:{[this.namespace]:s}}),{pairingTopic:e==null?void 0:e.pairingTopic})).then(p=>{l(p)}).catch(p=>{d(new Error(p.message))})});if(!o)return;this.setChainIds(this.rpc.chains);const c=JE(o.namespaces,[this.namespace]);this.setAccounts(c),this.events.emit("connect",{chainId:hu(this.chainId)})}catch(o){throw this.signer.logger.error(o),o}finally{this.modal&&this.modal.closeModal()}}async disconnect(){this.session&&await this.signer.disconnect(),this.reset()}get isWalletConnect(){return!0}get session(){return this.signer.session}registerEventListeners(){this.signer.on("session_event",e=>{const{params:t}=e,{event:s}=t;s.name==="accountsChanged"?(this.accounts=this.parseAccounts(s.data),this.events.emit("accountsChanged",this.accounts)):s.name==="chainChanged"?this.setChainId(this.formatChainId(s.data)):this.events.emit(s.name,s.data),this.events.emit("session_event",e)}),this.signer.on("chainChanged",e=>{const t=parseInt(e);this.chainId=t,this.events.emit("chainChanged",hu(this.chainId)),this.persist()}),this.signer.on("session_update",e=>{this.events.emit("session_update",e)}),this.signer.on("session_delete",e=>{this.reset(),this.events.emit("session_delete",e),this.events.emit("disconnect",Gd(gs({},Rt("USER_DISCONNECTED")),{data:e.topic,name:"USER_DISCONNECTED"}))}),this.signer.on("display_uri",e=>{var t,s;this.rpc.showQrModal&&((t=this.modal)==null||t.closeModal(),(s=this.modal)==null||s.openModal({uri:e})),this.events.emit("display_uri",e)})}switchEthereumChain(e){this.request({method:"wallet_switchEthereumChain",params:[{chainId:e.toString(16)}]})}isCompatibleChainId(e){return typeof e=="string"?e.startsWith(`${this.namespace}:`):!1}formatChainId(e){return`${this.namespace}:${e}`}parseChainId(e){return Number(e.split(":")[1])}setChainIds(e){const t=e.filter(s=>this.isCompatibleChainId(s)).map(s=>this.parseChainId(s));t.length&&(this.chainId=t[0],this.events.emit("chainChanged",hu(this.chainId)),this.persist())}setChainId(e){if(this.isCompatibleChainId(e)){const t=this.parseChainId(e);this.chainId=t,this.switchEthereumChain(t)}}parseAccountId(e){const[t,s,o]=e.split(":");return{chainId:`${t}:${s}`,address:o}}setAccounts(e){this.accounts=e.filter(t=>this.parseChainId(this.parseAccountId(t).chainId)===this.chainId).map(t=>this.parseAccountId(t).address),this.events.emit("accountsChanged",this.accounts)}getRpcConfig(e){var t,s;const o=(t=e==null?void 0:e.chains)!=null?t:[],c=(s=e==null?void 0:e.optionalChains)!=null?s:[],l=o.concat(c);if(!l.length)throw new Error("No chains specified in either `chains` or `optionalChains`");const d=o.length?(e==null?void 0:e.methods)||Lu:[],g=o.length?(e==null?void 0:e.events)||Mu:[],p=(e==null?void 0:e.optionalMethods)||[],v=(e==null?void 0:e.optionalEvents)||[],b=(e==null?void 0:e.rpcMap)||this.buildRpcMap(l,e.projectId),S=(e==null?void 0:e.qrModalOptions)||void 0;return{chains:o==null?void 0:o.map(O=>this.formatChainId(O)),optionalChains:c.map(O=>this.formatChainId(O)),methods:d,events:g,optionalMethods:p,optionalEvents:v,rpcMap:b,showQrModal:!!(e!=null&&e.showQrModal),qrModalOptions:S,projectId:e.projectId,metadata:e.metadata}}buildRpcMap(e,t){const s={};return e.forEach(o=>{s[o]=this.getRpcUrl(o,t)}),s}async initialize(e){if(this.rpc=this.getRpcConfig(e),this.chainId=this.rpc.chains.length?ra(this.rpc.chains):ra(this.rpc.optionalChains),this.signer=await gx.init({projectId:this.rpc.projectId,metadata:this.rpc.metadata,disableProviderPing:e.disableProviderPing,relayUrl:e.relayUrl,storageOptions:e.storageOptions}),this.registerEventListeners(),await this.loadPersistedSession(),this.rpc.showQrModal){let t;try{const{WalletConnectModal:s}=await eb(()=>import("./index-6cc2954d.js").then(o=>o.i),["assets/index-6cc2954d.js","assets/preload-helper-f61836a9.js","assets/index-879345db.js","assets/_commonjsHelpers-de833af9.js"]);t=s}catch{throw new Error("To use QR modal, please install @walletconnect/modal package")}if(t)try{this.modal=new t(gs({walletConnectVersion:2,projectId:this.rpc.projectId,standaloneChains:this.rpc.chains},this.rpc.qrModalOptions))}catch(s){throw this.signer.logger.error(s),new Error("Could not generate WalletConnectModal Instance")}}}loadConnectOpts(e){if(!e)return;const{chains:t,optionalChains:s,rpcMap:o}=e;t&&oi(t)&&(this.rpc.chains=t.map(c=>this.formatChainId(c)),t.forEach(c=>{this.rpc.rpcMap[c]=(o==null?void 0:o[c])||this.getRpcUrl(c)})),s&&oi(s)&&(this.rpc.optionalChains=[],this.rpc.optionalChains=s==null?void 0:s.map(c=>this.formatChainId(c)),s.forEach(c=>{this.rpc.rpcMap[c]=(o==null?void 0:o[c])||this.getRpcUrl(c)}))}getRpcUrl(e,t){var s;return((s=this.rpc.rpcMap)==null?void 0:s[e])||`${mx}?chainId=eip155:${e}&projectId=${t||this.rpc.projectId}`}async loadPersistedSession(){if(!this.session)return;const e=await this.signer.client.core.storage.getItem(`${this.STORAGE_KEY}/chainId`),t=this.session.namespaces[`${this.namespace}:${e}`]?this.session.namespaces[`${this.namespace}:${e}`]:this.session.namespaces[this.namespace];this.setChainIds(e?[this.formatChainId(e)]:t==null?void 0:t.accounts),this.setAccounts(t==null?void 0:t.accounts)}reset(){this.chainId=1,this.accounts=[]}persist(){this.session&&this.signer.client.core.storage.setItem(`${this.STORAGE_KEY}/chainId`,this.chainId)}parseAccounts(e){return typeof e=="string"||e instanceof String?[this.parseAccount(e)]:e.map(t=>this.parseAccount(t))}}const Vx=uh;export{Vx as EthereumProvider,wx as OPTIONAL_EVENTS,bx as OPTIONAL_METHODS,Mu as REQUIRED_EVENTS,Lu as REQUIRED_METHODS,uh as default};
